!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("lqd-wallet-client",[],e):"object"==typeof exports?exports["lqd-wallet-client"]=e():t["lqd-wallet-client"]=e()}(global,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=289)}([function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(63),s=n(101),u=n(5),a=n(60),c=n(62),l=n(61),h=function(t){function e(e,n,r){var i=t.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=s.empty;break;case 1:if(!e){i.destination=s.empty;break}if("object"==typeof e){if(p(e)){var o=e[a.rxSubscriber]();i.syncErrorThrowable=o.syncErrorThrowable,i.destination=o,o.add(i)}else i.syncErrorThrowable=!0,i.destination=new f(i,e);break}default:i.syncErrorThrowable=!0,i.destination=new f(i,e,n,r)}return i}return i(e,t),e.prototype[a.rxSubscriber]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(u.Subscription);e.Subscriber=h;var f=function(t){function e(e,n,r,i){var u,a=t.call(this)||this;a._parentSubscriber=e;var c=a;return o.isFunction(n)?u=n:n&&(u=n.next,r=n.error,i=n.complete,n!==s.empty&&(c=Object.create(n),o.isFunction(c.unsubscribe)&&a.add(c.unsubscribe.bind(c)),c.unsubscribe=a.unsubscribe.bind(a))),a._context=c,a._next=u,a._error=r,a._complete=i,a}return i(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;c.config.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=c.config.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):l.hostReportError(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;l.hostReportError(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};c.config.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),c.config.useDeprecatedSynchronousErrorHandling)throw t;l.hostReportError(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!c.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return c.config.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(l.hostReportError(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(h);function p(t){return t instanceof h||"syncErrorThrowable"in t&&t[a.rxSubscriber]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(229),i=n(99);e.subscribeToResult=function(t,e,n,o){var s=new r.InnerSubscriber(t,n,o);return i.subscribeTo(e)(s)}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(n(0).Subscriber);e.OuterSubscriber=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NAMED_TAG="named",e.NAME_TAG="name",e.UNMANAGED_TAG="unmanaged",e.OPTIONAL_TAG="optional",e.INJECT_TAG="inject",e.MULTI_INJECT_TAG="multi_inject",e.TAGGED="inversify:tagged",e.TAGGED_PROP="inversify:tagged_props",e.PARAM_TYPES="inversify:paramtypes",e.DESIGN_PARAM_TYPES="design:paramtypes",e.POST_CONSTRUCT="post_construct"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(228),i=n(35),o=n(98),s=n(62),u=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var i=this.operator,o=r.toSubscriber(t,e,n);if(i?i.call(o,this.source):o.add(this.source||s.config.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),s.config.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){s.config.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=a(e))(function(e,r){var i;i=n.subscribe(function(e){try{t(e)}catch(t){r(t),i&&i.unsubscribe()}},r,e)})},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[i.observable]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:o.pipeFromArray(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=a(t))(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})},t.create=function(e){return new t(e)},t}();function a(t){if(t||(t=s.config.Promise||Promise),!t)throw new Error("no Promise impl found");return t}e.Observable=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(19),i=n(100),o=n(63),s=n(12),u=n(11),a=n(230),c=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,c=this._parents,h=this._unsubscribe,f=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var p=-1,d=c?c.length:0;n;)n.remove(this),n=++p<d&&c[p]||null;if(o.isFunction(h))s.tryCatch(h).call(this)===u.errorObject&&(e=!0,t=t||(u.errorObject.e instanceof a.UnsubscriptionError?l(u.errorObject.e.errors):[u.errorObject.e]));if(r.isArray(f))for(p=-1,d=f.length;++p<d;){var g=f[p];if(i.isObject(g))if(s.tryCatch(g.unsubscribe).call(g)===u.errorObject){e=!0,t=t||[];var y=u.errorObject.e;y instanceof a.UnsubscriptionError?t=t.concat(l(y.errors)):t.push(y)}}if(e)throw new a.UnsubscriptionError(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;e&&e!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=((e=new t).closed=!0,e),t}();function l(t){return t.reduce(function(t,e){return t.concat(e instanceof a.UnsubscriptionError?e.errors:e)},[])}e.Subscription=c},function(t,e,n){"use strict";function r(t){return 0===t.indexOf("0x")?t.substring(2):t}Object.defineProperty(e,"__esModule",{value:!0}),e.remove0xPrefix=r,e.add0xPrefix=function(t){return 0===t.indexOf("0x")?t:"0x"+t},e.isSameHexValue=function(t,e){return r(t).toLowerCase()==r(e).toLowerCase()},e.Web3Utils=n(288),e.JSONbig=n(273),e.EMPTY_HASH="0x0000000000000000000000000000000000000000000000000000000000000000"},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),s=n(0),u=n(5),a=n(52),c=n(79),l=n(60),h=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return i(e,t),e}(s.Subscriber);e.SubjectSubscriber=h;var f=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return i(e,t),e.prototype[l.rxSubscriber]=function(){return new h(this)},e.prototype.lift=function(t){var e=new p(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new a.ObjectUnsubscribedError;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new a.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new a.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new a.ObjectUnsubscribedError;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new a.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),u.Subscription.EMPTY):this.isStopped?(t.complete(),u.Subscription.EMPTY):(this.observers.push(t),new c.SubjectSubscription(this,t))},e.prototype.asObservable=function(){var t=new o.Observable;return t.source=this,t},e.create=function(t,e){return new p(t,e)},e}(o.Observable);e.Subject=f;var p=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return i(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):u.Subscription.EMPTY},e}(f);e.AnonymousSubject=p},function(t,e,n){var r;!function(i){"use strict";var o,s=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,u=Math.ceil,a=Math.floor,c="[BigNumber Error] ",l=c+"Number primitive has more than 15 significant digits: ",h=1e14,f=14,p=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],g=1e7,y=1e9;function m(t){var e=0|t;return t>0||t===e?e:e-1}function v(t){for(var e,n,r=1,i=t.length,o=t[0]+"";r<i;){for(e=t[r++]+"",n=f-e.length;n--;e="0"+e);o+=e}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function b(t,e){var n,r,i=t.c,o=e.c,s=t.s,u=e.s,a=t.e,c=e.e;if(!s||!u)return null;if(n=i&&!i[0],r=o&&!o[0],n||r)return n?r?0:-u:s;if(s!=u)return s;if(n=s<0,r=a==c,!i||!o)return r?0:!i^n?1:-1;if(!r)return a>c^n?1:-1;for(u=(a=i.length)<(c=o.length)?a:c,s=0;s<u;s++)if(i[s]!=o[s])return i[s]>o[s]^n?1:-1;return a==c?0:a>c^n?1:-1}function _(t,e,n,r){if(t<e||t>n||t!==(t<0?u(t):a(t)))throw Error(c+(r||"Argument")+("number"==typeof t?t<e||t>n?" out of range: ":" not an integer: ":" not a primitive number: ")+t)}function w(t){return"[object Array]"==Object.prototype.toString.call(t)}function A(t){var e=t.c.length-1;return m(t.e/f)==e&&t.c[e]%2!=0}function T(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function S(t,e,n){var r,i;if(e<0){for(i=n+".";++e;i+=n);t=i+t}else if(++e>(r=t.length)){for(i=n,e-=r;--e;i+=n);t+=i}else e<r&&(t=t.slice(0,e)+"."+t.slice(e));return t}(o=function t(e){var n,r,i,o,M,O,E,x,I,P=V.prototype={constructor:V,toString:null,valueOf:null},R=new V(1),N=20,C=4,j=-7,L=21,k=-1e7,D=1e7,B=!1,U=1,F=0,W={decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:"Â ",fractionGroupSize:0},G="0123456789abcdefghijklmnopqrstuvwxyz";function V(t,e){var n,o,u,c,h,d,g,y,m=this;if(!(m instanceof V))return new V(t,e);if(null==e){if(t instanceof V)return m.s=t.s,m.e=t.e,void(m.c=(t=t.c)?t.slice():t);if((d="number"==typeof t)&&0*t==0){if(m.s=1/t<0?(t=-t,-1):1,t===~~t){for(c=0,h=t;h>=10;h/=10,c++);return m.e=c,void(m.c=[t])}y=t+""}else{if(!s.test(y=t+""))return i(m,y,d);m.s=45==y.charCodeAt(0)?(y=y.slice(1),-1):1}(c=y.indexOf("."))>-1&&(y=y.replace(".","")),(h=y.search(/e/i))>0?(c<0&&(c=h),c+=+y.slice(h+1),y=y.substring(0,h)):c<0&&(c=y.length)}else{if(_(e,2,G.length,"Base"),y=t+"",10==e)return Y(m=new V(t instanceof V?t:y),N+m.e+1,C);if(d="number"==typeof t){if(0*t!=0)return i(m,y,d,e);if(m.s=1/t<0?(y=y.slice(1),-1):1,V.DEBUG&&y.replace(/^0\.0*|\./,"").length>15)throw Error(l+t);d=!1}else m.s=45===y.charCodeAt(0)?(y=y.slice(1),-1):1;for(n=G.slice(0,e),c=h=0,g=y.length;h<g;h++)if(n.indexOf(o=y.charAt(h))<0){if("."==o){if(h>c){c=g;continue}}else if(!u&&(y==y.toUpperCase()&&(y=y.toLowerCase())||y==y.toLowerCase()&&(y=y.toUpperCase()))){u=!0,h=-1,c=0;continue}return i(m,t+"",d,e)}(c=(y=r(y,e,10,m.s)).indexOf("."))>-1?y=y.replace(".",""):c=y.length}for(h=0;48===y.charCodeAt(h);h++);for(g=y.length;48===y.charCodeAt(--g););if(y=y.slice(h,++g)){if(g-=h,d&&V.DEBUG&&g>15&&(t>p||t!==a(t)))throw Error(l+m.s*t);if((c=c-h-1)>D)m.c=m.e=null;else if(c<k)m.c=[m.e=0];else{if(m.e=c,m.c=[],h=(c+1)%f,c<0&&(h+=f),h<g){for(h&&m.c.push(+y.slice(0,h)),g-=f;h<g;)m.c.push(+y.slice(h,h+=f));y=y.slice(h),h=f-y.length}else h-=g;for(;h--;y+="0");m.c.push(+y)}}else m.c=[m.e=0]}function z(t,e,n,r){var i,o,s,u,a;if(null==n?n=C:_(n,0,8),!t.c)return t.toString();if(i=t.c[0],s=t.e,null==e)a=v(t.c),a=1==r||2==r&&s<=j?T(a,s):S(a,s,"0");else if(o=(t=Y(new V(t),e,n)).e,u=(a=v(t.c)).length,1==r||2==r&&(e<=o||o<=j)){for(;u<e;a+="0",u++);a=T(a,o)}else if(e-=s,a=S(a,o,"0"),o+1>u){if(--e>0)for(a+=".";e--;a+="0");}else if((e+=o-u)>0)for(o+1==u&&(a+=".");e--;a+="0");return t.s<0&&i?"-"+a:a}function H(t,e){var n,r,i=0;for(w(t[0])&&(t=t[0]),n=new V(t[0]);++i<t.length;){if(!(r=new V(t[i])).s){n=r;break}e.call(n,r)&&(n=r)}return n}function q(t,e,n){for(var r=1,i=e.length;!e[--i];e.pop());for(i=e[0];i>=10;i/=10,r++);return(n=r+n*f-1)>D?t.c=t.e=null:n<k?t.c=[t.e=0]:(t.e=n,t.c=e),t}function Y(t,e,n,r){var i,o,s,c,l,p,g,y=t.c,m=d;if(y){t:{for(i=1,c=y[0];c>=10;c/=10,i++);if((o=e-i)<0)o+=f,s=e,g=(l=y[p=0])/m[i-s-1]%10|0;else if((p=u((o+1)/f))>=y.length){if(!r)break t;for(;y.length<=p;y.push(0));l=g=0,i=1,s=(o%=f)-f+1}else{for(l=c=y[p],i=1;c>=10;c/=10,i++);g=(s=(o%=f)-f+i)<0?0:l/m[i-s-1]%10|0}if(r=r||e<0||null!=y[p+1]||(s<0?l:l%m[i-s-1]),r=n<4?(g||r)&&(0==n||n==(t.s<0?3:2)):g>5||5==g&&(4==n||r||6==n&&(o>0?s>0?l/m[i-s]:0:y[p-1])%10&1||n==(t.s<0?8:7)),e<1||!y[0])return y.length=0,r?(e-=t.e+1,y[0]=m[(f-e%f)%f],t.e=-e||0):y[0]=t.e=0,t;if(0==o?(y.length=p,c=1,p--):(y.length=p+1,c=m[f-o],y[p]=s>0?a(l/m[i-s]%m[s])*c:0),r)for(;;){if(0==p){for(o=1,s=y[0];s>=10;s/=10,o++);for(s=y[0]+=c,c=1;s>=10;s/=10,c++);o!=c&&(t.e++,y[0]==h&&(y[0]=1));break}if(y[p]+=c,y[p]!=h)break;y[p--]=0,c=1}for(o=y.length;0===y[--o];y.pop());}t.e>D?t.c=t.e=null:t.e<k&&(t.c=[t.e=0])}return t}return V.clone=t,V.ROUND_UP=0,V.ROUND_DOWN=1,V.ROUND_CEIL=2,V.ROUND_FLOOR=3,V.ROUND_HALF_UP=4,V.ROUND_HALF_DOWN=5,V.ROUND_HALF_EVEN=6,V.ROUND_HALF_CEIL=7,V.ROUND_HALF_FLOOR=8,V.EUCLID=9,V.config=V.set=function(t){var e,n;if(null!=t){if("object"!=typeof t)throw Error(c+"Object expected: "+t);if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(_(n=t[e],0,y,e),N=n),t.hasOwnProperty(e="ROUNDING_MODE")&&(_(n=t[e],0,8,e),C=n),t.hasOwnProperty(e="EXPONENTIAL_AT")&&(w(n=t[e])?(_(n[0],-y,0,e),_(n[1],0,y,e),j=n[0],L=n[1]):(_(n,-y,y,e),j=-(L=n<0?-n:n))),t.hasOwnProperty(e="RANGE"))if(w(n=t[e]))_(n[0],-y,-1,e),_(n[1],1,y,e),k=n[0],D=n[1];else{if(_(n,-y,y,e),!n)throw Error(c+e+" cannot be zero: "+n);k=-(D=n<0?-n:n)}if(t.hasOwnProperty(e="CRYPTO")){if((n=t[e])!==!!n)throw Error(c+e+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw B=!n,Error(c+"crypto unavailable");B=n}else B=n}if(t.hasOwnProperty(e="MODULO_MODE")&&(_(n=t[e],0,9,e),U=n),t.hasOwnProperty(e="POW_PRECISION")&&(_(n=t[e],0,y,e),F=n),t.hasOwnProperty(e="FORMAT")){if("object"!=typeof(n=t[e]))throw Error(c+e+" not an object: "+n);W=n}if(t.hasOwnProperty(e="ALPHABET")){if("string"!=typeof(n=t[e])||/^.$|\.|(.).*\1/.test(n))throw Error(c+e+" invalid: "+n);G=n}}return{DECIMAL_PLACES:N,ROUNDING_MODE:C,EXPONENTIAL_AT:[j,L],RANGE:[k,D],CRYPTO:B,MODULO_MODE:U,POW_PRECISION:F,FORMAT:W,ALPHABET:G}},V.isBigNumber=function(t){return t instanceof V||t&&!0===t._isBigNumber||!1},V.maximum=V.max=function(){return H(arguments,P.lt)},V.minimum=V.min=function(){return H(arguments,P.gt)},V.random=(o=9007199254740992*Math.random()&2097151?function(){return a(9007199254740992*Math.random())}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(t){var e,n,r,i,s,l=0,h=[],p=new V(R);if(null==t?t=N:_(t,0,y),i=u(t/f),B)if(crypto.getRandomValues){for(e=crypto.getRandomValues(new Uint32Array(i*=2));l<i;)(s=131072*e[l]+(e[l+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),e[l]=n[0],e[l+1]=n[1]):(h.push(s%1e14),l+=2);l=i/2}else{if(!crypto.randomBytes)throw B=!1,Error(c+"crypto unavailable");for(e=crypto.randomBytes(i*=7);l<i;)(s=281474976710656*(31&e[l])+1099511627776*e[l+1]+4294967296*e[l+2]+16777216*e[l+3]+(e[l+4]<<16)+(e[l+5]<<8)+e[l+6])>=9e15?crypto.randomBytes(7).copy(e,l):(h.push(s%1e14),l+=7);l=i/7}if(!B)for(;l<i;)(s=o())<9e15&&(h[l++]=s%1e14);for(i=h[--l],t%=f,i&&t&&(s=d[f-t],h[l]=a(i/s)*s);0===h[l];h.pop(),l--);if(l<0)h=[r=0];else{for(r=-1;0===h[0];h.splice(0,1),r-=f);for(l=1,s=h[0];s>=10;s/=10,l++);l<f&&(r-=f-l)}return p.e=r,p.c=h,p}),r=function(){function t(t,e,n,r){for(var i,o,s=[0],u=0,a=t.length;u<a;){for(o=s.length;o--;s[o]*=e);for(s[0]+=r.indexOf(t.charAt(u++)),i=0;i<s.length;i++)s[i]>n-1&&(null==s[i+1]&&(s[i+1]=0),s[i+1]+=s[i]/n|0,s[i]%=n)}return s.reverse()}return function(e,r,i,o,s){var u,a,c,l,h,f,p,d,g=e.indexOf("."),y=N,m=C;for(g>=0&&(l=F,F=0,e=e.replace(".",""),f=(d=new V(r)).pow(e.length-g),F=l,d.c=t(S(v(f.c),f.e,"0"),10,i,"0123456789"),d.e=d.c.length),c=l=(p=t(e,r,i,s?(u=G,"0123456789"):(u="0123456789",G))).length;0==p[--l];p.pop());if(!p[0])return u.charAt(0);if(g<0?--c:(f.c=p,f.e=c,f.s=o,p=(f=n(f,d,y,m,i)).c,h=f.r,c=f.e),g=p[a=c+y+1],l=i/2,h=h||a<0||null!=p[a+1],h=m<4?(null!=g||h)&&(0==m||m==(f.s<0?3:2)):g>l||g==l&&(4==m||h||6==m&&1&p[a-1]||m==(f.s<0?8:7)),a<1||!p[0])e=h?S(u.charAt(1),-y,u.charAt(0)):u.charAt(0);else{if(p.length=a,h)for(--i;++p[--a]>i;)p[a]=0,a||(++c,p=[1].concat(p));for(l=p.length;!p[--l];);for(g=0,e="";g<=l;e+=u.charAt(p[g++]));e=S(e,c,u.charAt(0))}return e}}(),n=function(){function t(t,e,n){var r,i,o,s,u=0,a=t.length,c=e%g,l=e/g|0;for(t=t.slice();a--;)u=((i=c*(o=t[a]%g)+(r=l*o+(s=t[a]/g|0)*c)%g*g+u)/n|0)+(r/g|0)+l*s,t[a]=i%n;return u&&(t=[u].concat(t)),t}function e(t,e,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(t[i]!=e[i]){o=t[i]>e[i]?1:-1;break}return o}function n(t,e,n,r){for(var i=0;n--;)t[n]-=i,i=t[n]<e[n]?1:0,t[n]=i*r+t[n]-e[n];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(r,i,o,s,u){var c,l,p,d,g,y,v,b,_,w,A,T,S,M,O,E,x,I=r.s==i.s?1:-1,P=r.c,R=i.c;if(!(P&&P[0]&&R&&R[0]))return new V(r.s&&i.s&&(P?!R||P[0]!=R[0]:R)?P&&0==P[0]||!R?0*I:I/0:NaN);for(_=(b=new V(I)).c=[],I=o+(l=r.e-i.e)+1,u||(u=h,l=m(r.e/f)-m(i.e/f),I=I/f|0),p=0;R[p]==(P[p]||0);p++);if(R[p]>(P[p]||0)&&l--,I<0)_.push(1),d=!0;else{for(M=P.length,E=R.length,p=0,I+=2,(g=a(u/(R[0]+1)))>1&&(R=t(R,g,u),P=t(P,g,u),E=R.length,M=P.length),S=E,A=(w=P.slice(0,E)).length;A<E;w[A++]=0);x=R.slice(),x=[0].concat(x),O=R[0],R[1]>=u/2&&O++;do{if(g=0,(c=e(R,w,E,A))<0){if(T=w[0],E!=A&&(T=T*u+(w[1]||0)),(g=a(T/O))>1)for(g>=u&&(g=u-1),v=(y=t(R,g,u)).length,A=w.length;1==e(y,w,v,A);)g--,n(y,E<v?x:R,v,u),v=y.length,c=1;else 0==g&&(c=g=1),v=(y=R.slice()).length;if(v<A&&(y=[0].concat(y)),n(w,y,A,u),A=w.length,-1==c)for(;e(R,w,E,A)<1;)g++,n(w,E<A?x:R,A,u),A=w.length}else 0===c&&(g++,w=[0]);_[p++]=g,w[0]?w[A++]=P[S]||0:(w=[P[S]],A=1)}while((S++<M||null!=w[0])&&I--);d=null!=w[0],_[0]||_.splice(0,1)}if(u==h){for(p=1,I=_[0];I>=10;I/=10,p++);Y(b,o+(b.e=p+l*f-1)+1,s,d)}else b.e=l,b.r=+d;return b}}(),M=/^(-?)0([xbo])(?=\w[\w.]*$)/i,O=/^([^.]+)\.$/,E=/^\.([^.]+)$/,x=/^-?(Infinity|NaN)$/,I=/^\s*\+(?=[\w.])|^\s+|\s+$/g,i=function(t,e,n,r){var i,o=n?e:e.replace(I,"");if(x.test(o))t.s=isNaN(o)?null:o<0?-1:1,t.c=t.e=null;else{if(!n&&(o=o.replace(M,function(t,e,n){return i="x"==(n=n.toLowerCase())?16:"b"==n?2:8,r&&r!=i?t:e}),r&&(i=r,o=o.replace(O,"$1").replace(E,"0.$1")),e!=o))return new V(o,i);if(V.DEBUG)throw Error(c+"Not a"+(r?" base "+r:"")+" number: "+e);t.c=t.e=t.s=null}},P.absoluteValue=P.abs=function(){var t=new V(this);return t.s<0&&(t.s=1),t},P.comparedTo=function(t,e){return b(this,new V(t,e))},P.decimalPlaces=P.dp=function(t,e){var n,r,i,o=this;if(null!=t)return _(t,0,y),null==e?e=C:_(e,0,8),Y(new V(o),t+o.e+1,e);if(!(n=o.c))return null;if(r=((i=n.length-1)-m(this.e/f))*f,i=n[i])for(;i%10==0;i/=10,r--);return r<0&&(r=0),r},P.dividedBy=P.div=function(t,e){return n(this,new V(t,e),N,C)},P.dividedToIntegerBy=P.idiv=function(t,e){return n(this,new V(t,e),0,1)},P.exponentiatedBy=P.pow=function(t,e){var n,r,i,o,s,l,h,p=this;if((t=new V(t)).c&&!t.isInteger())throw Error(c+"Exponent not an integer: "+t);if(null!=e&&(e=new V(e)),o=t.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!t.c||!t.c[0])return h=new V(Math.pow(+p.valueOf(),o?2-A(t):+t)),e?h.mod(e):h;if(s=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new V(NaN);(r=!s&&p.isInteger()&&e.isInteger())&&(p=p.mod(e))}else{if(t.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||o&&p.c[1]>=24e7:p.c[0]<8e13||o&&p.c[0]<=9999975e7)))return i=p.s<0&&A(t)?-0:0,p.e>-1&&(i=1/i),new V(s?1/i:i);F&&(i=u(F/f+2))}for(o?(n=new V(.5),l=A(t)):l=t%2,s&&(t.s=1),h=new V(R);;){if(l){if(!(h=h.times(p)).c)break;i?h.c.length>i&&(h.c.length=i):r&&(h=h.mod(e))}if(o){if(Y(t=t.times(n),t.e+1,1),!t.c[0])break;o=t.e>14,l=A(t)}else{if(!(t=a(t/2)))break;l=t%2}p=p.times(p),i?p.c&&p.c.length>i&&(p.c.length=i):r&&(p=p.mod(e))}return r?h:(s&&(h=R.div(h)),e?h.mod(e):i?Y(h,F,C,void 0):h)},P.integerValue=function(t){var e=new V(this);return null==t?t=C:_(t,0,8),Y(e,e.e+1,t)},P.isEqualTo=P.eq=function(t,e){return 0===b(this,new V(t,e))},P.isFinite=function(){return!!this.c},P.isGreaterThan=P.gt=function(t,e){return b(this,new V(t,e))>0},P.isGreaterThanOrEqualTo=P.gte=function(t,e){return 1===(e=b(this,new V(t,e)))||0===e},P.isInteger=function(){return!!this.c&&m(this.e/f)>this.c.length-2},P.isLessThan=P.lt=function(t,e){return b(this,new V(t,e))<0},P.isLessThanOrEqualTo=P.lte=function(t,e){return-1===(e=b(this,new V(t,e)))||0===e},P.isNaN=function(){return!this.s},P.isNegative=function(){return this.s<0},P.isPositive=function(){return this.s>0},P.isZero=function(){return!!this.c&&0==this.c[0]},P.minus=function(t,e){var n,r,i,o,s=this,u=s.s;if(e=(t=new V(t,e)).s,!u||!e)return new V(NaN);if(u!=e)return t.s=-e,s.plus(t);var a=s.e/f,c=t.e/f,l=s.c,p=t.c;if(!a||!c){if(!l||!p)return l?(t.s=-e,t):new V(p?s:NaN);if(!l[0]||!p[0])return p[0]?(t.s=-e,t):new V(l[0]?s:3==C?-0:0)}if(a=m(a),c=m(c),l=l.slice(),u=a-c){for((o=u<0)?(u=-u,i=l):(c=a,i=p),i.reverse(),e=u;e--;i.push(0));i.reverse()}else for(r=(o=(u=l.length)<(e=p.length))?u:e,u=e=0;e<r;e++)if(l[e]!=p[e]){o=l[e]<p[e];break}if(o&&(i=l,l=p,p=i,t.s=-t.s),(e=(r=p.length)-(n=l.length))>0)for(;e--;l[n++]=0);for(e=h-1;r>u;){if(l[--r]<p[r]){for(n=r;n&&!l[--n];l[n]=e);--l[n],l[r]+=h}l[r]-=p[r]}for(;0==l[0];l.splice(0,1),--c);return l[0]?q(t,l,c):(t.s=3==C?-1:1,t.c=[t.e=0],t)},P.modulo=P.mod=function(t,e){var r,i,o=this;return t=new V(t,e),!o.c||!t.s||t.c&&!t.c[0]?new V(NaN):!t.c||o.c&&!o.c[0]?new V(o):(9==U?(i=t.s,t.s=1,r=n(o,t,0,3),t.s=i,r.s*=i):r=n(o,t,0,U),(t=o.minus(r.times(t))).c[0]||1!=U||(t.s=o.s),t)},P.multipliedBy=P.times=function(t,e){var n,r,i,o,s,u,a,c,l,p,d,y,v,b,_,w=this,A=w.c,T=(t=new V(t,e)).c;if(!(A&&T&&A[0]&&T[0]))return!w.s||!t.s||A&&!A[0]&&!T||T&&!T[0]&&!A?t.c=t.e=t.s=null:(t.s*=w.s,A&&T?(t.c=[0],t.e=0):t.c=t.e=null),t;for(r=m(w.e/f)+m(t.e/f),t.s*=w.s,(a=A.length)<(p=T.length)&&(v=A,A=T,T=v,i=a,a=p,p=i),i=a+p,v=[];i--;v.push(0));for(b=h,_=g,i=p;--i>=0;){for(n=0,d=T[i]%_,y=T[i]/_|0,o=i+(s=a);o>i;)n=((c=d*(c=A[--s]%_)+(u=y*c+(l=A[s]/_|0)*d)%_*_+v[o]+n)/b|0)+(u/_|0)+y*l,v[o--]=c%b;v[o]=n}return n?++r:v.splice(0,1),q(t,v,r)},P.negated=function(){var t=new V(this);return t.s=-t.s||null,t},P.plus=function(t,e){var n,r=this,i=r.s;if(e=(t=new V(t,e)).s,!i||!e)return new V(NaN);if(i!=e)return t.s=-e,r.minus(t);var o=r.e/f,s=t.e/f,u=r.c,a=t.c;if(!o||!s){if(!u||!a)return new V(i/0);if(!u[0]||!a[0])return a[0]?t:new V(u[0]?r:0*i)}if(o=m(o),s=m(s),u=u.slice(),i=o-s){for(i>0?(s=o,n=a):(i=-i,n=u),n.reverse();i--;n.push(0));n.reverse()}for((i=u.length)-(e=a.length)<0&&(n=a,a=u,u=n,e=i),i=0;e;)i=(u[--e]=u[e]+a[e]+i)/h|0,u[e]=h===u[e]?0:u[e]%h;return i&&(u=[i].concat(u),++s),q(t,u,s)},P.precision=P.sd=function(t,e){var n,r,i,o=this;if(null!=t&&t!==!!t)return _(t,1,y),null==e?e=C:_(e,0,8),Y(new V(o),t,e);if(!(n=o.c))return null;if(r=(i=n.length-1)*f+1,i=n[i]){for(;i%10==0;i/=10,r--);for(i=n[0];i>=10;i/=10,r++);}return t&&o.e+1>r&&(r=o.e+1),r},P.shiftedBy=function(t){return _(t,-p,p),this.times("1e"+t)},P.squareRoot=P.sqrt=function(){var t,e,r,i,o,s=this,u=s.c,a=s.s,c=s.e,l=N+4,h=new V("0.5");if(1!==a||!u||!u[0])return new V(!a||a<0&&(!u||u[0])?NaN:u?s:1/0);if(0==(a=Math.sqrt(+s))||a==1/0?(((e=v(u)).length+c)%2==0&&(e+="0"),a=Math.sqrt(e),c=m((c+1)/2)-(c<0||c%2),r=new V(e=a==1/0?"1e"+c:(e=a.toExponential()).slice(0,e.indexOf("e")+1)+c)):r=new V(a+""),r.c[0])for((a=(c=r.e)+l)<3&&(a=0);;)if(o=r,r=h.times(o.plus(n(s,o,l,1))),v(o.c).slice(0,a)===(e=v(r.c)).slice(0,a)){if(r.e<c&&--a,"9999"!=(e=e.slice(a-3,a+1))&&(i||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(Y(r,r.e+N+2,1),t=!r.times(r).eq(s));break}if(!i&&(Y(o,o.e+N+2,0),o.times(o).eq(s))){r=o;break}l+=4,a+=4,i=1}return Y(r,r.e+N+1,C,t)},P.toExponential=function(t,e){return null!=t&&(_(t,0,y),t++),z(this,t,e,1)},P.toFixed=function(t,e){return null!=t&&(_(t,0,y),t=t+this.e+1),z(this,t,e)},P.toFormat=function(t,e){var n=this.toFixed(t,e);if(this.c){var r,i=n.split("."),o=+W.groupSize,s=+W.secondaryGroupSize,u=W.groupSeparator,a=i[0],c=i[1],l=this.s<0,h=l?a.slice(1):a,f=h.length;if(s&&(r=o,o=s,s=r,f-=r),o>0&&f>0){for(r=f%o||o,a=h.substr(0,r);r<f;r+=o)a+=u+h.substr(r,o);s>0&&(a+=u+h.slice(r)),l&&(a="-"+a)}n=c?a+W.decimalSeparator+((s=+W.fractionGroupSize)?c.replace(new RegExp("\\d{"+s+"}\\B","g"),"$&"+W.fractionGroupSeparator):c):a}return n},P.toFraction=function(t){var e,r,i,o,s,u,a,l,h,p,g,y,m=this,b=m.c;if(null!=t&&(!(l=new V(t)).isInteger()&&(l.c||1!==l.s)||l.lt(R)))throw Error(c+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+t);if(!b)return m.toString();for(r=new V(R),p=i=new V(R),o=h=new V(R),y=v(b),u=r.e=y.length-m.e-1,r.c[0]=d[(a=u%f)<0?f+a:a],t=!t||l.comparedTo(r)>0?u>0?r:p:l,a=D,D=1/0,l=new V(y),h.c[0]=0;g=n(l,r,0,1),1!=(s=i.plus(g.times(o))).comparedTo(t);)i=o,o=s,p=h.plus(g.times(s=p)),h=s,r=l.minus(g.times(s=r)),l=s;return s=n(t.minus(i),o,0,1),h=h.plus(s.times(p)),i=i.plus(s.times(o)),h.s=p.s=m.s,e=n(p,o,u*=2,C).minus(m).abs().comparedTo(n(h,i,u,C).minus(m).abs())<1?[p.toString(),o.toString()]:[h.toString(),i.toString()],D=a,e},P.toNumber=function(){return+this},P.toPrecision=function(t,e){return null!=t&&_(t,1,y),z(this,t,e,2)},P.toString=function(t){var e,n=this,i=n.s,o=n.e;return null===o?i?(e="Infinity",i<0&&(e="-"+e)):e="NaN":(e=v(n.c),null==t?e=o<=j||o>=L?T(e,o):S(e,o,"0"):(_(t,2,G.length,"Base"),e=r(S(e,o,"0"),10,t,i,!0)),i<0&&n.c[0]&&(e="-"+e)),e},P.valueOf=P.toJSON=function(){var t,e=this,n=e.e;return null===n?e.toString():(t=v(e.c),t=n<=j||n>=L?T(t,n):S(t,n,"0"),e.s<0?"-"+t:t)},P._isBigNumber=!0,null!=e&&V.set(e),V}()).default=o.BigNumber=o,void 0===(r=function(){return o}.call(e,n,e,t))||(t.exports=r)}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",e.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",e.NULL_ARGUMENT="NULL argument",e.KEY_NOT_FOUND="Key Not Found",e.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",e.CANNOT_UNBIND="Could not unbind serviceIdentifier:",e.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",e.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",e.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",e.UNDEFINED_INJECT_ANNOTATION=function(t){return"@inject called with undefined this could mean that the class "+t+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},e.CIRCULAR_DEPENDENCY="Circular dependency found:",e.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",e.INVALID_BINDING_TYPE="Invalid binding type:",e.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",e.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",e.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",e.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",e.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",e.ARGUMENTS_LENGTH_MISMATCH_1="The number of constructor arguments in the derived class ",e.ARGUMENTS_LENGTH_MISMATCH_2=" must be >= than the number of constructor arguments of its base class.",e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",e.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",e.POST_CONSTRUCT_ERROR=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"@postConstruct error in class "+t[0]+": "+t[1]},e.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"It looks like there is a circular dependency in one of the '"+t[0]+"' bindings. Please investigate bindings withservice identifier '"+t[1]+"'."},e.STACK_OVERFLOW="Maximum call stack size exceeded"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(59),i=n(58);e.async=new i.AsyncScheduler(r.AsyncAction)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.errorObject={e:{}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(11);function o(){try{return r.apply(this,arguments)}catch(t){return i.errorObject.e=t,i.errorObject}}e.tryCatch=function(t){return r=t,o}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=function(){function t(t,e){this.key=t,this.value=e}return t.prototype.toString=function(){return this.key===r.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},t}();e.Metadata=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3);e.METADATA_KEY=r;var i=n(261);e.Container=i.Container;var o=n(16);e.BindingScopeEnum=o.BindingScopeEnum,e.BindingTypeEnum=o.BindingTypeEnum,e.TargetTypeEnum=o.TargetTypeEnum;var s=n(245);e.AsyncContainerModule=s.AsyncContainerModule,e.ContainerModule=s.ContainerModule;var u=n(244);e.injectable=u.injectable;var a=n(243);e.tagged=a.tagged;var c=n(242);e.named=c.named;var l=n(108);e.inject=l.inject,e.LazyServiceIdentifer=l.LazyServiceIdentifer;var h=n(241);e.optional=h.optional;var f=n(240);e.unmanaged=f.unmanaged;var p=n(239);e.multiInject=p.multiInject;var d=n(238);e.targetName=d.targetName;var g=n(237);e.postConstruct=g.postConstruct;var y=n(110);e.MetadataReader=y.MetadataReader;var m=n(25);e.guid=m.guid;var v=n(20);e.decorate=v.decorate;var b=n(105);e.traverseAncerstors=b.traverseAncerstors,e.taggedConstraint=b.taggedConstraint,e.namedConstraint=b.namedConstraint,e.typeConstraint=b.typeConstraint;var _=n(36);e.getServiceIdentifierAsString=_.getServiceIdentifierAsString;var w=n(236);e.multiBindToService=w.multiBindToService},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TYPES={SUBJECT:{WEB3_CONNECTIVITY:Symbol("WEB3_CONNECTIVITY"),HUB_STATE_FETCH:Symbol("HUB_STATE_FETCH"),CONTRACT_STATE_FETCH:Symbol("CONTRACT_STATE_FETCH"),CONTRACT_API_AVAILABILITY:Symbol("CONTRACT_API_AVAILABILITY"),WALLET_STATE_SYNC:Symbol("WALLET_STATE_SYNC"),WALLET_STATE_POLL:Symbol("WALLET_STATE_POLL")},EXTERNAL:{REST_API_INTERFACE:Symbol("REST_API_INTERFACE"),WEB3_SERVICE_INTERFACE:Symbol("WEB3_SERVICE_INTERFACE"),STORAGE_MANAGER_INTERFACE:Symbol("STORAGE_MANAGER_INTERFACE"),LOGGING_INTERFACE:Symbol("LOGGING_INTERFACE")}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"};e.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};e.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.debug=function(e){t.loggingInterface.debug(e)},t.error=function(e){t.loggingInterface.error(e)},t.info=function(e){t.loggingInterface.info(e)},t.log=function(e){t.loggingInterface.log(e)},t.warning=function(e){t.loggingInterface.warning(e)},t}();e.Logging=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isScheduler=function(t){return t&&"function"==typeof t.schedule}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(9),i=n(3);function o(t,e,n,i,o){var s={},u="number"==typeof o,a=void 0!==o&&u?o.toString():n;if(u&&void 0!==n)throw new Error(r.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(t,e)&&(s=Reflect.getMetadata(t,e));var c=s[a];if(Array.isArray(c))for(var l=0,h=c;l<h.length;l++){var f=h[l];if(f.key===i.key)throw new Error(r.DUPLICATED_METADATA+" "+f.key)}else c=[];c.push(i),s[a]=c,Reflect.defineMetadata(t,s,e)}function s(t,e){Reflect.decorate(t,e)}e.tagParameter=function(t,e,n,r){o(i.TAGGED,t,e,r,n)},e.tagProperty=function(t,e,n){o(i.TAGGED_PROP,t.constructor,e,n)},e.decorate=function(t,e,n){"number"==typeof n?s([function(t,e){return function(n,r){e(n,r,t)}}(n,t)],e):"string"==typeof n?Reflect.decorate([t],e,n):s([t],e)}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0);e.map=function(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(t,e))}};var s=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.project,this.thisArg))},t}();e.MapOperator=s;var u=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return i(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(o.Subscriber)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4);function i(t){return new r.Observable(function(e){return t.schedule(function(){return e.complete()})})}e.EMPTY=new r.Observable(function(t){return t.complete()}),e.empty=function(t){return t?i(t):e.EMPTY},e.emptyScheduled=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),i=n(91),o=n(92),s=n(215),u=n(214),a=n(24),c=n(213),l=n(212),h=n(211),f=n(99);e.from=function(t,e){if(!e)return t instanceof r.Observable?t:new r.Observable(f.subscribeTo(t));if(null!=t){if(s.isInteropObservable(t))return h.fromObservable(t,e);if(i.isPromise(t))return c.fromPromise(t,e);if(o.isArrayLike(t))return a.fromArray(t,e);if(u.isIterable(t)||"string"==typeof t)return l.fromIterable(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),i=n(5),o=n(96);e.fromArray=function(t,e){return e?new r.Observable(function(n){var r=new i.Subscription,o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r}):new r.Observable(o.subscribeToArray(t))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.guid=function(){function t(){return Math.floor(65536*(Math.random()+1)).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=o(n(8)),u=n(46),a=n(119),c=n(39),l=n(6),h=n(37),f=n(17),p=function(t){function e(e,n,r,i,o){var u=t.call(this)||this;return u._contractAddress=e,u._tokenAddress=n,u._walletAddress=r,u._trailIdentifier=i,u._round=o,u._transfers=[],u._pendingTransfer=null,u._spent=new s.default("0"),u._gained=new s.default("0"),u._pendingReceipt=new s.default("0"),u.recalculateTransactionTree(),u}return i(e,t),e.fromJSON=function(t){var n=new e(t.contractAddress,t.tokenAddress,t.walletAddress,t.trailIdentifier,t.round);return n._transfers=t.transfers.map(function(t){return u.Transfer.fromJSON(t)}),n._pendingTransfer=null==t.pendingTransfer?null:u.Transfer.fromJSON(t.pendingTransfer),n._spent=new s.default(t.spent),n._gained=new s.default(t.gained),n._pendingReceipt=new s.default(t.pendingReceipt),n.recalculateTransactionTree(),n},e.checksum=function(t,e,n,r,i,o,s,u){return l.Web3Utils.soliditySha3({type:"bytes32",value:l.Web3Utils.soliditySha3({type:"address",value:t})},{type:"bytes32",value:l.Web3Utils.soliditySha3({type:"address",value:e})},{type:"bytes32",value:l.Web3Utils.soliditySha3({type:"address",value:n})},{type:"uint64",value:r},{type:"uint256",value:i},{type:"bytes32",value:o},{type:"uint256",value:s.toFixed(0)},{type:"uint256",value:u.toFixed(0)}).toString()},Object.defineProperty(e.prototype,"hash",{get:function(){return e.checksum(this._contractAddress,this._tokenAddress,this._walletAddress,this._trailIdentifier,this._round,this._transferTree.hash,this._spent,this._gained)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"json",{get:function(){return{contractAddress:this._contractAddress,tokenAddress:this._tokenAddress,walletAddress:this._walletAddress,trailIdentifier:this._trailIdentifier,round:this._round,transfers:this._transfers.map(function(t){return t.json}),pendingTransfer:null==this._pendingTransfer?null:this._pendingTransfer.json,spent:this._spent,gained:this._gained,pendingReceipt:this._pendingReceipt}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isTransferPending",{get:function(){return null!=this._pendingTransfer&&void 0!=this._pendingTransfer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"transfers",{get:function(){return this._transfers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pendingTransfer",{get:function(){return this._pendingTransfer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"latestTransfer",{get:function(){return this.isTransferPending?this.pendingTransfer:this.lastConfirmedTransfer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastConfirmedTransfer",{get:function(){var t=this._transfers.length;return t>0?this._transfers[t-1]:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"amount",{get:function(){return this._gained.minus(this._spent)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spent",{get:function(){return this._spent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gained",{get:function(){return this._gained},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pendingReceipt",{get:function(){return this._pendingReceipt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tokenAddress",{get:function(){return this._tokenAddress},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"walletAddress",{get:function(){return this._walletAddress},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trailIdentifier",{get:function(){return this._trailIdentifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"round",{get:function(){return this._round},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"transferTree",{get:function(){return this._transferTree},enumerable:!0,configurable:!0}),e.prototype.createIncomingTransfer=function(t,e,n,r){if(!this.isTransferPending)return this._gained=this._gained.plus(e),this._pendingReceipt=this._pendingReceipt.plus(e),this._pendingTransfer=new u.Transfer(this.tokenAddress,t,this._round,e,null,null,this.tokenAddress,this._walletAddress,this._trailIdentifier,t,n,r),this.recalculateTransactionTree(),this._pendingTransfer},e.prototype.createIncomingSwap=function(t,e,n,r,i,o,s){if(f.Logging.debug("createIncomingSwap"),f.Logging.debug([t,e,n.toFixed(0),r.toFixed(0),i.toFixed(0),o.toFixed(0),s]),!this.isTransferPending)return this._pendingTransfer=new u.Transfer(e,t,this._round,n,r,i,this.tokenAddress,this._walletAddress,this._trailIdentifier,e,o,s),this.recalculateTransactionTree(),this._pendingTransfer},e.prototype.fulfillPendingSwap=function(){if(!this.isTransferPending||!this.pendingTransfer.isSwap)return f.Logging.error("No pending swap."),!1;var t=[this.pendingTransfer.authorizations.get(h.TransferAggregateType.DEBIT),this.pendingTransfer.authorizations.get(h.TransferAggregateType.CREDIT),this.pendingTransfer.authorizations.get(h.TransferAggregateType.FULFILLMENT),this.pendingTransfer.confirmations.get(h.TransferAggregateType.DEBIT),this.pendingTransfer.confirmations.get(h.TransferAggregateType.CREDIT),this.pendingTransfer.confirmations.get(h.TransferAggregateType.FULFILLMENT),this.pendingTransfer.amountsMatched];if(t.some(function(t){return!t}))return f.Logging.error(t),!1;if(l.isSameHexValue(this.pendingTransfer.recipientTokenAddress,this.tokenAddress)){var e=new s.default(this.pendingTransfer.amountsMatched.in);if(e.lt(this.pendingTransfer.amountSwapped))return f.Logging.error(e.toFixed(0)),f.Logging.error(this.pendingTransfer.amountSwapped.toFixed(0)),!1;this._gained=this._gained.plus(this.pendingTransfer.amountSwapped)}return this.recalculateTransactionTree(),!0},e.prototype.finalizePendingSwap=function(){if(!this.isTransferPending||!this.pendingTransfer.isSwap)return f.Logging.error("No pending swap."),!1;var t=[this.pendingTransfer.authorizations.get(h.TransferAggregateType.DEBIT),this.pendingTransfer.authorizations.get(h.TransferAggregateType.CREDIT),this.pendingTransfer.authorizations.get(h.TransferAggregateType.FULFILLMENT),this.pendingTransfer.authorizations.get(h.TransferAggregateType.FINALIZATION),this.pendingTransfer.confirmations.get(h.TransferAggregateType.DEBIT),this.pendingTransfer.confirmations.get(h.TransferAggregateType.CREDIT),this.pendingTransfer.confirmations.get(h.TransferAggregateType.FULFILLMENT),this.pendingTransfer.confirmations.get(h.TransferAggregateType.FINALIZATION),this.pendingTransfer.amountsMatched];if(t.some(function(t){return!t}))return f.Logging.error(t),!1;if(l.isSameHexValue(this.pendingTransfer.recipientTokenAddress,this.tokenAddress)){var e=new s.default(this.pendingTransfer.amountsMatched.in);if(e.lt(this.pendingTransfer.amountSwapped))return f.Logging.error(e.toFixed(0)),f.Logging.error(this.pendingTransfer.amountSwapped.toFixed(0)),!1;this._gained=this._gained.plus(e.minus(this.pendingTransfer.amountSwapped))}return this._transfers.push(this._pendingTransfer),this._pendingTransfer=null,this.recalculateTransactionTree(),!0},e.prototype.cancelPendingSwap=function(){if(!this.isTransferPending||!this.pendingTransfer.isSwap)return f.Logging.error("No pending swap."),!1;var t=[this.pendingTransfer.authorizations.get(h.TransferAggregateType.DEBIT),this.pendingTransfer.authorizations.get(h.TransferAggregateType.CREDIT),this.pendingTransfer.authorizations.get(h.TransferAggregateType.SENDER_CANCELLATION),this.pendingTransfer.authorizations.get(h.TransferAggregateType.RECIPIENT_CANCELLATION),this.pendingTransfer.confirmations.get(h.TransferAggregateType.DEBIT),this.pendingTransfer.confirmations.get(h.TransferAggregateType.CREDIT),this.pendingTransfer.confirmations.get(h.TransferAggregateType.FREEZING),this.pendingTransfer.confirmations.get(h.TransferAggregateType.SENDER_CANCELLATION),this.pendingTransfer.confirmations.get(h.TransferAggregateType.RECIPIENT_CANCELLATION)];return t.some(function(t){return!t})?(f.Logging.error(t),!1):(l.isSameHexValue(this.pendingTransfer.recipientTokenAddress,this.tokenAddress)?(this._gained=new s.default(this.pendingTransfer.authorizations.get(h.TransferAggregateType.RECIPIENT_CANCELLATION).updated_gains),this._spent=new s.default(this.pendingTransfer.authorizations.get(h.TransferAggregateType.RECIPIENT_CANCELLATION).updated_spendings)):(this._gained=new s.default(this.pendingTransfer.authorizations.get(h.TransferAggregateType.SENDER_CANCELLATION).updated_gains),this._spent=new s.default(this.pendingTransfer.authorizations.get(h.TransferAggregateType.SENDER_CANCELLATION).updated_spendings)),this._transfers.push(this._pendingTransfer),this._pendingTransfer=null,this.recalculateTransactionTree(),!0)},e.prototype.confirmPendingIncomingTransfer=function(){if(this.isTransferPending&&l.isSameHexValue(this.pendingTransfer.recipient,this.walletAddress))return this.confirmPendingTransfer()},e.prototype.confirmPendingOutgoingTransfer=function(){return!(!this.isTransferPending||!l.isSameHexValue(this.pendingTransfer.sender,this.walletAddress))&&this.confirmPendingTransfer()},e.prototype.confirmPendingTransfer=function(){return!(!this.isTransferPending||!this.pendingTransfer)&&(![this.pendingTransfer.authorizations.get(h.TransferAggregateType.DEBIT),this.pendingTransfer.authorizations.get(h.TransferAggregateType.CREDIT),this.pendingTransfer.confirmations.get(h.TransferAggregateType.DEBIT),this.pendingTransfer.confirmations.get(h.TransferAggregateType.CREDIT)].some(function(t){return!t})&&(this._pendingReceipt=new s.default("0"),this._transfers.push(this._pendingTransfer),this._pendingTransfer=null,this.recalculateTransactionTree(),!0))},e.prototype.cancelPendingTransfer=function(){this.isTransferPending&&(this.pendingTransfer.sender==this.walletAddress?this._spent=this._spent.minus(this._pendingTransfer.amount):(this._pendingReceipt=this._pendingReceipt.minus(this._pendingTransfer.amount),this._gained=this._gained.minus(this._pendingTransfer.amount)),this._pendingTransfer=null,this.recalculateTransactionTree())},e.prototype.createOutgoingTransfer=function(t,e,n,r,i){if(!this.isTransferPending)return this._spent=this._spent.plus(n),this._pendingTransfer=new u.Transfer(this.tokenAddress,this._walletAddress,this._round,n,null,null,this.tokenAddress,t,e,t,r,i),this.recalculateTransactionTree(),this._pendingTransfer},e.prototype.createOutgoingSwap=function(t,e,n,r,i,o,s,a){if(f.Logging.debug("createOutgoingSwap"),f.Logging.debug([t,e,n,r.toFixed(0),i.toFixed(0),o.toFixed(0),s?s.toFixed(0):s,a]),!this.isTransferPending)return this._spent=this._spent.plus(r),this._pendingTransfer=new u.Transfer(this.tokenAddress,this._walletAddress,this._round,r,i,o,e,t,n,e,s,a),this.recalculateTransactionTree(),this._pendingTransfer},e.prototype.recalculateTransactionTree=function(){this._transferLeaves=new Map;var t=this._transfers;if(this.isTransferPending&&(t=this._transfers.concat(this._pendingTransfer)),t.length>0){for(var e=1;e<t.length;)e*=2;for(;t.length<e;)t=t.concat(u.Transfer.PADDING_TRANSFER)}this._transferTree=new a.MerkleTree(t,this._transferLeaves,0)},e}(c.Hashable);e.Aggregate=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6),i=function(){function t(t,e,n,r,i){this._address=t,this._checksum=e,this._r=n,this._s=r,this._v=i}return t.fromJSON=function(e){return new t(e.address,e.checksumTransfer,e.r,e.s,e.v)},t.fromRSV=function(e,n,i){var o=r.remove0xPrefix(i),s=parseInt(o.slice(128,130),16);return s<27&&(s+=27),new t(e,n,o.slice(0,64),o.slice(64,128),s.toString(16))},Object.defineProperty(t.prototype,"json",{get:function(){return{address:this._address,checksum:this._checksum,r:this._r,s:this._s,v:this._v}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"address",{get:function(){return r.remove0xPrefix(this._address)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checksum",{get:function(){return this._checksum},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rsv",{get:function(){return""+this.r+this.s+this.v},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"r",{get:function(){return this._r},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"s",{get:function(){return this._s},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"v",{get:function(){return this._v},enumerable:!0,configurable:!0}),t.EMPTY=new t("0x0000000000000000000000000000000000000000",r.EMPTY_HASH,r.EMPTY_HASH,r.EMPTY_HASH,"00"),t}();e.Signature=i},function(t,e,n){"use strict";n.r(e);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}Object.assign;function o(t){return"function"==typeof t}var s=!1,u={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;s=t},get useDeprecatedSynchronousErrorHandling(){return s}};function a(t){setTimeout(function(){throw t})}var c={closed:!0,next:function(t){},error:function(t){if(u.useDeprecatedSynchronousErrorHandling)throw t;a(t)},complete:function(){}},l=Array.isArray||function(t){return t&&"number"==typeof t.length};function h(t){return null!=t&&"object"==typeof t}var f,p={e:{}};function d(){try{return f.apply(this,arguments)}catch(t){return p.e=t,p}}function g(t){return f=t,d}var y=function(t){function e(n){var r=t.call(this,n?n.length+" errors occurred during unsubscription:\n  "+n.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"")||this;return r.errors=n,r.name="UnsubscriptionError",Object.setPrototypeOf(r,e.prototype),r}return i(e,t),e}(Error),m=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,r=this._parents,i=this._unsubscribe,s=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var u=-1,a=r?r.length:0;n;)n.remove(this),n=++u<a&&r[u]||null;if(o(i))g(i).call(this)===p&&(e=!0,t=t||(p.e instanceof y?v(p.e.errors):[p.e]));if(l(s))for(u=-1,a=s.length;++u<a;){var c=s[u];if(h(c))if(g(c.unsubscribe).call(c)===p){e=!0,t=t||[];var f=p.e;f instanceof y?t=t.concat(v(f.errors)):t.push(f)}}if(e)throw new y(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;e&&e!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=((e=new t).closed=!0,e),t}();function v(t){return t.reduce(function(t,e){return t.concat(e instanceof y?e.errors:e)},[])}var b="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("rxSubscriber"):"@@rxSubscriber",_=function(t){function e(e,n,r){var i,o=t.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=c;break;case 1:if(!e){o.destination=c;break}if("object"==typeof e){if((i=e)instanceof _||"syncErrorThrowable"in i&&i[b]){var s=e[b]();o.syncErrorThrowable=s.syncErrorThrowable,o.destination=s,s.add(o)}else o.syncErrorThrowable=!0,o.destination=new w(o,e);break}default:o.syncErrorThrowable=!0,o.destination=new w(o,e,n,r)}return o}return i(e,t),e.prototype[b]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(m),w=function(t){function e(e,n,r,i){var s,u=t.call(this)||this;u._parentSubscriber=e;var a=u;return o(n)?s=n:n&&(s=n.next,r=n.error,i=n.complete,n!==c&&(o((a=Object.create(n)).unsubscribe)&&u.add(a.unsubscribe.bind(a)),a.unsubscribe=u.unsubscribe.bind(u))),u._context=a,u._next=s,u._error=r,u._complete=i,u}return i(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;u.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=u.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):a(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;a(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};u.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),u.useDeprecatedSynchronousErrorHandling)throw t;a(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!u.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return u.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(a(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(_);var A="function"==typeof Symbol&&Symbol.observable||"@@observable";function T(){}function S(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return M(t)}function M(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:T}var O=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,i=function(t,e,n){if(t){if(t instanceof _)return t;if(t[b])return t[b]()}return t||e||n?new _(t,e,n):new _(c)}(t,e,n);if(r?r.call(i,this.source):i.add(this.source||u.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),u.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){u.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=E(e))(function(e,r){var i;i=n.subscribe(function(e){try{t(e)}catch(t){r(t),i&&i.unsubscribe()}},r,e)})},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[A]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:M(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=E(t))(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})},t.create=function(e){return new t(e)},t}();function E(t){if(t||(t=u.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var x=function(t){function e(){var n=t.call(this,"object unsubscribed")||this;return n.name="ObjectUnsubscribedError",Object.setPrototypeOf(n,e.prototype),n}return i(e,t),e}(Error),I=function(t){function e(e,n){var r=t.call(this)||this;return r.subject=e,r.subscriber=n,r.closed=!1,r}return i(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(m),P=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return i(e,t),e}(_),R=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return i(e,t),e.prototype[b]=function(){return new P(this)},e.prototype.lift=function(t){var e=new N(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new x;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new x;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new x;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new x;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new x;return this.hasError?(t.error(this.thrownError),m.EMPTY):this.isStopped?(t.complete(),m.EMPTY):(this.observers.push(t),new I(this,t))},e.prototype.asObservable=function(){var t=new O;return t.source=this,t},e.create=function(t,e){return new N(t,e)},e}(O),N=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return i(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):m.EMPTY},e}(R);var C=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new j(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i},t}(),j=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return i(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(_),L=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return i(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new m).add(this.source.subscribe(new D(this.getSubject(),this))),t.closed?(this._connection=null,t=m.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return(t=this).lift(new C(t));var t},e}(O),k=L.prototype,D=(k._subscribe,k._isComplete,k.getSubject,k.connect,k.refCount,function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return i(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(P));var B=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.groupSubject=n,i.refCountSubscription=r,i}return i(e,t),e.prototype._subscribe=function(t){var e=new m,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&e.add(new U(n)),e.add(r.subscribe(t)),e},e}(O),U=function(t){function e(e){var n=t.call(this)||this;return n.parent=e,e.count++,n}return i(e,t),e.prototype.unsubscribe=function(){var e=this.parent;e.closed||this.closed||(t.prototype.unsubscribe.call(this),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())},e}(m),F=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return i(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new x;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(R),W=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return i(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,n){return t.call(this)||this}return i(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(m)),G=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return i(e,t),e.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?t.prototype.requestAsyncId.call(this,e,n,r):e.flush(this)},e}(W),V=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=Date.now?Date.now:function(){return+new Date},t}(),z=function(t){function e(n,r){void 0===r&&(r=V.now);var i=t.call(this,n,function(){return e.delegate&&e.delegate!==i?e.delegate.now():r()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return i(e,t),e.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,i):t.prototype.schedule.call(this,n,r,i)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(V),H=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(z))(G),q=new O(function(t){return t.complete()});function Y(t){return t?function(t){return new O(function(e){return t.schedule(function(){return e.complete()})})}(t):q}function K(t){return t&&"function"==typeof t.schedule}var Z=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.closed||e.complete()}};function J(t,e){return new O(e?function(n){var r=new m,i=0;return r.add(e.schedule(function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()})),r}:Z(t))}function $(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n,r,i=t[t.length-1];switch(K(i)?t.pop():i=void 0,t.length){case 0:return Y(i);case 1:return i?J(t,i):(n=t[0],(r=new O(function(t){t.next(n),t.complete()}))._isScalar=!0,r.value=n,r);default:return J(t,i)}}function X(t,e){return new O(e?function(n){return e.schedule(Q,0,{error:t,subscriber:n})}:function(e){return e.error(t)})}function Q(t){var e=t.error;t.subscriber.error(e)}var tt=function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){switch(this.kind){case"N":return $(this.value);case"E":return X(this.error);case"C":return Y()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();var et=function(t){function e(e,n,r){void 0===r&&(r=0);var i=t.call(this,e)||this;return i.scheduler=n,i.delay=r,i}return i(e,t),e.dispatch=function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.add(this.scheduler.schedule(e.dispatch,this.delay,new nt(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(tt.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(tt.createError(t))},e.prototype._complete=function(){this.scheduleMessage(tt.createComplete())},e}(_),nt=function(){return function(t,e){this.notification=t,this.destination=e}}(),rt=function(t){function e(e,n,r){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=t.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=e<1?1:e,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return i(e,t),e.prototype.nextInfiniteTimeWindow=function(e){var n=this._events;n.push(e),n.length>this._bufferSize&&n.shift(),t.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this._events.push(new it(this._getNow(),e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new x;if(this.isStopped||this.hasError?e=m.EMPTY:(this.observers.push(t),e=new I(this,t)),i&&t.add(t=new et(t,i)),n)for(var s=0;s<o&&!t.closed;s++)t.next(r[s]);else for(s=0;s<o&&!t.closed;s++)t.next(r[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||H).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r},e}(R),it=function(){return function(t,e){this.time=t,this.value=e}}(),ot=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.value=null,e.hasNext=!1,e.hasCompleted=!1,e}return i(e,t),e.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),m.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),m.EMPTY):t.prototype._subscribe.call(this,e)},e.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},e.prototype.error=function(e){this.hasCompleted||t.prototype.error.call(this,e)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&t.prototype.next.call(this,this.value),t.prototype.complete.call(this)},e}(R),st=1,ut={};var at=function(t){var e=st++;return ut[e]=t,Promise.resolve().then(function(){return function(t){var e=ut[t];e&&e()}(e)}),e},ct=function(t){delete ut[t]},lt=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return i(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=at(e.flush.bind(e,null))))},e.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(ct(n),e.scheduled=void 0)},e}(W),ht=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}},e}(z))(lt),ft=new z(W),pt=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return i(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(function(){return e.flush(null)})))},e.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(cancelAnimationFrame(n),e.scheduled=void 0)},e}(W),dt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}},e}(z))(pt),gt=function(t){function e(e,n){void 0===e&&(e=yt),void 0===n&&(n=Number.POSITIVE_INFINITY);var r=t.call(this,e,function(){return r.frame})||this;return r.maxFrames=n,r.frame=0,r.index=-1,r}return i(e,t),e.prototype.flush=function(){for(var t,e,n=this.actions,r=this.maxFrames;(e=n.shift())&&(this.frame=e.delay)<=r&&!(t=e.execute(e.state,e.delay)););if(t){for(;e=n.shift();)e.unsubscribe();throw t}},e.frameTimeFactor=10,e}(z),yt=function(t){function e(e,n,r){void 0===r&&(r=e.index+=1);var i=t.call(this,e,n)||this;return i.scheduler=e,i.work=n,i.index=r,i.active=!0,i.index=e.index=r,i}return i(e,t),e.prototype.schedule=function(n,r){if(void 0===r&&(r=0),!this.id)return t.prototype.schedule.call(this,n,r);this.active=!1;var i=new e(this.scheduler,this.work);return this.add(i),i.schedule(n,r)},e.prototype.requestAsyncId=function(t,n,r){void 0===r&&(r=0),this.delay=t.frame+r;var i=t.actions;return i.push(this),i.sort(e.sortActions),!0},e.prototype.recycleAsyncId=function(t,e,n){void 0===n&&(n=0)},e.prototype._execute=function(e,n){if(!0===this.active)return t.prototype._execute.call(this,e,n)},e.sortActions=function(t,e){return t.delay===e.delay?t.index===e.index?0:t.index>e.index?1:-1:t.delay>e.delay?1:-1},e}(W);function mt(t){return t}function vt(t){return!!t&&(t instanceof O||"function"==typeof t.lift&&"function"==typeof t.subscribe)}var bt=function(t){function e(){var n=t.call(this,"argument out of range")||this;return n.name="ArgumentOutOfRangeError",Object.setPrototypeOf(n,e.prototype),n}return i(e,t),e}(Error),_t=function(t){function e(){var n=t.call(this,"no elements in sequence")||this;return n.name="EmptyError",Object.setPrototypeOf(n,e.prototype),n}return i(e,t),e}(Error),wt=function(t){function e(){var n=t.call(this,"Timeout has occurred")||this;return n.name="TimeoutError",Object.setPrototypeOf(n,e.prototype),n}return i(e,t),e}(Error);function At(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new Tt(t,e))}}var Tt=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new St(t,this.project,this.thisArg))},t}(),St=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return i(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(_);function Mt(t,e,n){if(e){if(!K(e))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return Mt(t,n).apply(void 0,r).pipe(At(function(t){return l(t)?e.apply(void 0,t):e(t)}))};n=e}return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i,o=this,s={context:o,subject:i,callbackFunc:t,scheduler:n};return new O(function(r){if(n){var u={args:e,subscriber:r,params:s};return n.schedule(Ot,0,u)}if(!i){i=new ot;try{t.apply(o,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.next(t.length<=1?t[0]:t),i.complete()}]))}catch(t){i.error(t)}}return i.subscribe(r)})}}function Ot(t){var e=this,n=t.args,r=t.subscriber,i=t.params,o=i.callbackFunc,s=i.context,u=i.scheduler,a=i.subject;if(!a){a=i.subject=new ot;try{o.apply(s,n.concat([function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.length<=1?t[0]:t;e.add(u.schedule(Et,0,{value:r,subject:a}))}]))}catch(t){a.error(t)}}this.add(a.subscribe(r))}function Et(t){var e=t.value,n=t.subject;n.next(e),n.complete()}function xt(t,e,n){if(e){if(!K(e))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return xt(t,n).apply(void 0,r).pipe(At(function(t){return l(t)?e.apply(void 0,t):e(t)}))};n=e}return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i={subject:void 0,args:e,callbackFunc:t,scheduler:n,context:this};return new O(function(r){var o=i.context,s=i.subject;if(n)return n.schedule(It,0,{params:i,subscriber:r,context:o});if(!s){s=i.subject=new ot;try{t.apply(o,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.shift();n?s.error(n):(s.next(t.length<=1?t[0]:t),s.complete())}]))}catch(t){s.error(t)}}return s.subscribe(r)})}}function It(t){var e=this,n=t.params,r=t.subscriber,i=t.context,o=n.callbackFunc,s=n.args,u=n.scheduler,a=n.subject;if(!a){a=n.subject=new ot;try{o.apply(i,s.concat([function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.shift();if(r)e.add(u.schedule(Rt,0,{err:r,subject:a}));else{var i=t.length<=1?t[0]:t;e.add(u.schedule(Pt,0,{value:i,subject:a}))}}]))}catch(t){this.add(u.schedule(Rt,0,{err:t,subject:a}))}}this.add(a.subscribe(r))}function Pt(t){var e=t.value,n=t.subject;n.next(e),n.complete()}function Rt(t){var e=t.err;t.subject.error(e)}var Nt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(_),Ct=function(t){function e(e,n,r){var i=t.call(this)||this;return i.parent=e,i.outerValue=n,i.outerIndex=r,i.index=0,i}return i(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(_),jt=function(t){return function(e){return t.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,a),e}};var Lt=function(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),kt=function(t){return function(e){for(var n=t[Lt]();;){var r=n.next();if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add(function(){n.return&&n.return()}),e}},Dt=function(t){return function(e){var n=t[A]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)}},Bt=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function Ut(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var Ft=function(t){if(t instanceof O)return function(e){return t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e)};if(t&&"function"==typeof t[A])return Dt(t);if(Bt(t))return Z(t);if(Ut(t))return jt(t);if(t&&"function"==typeof t[Lt])return kt(t);var e=h(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function Wt(t,e,n,r){var i=new Ct(t,n,r);return Ft(e)(i)}var Gt={};function Vt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null,r=null;return K(t[t.length-1])&&(r=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&l(t[0])&&(t=t[0]),J(t,r).lift(new zt(n))}var zt=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new Ht(t,this.resultSelector))},t}(),Ht=function(t){function e(e,n){var r=t.call(this,e)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return i(e,t),e.prototype._next=function(t){this.values.push(Gt),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add(Wt(this,r,r,n))}}},e.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.values,s=o[n],u=this.toRespond?s===Gt?--this.toRespond:this.toRespond:0;o[n]=e,0===u&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},e.prototype._tryResultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(Nt);function qt(t,e){if(!e)return t instanceof O?t:new O(Ft(t));if(null!=t){if(function(t){return t&&"function"==typeof t[A]}(t))return function(t,e){return new O(e?function(n){var r=new m;return r.add(e.schedule(function(){var i=t[A]();r.add(i.subscribe({next:function(t){r.add(e.schedule(function(){return n.next(t)}))},error:function(t){r.add(e.schedule(function(){return n.error(t)}))},complete:function(){r.add(e.schedule(function(){return n.complete()}))}}))})),r}:Dt(t))}(t,e);if(Ut(t))return function(t,e){return new O(e?function(n){var r=new m;return r.add(e.schedule(function(){return t.then(function(t){r.add(e.schedule(function(){n.next(t),r.add(e.schedule(function(){return n.complete()}))}))},function(t){r.add(e.schedule(function(){return n.error(t)}))})})),r}:jt(t))}(t,e);if(Bt(t))return J(t,e);if(function(t){return t&&"function"==typeof t[Lt]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new O(e?function(n){var r,i=new m;return i.add(function(){r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(function(){r=t[Lt](),i.add(e.schedule(function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(t){return void n.error(t)}e?n.complete():(n.next(t),this.schedule())}}))})),i}:kt(t))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}var Yt=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new Kt(t,this.project,this.concurrent))},t}(),Kt=function(t){function e(e,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=t.call(this,e)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return i(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){this.add(Wt(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(Nt);function Zt(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),function t(e,n,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"function"==typeof n?function(i){return i.pipe(t(function(t,r){return qt(e(t,r)).pipe(At(function(e,i){return n(t,e,r,i)}))},r))}:("number"==typeof n&&(r=n),function(t){return t.lift(new Yt(e,r))})}(mt,t)}function Jt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1===t.length||2===t.length&&K(t[1])?qt(t[0]):Zt(1)($.apply(void 0,t))}function $t(t){return new O(function(e){var n;try{n=t()}catch(t){return void e.error(t)}return(n?qt(n):Y()).subscribe(e)})}function Xt(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&l(e[0])&&(e=e[0]),0===e.length?q:t?Xt(e).pipe(At(function(e){return t.apply(void 0,e)})):new O(function(t){return new Qt(t,e)})}var Qt=function(t){function e(e,n){var r=t.call(this,e)||this;r.sources=n,r.completed=0,r.haveValues=0;var i=n.length;r.values=new Array(i);for(var o=0;o<i;o++){var s=Wt(r,n[o],null,o);s&&r.add(s)}return r}return i(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.values[n]=e,i._hasValue||(i._hasValue=!0,this.haveValues++)},e.prototype.notifyComplete=function(t){var e=this.destination,n=this.haveValues,r=this.values,i=r.length;t._hasValue?(this.completed++,this.completed===i&&(n===i&&e.next(r),e.complete())):e.complete()},e}(Nt);Object.prototype.toString;function te(t,e,n,r){return o(n)&&(r=n,n=void 0),r?te(t,e,n).pipe(At(function(t){return l(t)?r.apply(void 0,t):r(t)})):new O(function(r){!function t(e,n,r,i,o){var s;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){var u=e;e.addEventListener(n,r,o),s=function(){return u.removeEventListener(n,r,o)}}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){var a=e;e.on(n,r),s=function(){return a.off(n,r)}}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){var c=e;e.addListener(n,r),s=function(){return c.removeListener(n,r)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var l=0,h=e.length;l<h;l++)t(e[l],n,r,i,o)}i.add(s)}(t,e,function(t){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(t)},r,n)})}function ee(t,e,n){return n?ee(t,e).pipe(At(function(t){return l(t)?n.apply(void 0,t):n(t)})):new O(function(n){var r,i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.next(1===t.length?t[0]:t)};try{r=t(i)}catch(t){return void n.error(t)}if(o(e))return function(){return e(i,r)}})}function ne(t,e,n,r,i){var o,s;if(1==arguments.length){var u=t;s=u.initialState,e=u.condition,n=u.iterate,o=u.resultSelector||mt,i=u.scheduler}else void 0===r||K(r)?(s=t,o=mt,i=r):(s=t,o=r);return new O(function(t){var r=s;if(i)return i.schedule(re,0,{subscriber:t,iterate:n,condition:e,resultSelector:o,state:r});for(;;){if(e){var u=void 0;try{u=e(r)}catch(e){return void t.error(e)}if(!u){t.complete();break}}var a=void 0;try{a=o(r)}catch(e){return void t.error(e)}if(t.next(a),t.closed)break;try{r=n(r)}catch(e){return void t.error(e)}}})}function re(t){var e=t.subscriber,n=t.condition;if(!e.closed){if(t.needIterate)try{t.state=t.iterate(t.state)}catch(t){return void e.error(t)}else t.needIterate=!0;if(n){var r=void 0;try{r=n(t.state)}catch(t){return void e.error(t)}if(!r)return void e.complete();if(e.closed)return}var i;try{i=t.resultSelector(t.state)}catch(t){return void e.error(t)}if(!e.closed&&(e.next(i),!e.closed))return this.schedule(t)}}function ie(t,e,n){return void 0===e&&(e=q),void 0===n&&(n=q),$t(function(){return t()?e:n})}function oe(t){return!l(t)&&t-parseFloat(t)+1>=0}function se(t,e){return void 0===t&&(t=0),void 0===e&&(e=ft),(!oe(t)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=ft),new O(function(n){return n.add(e.schedule(ue,t,{subscriber:n,counter:0,period:t})),n})}function ue(t){var e=t.subscriber,n=t.counter,r=t.period;e.next(n),this.schedule({subscriber:e,counter:n+1,period:r},r)}function ae(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Number.POSITIVE_INFINITY,r=null,i=t[t.length-1];return K(i)?(r=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof i&&(n=t.pop()),null===r&&1===t.length&&t[0]instanceof O?t[0]:Zt(n)(J(t,r))}var ce=new O(T);function le(){return ce}function he(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return q;var n=t[0],r=t.slice(1);return 1===t.length&&l(n)?he.apply(void 0,n):new O(function(t){var e=function(){return t.add(he.apply(void 0,r).subscribe(t))};return qt(n).subscribe({next:function(e){t.next(e)},error:e,complete:e})})}function fe(t,e){return new O(e?function(n){var r=Object.keys(t),i=new m;return i.add(e.schedule(pe,0,{keys:r,index:0,subscriber:n,subscription:i,obj:t})),i}:function(e){for(var n=Object.keys(t),r=0;r<n.length&&!e.closed;r++){var i=n[r];t.hasOwnProperty(i)&&e.next([i,t[i]])}e.complete()})}function pe(t){var e=t.keys,n=t.index,r=t.subscriber,i=t.subscription,o=t.obj;if(!r.closed)if(n<e.length){var s=e[n];r.next([s,o[s]]),i.add(this.schedule({keys:e,index:n+1,subscriber:r,subscription:i,obj:o}))}else r.complete()}function de(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){if(!l(t[0]))return t[0];t=t[0]}return J(t,void 0).lift(new ge)}var ge=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new ye(t))},t}(),ye=function(t){function e(e){var n=t.call(this,e)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return i(e,t),e.prototype._next=function(t){this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var n=0;n<e&&!this.hasFirst;n++){var r=t[n],i=Wt(this,r,r,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},e.prototype.notifyNext=function(t,e,n,r,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==n){var s=this.subscriptions[o];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(e)},e}(Nt);function me(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=0),new O(function(r){var i=0,o=t;if(n)return n.schedule(ve,0,{index:i,count:e,start:t,subscriber:r});for(;;){if(i++>=e){r.complete();break}if(r.next(o++),r.closed)break}})}function ve(t){var e=t.start,n=t.index,r=t.count,i=t.subscriber;n>=r?i.complete():(i.next(e),i.closed||(t.index=n+1,t.start=e+1,this.schedule(t)))}function be(t,e,n){void 0===t&&(t=0);var r=-1;return oe(e)?r=Number(e)<1?1:Number(e):K(e)&&(n=e),K(n)||(n=ft),new O(function(e){var i=oe(t)?t:+t-n.now();return n.schedule(_e,i,{index:0,period:r,subscriber:e})})}function _e(t){var e=t.index,n=t.period,r=t.subscriber;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}function we(t,e){return new O(function(n){var r,i;try{r=t()}catch(t){return void n.error(t)}try{i=e(r)}catch(t){return void n.error(t)}var o=(i?qt(i):q).subscribe(n);return function(){o.unsubscribe(),r&&r.unsubscribe()}})}function Ae(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return"function"==typeof n&&t.pop(),J(t,void 0).lift(new Te(n))}var Te=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new Se(t,this.resultSelector))},t}(),Se=function(t){function e(e,n,r){void 0===r&&(r=Object.create(null));var i=t.call(this,e)||this;return i.iterators=[],i.active=0,i.resultSelector="function"==typeof n?n:null,i.values=r,i}return i(e,t),e.prototype._next=function(t){var e=this.iterators;l(t)?e.push(new Oe(t)):"function"==typeof t[Lt]?e.push(new Me(t[Lt]())):e.push(new Ee(this.destination,this,t))},e.prototype._complete=function(){var t=this.iterators,e=t.length;if(0!==e){this.active=e;for(var n=0;n<e;n++){var r=t[n];r.stillUnsubscribed?this.add(r.subscribe(r,n)):this.active--}}else this.destination.complete()},e.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},e.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,n=this.destination,r=0;r<e;r++){if("function"==typeof(s=t[r]).hasValue&&!s.hasValue())return}var i=!1,o=[];for(r=0;r<e;r++){var s,u=(s=t[r]).next();if(s.hasCompleted()&&(i=!0),u.done)return void n.complete();o.push(u.value)}this.resultSelector?this._tryresultSelector(o):n.next(o),i&&n.complete()},e.prototype._tryresultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(_),Me=function(){function t(t){this.iterator=t,this.nextResult=t.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},t.prototype.hasCompleted=function(){var t=this.nextResult;return t&&t.done},t}(),Oe=function(){function t(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return t.prototype[Lt]=function(){return this},t.prototype.next=function(t){var e=this.index++,n=this.array;return e<this.length?{value:n[e],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.array.length>this.index},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),Ee=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.parent=n,i.observable=r,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return i(e,t),e.prototype[Lt]=function(){return this},e.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},e.prototype.hasValue=function(){return this.buffer.length>0},e.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},e.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this.buffer.push(e),this.parent.checkIterators()},e.prototype.subscribe=function(t,e){return Wt(this,this.observable,this,e)},e}(Nt);n.d(e,"Observable",function(){return O}),n.d(e,"ConnectableObservable",function(){return L}),n.d(e,"GroupedObservable",function(){return B}),n.d(e,"observable",function(){return A}),n.d(e,"Subject",function(){return R}),n.d(e,"BehaviorSubject",function(){return F}),n.d(e,"ReplaySubject",function(){return rt}),n.d(e,"AsyncSubject",function(){return ot}),n.d(e,"asapScheduler",function(){return ht}),n.d(e,"asyncScheduler",function(){return ft}),n.d(e,"queueScheduler",function(){return H}),n.d(e,"animationFrameScheduler",function(){return dt}),n.d(e,"VirtualTimeScheduler",function(){return gt}),n.d(e,"VirtualAction",function(){return yt}),n.d(e,"Scheduler",function(){return V}),n.d(e,"Subscription",function(){return m}),n.d(e,"Subscriber",function(){return _}),n.d(e,"Notification",function(){return tt}),n.d(e,"pipe",function(){return S}),n.d(e,"noop",function(){return T}),n.d(e,"identity",function(){return mt}),n.d(e,"isObservable",function(){return vt}),n.d(e,"ArgumentOutOfRangeError",function(){return bt}),n.d(e,"EmptyError",function(){return _t}),n.d(e,"ObjectUnsubscribedError",function(){return x}),n.d(e,"UnsubscriptionError",function(){return y}),n.d(e,"TimeoutError",function(){return wt}),n.d(e,"bindCallback",function(){return Mt}),n.d(e,"bindNodeCallback",function(){return xt}),n.d(e,"combineLatest",function(){return Vt}),n.d(e,"concat",function(){return Jt}),n.d(e,"defer",function(){return $t}),n.d(e,"empty",function(){return Y}),n.d(e,"forkJoin",function(){return Xt}),n.d(e,"from",function(){return qt}),n.d(e,"fromEvent",function(){return te}),n.d(e,"fromEventPattern",function(){return ee}),n.d(e,"generate",function(){return ne}),n.d(e,"iif",function(){return ie}),n.d(e,"interval",function(){return se}),n.d(e,"merge",function(){return ae}),n.d(e,"never",function(){return le}),n.d(e,"of",function(){return $}),n.d(e,"onErrorResumeNext",function(){return he}),n.d(e,"pairs",function(){return fe}),n.d(e,"race",function(){return de}),n.d(e,"range",function(){return me}),n.d(e,"throwError",function(){return X}),n.d(e,"timer",function(){return be}),n.d(e,"using",function(){return we}),n.d(e,"zip",function(){return Ae}),n.d(e,"EMPTY",function(){return q}),n.d(e,"NEVER",function(){return ce}),n.d(e,"config",function(){return u})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(180);e.multicast=function(t,e){return function(n){var o;if(o="function"==typeof t?t:function(){return t},"function"==typeof e)return n.lift(new i(o,e));var s=Object.create(n,r.connectableObservableDescriptor);return s.source=n,s.subjectFactory=o,s}};var i=function(){function t(t,e){this.subjectFactory=t,this.selector=e}return t.prototype.call=function(t,e){var n=this.selector,r=this.subjectFactory(),i=n(r).subscribe(t);return i.add(e.subscribe(r)),i},t}();e.MulticastOperator=i},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(26),o=n(38),s=n(69),u=n(45),a=r(n(8)),c=function(){function t(t,e,n,r,o){this._contractAddress=t,this._tokenAddress=e,this._walletAddress=n,this._trailIdentifier=r,this._round=o,this._withdrawalAmount=new a.default("0"),this._withdrawalRound=0,this._isWithdrawalReady=!1,this._withdrawalConfirmed=!1,this._deposits=[],this._deposited=new a.default("0"),this._depositedOnChain=new a.default("0"),this._pendingIncomingTransfers=[],this._cancelledTransfers=[],this._aggregate=new i.Aggregate(t,e,n,r,o)}return t.fromJSON=function(e){var n=new t(e.contractAddress,e.tokenAddress,e.walletAddress,e.trailIdentifier,e.round);return null!=e.aggregate&&(n._aggregate=i.Aggregate.fromJSON(e.aggregate)),null!=e.proofOfStake&&(n._proofOfStake=o.ProofOfStake.fromJSON(e.proofOfStake)),null!=e.proposedProofOfStake&&(n.proposedProofOfStake=o.ProofOfStake.fromJSON(e.proposedProofOfStake)),n._withdrawalAmount=new a.default(e.withdrawalAmount),n._withdrawalRound=e.withdrawalRound,n._withdrawalConfirmed=e.withdrawalConfirmed,n._isWithdrawalReady=e.isWithdrawalReady,n._deposits=e.deposits.map(function(t){return s.Deposit.fromJSON(t)}),n._deposited=new a.default(e.deposited),n._depositedOnChain=new a.default(e.depositedOnChain),null!=e.minimumAuthorizedBalance&&(n._minimumAuthorizedBalance=u.BalanceMarker.fromJSON(e.minimumAuthorizedBalance)),n._pendingIncomingTransfers=e.pendingIncomingTransfers,n._cancelledTransfers=e.cancelledTransfers,n},Object.defineProperty(t.prototype,"json",{get:function(){return{contractAddress:this._contractAddress,tokenAddress:this._tokenAddress,walletAddress:this._walletAddress,trailIdentifier:this._trailIdentifier,round:this._round,aggregate:null==this._aggregate?null:this._aggregate.json,proofOfStake:null==this._proofOfStake?null:this._proofOfStake.json,proposedProofOfStake:null==this.proposedProofOfStake?null:this.proposedProofOfStake.json,withdrawalAmount:this._withdrawalAmount,withdrawalRound:this._withdrawalRound,withdrawalConfirmed:this._withdrawalConfirmed,isWithdrawalReady:this._isWithdrawalReady,deposits:this._deposits.map(function(t){return t.json}),deposited:this._deposited,depositedOnChain:this._depositedOnChain,minimumAuthorizedBalance:this._minimumAuthorizedBalance,pendingIncomingTransfers:this._pendingIncomingTransfers,cancelledTransfers:this._cancelledTransfers}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"roundNumber",{get:function(){return this._round},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"proofOfStake",{get:function(){return this._proofOfStake},enumerable:!0,configurable:!0}),t.prototype.setProofOfStake=function(t){return this._proofOfStake=t,!0},Object.defineProperty(t.prototype,"chainBalance",{get:function(){return this._proofOfStake?this._proofOfStake.amount:new a.default("0")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"proposedChainBalance",{get:function(){return this.proposedProofOfStake?this.proposedProofOfStake.amount:new a.default("0")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"aggregate",{get:function(){return this._aggregate},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isWithdrawalStarted",{get:function(){return this._withdrawalRound==this._round},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isWithdrawalPending",{get:function(){return this._withdrawalRound>0&&!this._withdrawalConfirmed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"withdrawalRound",{get:function(){return this._withdrawalRound},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"walletAddress",{get:function(){return this._walletAddress},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trailIdentifier",{get:function(){return this._trailIdentifier},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contractAddress",{get:function(){return this._contractAddress},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tokenAddress",{get:function(){return this._tokenAddress},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"withdrawalAmount",{get:function(){return this.isWithdrawalPending?this._withdrawalAmount:new a.default(0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isWithdrawalReady",{get:function(){return this._isWithdrawalReady},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"availableBalance",{get:function(){var t=this.chainBalance.plus(this.offChainDeposited),e=this.isWithdrawalStarted?this.withdrawalAmount:new a.default("0");return t.plus(this.aggregate.amount).minus(e).minus(this.aggregate.pendingReceipt)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"expectedBalance",{get:function(){var t=this.chainBalance.plus(this.onChainDeposit),e=this.isWithdrawalStarted?this.withdrawalAmount:new a.default("0");return t.plus(this.aggregate.amount).minus(e).minus(this.aggregate.pendingReceipt)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minimumAuthorizedBalance",{get:function(){return this._minimumAuthorizedBalance},set:function(t){this._minimumAuthorizedBalance=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"availableBalanceMarker",{get:function(){return new u.BalanceMarker(this._contractAddress,this._tokenAddress,this._walletAddress,this._round,this.availableBalance)},enumerable:!0,configurable:!0}),t.prototype.markWithdrawalReady=function(){return!(!this.isWithdrawalPending||this.isWithdrawalReady)&&(this._isWithdrawalReady=!0,!0)},t.prototype.confirmWithdrawal=function(){return!!this.isWithdrawalReady&&(this._withdrawalConfirmed=!0,!0)},t.prototype.setWithdrawalPending=function(t,e){return!this.isWithdrawalPending&&(this._withdrawalAmount=t,this._withdrawalRound=e,this._withdrawalConfirmed=!1,!0)},Object.defineProperty(t.prototype,"deposits",{get:function(){return this._deposits},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offChainDeposited",{get:function(){return this._deposited},enumerable:!0,configurable:!0}),t.prototype.addDeposit=function(t){return!this._deposits.find(function(e){return e.txId==t.txId})&&(this._deposits.push(t),this._deposited=this._deposited.plus(t.amount),!0)},Object.defineProperty(t.prototype,"onChainDeposit",{get:function(){return this._depositedOnChain},set:function(t){this._depositedOnChain=t},enumerable:!0,configurable:!0}),t.prototype.isCancelledTransfer=function(t){return void 0!=this.cancelledTransfers.find(function(e){return e.id==t.id})},t.prototype.addCancelledTransfer=function(t){this.isCancelledTransfer(t)||this._cancelledTransfers.push(t)},Object.defineProperty(t.prototype,"cancelledTransfers",{get:function(){return this._cancelledTransfers},enumerable:!0,configurable:!0}),t.prototype.isPendingIncomingTransfer=function(t){return void 0!=this.pendingIncomingTransfers.find(function(e){return e.id==t.id})},t.prototype.addPendingIncomingTransfer=function(t){this.isPendingIncomingTransfer(t)||this._pendingIncomingTransfers.push(t)},t.prototype.removePendingIncomingTransfer=function(t){var e=this.pendingIncomingTransfers.findIndex(function(e){return e.id==t.id});-1!=e&&this.pendingIncomingTransfers.splice(e,1)},Object.defineProperty(t.prototype,"pendingIncomingTransfers",{get:function(){return this._pendingIncomingTransfers},enumerable:!0,configurable:!0}),t}();e.Round=c},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0);e.filter=function(t,e){return function(n){return n.lift(new s(t,e))}};var s=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.predicate,this.thisArg))},t}(),u=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return i(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},e}(o.Subscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0);e.defaultIfEmpty=function(t){return void 0===t&&(t=null),function(e){return e.lift(new s(t))}};var s=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.defaultValue))},t}(),u=function(t){function e(e,n){var r=t.call(this,e)||this;return r.defaultValue=n,r.isEmpty=!0,r}return i(e,t),e.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(o.Subscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),s=n(2),u=n(21),a=n(23);e.mergeMap=function t(e,n,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"function"==typeof n?function(i){return i.pipe(t(function(t,r){return a.from(e(t,r)).pipe(u.map(function(e,i){return n(t,e,r,i)}))},r))}:("number"==typeof n&&(r=n),function(t){return t.lift(new c(e,r))})};var c=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.project,this.concurrent))},t}();e.MergeMapOperator=c;var l=function(t){function e(e,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=t.call(this,e)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return i(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){this.add(o.subscribeToResult(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(s.OuterSubscriber);e.MergeMapSubscriber=l},function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}Object.defineProperty(e,"__esModule",{value:!0}),e.getSymbolIterator=r,e.iterator=r(),e.$$iterator=e.iterator},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.observable="function"==typeof Symbol&&Symbol.observable||"@@observable"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(9);function i(t){return"function"==typeof t?t.name:"symbol"==typeof t?t.toString():t}function o(t){if(t.name)return t.name;var e=t.toString(),n=e.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+e}e.getServiceIdentifierAsString=i,e.listRegisteredBindingsForServiceIdentifier=function(t,e,n){var r="",i=n(t,e);return 0!==i.length&&(r="\nRegistered bindings:",i.forEach(function(t){var e="Object";null!==t.implementationType&&(e=o(t.implementationType)),r=r+"\n "+e,t.constraint.metaData&&(r=r+" - "+t.constraint.metaData)})),r},e.circularDependencyToException=function t(e){e.childRequests.forEach(function(e){if(function t(e,n){return null!==e.parentRequest&&(e.parentRequest.serviceIdentifier===n||t(e.parentRequest,n))}(e,e.serviceIdentifier)){var n=function t(e,n){void 0===n&&(n=[]);var r=i(e.serviceIdentifier);return n.push(r),null!==e.parentRequest?t(e.parentRequest,n):n}(e).reverse().join(" --\x3e ");throw new Error(r.CIRCULAR_DEPENDENCY+" "+n)}t(e)})},e.listMetadataForTarget=function(t,e){if(e.isTagged()||e.isNamed()){var n="",r=e.getNamedTag(),i=e.getCustomTags();return null!==r&&(n+=r.toString()+"\n"),null!==i&&i.forEach(function(t){n+=t.toString()+"\n"})," "+t+"\n "+t+" - "+n}return" "+t},e.getFunctionName=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.DEBIT=0]="DEBIT",t[t.CREDIT=1]="CREDIT",t[t.FULFILLMENT=2]="FULFILLMENT",t[t.FINALIZATION=3]="FINALIZATION",t[t.FREEZING=4]="FREEZING",t[t.SENDER_CANCELLATION=5]="SENDER_CANCELLATION",t[t.RECIPIENT_CANCELLATION=6]="RECIPIENT_CANCELLATION"}(e.TransferAggregateType||(e.TransferAggregateType={}))},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(8)),o=n(6),s=function(){function t(t,e,n,r,o,s,u,a,c,l,h){this._contractAddress=t,this._tokenAddress=e,this._walletAddress=n,this._paint=r,this._trail=o,this._round=s,this._allotmentChain=u,this._membershipChain=a,this._values=c,this._left=l,this._right=h,this._values=c.map(function(t){return new i.default(t)}),this._left=new i.default(l),this._right=new i.default(h)}return t.fromJSON=function(e){return new t(e.contractAddress,e.tokenAddress,e.walletAddress,e.paint,e.trail,e.round,e.allotmentChain,e.membershipChain,e.values.map(function(t){return new i.default(t)}),new i.default(e.left),new i.default(e.right))},t.checksumPaint=function(t,e,n,r){return o.Web3Utils.soliditySha3({type:"bytes32",value:o.Web3Utils.soliditySha3({type:"address",value:e})},{type:"bytes32",value:o.Web3Utils.soliditySha3({type:"address",value:n})},{type:"bytes32",value:o.Web3Utils.soliditySha3({type:"address",value:r})},{type:"bytes32",value:t}).toString()},Object.defineProperty(t.prototype,"json",{get:function(){return{contractAddress:this._contractAddress,tokenAddress:this._tokenAddress,walletAddress:this._walletAddress,paint:this._paint,trail:this._trail,round:this._round,allotmentChain:this._allotmentChain,membershipChain:this._membershipChain,values:this._values.map(function(t){return t.toFixed(0)}),left:this._left.toFixed(0),right:this._right.toFixed(0)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paint",{get:function(){return this._paint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"round",{get:function(){return this._round},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"amount",{get:function(){return this._right.minus(this._left)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"walletAddress",{get:function(){return this._walletAddress},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contractAddress",{get:function(){return this._contractAddress},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tokenAddress",{get:function(){return this._tokenAddress},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trail",{get:function(){return this._trail},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allotmentChain",{get:function(){return this._allotmentChain},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"membershipChain",{get:function(){return this._membershipChain},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"values",{get:function(){return this._values},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this._left},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this._right},enumerable:!0,configurable:!0}),t}();e.ProofOfStake=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return Object.defineProperty(t.prototype,"id",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hash",{get:function(){return""},enumerable:!0,configurable:!0}),t}();e.Hashable=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(50),i=n(51),o=n(32),s=n(98);e.reduce=function(t,e){return arguments.length>=2?function(n){return s.pipe(r.scan(t,e),i.takeLast(1),o.defaultIfEmpty(e))(n)}:function(e){return s.pipe(r.scan(function(e,n,r){return t(e,n,r+1)}),i.takeLast(1))(e)}}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){var n=t.call(this,"no elements in sequence")||this;return n.name="EmptyError",Object.setPrototypeOf(n,e.prototype),n}return i(e,t),e}(Error);e.EmptyError=o},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){var n=t.call(this,"argument out of range")||this;return n.name="ArgumentOutOfRangeError",Object.setPrototypeOf(n,e.prototype),n}return i(e,t),e}(Error);e.ArgumentOutOfRangeError=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.identity=function(t){return t}},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=this&&this.__param||function(t,e){return function(n,r){e(n,r,t)}},s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{a(r.next(t))}catch(t){o(t)}}function u(t){try{a(r.throw(t))}catch(t){o(t)}}function a(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,u)}a((r=r.apply(t,e||[])).next())})},u=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var c=n(14),l=n(15),h=n(38),f=n(104),p=n(6),d=n(30),g=n(27),y=a(n(8)),m=n(26),v=n(46),b=n(17),_=n(234),w=function(){function t(t){this.web3=t,this.contracts=new Map}return e=t,t.promiseExecutor=function(t,e){return function(n,r){n?e(n):t(r)}},t.bigNumberValueOfResult=function(t){return new y.default(t.valueOf())},t.intValueOfResult=function(t){return parseInt(t.valueOf(),10)},t.valueOfResult=function(t,e){return e?t[e].valueOf():t.valueOf()},t.indexedValueOfResult=function(t){return function(n){return e.valueOfResult(n,t)}},t.prototype.getABI=function(t,e){return void 0===e&&(e=f.PAYMENT_HUB_ABI),this.contracts.has(t)||this.contracts.set(t,this.web3.rpc.eth.contract(e).at(t)),this.contracts.get(t)},Object.defineProperty(t.prototype,"available",{get:function(){return this.web3&&this.web3.isConnected},enumerable:!0,configurable:!0}),t.prototype.networkId=function(){var t=this;return new Promise(function(n,r){t.web3.rpc.version.getNetwork(e.promiseExecutor(n,r))}).then(e.intValueOfResult)},t.prototype.latestBlock=function(){var t=this;return new Promise(function(n,r){t.web3.rpc.eth.getBlock("latest",!1,e.promiseExecutor(n,r))})},t.prototype.latestBlockWithTransactions=function(){var t=this;return new Promise(function(n,r){t.web3.rpc.eth.getBlock("latest",!0,e.promiseExecutor(n,r))})},t.prototype.genesis=function(t){var n=this;return new Promise(function(r,i){n.getABI(t).genesis.call(e.promiseExecutor(r,i))}).then(e.intValueOfResult)},t.prototype.getLiveChallenges=function(t,n){var r=this;return new Promise(function(i,o){r.getABI(n).getLiveChallenges.call(t,e.promiseExecutor(i,o))}).then(e.intValueOfResult)},t.prototype.currentRound=function(t){var e=this;return new Promise(function(n,r){e.latestBlock().then(function(r){return e.genesis(t).then(function(i){return e.getBlocksPerRound(t).then(function(t){return n(parseInt(((r.number-i)/t).toString(),10)+1)})})}).catch(r)})},t.prototype.nextBlockRound=function(t){var n=this;return new Promise(function(r,i){n.getABI(t).currentRound.call(e.promiseExecutor(r,i))}).then(e.intValueOfResult)},t.prototype.currentSubBlock=function(t){var e=this;return new Promise(function(n,r){e.latestBlock().then(function(r){return e.genesis(t).then(function(i){return e.getBlocksPerRound(t).then(function(t){return n((r.number-i)%t)})})}).catch(r)})},t.prototype.nextBlockSubBlock=function(t){var n=this;return new Promise(function(r,i){n.getABI(t).currentSubBlock.call(e.promiseExecutor(r,i))}).then(e.intValueOfResult)},t.prototype.lastSubmissionRound=function(t){var n=this;return new Promise(function(r,i){n.getABI(t).lastSubmissionRound.call(e.promiseExecutor(r,i))}).then(e.intValueOfResult)},t.prototype.balance=function(t,n){var r=this;return void 0===n&&(n=null),n?new Promise(function(i,o){r.getABI(n,_.ERC20_ABI).balanceOf.call(p.add0xPrefix(t),e.promiseExecutor(i,o))}).then(e.bigNumberValueOfResult):new Promise(function(n,i){r.web3.rpc.eth.getBalance(p.add0xPrefix(t),e.promiseExecutor(n,i))}).then(e.bigNumberValueOfResult)},t.prototype.allowance=function(t,n,r){var i=this;return new Promise(function(o,s){i.getABI(t,_.ERC20_ABI).allowance.call(p.add0xPrefix(n),p.add0xPrefix(r),e.promiseExecutor(o,s))}).then(e.bigNumberValueOfResult)},t.prototype.pendingWithdrawals=function(t,n,r,i){var o=this;return new Promise(function(s,u){o.getABI(i).getPendingWithdrawalsAtSlot.call(p.add0xPrefix(t),n%r,e.promiseExecutor(s,u))}).then(e.bigNumberValueOfResult)},t.prototype.getBlocksPerRound=function(t){var n=this;return new Promise(function(r,i){n.getABI(t).BLOCKS_PER_ROUND.call(e.promiseExecutor(r,i))}).then(e.intValueOfResult)},t.prototype.getSlackPeriod=function(t){var n=this;return new Promise(function(r,i){n.getABI(t).SLACK_PERIOD.call(e.promiseExecutor(r,i))}).then(e.intValueOfResult)},t.prototype.getExtendedSlackPeriod=function(t){var n=this;return new Promise(function(r,i){n.getABI(t).EXTENDED_SLACK_PERIOD.call(e.promiseExecutor(r,i))}).then(e.intValueOfResult)},t.prototype.getRoundsKept=function(t){var n=this;return new Promise(function(r,i){n.getABI(t).ROUNDS_KEPT.call(e.promiseExecutor(r,i))}).then(e.intValueOfResult)},t.prototype.getDepositsKept=function(t){var n=this;return new Promise(function(r,i){n.getABI(t).DEPOSITS_KEPT.call(e.promiseExecutor(r,i))}).then(e.intValueOfResult)},t.prototype.getChallengeCost=function(t){var n=this;return new Promise(function(r,i){n.getABI(t).MIN_GAS_COST.call(e.promiseExecutor(r,i))}).then(e.bigNumberValueOfResult)},t.prototype.recordBook=function(t,n,r){var i=this;return new Promise(function(o,s){i.getABI(r).getWallet.call(p.add0xPrefix(t),n,e.promiseExecutor(o,s))})},t.prototype.checkpoint=function(t,n,r){var i=this;return new Promise(function(o,s){i.getABI(n).getCheckpointAtSlot.call(t%r,e.promiseExecutor(o,s))}).then(e.valueOfResult)},t.prototype.metamaskHashFix=function(t){return this.web3.rpc.currentProvider.isMetaMask?p.Web3Utils.soliditySha3("Ethereum Signed Message:\n32",t):t},t.lqdWrapper=function(t){return p.Web3Utils.soliditySha3("Liquidity.Network Authorization:\n32",t)},t.prototype.vrs=function(t){var e=p.remove0xPrefix(t),n=parseInt(e.slice(128,130),16);return n<27&&(n+=27),e.slice(0,128)+this.web3.rpc.toHex(n).slice(2)},t.prototype.signPersonalInternal=function(t,n){var r=this;return new Promise(function(i,o){r.web3.rpc.personal.sign(e.lqdWrapper(t),n,e.promiseExecutor(i,o))})},t.prototype.signPersonal=function(t,e){return this.signPersonalInternal(t,e).then(function(n){return g.Signature.fromRSV(e,t,n)})},t.prototype.signRawInternal=function(t,n){var r=this;return new Promise(function(i,o){r.web3.rpc.eth.sign(n,r.metamaskHashFix(e.lqdWrapper(t)),e.promiseExecutor(i,o))})},t.prototype.signRaw=function(t,e){return this.signRawInternal(t,e).then(function(n){return g.Signature.fromRSV(e,t,n)})},Object.defineProperty(t.prototype,"canSignPersonal",{get:function(){return this.web3.rpc.personal&&this.web3.rpc.personal.sign},enumerable:!0,configurable:!0}),t.prototype.sign=function(t,e){return this.canSignPersonal?this.signPersonal(e,t):this.signRaw(e,t)},t.prototype.recoverSigningAddress=function(t,n){var r=this;return new Promise(function(i,o){r.getABI(n).signedMessageECRECOVER.call(t.checksum,p.add0xPrefix(t.r),p.add0xPrefix(t.s),p.add0xPrefix(t.v),e.promiseExecutor(i,o))})},t.prototype.validateAggregateSignature=function(t,e,n){return this.verifyProofOfTransitionAgreement(t.tokenAddress,t.walletAddress,t.trailIdentifier,t.round,t.transferTree.hash,t.spent,t.gained,e,n).then(function(e){return e&&p.isSameHexValue(e.toString(),t.hash)}).catch(function(t){return b.Logging.error("Transition Agreement Check Rejected: "+t),!1})},t.prototype.validateDataAggregate=function(t,e,n,r,i,o,s){var u=this;return b.Logging.debug("validateDataAggregate"),new Promise(function(a,c){var l=p.isSameHexValue(n.address,t.wallet.address)&&p.isSameHexValue(n.token,t.wallet.token),h=l?t.wallet_trail_identifier:t.recipient_trail_identifier,f=l?t.recipient:t.wallet,d=m.Aggregate.checksum(i,o,n.address,h,t.round,e.tx_set_hash,new y.default(e.updated_spendings),new y.default(e.updated_gains)),v=p.isSameHexValue(r,n.address)?g.Signature.fromRSV(r,d,e.wallet_signature):g.Signature.fromRSV(r,d,e.hub_signature);u.verifyProofOfTransitionAgreement(o,n.address,h,t.round,e.tx_set_hash,new y.default(e.updated_spendings),new y.default(e.updated_gains),v,i).then(function(n){if(!p.isSameHexValue(n,d))return a(!1);b.Logging.debug(n),s?u.verifyProofOfSwapAggregationRaw(t.wallet.token,t.recipient.token,e.tx_set_index,e.tx_set_proof,new y.default(t.amount),new y.default(t.amount_swapped),s,t.recipient_trail_identifier,new y.default(t.nonce),e.tx_set_hash,i).then(a):u.verifyProofOfTransferAggregationRaw(e.tx_set_index,e.tx_set_proof,f.address,new y.default(t.amount),t.recipient_trail_identifier,new y.default(t.nonce),e.tx_set_hash,i).then(a)}).catch(c)})},t.prototype.validateTransferDebit=function(t,e,n,r){var i=this;return b.Logging.debug("validateTransferDebit"),new Promise(function(o,s){var u=m.Aggregate.checksum(n,r,t.wallet.address,t.wallet_trail_identifier,t.round,t.sender_aggregate.tx_set_hash,new y.default(t.sender_aggregate.updated_spendings),new y.default(t.sender_aggregate.updated_gains)),a=p.isSameHexValue(e,t.wallet.address)?g.Signature.fromRSV(e,u,t.sender_aggregate.wallet_signature):g.Signature.fromRSV(e,u,t.sender_aggregate.hub_signature);i.verifyProofOfTransitionAgreement(r,t.wallet.address,t.wallet_trail_identifier,t.round,t.sender_aggregate.tx_set_hash,new y.default(t.sender_aggregate.updated_spendings),new y.default(t.sender_aggregate.updated_gains),a,n).then(function(e){if(!p.isSameHexValue(e,u))return o(!1);b.Logging.debug(e),i.verifyProofOfTransferAggregationRaw(t.sender_aggregate.tx_set_index,t.sender_aggregate.tx_set_proof,t.recipient.address,new y.default(t.amount),t.recipient_trail_identifier,new y.default(t.nonce),t.sender_aggregate.tx_set_hash,n).then(o)}).catch(s)})},t.prototype.validateTransferCredit=function(t,e,n,r){var i=this;return b.Logging.debug("validateTransferCredit"),new Promise(function(o,s){var u=m.Aggregate.checksum(n,r,t.recipient.address,t.recipient_trail_identifier,t.round,t.recipient_aggregate.tx_set_hash,new y.default(t.recipient_aggregate.updated_spendings),new y.default(t.recipient_aggregate.updated_gains)),a=p.isSameHexValue(e,t.recipient.address)?g.Signature.fromRSV(e,u,t.recipient_aggregate.wallet_signature):g.Signature.fromRSV(e,u,t.recipient_aggregate.hub_signature);i.verifyProofOfTransitionAgreement(r,t.recipient.address,t.recipient_trail_identifier,t.round,t.recipient_aggregate.tx_set_hash,new y.default(t.recipient_aggregate.updated_spendings),new y.default(t.recipient_aggregate.updated_gains),a,n).then(function(e){if(!p.isSameHexValue(e,u))return o(!1);b.Logging.debug(e),i.verifyProofOfTransferAggregationRaw(t.recipient_aggregate.tx_set_index,t.recipient_aggregate.tx_set_proof,t.wallet.address,new y.default(t.amount),t.recipient_trail_identifier,new y.default(t.nonce),t.recipient_aggregate.tx_set_hash,n).then(o)}).catch(s)})},t.prototype.validateDeliveryProof=function(t,e,n,r){var i=this;return b.Logging.debug("validateDeliveryProof"),new Promise(function(o,s){var u=new d.Round(n,r,t.recipient,t.recipientTrailIdentifier,t.round+1),a=e.delivery_proof,c=a.merkle_proof,l=new h.ProofOfStake(n,r,t.recipient,c.paint,t.recipientTrailIdentifier,t.round+1,c.allotment_chain,c.membership_chain,c.values.map(function(t){return new y.default(t)}),new y.default(c.left),new y.default(c.right));i.verifyProof(u,l).then(function(e){if(!e)return b.Logging.error("Invalid recipient proof of stake"),o(!1);var u=a.final_aggregate;i.getHubOwnerAddress(n).then(function(e){var l=m.Aggregate.checksum(n,r,t.recipient,t.recipientTrailIdentifier,t.round,u.tx_set_hash,new y.default(u.updated_spendings),new y.default(u.updated_gains));if(!p.isSameHexValue(l,c.paint)){var f=h.ProofOfStake.checksumPaint(l,n,r,t.recipient);return b.Logging.error(l),b.Logging.error(f),b.Logging.error(c.paint),b.Logging.error("Mismatching paint."),o(!1)}var d=g.Signature.fromRSV(e,l,u.hub_signature);i.verifyProofOfTransitionAgreement(r,t.recipient,t.recipientTrailIdentifier,t.round,u.tx_set_hash,new y.default(u.updated_spendings),new y.default(u.updated_gains),d,n).then(function(e){if(!p.isSameHexValue(e,l))return b.Logging.error("Mismatching aggregate checksumTransfer by hub"),b.Logging.error(e),b.Logging.error(l),o(!1);var c=g.Signature.fromRSV(t.recipient,l,u.wallet_signature);i.verifyProofOfTransitionAgreement(r,t.recipient,t.recipientTrailIdentifier,t.round,u.tx_set_hash,new y.default(u.updated_spendings),new y.default(u.updated_gains),c,n).then(function(e){if(!p.isSameHexValue(e,l))return b.Logging.error("Mismatching aggregate checksumTransfer by wallet"),b.Logging.error(e),b.Logging.error(l),o(!1);i.verifyProofOfTransferAggregationRaw(a.transfer_membership_trail,a.transfer_membership_chain,t.sender,t.amount,t.recipientTrailIdentifier,t.nonce,u.tx_set_hash,n).then(o)}).catch(s)}).catch(s)})}).catch(s)})},t.prototype.recoverPersonal=function(t,n){var r=this;return new Promise(function(t,i){r.web3.rpc.personal.ecRecover(n.checksum,p.add0xPrefix(n.rsv),e.promiseExecutor(t,i))})},t.prototype.validateSignature=function(t,e){return this.recoverSigningAddress(t,e).then(function(e){return p.isSameHexValue(e,t.address)}).catch(function(){return!1})},t.prototype.getHubOwnerAddress=function(t){var n=this;return new Promise(function(r,i){n.getABI(t).owner.call(e.promiseExecutor(r,i))})},t.prototype.validateHubSignature=function(t,e){var n=this;return this.getHubOwnerAddress(e).then(function(r){return n.recoverSigningAddress(t,e).then(function(t){return p.isSameHexValue(t,r)})}).catch(function(){return!1})},t.prototype.doNothingOnce=function(t,n){var r=this;return new Promise(function(i,o){r.getABI(n).doNothing.sendTransaction({from:t},e.promiseExecutor(i,o))})},t.prototype.doNothing=function(t,e,n){var r=this;return new Promise(function(i,o){return s(r,void 0,void 0,function(){var r;return u(this,function(o){switch(o.label){case 0:r=0,o.label=1;case 1:return r<t?[4,this.doNothingOnce(e,n)]:[3,4];case 2:o.sent(),o.label=3;case 3:return r++,[3,1];case 4:return i(!0),[2]}})})})},t.prototype.getDeposits=function(t,n,r,i,o){var s=this;return new Promise(function(u,a){if(n<1)return u(void 0);s.getABI(o).getDepositAggregateAtSlot.call(i,t,n%r,e.promiseExecutor(u,a))}).then(function(t){return t&&t[0].valueOf()==n?new y.default(t[1].valueOf()):new y.default(0)})},t.prototype.getTotalDepositAtSlot=function(t,n,r){var i=this;return new Promise(function(o,s){i.getABI(r).getDepositsAtSlot.call(n,t,e.promiseExecutor(o,s))}).then(function(t){return new y.default(t[1].valueOf())})},t.prototype.getTotalDepositRoundAtSlot=function(t,n,r){var i=this;return new Promise(function(o,s){i.getABI(r).getDepositsAtSlot.call(n,t,e.promiseExecutor(o,s))}).then(function(t){return t[0].valueOf()})},t.prototype.getPendingWithdrawalsAtSlot=function(t,n,r){var i=this;return new Promise(function(o,s){i.getABI(r).getPendingWithdrawalsAtSlot.call(n,t,e.promiseExecutor(o,s))}).then(function(t){return new y.default(t[1].valueOf())})},t.prototype.getPendingWithdrawalsRoundAtSlot=function(t,n,r){var i=this;return new Promise(function(o,s){i.getABI(r).getPendingWithdrawalsAtSlot.call(n,t,e.promiseExecutor(o,s))}).then(function(t){return t[0].valueOf()})},t.prototype.getConfirmedWithdrawalsAtSlot=function(t,n,r){var i=this;return new Promise(function(o,s){i.getABI(r).getConfirmedWithdrawalsAtSlot.call(n,t,e.promiseExecutor(o,s))}).then(function(t){return new y.default(t[1].valueOf())})},t.prototype.getConfirmedWithdrawalsRoundAtSlot=function(t,n,r){var i=this;return new Promise(function(o,s){i.getABI(r).getConfirmedWithdrawalsAtSlot.call(n,t,e.promiseExecutor(o,s))}).then(function(t){return t[0].valueOf()})},t.prototype.deposit=function(t,n,r,i){var o=this,s=p.isSameHexValue(t,i)?{value:n.toFixed(0),from:r}:{value:0,from:r};return new Promise(function(u,a){o.getABI(i).deposit.sendTransaction(p.add0xPrefix(t),r,n.toFixed(0),s,e.promiseExecutor(u,a))})},t.prototype.enableERC20Deposits=function(t,n,r){var i=this;return new Promise(function(o,s){i.getABI(t,_.ERC20_ABI).approve.sendTransaction(p.add0xPrefix(r),new y.default(2).pow(256).minus(1).toFixed(0),{from:n},e.promiseExecutor(o,s))})},t.prototype.requestWithdrawal=function(t,n,r,i,o){var s=this;return new Promise(function(u,a){s.getABI(i).requestWithdrawal.sendTransaction(r.tokenAddress,r.paint,r.trail,r.allotmentChain.map(function(t){return p.add0xPrefix(t)}),r.membershipChain.map(function(t){return p.add0xPrefix(t)}),r.values.map(function(t){return t.toFixed(0)}),[r.left.toFixed(0),r.right.toFixed(0)],t.toFixed(0),{from:n,value:o.multipliedBy("100100").toFixed(0)},e.promiseExecutor(u,a))})},t.prototype.confirmWithdrawal=function(t,n,r){var i=this;return new Promise(function(o,s){i.getABI(r).confirmWithdrawal.sendTransaction(p.add0xPrefix(t),p.add0xPrefix(n),{from:n},e.promiseExecutor(o,s))})},t.prototype.hasOutstandingChallenges=function(t){var n=this;return new Promise(function(r,i){n.getABI(t).hasOutstandingChallenges.call(e.promiseExecutor(r,i))})},t.prototype.hasMissedCheckpointSubmission=function(t){var n=this;return new Promise(function(r,i){n.getABI(t).hasMissedCheckpointSubmission.call(e.promiseExecutor(r,i))})},t.prototype.isPunished=function(t){var e=this;return new Promise(function(n,r){e.hasOutstandingChallenges(t).then(function(i){return i?n(!0):e.hasMissedCheckpointSubmission(t).then(n).catch(r)}).catch(r)})},t.prototype.estimateChallengeInitialEmptyStateCost=function(t,n,r,i,o,s,u,a){var c=this;return b.Logging.debug("estimateChallengeInitialEmptyStateCost"),new Promise(function(l,h){c.balance(n).then(function(f){c.getABI(a).submitInitialEmptyState.estimateGas(t,i,r,[o.toFixed(0),s.toFixed(0)],p.add0xPrefix(u.r),p.add0xPrefix(u.s),p.add0xPrefix(u.v),{from:n,value:f.toFixed(0)},e.promiseExecutor(l,h))}).catch(h)})},t.prototype.submitChallengeInitialEmptyState=function(t,n,r,i,o,s,u,a,c){var l=this;return b.Logging.debug("submitChallengeInitialEmptyState"),new Promise(function(h,f){l.getABI(c).submitInitialEmptyState.sendTransaction(t,i,r,[o.toFixed(0),s.toFixed(0)],p.add0xPrefix(u.r),p.add0xPrefix(u.s),p.add0xPrefix(u.v),{from:n,value:a.toFixed(0)},e.promiseExecutor(h,f))})},t.prototype.estimateChallengeInitialMerkleStateCost=function(t,n,r,i,o,s,u){var a=this;return b.Logging.debug("estimateChallengeInitialMerkleStateCost"),new Promise(function(c,l){a.balance(t).then(function(h){a.getABI(u).submitInitialMerkleState.estimateGas(n.tokenAddress,n.paint,n.trail,n.allotmentChain.map(function(t){return p.add0xPrefix(t)}),n.membershipChain.map(function(t){return p.add0xPrefix(t)}),n.values.map(function(t){return t.toFixed(0)}),[n.left.toFixed(0),n.right.toFixed(0)],[i.toFixed(0),o.toFixed(0)],[p.add0xPrefix(s.r),p.add0xPrefix(s.s),r],p.add0xPrefix(s.v),{from:t,value:h.toFixed(0)},e.promiseExecutor(c,l))}).catch(l)})},t.prototype.submitChallengeInitialMerkleState=function(t,n,r,i,o,s,u,a){var c=this;return b.Logging.debug("submitChallengeInitialMerkleState"),new Promise(function(l,h){c.getABI(a).submitInitialMerkleState.sendTransaction(n.tokenAddress,n.paint,n.trail,n.allotmentChain.map(function(t){return p.add0xPrefix(t)}),n.membershipChain.map(function(t){return p.add0xPrefix(t)}),n.values.map(function(t){return t.toFixed(0)}),[n.left.toFixed(0),n.right.toFixed(0)],[i.toFixed(0),o.toFixed(0)],[p.add0xPrefix(s.r),p.add0xPrefix(s.s),r],p.add0xPrefix(s.v),{from:t,value:u.toFixed(0)},e.promiseExecutor(l,h))})},t.prototype.estimateDeliveryCommitmentCost=function(t,n,r,i,o,s,u,a,c,l,h,f,d,g,y){var m=this;return b.Logging.debug("estimateDeliveryCommitmentCost"),new Promise(function(v,b){m.balance(n).then(function(_){m.getABI(y).submitDeliveryCommitment.estimateGas(p.add0xPrefix(t),[p.add0xPrefix(r),p.add0xPrefix(i)],[o.toFixed(0),d.toFixed(0)],[s,u,a],c.map(function(t){return p.add0xPrefix(t)}),[h.toFixed(0),f.toFixed(0)],[p.add0xPrefix(g.r),p.add0xPrefix(g.s),p.add0xPrefix(l)],p.add0xPrefix(g.v),{from:n,value:_.toFixed(0)},e.promiseExecutor(v,b))}).catch(b)})},t.prototype.submitDeliveryCommitment=function(t,n,r,i,o,s,u,a,c,l,h,f,d,g,y,m){var v=this;return b.Logging.debug("submitDeliveryCommitment"),new Promise(function(b,_){v.getABI(m).submitDeliveryCommitment.sendTransaction(p.add0xPrefix(t),[p.add0xPrefix(r),p.add0xPrefix(i)],[o.toFixed(0),d.toFixed(0)],[s,u,a],c.map(function(t){return p.add0xPrefix(t)}),[h.toFixed(0),f.toFixed(0)],[p.add0xPrefix(g.r),p.add0xPrefix(g.s),p.add0xPrefix(l)],p.add0xPrefix(g.v),{from:n,value:y.toFixed(0)},e.promiseExecutor(b,_))})},t.prototype.getChallengeBook=function(t,n,r,i){var o=this;return new Promise(function(s,u){o.getABI(i).getChallenge.call(p.add0xPrefix(t),n,r,e.promiseExecutor(s,u))})},t.prototype.verifyProofOfTransferAggregationRaw=function(t,n,r,i,o,s,u,a){var c=this;return b.Logging.debug("verifyProofOfTransferAggregationRaw"),new Promise(function(l,h){var f=v.Transfer.checksumTransfer(r,i,o,s);c.getABI(a).verifyProofOfMembership.call(t,n.map(function(t){return p.add0xPrefix(t)}),p.add0xPrefix(f),p.add0xPrefix(u),e.promiseExecutor(l,h))})},t.prototype.verifyProofOfSwapAggregationRaw=function(t,n,r,i,o,s,u,a,c,l,h){var f=this;return b.Logging.debug("verifyProofOfSwapAggregationRaw"),b.Logging.debug([t,n,r,i,o,s,u,a,c,l,h]),new Promise(function(d,g){var y=v.Transfer.checksumSwap(t,n,a,o,s,u,c);f.getABI(h).verifyProofOfMembership.call(r,i.map(function(t){return p.add0xPrefix(t)}),p.add0xPrefix(y),p.add0xPrefix(l),e.promiseExecutor(d,g))})},t.prototype.verifyProofOfTransitionAgreement=function(t,n,r,i,o,s,u,a,c){var l=this;return b.Logging.debug("verifyProofOfTransitionAgreement"),b.Logging.debug([p.add0xPrefix(t),p.add0xPrefix(n),r,i,p.add0xPrefix(o),[s.toFixed(0),u.toFixed(0)],p.add0xPrefix(a.address),p.add0xPrefix(a.r),p.add0xPrefix(a.s),p.add0xPrefix(a.v)]),new Promise(function(h,f){l.getABI(c).verifyProofOfTransitionAgreement.call(p.add0xPrefix(t),p.add0xPrefix(n),r,i,p.add0xPrefix(o),[s.toFixed(0),u.toFixed(0)],p.add0xPrefix(a.address),p.add0xPrefix(a.r),p.add0xPrefix(a.s),p.add0xPrefix(a.v),e.promiseExecutor(h,f))}).then(e.valueOfResult)},t.prototype.verifyProof=function(t,e){return b.Logging.debug("verifyProof"),this.verifyProofRaw(t.tokenAddress,t.walletAddress,e.paint,e.trail,t.roundNumber,e.allotmentChain,e.membershipChain,e.values.map(function(t){return t.toFixed(0)}),e.left.toFixed(0),e.right.toFixed(0),t.contractAddress)},t.prototype.verifyProofRaw=function(t,n,r,i,o,s,u,a,c,l,h){var f=this;return b.Logging.debug("verifyProofRaw"),b.Logging.debug([t,n,r,i,o,s,u,a,[c,l]]),new Promise(function(d,g){f.getABI(h).verifyProofOfStake.call(p.add0xPrefix(t),p.add0xPrefix(n),p.add0xPrefix(r),i,o,s,u,a,[c,l],e.promiseExecutor(d,g))})},t.prototype.getStateUpdateEvents=function(t,n,r){var i=this;return new Promise(function(o,s){i.getABI(r).StateUpdate({token:p.add0xPrefix(t),account:n},{fromBlock:0,toBlock:"latest"}).get(e.promiseExecutor(o,s))})},t.prototype.getStateUpdateEventAtRound=function(t,n,r,i){var o=this;return new Promise(function(s,u){o.getABI(i).StateUpdate({token:p.add0xPrefix(t),account:n,round:r},{fromBlock:0,toBlock:"latest"}).get(e.promiseExecutor(s,u))})},t.prototype.recoverOnlyOnChainFunds=function(t,n,r){var i=this;return new Promise(function(o,s){i.getABI(r).recoverOnlyOnChainFunds.sendTransaction(p.add0xPrefix(t),{from:n},e.promiseExecutor(o,s))})},t.prototype.getReclaimableOnChainFunds=function(t,n,r){var i=this;return new Promise(function(o,s){i.getABI(r).recoverOnlyOnChainFunds.call(p.add0xPrefix(t),{from:n},e.promiseExecutor(o,s))}).then(e.bigNumberValueOfResult)},t.prototype.recoverAllFunds=function(t){var n=this;return new Promise(function(r,i){n.getABI(t.contractAddress).recoverAllFunds.sendTransaction(t.tokenAddress,t.paint,t.trail,t.allotmentChain,t.membershipChain,t.values.map(function(t){return t.toFixed(0)}),[t.left.toFixed(0),t.right.toFixed(0)],{from:t.walletAddress},e.promiseExecutor(r,i))})},t.prototype.getAllReclaimableFunds=function(t){var n=this;return new Promise(function(r,i){n.getABI(t.contractAddress).recoverAllFunds.call(p.add0xPrefix(t.tokenAddress),p.add0xPrefix(t.paint),t.trail,t.allotmentChain.map(function(t){return p.add0xPrefix(t)}),t.membershipChain.map(function(t){return p.add0xPrefix(t)}),t.values.map(function(t){return t.toFixed(0)}),[t.left.toFixed(0),t.right.toFixed(0)],{from:t.walletAddress},e.promiseExecutor(r,i))}).then(e.bigNumberValueOfResult)},t.prototype.testrpcMineBlock=function(){var t=this;return new Promise(function(n,r){t.web3.rpc.currentProvider.sendAsync({jsonrpc:"2.0",method:"evm_mine",id:12345,params:[]},e.promiseExecutor(n,r))})},t=e=r([c.injectable(),o(0,c.inject(l.TYPES.EXTERNAL.WEB3_SERVICE_INTERFACE)),i("design:paramtypes",[Object])],t);var e}();e.ContractApiService=w},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(39),u=o(n(8)),a=n(6),c=function(t){function e(e,n,r,i,o){var s=t.call(this)||this;return s._contractAddress=e,s._tokenAddress=n,s._address=r,s._round=i,s._amount=o,s}return i(e,t),e.fromJSON=function(t){return new e(t.contractAddress,t.tokenAddress,t.address,t.round,new u.default(t.amount))},Object.defineProperty(e.prototype,"json",{get:function(){return{contractAddress:this._contractAddress,tokenAddress:this._tokenAddress,address:this._address,round:this._round,amount:this._amount}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"address",{get:function(){return this._address},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tokenAddress",{get:function(){return this._tokenAddress},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"round",{get:function(){return this._round},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"amount",{get:function(){return this._amount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hash",{get:function(){return a.Web3Utils.soliditySha3({type:"bytes32",value:a.Web3Utils.soliditySha3({type:"address",value:this._contractAddress})},{type:"bytes32",value:a.Web3Utils.soliditySha3({type:"address",value:this._tokenAddress})},{type:"bytes32",value:a.Web3Utils.soliditySha3({type:"address",value:this._address})},{type:"uint256",value:this._round},{type:"uint256",value:this._amount.toFixed(0)}).toString()},enumerable:!0,configurable:!0}),e}(s.Hashable);e.BalanceMarker=c},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=o(n(8)),u=n(39),a=n(27),c=n(6),l=n(17),h=n(37),f=function(t){function e(e,n,r,i,o,u,a,c,l,h,f,p){var d=t.call(this)||this;return d._tokenAddress=e,d._address=n,d._round=r,d._amount=i,d._amountSwapped=o,d._startingBalance=u,d._recipientTokenAddress=a,d._recipient=c,d._recipientTrailIdentifier=l,d._target=h,d._nonce=f,d._txId=p,d._authorizations=new Map,d._confirmations=new Map,d._amount=new s.default(i),void 0===f&&(d._nonce=new s.default(Math.floor(1e8+899999999*Math.random()))),d}return i(e,t),e.fromJSON=function(t){var n=new e(t.tokenAddress,t.address,t.round,new s.default(t.amount),t.amountSwapped?new s.default(t.amountSwapped):null,t.startingBalance?new s.default(t.startingBalance):null,t.recipientTokenAddress,t.recipient,t.recipientTrailIdentifier,t.target,new s.default(t.nonce),t.txId);return n._authorizations=new Map(c.JSONbig.parse(t.authorizations)),n._confirmations=new Map(c.JSONbig.parse(t.confirmations).map(function(t){return[t[0],a.Signature.fromJSON(t[1])]})),n._deliveryProof=t.deliveryProof,n._amountsMatched=t.amountsMatched,n},e.checksumTransfer=function(t,e,n,r){return c.Web3Utils.soliditySha3({type:"bytes32",value:c.Web3Utils.soliditySha3({type:"address",value:t})},{type:"uint256",value:e.toFixed(0)},{type:"uint64",value:n},{type:"uint256",value:r.toFixed(0)}).toString()},e.checksumSwap=function(t,e,n,r,i,o,s){return c.Web3Utils.soliditySha3({type:"bytes32",value:c.Web3Utils.soliditySha3({type:"address",value:t})},{type:"bytes32",value:c.Web3Utils.soliditySha3({type:"address",value:e})},{type:"uint64",value:n},{type:"uint256",value:r.toFixed(0)},{type:"uint256",value:i.toFixed(0)},{type:"uint256",value:o.toFixed(0)},{type:"uint256",value:s.toFixed(0)}).toString()},e.checksumSwapFreeze=function(t,e,n){return c.Web3Utils.soliditySha3({type:"bytes32",value:c.Web3Utils.soliditySha3({type:"address",value:t})},{type:"bytes32",value:c.Web3Utils.soliditySha3({type:"address",value:e})},{type:"uint256",value:n.toFixed(0)}).toString()},Object.defineProperty(e.prototype,"json",{get:function(){return{tokenAddress:this._tokenAddress,address:this._address,round:this._round,amount:this._amount.toFixed(0),amountSwapped:this._amountSwapped?this._amountSwapped.toFixed(0):null,startingBalance:this._startingBalance?this._startingBalance.toFixed(0):null,recipientTokenAddress:this._recipientTokenAddress,recipient:this._recipient,recipientTrailIdentifier:this._recipientTrailIdentifier,target:this._target,nonce:this._nonce.toFixed(0),txId:this._txId,authorizations:c.JSONbig.stringify(Array.from(this._authorizations.entries())),confirmations:c.JSONbig.stringify(Array.from(this._confirmations.entries()).map(function(t){return[t[0],t[1].json]})),deliveryProof:this._deliveryProof,amountsMatched:this._amountsMatched}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSwap",{get:function(){return null!=this.amountSwapped&&void 0!=this.amountSwapped},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSwapActive",{get:function(){var t=this.confirmations.get(h.TransferAggregateType.DEBIT),e=this.confirmations.get(h.TransferAggregateType.CREDIT);return this.isSwap&&null!=t&&void 0!=t&&null!=e&&void 0!=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSwapFulfilled",{get:function(){var t=this.confirmations.get(h.TransferAggregateType.FULFILLMENT);return this.isSwap&&null!=t&&void 0!=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSwapFrozen",{get:function(){var t=this.confirmations.get(h.TransferAggregateType.FREEZING);return this.isSwap&&null!=t&&void 0!=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSwapCancelled",{get:function(){var t=this.confirmations.get(h.TransferAggregateType.SENDER_CANCELLATION);return this.isSwap&&null!=t&&void 0!=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSwapFinalized",{get:function(){var t=this.confirmations.get(h.TransferAggregateType.FINALIZATION);return this.isSwap&&null!=t&&void 0!=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.nonce},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"txId",{get:function(){return this._txId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hash",{get:function(){return this===e.PADDING_TRANSFER?"0x0000000000000000000000000000000000000000000000000000000000000000":this.isSwap?c.isSameHexValue(this._tokenAddress,this._target)&&(this.isSwapFulfilled||this.isSwapFinalized||this.isSwapFrozen||this.isSwapCancelled)?e.checksumSwap(this._tokenAddress,this._recipientTokenAddress,this.recipientTrailIdentifier,this.amount,this.amountSwapped,e.FULFILLED_SWAP_MARKER,this.nonce):e.checksumSwap(this._tokenAddress,this._recipientTokenAddress,this.recipientTrailIdentifier,this.amount,this.amountSwapped,this.startingBalance,this.nonce):e.checksumTransfer(this._target,this._amount,this._recipientTrailIdentifier,this._nonce)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cancellationHash",{get:function(){return e.checksumSwapFreeze(this.tokenAddress,this.recipientTokenAddress,this.nonce)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tokenAddress",{get:function(){return this._tokenAddress},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recipientTokenAddress",{get:function(){return this._recipientTokenAddress},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startingBalance",{get:function(){return this._startingBalance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sender",{get:function(){return this._address},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"round",{get:function(){return this._round},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"amount",{get:function(){return this._amount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"amountSwapped",{get:function(){return this._amountSwapped},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recipient",{get:function(){return this._recipient},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recipientTrailIdentifier",{get:function(){return this._recipientTrailIdentifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonce",{get:function(){return this._nonce},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"confirmations",{get:function(){return this._confirmations},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"authorizations",{get:function(){return this._authorizations},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deliveryProof",{get:function(){return this._deliveryProof},enumerable:!0,configurable:!0}),e.prototype.saveDeliveryProof=function(t){return this._deliveryProof?l.Logging.error("saveDeliveryProof repetition"):this._deliveryProof=t,this},Object.defineProperty(e.prototype,"amountsMatched",{get:function(){return this._amountsMatched},set:function(t){this._amountsMatched=t},enumerable:!0,configurable:!0}),e.PADDING_TRANSFER=new e("0x0000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000",0,new s.default(0),new s.default(0),new s.default(0),"0x0000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000",0,"0x0000000000000000000000000000000000000000",new s.default(0)),e.FULFILLED_SWAP_MARKER=new s.default(2).pow(256).minus(1),e}(u.Hashable);e.Transfer=f},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),s=n(1),u=n(21),a=n(23);e.switchMap=function t(e,n){return"function"==typeof n?function(r){return r.pipe(t(function(t,r){return a.from(e(t,r)).pipe(u.map(function(e,i){return n(t,e,r,i)}))}))}:function(t){return t.lift(new c(e))}};var c=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.project))},t}(),l=function(t){function e(e,n){var r=t.call(this,e)||this;return r.project=n,r.index=0,r}return i(e,t),e.prototype._next=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=this.innerSubscription;r&&r.unsubscribe(),this.add(this.innerSubscription=s.subscribeToResult(this,t,e,n))},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e}(o.OuterSubscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0);e.refCount=function(){return function(t){return t.lift(new s(t))}};var s=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new u(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i},t}(),u=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return i(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(o.Subscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0);e.scan=function(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new s(t,e,n))}};var s=function(){function t(t,e,n){void 0===n&&(n=!1),this.accumulator=t,this.seed=e,this.hasSeed=n}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.accumulator,this.seed,this.hasSeed))},t}(),u=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.accumulator=n,o._seed=r,o.hasSeed=i,o.index=0,o}return i(e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(t){this.destination.error(t)}this.seed=e,this.destination.next(e)},e}(o.Subscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),s=n(42),u=n(22);e.takeLast=function(t){return function(e){return 0===t?u.empty():e.lift(new a(t))}};var a=function(){function t(t){if(this.total=t,this.total<0)throw new s.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.total))},t}(),c=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.ring=new Array,r.count=0,r}return i(e,t),e.prototype._next=function(t){var e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t},e.prototype._complete=function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=e++%n;t.next(r[o])}t.complete()},e}(o.Subscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){var n=t.call(this,"object unsubscribed")||this;return n.name="ObjectUnsubscribedError",Object.setPrototypeOf(n,e.prototype),n}return i(e,t),e}(Error);e.ObjectUnsubscribedError=o},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),s=n(42),u=n(22);e.take=function(t){return function(e){return 0===t?u.empty():e.lift(new a(t))}};var a=function(){function t(t){if(this.total=t,this.total<0)throw new s.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.total))},t}(),c=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return i(e,t),e.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},e}(o.Subscriber)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(81),i=n(41);function o(){return new i.EmptyError}e.throwIfEmpty=function(t){return void 0===t&&(t=o),r.tap({hasValue:!1,next:function(){this.hasValue=!0},complete:function(){if(!this.hasValue)throw t()}})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(22),i=n(88),o=n(83),s=function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){switch(this.kind){case"N":return i.of(this.value);case"E":return o.throwError(this.error);case"C":return r.empty()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();e.Notification=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(33),i=n(43);e.mergeAll=function(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),r.mergeMap(i.identity,t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(19);e.isNumeric=function(t){return!r.isArray(t)&&t-parseFloat(t)+1>=0}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(225),s=function(t){function e(n,r){void 0===r&&(r=o.Scheduler.now);var i=t.call(this,n,function(){return e.delegate&&e.delegate!==i?e.delegate.now():r()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return i(e,t),e.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,i):t.prototype.schedule.call(this,n,r,i)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(o.Scheduler);e.AsyncScheduler=s},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return i(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(n(226).Action);e.AsyncAction=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.rxSubscriber="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("rxSubscriber"):"@@rxSubscriber",e.$$rxSubscriber=e.rxSubscriber},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hostReportError=function(t){setTimeout(function(){throw t})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=!1;e.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isFunction=function(t){return"function"==typeof t}},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=this&&this.__param||function(t,e){return function(n,r){e(n,r,t)}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(14),u=n(15),a=n(6),c=function(){function t(t){this.api=t}return t.prototype.getStatusData=function(t){return this.api.get(t,"audit/")},t.prototype.getTokensList=function(t){return this.api.get(t,"audit/tokens/")},t.prototype.getWalletData=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),this.api.get(t.webAddress,"audit/"+a.remove0xPrefix(t.tokenAddress)+"/"+a.remove0xPrefix(t.address)+"/","round_number="+e+"&transfer_id="+n)},t.prototype.whoisWallet=function(t,e,n){return this.api.get(n,"audit/"+a.remove0xPrefix(t)+"/"+a.remove0xPrefix(e)+"/whois")},t.prototype.getRoundTransfers=function(t,e,n){return this.api.get(t.webAddress,"transfer/","wallet__token__address="+a.remove0xPrefix(t.tokenAddress)+"&wallet__address="+a.remove0xPrefix(t.address)+"&recipient__address="+a.remove0xPrefix(e)+"&round="+n+"&ordering=id")},t.prototype.getTransfers=function(t,e){return this.api.get(t.webAddress,"transfer/","wallet__token__address="+a.remove0xPrefix(t.tokenAddress)+"&wallet__address="+a.remove0xPrefix(t.address)+"&recipient__address="+a.remove0xPrefix(e)+"&ordering=id")},t.prototype.getSwapOrders=function(t,e,n,r){return this.api.get(t.webAddress,"audit/swaps/"+a.remove0xPrefix(e)+"/"+a.remove0xPrefix(n),"round_number="+r)},t.prototype.register=function(t,e){return this.api.post(t.webAddress,"admission/",{token:a.remove0xPrefix(t.tokenAddress),address:a.remove0xPrefix(t.address),authorization:e.rsv})},t.prototype.getSLADetails=function(t){return this.api.get(t.webAddress,"sla/")},t.prototype.getSLAStatus=function(t){return this.api.get(t.webAddress,"sla/"+a.remove0xPrefix(t.address))},t.prototype.sendTransfer=function(t,e,n,r){return this.api.post(t.webAddress,"transfer/",{wallet_signature:{value:n.rsv},wallet_balance_signature:{value:r.rsv},round:e.round,amount:e.amount,nonce:e.nonce,wallet:{address:a.remove0xPrefix(e.sender),token:a.remove0xPrefix(t.tokenAddress)},recipient:a.remove0xPrefix(e.recipient)})},t.prototype.sendSwap=function(t,e,n,r,i,o,s){return this.api.post(t.webAddress,"swap/",{debit_signature:{value:r.rsv},debit_balance_signature:{value:s.rsv},credit_signature:{value:i.rsv},fulfillment_signature:{value:o.rsv},round:n.round,amount:n.amount,amount_swapped:n.amountSwapped,nonce:n.nonce,wallet:{address:t.address,token:t.tokenAddress},recipient:{address:e.address,token:e.tokenAddress}})},t.prototype.sendSwapFreeze=function(t,e,n){return this.api.put(t.webAddress,"swap/"+e.txId+"/freeze",{freezing_signature:{value:n.rsv}})},t.prototype.sendSwapCancellation=function(t,e,n,r){return this.api.put(t.webAddress,"swap/"+e.txId+"/cancel",{sender_cancellation_signature:{value:n.rsv},recipient_cancellation_signature:{value:r.rsv}})},t.prototype.sendSwapFinalization=function(t,e,n){return this.api.put(t.webAddress,"swap/"+e.txId+"/finalize",{finalization_signature:{value:n.rsv}})},t.prototype.sendReceipt=function(t,e,n){return this.api.put(t.webAddress,"transfer/"+e+"/",{wallet_signature:{value:n.rsv}})},t=r([s.injectable(),o(0,s.inject(u.TYPES.EXTERNAL.REST_API_INTERFACE)),i("design:paramtypes",[Object])],t)}();e.HubApiService=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(66),i=n(105),o=function(){function t(t){this._binding=t}return t.prototype.when=function(t){return this._binding.constraint=t,new r.BindingOnSyntax(this._binding)},t.prototype.whenTargetNamed=function(t){return this._binding.constraint=i.namedConstraint(t),new r.BindingOnSyntax(this._binding)},t.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){return null!==t.target&&!t.target.isNamed()&&!t.target.isTagged()},new r.BindingOnSyntax(this._binding)},t.prototype.whenTargetTagged=function(t,e){return this._binding.constraint=i.taggedConstraint(t)(e),new r.BindingOnSyntax(this._binding)},t.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(e){return i.typeConstraint(t)(e.parentRequest)},new r.BindingOnSyntax(this._binding)},t.prototype.whenParentNamed=function(t){return this._binding.constraint=function(e){return i.namedConstraint(t)(e.parentRequest)},new r.BindingOnSyntax(this._binding)},t.prototype.whenParentTagged=function(t,e){return this._binding.constraint=function(n){return i.taggedConstraint(t)(e)(n.parentRequest)},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(e){return i.traverseAncerstors(e,i.typeConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(e){return!i.traverseAncerstors(e,i.typeConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(e){return i.traverseAncerstors(e,i.namedConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(e){return!i.traverseAncerstors(e,i.namedConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._binding.constraint=function(n){return i.traverseAncerstors(n,i.taggedConstraint(t)(e))},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorTagged=function(t,e){return this._binding.constraint=function(n){return!i.traverseAncerstors(n,i.taggedConstraint(t)(e))},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(e){return i.traverseAncerstors(e,t)},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(e){return!i.traverseAncerstors(e,t)},new r.BindingOnSyntax(this._binding)},t}();e.BindingWhenSyntax=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(65),i=function(){function t(t){this._binding=t}return t.prototype.onActivation=function(t){return this._binding.onActivation=t,new r.BindingWhenSyntax(this._binding)},t}();e.BindingOnSyntax=i},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e){var n=t.call(this,e)||this;return n._reason=e,n}return i(e,t),Object.defineProperty(e.prototype,"reason",{get:function(){return this._reason},enumerable:!0,configurable:!0}),e.NO_WALLET_SPECIFIED=new e("No wallet specified for update."),e.NO_CONTRACT_STATE_SPECIFIED=new e("No contract state provided for update."),e.INCORRECT_NETWORK_ID=new e("Incorrect Blockchain Network Identifier."),e.UNREGISTERED=new e("Unregistered wallet."),e.UNREGISTERED_NO_REQUEST=new e("Unregistered wallet with no registration request provided."),e.UNREGISTERED_BAD_REQUEST=new e("Unregistered wallet with invalid registration request provided."),e.UNREGISTERED_APPROVAL_NOT_PENDING=new e("Unregistered wallet with no approval pending."),e.UNREGISTERED_APPROVAL_NOT_PROVIDED=new e("Unregistered wallet with no registration approval provided."),e.UNREGISTERED_APPROVAL_INVALID=new e("Unregistered wallet with invalid registration approval provided."),e.LOGIC_PROOF_ALREADY_UPDATED=new e("Proof of stake already updated."),e.LOGIC_OLD_ROUNDS_NOT_UPDATED=new e("Older rounds not updated."),e.LOGIC_PREVIOUS_ROUND_NOT_UPDATED=new e("Previous round not updated."),e.LOGIC_AGGREGATION_FORK=new e("Fork in transfer aggregation."),e.LOGIC_TRANSFER_CONFIRM_ERROR_OUTGOING=new e("Could not confirm outgoing transfer."),e.LOGIC_TRANSFER_CONFIRM_ERROR_INCOMING=new e("Could not confirm incoming transfer."),e.LOGIC_TRANSFER_CONFIRM_ERROR=new e("Could not confirm transfer."),e.LOGIC_RECEIPT_VALIDATION_ERROR_MISSING_CONFIRMATION=new e("Could not confirm receipt due to missing confirmation signatures."),e.LOGIC_PREMATURE_ROUND_ADVANCEMENT=new e("Cannot advance latest local round ahead of on-chain round."),e.LOGIC_UNKNOWN=new e("Unknown Logic Error"),e.LOCAL_DATA_MISSING_LATEST_ROUND=new e("Missing local data of latest round."),e.LOCAL_DATA_MISSING_PREVIOUS_ROUND=new e("Missing local data of previous round."),e.LOCAL_DATA_MISSING_MERKLE_PROOF=new e("Missing required merkle proof."),e.REMOTE_DATA_NO_MERKLE_PROOFS=new e("No merkle proof data available in update."),e.REMOTE_DATA_MISSING_MERKLE_PROOF=new e("Missing required merkle proof in update."),e.REMOTE_DATA_MISSING_DELIVERY_RECEIPT=new e("Missing required delivery receipt in update."),e.REMOTE_DATA_INVALID_DELIVERY_RECEIPT=new e("Invalid delivery receipt in update."),e.PROOF_OF_STAKE_INSUFFICIENT_BALANCE=new e("Granted balance in proof of stake is less than expected."),e.PROOF_OF_STAKE_INVALID=new e("Unverifiable proof of stake."),e.PROOF_OF_STAKE_INVALID_TRAIL=new e("Incorrect proof of stake trail."),e.PROOF_OF_STAKE_UNEXPECTED_PAINT=new e("Unexpected paint used in provided proof of stake."),e.AGGREGATE_TRANSFER_DEBIT_WALLET_SIGNATURE_INVALID=new e("Invalid aggregate signature provided by sender on debit of transfer."),e.AGGREGATE_SWAP_DEBIT_WALLET_SIGNATURE_INVALID=new e("Invalid aggregate signature provided by sender on debit of swap."),e.AGGREGATE_TRANSFER_CREDIT_WALLET_SIGNATURE_INVALID=new e("Invalid aggregate signature provided by recipient on credit of transfer."),e.AGGREGATE_SWAP_CREDIT_WALLET_SIGNATURE_INVALID=new e("Invalid aggregate signature provided by recipient on credit of swap."),e.AGGREGATE_FULFILLMENT_WALLET_SIGNATURE_INVALID=new e("Invalid aggregate signature provided by recipient on fulfillment of swap."),e.AGGREGATE_FINALIZATION_WALLET_SIGNATURE_INVALID=new e("Invalid aggregate signature provided by recipient on finalization of swap."),e.AGGREGATE_SENDER_CANCELLATION_WALLET_SIGNATURE_INVALID=new e("Invalid aggregate signature provided by sender on cancellation of swap."),e.AGGREGATE_RECIPIENT_CANCELLATION_WALLET_SIGNATURE_INVALID=new e("Invalid aggregate signature provided by recipient on cancellation of swap."),e.AGGREGATE_TRANSFER_DEBIT_HUB_SIGNATURE_INVALID=new e("Invalid aggregate signature provided by hub on debit of transfer."),e.AGGREGATE_SWAP_DEBIT_HUB_SIGNATURE_INVALID=new e("Invalid aggregate signature provided by hub on debit of swap."),e.AGGREGATE_TRANSFER_CREDIT_HUB_SIGNATURE_INVALID=new e("Invalid aggregate signature provided by hub on credit of transfer."),e.AGGREGATE_SWAP_CREDIT_HUB_SIGNATURE_INVALID=new e("Invalid aggregate signature provided by hub on credit of swap."),e.AGGREGATE_FULFILLMENT_HUB_SIGNATURE_INVALID=new e("Invalid aggregate signature provided by hub on fulfillment of swap."),e.AGGREGATE_FINALIZATION_HUB_SIGNATURE_INVALID=new e("Invalid aggregate signature provided by hub on finalization of swap."),e.AGGREGATE_SENDER_CANCELLATION_HUB_SIGNATURE_INVALID=new e("Invalid aggregate signature provided by hub on sender cancellation of swap."),e.AGGREGATE_RECIPIENT_CANCELLATION_HUB_SIGNATURE_INVALID=new e("Invalid aggregate signature provided by hub on recipient cancellation of swap."),e.SWAP_FINALIZATION_FAILURE=new e("Could not successfully mark swap as finalized."),e.SWAP_FULFILLMENT_FAILURE=new e("Could not successfully mark swap as fulfilled."),e.SWAP_CANCELLATION_FAILURE=new e("Could not successfully mark swap as cancelled."),e.INVALID_WALLET_FREEZE_REQUEST_SIGNATURE=new e("Could not validate swap freeze request signature."),e.AGGREGATE_FULFILLMENT_HUB_SIGNATURE_MISSING=new e("Missing aggregate signature provided by hub on fulfillment of swap."),e.AGGREGATE_TX_SET_ROOT_INVALID_INCOMING=new e("Invalid aggregate transfer set root provided for next incoming transfer."),e.AGGREGATE_TX_SET_ROOT_INVALID_OUTGOING=new e("Invalid aggregate transfer set root provided for next outgoing transfer."),e.PROVIDER_PUNISHED=new e("This provider is not longer operational."),e.PROVIDER_NOT_AUDITABLE=new e("This provider has not synchronized with the parent chain."),e}(Error);e.WalletUpdateError=o},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(30),o=n(269),s=n(27),u=n(26),a=r(n(8)),c=n(45),l=function(){function t(t,e,n,r,s,u){this._address=t,this._networkId=e,this._contractOwnerAddress=n,this._contractAddress=r,this._tokenAddress=s,this._webAddress=u,this._registered=!1,this._pendingRegistrationApproval=!1,this._rounds=new Map,this._latestRoundNumber=0,this._onChainBalance=new a.default(0),this._lock=new o.Mutex,this._rounds.set(0,new i.Round(r,s,t,0,0))}return t.fromJSON=function(e){var n=new t(e.address,e.networkId,e.contractOwnerAddress,e.contractAddress,e.tokenAddress,e.webAddress);for(var r in n._trailIdentifier=e.trailIdentifier,n._registered=e.registered,n._registrationRound=e.registrationRound,n._pendingRegistrationApproval=e.pendingRegistrationApproval,n._registrationApproval=e.registrationApproval?s.Signature.fromJSON(e.registrationApproval):void 0,e.rounds)if(e.rounds.hasOwnProperty(r)){var o=e.rounds[r];n._rounds.set(parseInt(r,10),i.Round.fromJSON(o))}return n._onChainBalance=new a.default(e.onChainBalance),n._latestRoundNumber=parseInt(e.latestRoundNumber,10),n},Object.defineProperty(t.prototype,"json",{get:function(){var t={};return this._rounds.forEach(function(e,n,r){t[n]=e.json}),{address:this._address,networkId:this._networkId,contractOwnerAddress:this._contractOwnerAddress,contractAddress:this._contractAddress,tokenAddress:this._tokenAddress,webAddress:this._webAddress,trailIdentifier:this._trailIdentifier,registered:this._registered,registrationRound:this._registrationRound,pendingRegistrationApproval:this._pendingRegistrationApproval,registrationApproval:this.registrationApproval?this.registrationApproval.json:void 0,rounds:t,latestRoundNumber:this._latestRoundNumber,onChainBalance:this._onChainBalance}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isRegistered",{get:function(){return this._registered},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPendingRegistrationApproval",{get:function(){return this._pendingRegistrationApproval},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"address",{get:function(){return this._address},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contractAddress",{get:function(){return this._contractAddress},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contractOwnerAddress",{get:function(){return this._contractOwnerAddress},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tokenAddress",{get:function(){return this._tokenAddress},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"networkId",{get:function(){return this._networkId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trailIdentifier",{get:function(){return this._trailIdentifier},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"webAddress",{get:function(){return this._webAddress},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"latestRound",{get:function(){return this.getRound(this._latestRoundNumber)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"previousRound",{get:function(){return this.getRound(this._latestRoundNumber-1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"secondPreviousRound",{get:function(){return this.getRound(this._latestRoundNumber-2)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lock",{get:function(){return this._lock},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"registrationRound",{get:function(){return this._registrationRound},enumerable:!0,configurable:!0}),t.prototype.getAdmissionAggregate=function(t,e){return void 0===e&&(e=0),new u.Aggregate(this.contractAddress,this.tokenAddress,this.address,e,t)},t.prototype.markRegistered=function(t,e){if(!this.isRegistered){this._registrationApproval=t,this._registered=!0,this.unmarkPendingRegistrationApproval(),this._latestRoundNumber=this.registrationRound,this._trailIdentifier=e;var n=new i.Round(this.contractAddress,this.tokenAddress,this.address,this.trailIdentifier,this.registrationRound);this._rounds.set(n.roundNumber,n)}},Object.defineProperty(t.prototype,"registrationApproval",{get:function(){return this._registrationApproval},enumerable:!0,configurable:!0}),t.prototype.markPendingRegistrationApproval=function(t){this._registrationRound=t,this._pendingRegistrationApproval=!0},t.prototype.unmarkPendingRegistrationApproval=function(){this._pendingRegistrationApproval=!1},t.prototype.getRound=function(t){return this._rounds.get(t)},t.prototype.addRound=function(t){if(t.roundNumber!=this._latestRoundNumber+1)return!1;this._rounds.set(t.roundNumber,t),this._latestRoundNumber=t.roundNumber},Object.defineProperty(t.prototype,"withdrawableAmount",{get:function(){if(!this.previousRound||!this.previousRound.proofOfStake)return new a.default(0);var t=this.previousRound.minimumAuthorizedBalance?this.previousRound.minimumAuthorizedBalance.amount:this.previousRound.availableBalance,e=a.default.min(this.previousRound.chainBalance,t),n=this.latestRound.minimumAuthorizedBalance?this.latestRound.minimumAuthorizedBalance.amount:this.offChainBalance;return a.default.min(e,n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onChainBalance",{get:function(){return this._onChainBalance},set:function(t){this._onChainBalance=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offChainBalance",{get:function(){var t=new a.default(0);if(!this.latestRound)return t;var e=this.latestRound.availableBalance;return!this.latestRound.proofOfStake&&this.previousRound&&(e=e.plus(this.previousRound.availableBalance)),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offChainBalanceMarker",{get:function(){return new c.BalanceMarker(this._contractAddress,this._tokenAddress,this._address,this.latestRound.roundNumber,this.offChainBalance)},enumerable:!0,configurable:!0}),t.prototype.getRoundSwapStartingBalance=function(t){var e=new a.default(0);if(t<=this.registrationRound)return e;var n=this.getRound(t);if(n&&n.proofOfStake)return n.chainBalance;var r=this.getRound(t-1);return r?r.availableBalance:e},t}();e.Wallet=l},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(8)),o=function(){function t(t,e,n,r){this._txId=t,this._block=e,this._roundNumber=n,this._amount=r}return t.fromJSON=function(e){return new t(e.txId,e.block,e.roundNumber,new i.default(e.amount))},Object.defineProperty(t.prototype,"json",{get:function(){return{txId:this._txId,block:this._block,roundNumber:this._roundNumber,amount:this._amount}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"txId",{get:function(){return this._txId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"block",{get:function(){return this._block},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"roundNumber",{get:function(){return this._roundNumber},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"amount",{get:function(){return this._amount},enumerable:!0,configurable:!0}),t}();e.Deposit=o},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var r=n(285),i=n(284),o=n(283);function s(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=a.prototype:(null===t&&(t=new a(e)),t.length=e),t}function a(t,e,n){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);a.TYPED_ARRAY_SUPPORT?(t=e).__proto__=a.prototype:t=f(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!a.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(e,n),i=(t=u(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(a.isBuffer(e)){var n=0|p(e.length);return 0===(t=u(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?u(t,0):f(t,e);if("Buffer"===e.type&&o(e.data))return f(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(l(e),t=u(t,e<0?0:0|p(e)),!a.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function f(t,e){var n=e.length<0?0:0|p(e.length);t=u(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function d(t,e){if(a.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return F(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(t).length;default:if(r)return F(t).length;e=(""+e).toLowerCase(),r=!0}}function g(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=a.from(e,r)),a.isBuffer(e))return 0===e.length?-1:m(t,e,n,r,i);if("number"==typeof e)return e&=255,a.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):m(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(t,e,n,r,i){var o,s=1,u=t.length,a=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,u/=2,a/=2,n/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var l=-1;for(o=n;o<u;o++)if(c(t,o)===c(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===a)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+a>u&&(n=u-a),o=n;o>=0;o--){for(var h=!0,f=0;f<a;f++)if(c(t,o+f)!==c(e,f)){h=!1;break}if(h)return o}return-1}function v(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var u=parseInt(e.substr(2*s,2),16);if(isNaN(u))return s;t[n+s]=u}return s}function b(t,e,n,r){return G(F(e,t.length-n),t,n,r)}function _(t,e,n,r){return G(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function w(t,e,n,r){return _(t,e,n,r)}function A(t,e,n,r){return G(W(e),t,n,r)}function T(t,e,n,r){return G(function(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function M(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,u,a,c=t[i],l=null,h=c>239?4:c>223?3:c>191?2:1;if(i+h<=n)switch(h){case 1:c<128&&(l=c);break;case 2:128==(192&(o=t[i+1]))&&(a=(31&c)<<6|63&o)>127&&(l=a);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(a=(15&c)<<12|(63&o)<<6|63&s)>2047&&(a<55296||a>57343)&&(l=a);break;case 4:o=t[i+1],s=t[i+2],u=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&u)&&(a=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&u)>65535&&a<1114112&&(l=a)}null===l?(l=65533,h=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=h}return function(t){var e=t.length;if(e<=O)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=O));return n}(r)}e.Buffer=a,e.SlowBuffer=function(t){+t!=t&&(t=0);return a.alloc(+t)},e.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),a.poolSize=8192,a._augment=function(t){return t.__proto__=a.prototype,t},a.from=function(t,e,n){return c(null,t,e,n)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(t,e,n){return function(t,e,n,r){return l(e),e<=0?u(t,e):void 0!==n?"string"==typeof r?u(t,e).fill(n,r):u(t,e).fill(n):u(t,e)}(null,t,e,n)},a.allocUnsafe=function(t){return h(null,t)},a.allocUnsafeSlow=function(t){return h(null,t)},a.isBuffer=function(t){return!(null==t||!t._isBuffer)},a.compare=function(t,e){if(!a.isBuffer(t)||!a.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return a.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=a.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!a.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},a.byteLength=d,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},a.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},a.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},a.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?M(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return I(this,e,n);case"utf8":case"utf-8":return M(this,e,n);case"ascii":return E(this,e,n);case"latin1":case"binary":return x(this,e,n);case"base64":return S(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},a.prototype.equals=function(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===a.compare(this,t)},a.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},a.prototype.compare=function(t,e,n,r,i){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var o=i-r,s=n-e,u=Math.min(o,s),c=this.slice(r,i),l=t.slice(e,n),h=0;h<u;++h)if(c[h]!==l[h]){o=c[h],s=l[h];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},a.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},a.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},a.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return v(this,t,e,n);case"utf8":case"utf-8":return b(this,t,e,n);case"ascii":return _(this,t,e,n);case"latin1":case"binary":return w(this,t,e,n);case"base64":return A(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var O=4096;function E(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function x(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function I(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=U(t[o]);return i}function P(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function R(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function N(t,e,n,r,i,o){if(!a.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function C(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function j(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function L(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function k(t,e,n,r,o){return o||L(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function D(t,e,n,r,o){return o||L(t,0,n,8),i.write(t,e,n,r,52,8),n+8}a.prototype.slice=function(t,e){var n,r=this.length;if(t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),a.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=a.prototype;else{var i=e-t;n=new a(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},a.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},a.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},a.prototype.readUInt8=function(t,e){return e||R(t,1,this.length),this[t]},a.prototype.readUInt16LE=function(t,e){return e||R(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.readUInt16BE=function(t,e){return e||R(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.readUInt32LE=function(t,e){return e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},a.prototype.readUInt32BE=function(t,e){return e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},a.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},a.prototype.readInt8=function(t,e){return e||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},a.prototype.readInt16LE=function(t,e){e||R(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(t,e){e||R(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(t,e){return e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.readInt32BE=function(t,e){return e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.readFloatLE=function(t,e){return e||R(t,4,this.length),i.read(this,t,!0,23,4)},a.prototype.readFloatBE=function(t,e){return e||R(t,4,this.length),i.read(this,t,!1,23,4)},a.prototype.readDoubleLE=function(t,e){return e||R(t,8,this.length),i.read(this,t,!0,52,8)},a.prototype.readDoubleBE=function(t,e){return e||R(t,8,this.length),i.read(this,t,!1,52,8)},a.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||N(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},a.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||N(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},a.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,1,255,0),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},a.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):C(this,t,e,!0),e+2},a.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):C(this,t,e,!1),e+2},a.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):j(this,t,e,!0),e+4},a.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):j(this,t,e,!1),e+4},a.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);N(this,t,e,n,i-1,-i)}var o=0,s=1,u=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===u&&0!==this[e+o-1]&&(u=1),this[e+o]=(t/s>>0)-u&255;return e+n},a.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);N(this,t,e,n,i-1,-i)}var o=n-1,s=1,u=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===u&&0!==this[e+o+1]&&(u=1),this[e+o]=(t/s>>0)-u&255;return e+n},a.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,1,127,-128),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},a.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):C(this,t,e,!0),e+2},a.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):C(this,t,e,!1),e+2},a.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):j(this,t,e,!0),e+4},a.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):j(this,t,e,!1),e+4},a.prototype.writeFloatLE=function(t,e,n){return k(this,t,e,!0,n)},a.prototype.writeFloatBE=function(t,e,n){return k(this,t,e,!1,n)},a.prototype.writeDoubleLE=function(t,e,n){return D(this,t,e,!0,n)},a.prototype.writeDoubleBE=function(t,e,n){return D(this,t,e,!1,n)},a.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!a.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},a.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=a.isBuffer(t)?t:F(new a(t,r).toString()),u=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%u]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function U(t){return t<16?"0"+t.toString(16):t.toString(16)}function F(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function W(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(B,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function G(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(70))},function(t,e,n){var r;(function(){var n=this,i=n._,o=Array.prototype,s=Object.prototype,u=Function.prototype,a=o.push,c=o.slice,l=s.toString,h=s.hasOwnProperty,f=Array.isArray,p=Object.keys,d=u.bind,g=Object.create,y=function(){},m=function(t){return t instanceof m?t:this instanceof m?void(this._wrapped=t):new m(t)};void 0!==t&&t.exports&&(e=t.exports=m),e._=m,m.VERSION="1.8.3";var v=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}},b=function(t,e,n){return null==t?m.identity:m.isFunction(t)?v(t,e,n):m.isObject(t)?m.matcher(t):m.property(t)};m.iteratee=function(t,e){return b(t,e,1/0)};var _=function(t,e){return function(n){var r=arguments.length;if(r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],s=t(o),u=s.length,a=0;a<u;a++){var c=s[a];e&&void 0!==n[c]||(n[c]=o[c])}return n}},w=function(t){if(!m.isObject(t))return{};if(g)return g(t);y.prototype=t;var e=new y;return y.prototype=null,e},A=function(t){return function(e){return null==e?void 0:e[t]}},T=Math.pow(2,53)-1,S=A("length"),M=function(t){var e=S(t);return"number"==typeof e&&e>=0&&e<=T};function O(t){return function(e,n,r,i){n=v(n,i,4);var o=!M(e)&&m.keys(e),s=(o||e).length,u=t>0?0:s-1;return arguments.length<3&&(r=e[o?o[u]:u],u+=t),function(e,n,r,i,o,s){for(;o>=0&&o<s;o+=t){var u=i?i[o]:o;r=n(r,e[u],u,e)}return r}(e,n,r,o,u,s)}}m.each=m.forEach=function(t,e,n){var r,i;if(e=v(e,n),M(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var o=m.keys(t);for(r=0,i=o.length;r<i;r++)e(t[o[r]],o[r],t)}return t},m.map=m.collect=function(t,e,n){e=b(e,n);for(var r=!M(t)&&m.keys(t),i=(r||t).length,o=Array(i),s=0;s<i;s++){var u=r?r[s]:s;o[s]=e(t[u],u,t)}return o},m.reduce=m.foldl=m.inject=O(1),m.reduceRight=m.foldr=O(-1),m.find=m.detect=function(t,e,n){var r;if(void 0!==(r=M(t)?m.findIndex(t,e,n):m.findKey(t,e,n))&&-1!==r)return t[r]},m.filter=m.select=function(t,e,n){var r=[];return e=b(e,n),m.each(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r},m.reject=function(t,e,n){return m.filter(t,m.negate(b(e)),n)},m.every=m.all=function(t,e,n){e=b(e,n);for(var r=!M(t)&&m.keys(t),i=(r||t).length,o=0;o<i;o++){var s=r?r[o]:o;if(!e(t[s],s,t))return!1}return!0},m.some=m.any=function(t,e,n){e=b(e,n);for(var r=!M(t)&&m.keys(t),i=(r||t).length,o=0;o<i;o++){var s=r?r[o]:o;if(e(t[s],s,t))return!0}return!1},m.contains=m.includes=m.include=function(t,e,n,r){return M(t)||(t=m.values(t)),("number"!=typeof n||r)&&(n=0),m.indexOf(t,e,n)>=0},m.invoke=function(t,e){var n=c.call(arguments,2),r=m.isFunction(e);return m.map(t,function(t){var i=r?e:t[e];return null==i?i:i.apply(t,n)})},m.pluck=function(t,e){return m.map(t,m.property(e))},m.where=function(t,e){return m.filter(t,m.matcher(e))},m.findWhere=function(t,e){return m.find(t,m.matcher(e))},m.max=function(t,e,n){var r,i,o=-1/0,s=-1/0;if(null==e&&null!=t)for(var u=0,a=(t=M(t)?t:m.values(t)).length;u<a;u++)(r=t[u])>o&&(o=r);else e=b(e,n),m.each(t,function(t,n,r){((i=e(t,n,r))>s||i===-1/0&&o===-1/0)&&(o=t,s=i)});return o},m.min=function(t,e,n){var r,i,o=1/0,s=1/0;if(null==e&&null!=t)for(var u=0,a=(t=M(t)?t:m.values(t)).length;u<a;u++)(r=t[u])<o&&(o=r);else e=b(e,n),m.each(t,function(t,n,r){((i=e(t,n,r))<s||i===1/0&&o===1/0)&&(o=t,s=i)});return o},m.shuffle=function(t){for(var e,n=M(t)?t:m.values(t),r=n.length,i=Array(r),o=0;o<r;o++)(e=m.random(0,o))!==o&&(i[o]=i[e]),i[e]=n[o];return i},m.sample=function(t,e,n){return null==e||n?(M(t)||(t=m.values(t)),t[m.random(t.length-1)]):m.shuffle(t).slice(0,Math.max(0,e))},m.sortBy=function(t,e,n){return e=b(e,n),m.pluck(m.map(t,function(t,n,r){return{value:t,index:n,criteria:e(t,n,r)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index}),"value")};var E=function(t){return function(e,n,r){var i={};return n=b(n,r),m.each(e,function(r,o){var s=n(r,o,e);t(i,r,s)}),i}};m.groupBy=E(function(t,e,n){m.has(t,n)?t[n].push(e):t[n]=[e]}),m.indexBy=E(function(t,e,n){t[n]=e}),m.countBy=E(function(t,e,n){m.has(t,n)?t[n]++:t[n]=1}),m.toArray=function(t){return t?m.isArray(t)?c.call(t):M(t)?m.map(t,m.identity):m.values(t):[]},m.size=function(t){return null==t?0:M(t)?t.length:m.keys(t).length},m.partition=function(t,e,n){e=b(e,n);var r=[],i=[];return m.each(t,function(t,n,o){(e(t,n,o)?r:i).push(t)}),[r,i]},m.first=m.head=m.take=function(t,e,n){if(null!=t)return null==e||n?t[0]:m.initial(t,t.length-e)},m.initial=function(t,e,n){return c.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},m.last=function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:m.rest(t,Math.max(0,t.length-e))},m.rest=m.tail=m.drop=function(t,e,n){return c.call(t,null==e||n?1:e)},m.compact=function(t){return m.filter(t,m.identity)};var x=function(t,e,n,r){for(var i=[],o=0,s=r||0,u=S(t);s<u;s++){var a=t[s];if(M(a)&&(m.isArray(a)||m.isArguments(a))){e||(a=x(a,e,n));var c=0,l=a.length;for(i.length+=l;c<l;)i[o++]=a[c++]}else n||(i[o++]=a)}return i};function I(t){return function(e,n,r){n=b(n,r);for(var i=S(e),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(n(e[o],o,e))return o;return-1}}function P(t,e,n){return function(r,i,o){var s=0,u=S(r);if("number"==typeof o)t>0?s=o>=0?o:Math.max(o+u,s):u=o>=0?Math.min(o+1,u):o+u+1;else if(n&&o&&u)return r[o=n(r,i)]===i?o:-1;if(i!=i)return(o=e(c.call(r,s,u),m.isNaN))>=0?o+s:-1;for(o=t>0?s:u-1;o>=0&&o<u;o+=t)if(r[o]===i)return o;return-1}}m.flatten=function(t,e){return x(t,e,!1)},m.without=function(t){return m.difference(t,c.call(arguments,1))},m.uniq=m.unique=function(t,e,n,r){m.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=b(n,r));for(var i=[],o=[],s=0,u=S(t);s<u;s++){var a=t[s],c=n?n(a,s,t):a;e?(s&&o===c||i.push(a),o=c):n?m.contains(o,c)||(o.push(c),i.push(a)):m.contains(i,a)||i.push(a)}return i},m.union=function(){return m.uniq(x(arguments,!0,!0))},m.intersection=function(t){for(var e=[],n=arguments.length,r=0,i=S(t);r<i;r++){var o=t[r];if(!m.contains(e,o)){for(var s=1;s<n&&m.contains(arguments[s],o);s++);s===n&&e.push(o)}}return e},m.difference=function(t){var e=x(arguments,!0,!0,1);return m.filter(t,function(t){return!m.contains(e,t)})},m.zip=function(){return m.unzip(arguments)},m.unzip=function(t){for(var e=t&&m.max(t,S).length||0,n=Array(e),r=0;r<e;r++)n[r]=m.pluck(t,r);return n},m.object=function(t,e){for(var n={},r=0,i=S(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},m.findIndex=I(1),m.findLastIndex=I(-1),m.sortedIndex=function(t,e,n,r){for(var i=(n=b(n,r,1))(e),o=0,s=S(t);o<s;){var u=Math.floor((o+s)/2);n(t[u])<i?o=u+1:s=u}return o},m.indexOf=P(1,m.findIndex,m.sortedIndex),m.lastIndexOf=P(-1,m.findLastIndex),m.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n)i[o]=t;return i};var R=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=w(t.prototype),s=t.apply(o,i);return m.isObject(s)?s:o};m.bind=function(t,e){if(d&&t.bind===d)return d.apply(t,c.call(arguments,1));if(!m.isFunction(t))throw new TypeError("Bind must be called on a function");var n=c.call(arguments,2),r=function(){return R(t,r,e,this,n.concat(c.call(arguments)))};return r},m.partial=function(t){var e=c.call(arguments,1),n=function(){for(var r=0,i=e.length,o=Array(i),s=0;s<i;s++)o[s]=e[s]===m?arguments[r++]:e[s];for(;r<arguments.length;)o.push(arguments[r++]);return R(t,n,this,this,o)};return n},m.bindAll=function(t){var e,n,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(e=1;e<r;e++)t[n=arguments[e]]=m.bind(t[n],t);return t},m.memoize=function(t,e){var n=function(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return m.has(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n},m.delay=function(t,e){var n=c.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},m.defer=m.partial(m.delay,m,1),m.throttle=function(t,e,n){var r,i,o,s=null,u=0;n||(n={});var a=function(){u=!1===n.leading?0:m.now(),s=null,o=t.apply(r,i),s||(r=i=null)};return function(){var c=m.now();u||!1!==n.leading||(u=c);var l=e-(c-u);return r=this,i=arguments,l<=0||l>e?(s&&(clearTimeout(s),s=null),u=c,o=t.apply(r,i),s||(r=i=null)):s||!1===n.trailing||(s=setTimeout(a,l)),o}},m.debounce=function(t,e,n){var r,i,o,s,u,a=function(){var c=m.now()-s;c<e&&c>=0?r=setTimeout(a,e-c):(r=null,n||(u=t.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,s=m.now();var c=n&&!r;return r||(r=setTimeout(a,e)),c&&(u=t.apply(o,i),o=i=null),u}},m.wrap=function(t,e){return m.partial(e,t)},m.negate=function(t){return function(){return!t.apply(this,arguments)}},m.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},m.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},m.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},m.once=m.partial(m.before,2);var N=!{toString:null}.propertyIsEnumerable("toString"),C=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function j(t,e){var n=C.length,r=t.constructor,i=m.isFunction(r)&&r.prototype||s,o="constructor";for(m.has(t,o)&&!m.contains(e,o)&&e.push(o);n--;)(o=C[n])in t&&t[o]!==i[o]&&!m.contains(e,o)&&e.push(o)}m.keys=function(t){if(!m.isObject(t))return[];if(p)return p(t);var e=[];for(var n in t)m.has(t,n)&&e.push(n);return N&&j(t,e),e},m.allKeys=function(t){if(!m.isObject(t))return[];var e=[];for(var n in t)e.push(n);return N&&j(t,e),e},m.values=function(t){for(var e=m.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r},m.mapObject=function(t,e,n){e=b(e,n);for(var r,i=m.keys(t),o=i.length,s={},u=0;u<o;u++)s[r=i[u]]=e(t[r],r,t);return s},m.pairs=function(t){for(var e=m.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r},m.invert=function(t){for(var e={},n=m.keys(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e},m.functions=m.methods=function(t){var e=[];for(var n in t)m.isFunction(t[n])&&e.push(n);return e.sort()},m.extend=_(m.allKeys),m.extendOwn=m.assign=_(m.keys),m.findKey=function(t,e,n){e=b(e,n);for(var r,i=m.keys(t),o=0,s=i.length;o<s;o++)if(e(t[r=i[o]],r,t))return r},m.pick=function(t,e,n){var r,i,o={},s=t;if(null==s)return o;m.isFunction(e)?(i=m.allKeys(s),r=v(e,n)):(i=x(arguments,!1,!1,1),r=function(t,e,n){return e in n},s=Object(s));for(var u=0,a=i.length;u<a;u++){var c=i[u],l=s[c];r(l,c,s)&&(o[c]=l)}return o},m.omit=function(t,e,n){if(m.isFunction(e))e=m.negate(e);else{var r=m.map(x(arguments,!1,!1,1),String);e=function(t,e){return!m.contains(r,e)}}return m.pick(t,e,n)},m.defaults=_(m.allKeys,!0),m.create=function(t,e){var n=w(t);return e&&m.extendOwn(n,e),n},m.clone=function(t){return m.isObject(t)?m.isArray(t)?t.slice():m.extend({},t):t},m.tap=function(t,e){return e(t),t},m.isMatch=function(t,e){var n=m.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;o<r;o++){var s=n[o];if(e[s]!==i[s]||!(s in i))return!1}return!0};var L=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof m&&(t=t._wrapped),e instanceof m&&(e=e._wrapped);var i=l.call(t);if(i!==l.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e}var o="[object Array]"===i;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var s=t.constructor,u=e.constructor;if(s!==u&&!(m.isFunction(s)&&s instanceof s&&m.isFunction(u)&&u instanceof u)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],r=r||[];for(var a=n.length;a--;)if(n[a]===t)return r[a]===e;if(n.push(t),r.push(e),o){if((a=t.length)!==e.length)return!1;for(;a--;)if(!L(t[a],e[a],n,r))return!1}else{var c,h=m.keys(t);if(a=h.length,m.keys(e).length!==a)return!1;for(;a--;)if(c=h[a],!m.has(e,c)||!L(t[c],e[c],n,r))return!1}return n.pop(),r.pop(),!0};m.isEqual=function(t,e){return L(t,e)},m.isEmpty=function(t){return null==t||(M(t)&&(m.isArray(t)||m.isString(t)||m.isArguments(t))?0===t.length:0===m.keys(t).length)},m.isElement=function(t){return!(!t||1!==t.nodeType)},m.isArray=f||function(t){return"[object Array]"===l.call(t)},m.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},m.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){m["is"+t]=function(e){return l.call(e)==="[object "+t+"]"}}),m.isArguments(arguments)||(m.isArguments=function(t){return m.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(m.isFunction=function(t){return"function"==typeof t||!1}),m.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},m.isNaN=function(t){return m.isNumber(t)&&t!==+t},m.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===l.call(t)},m.isNull=function(t){return null===t},m.isUndefined=function(t){return void 0===t},m.has=function(t,e){return null!=t&&h.call(t,e)},m.noConflict=function(){return n._=i,this},m.identity=function(t){return t},m.constant=function(t){return function(){return t}},m.noop=function(){},m.property=A,m.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},m.matcher=m.matches=function(t){return t=m.extendOwn({},t),function(e){return m.isMatch(e,t)}},m.times=function(t,e,n){var r=Array(Math.max(0,t));e=v(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r},m.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},m.now=Date.now||function(){return(new Date).getTime()};var k={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},D=m.invert(k),B=function(t){var e=function(e){return t[e]},n="(?:"+m.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}};m.escape=B(k),m.unescape=B(D),m.result=function(t,e,n){var r=null==t?void 0:t[e];return void 0===r&&(r=n),m.isFunction(r)?r.call(t):r};var U=0;m.uniqueId=function(t){var e=++U+"";return t?t+e:e},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var F=/(.)^/,W={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},G=/\\|'|\r|\n|\u2028|\u2029/g,V=function(t){return"\\"+W[t]};m.template=function(t,e,n){!e&&n&&(e=n),e=m.defaults({},e,m.templateSettings);var r=RegExp([(e.escape||F).source,(e.interpolate||F).source,(e.evaluate||F).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(r,function(e,n,r,s,u){return o+=t.slice(i,u).replace(G,V),i=u+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var s=new Function(e.variable||"obj","_",o)}catch(t){throw t.source=o,t}var u=function(t){return s.call(this,t,m)},a=e.variable||"obj";return u.source="function("+a+"){\n"+o+"}",u},m.chain=function(t){var e=m(t);return e._chain=!0,e};var z=function(t,e){return t._chain?m(e).chain():e};m.mixin=function(t){m.each(m.functions(t),function(e){var n=m[e]=t[e];m.prototype[e]=function(){var t=[this._wrapped];return a.apply(t,arguments),z(this,n.apply(m,t))}})},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=o[t];m.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],z(this,n)}}),m.each(["concat","join","slice"],function(t){var e=o[t];m.prototype[t]=function(){return z(this,e.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return""+this._wrapped},void 0===(r=function(){return m}.apply(e,[]))||(t.exports=r)}).call(this)},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=this&&this.__param||function(t,e){return function(n,r){e(n,r,t)}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(14),a=n(44),c=n(30),l=n(27),h=n(38),f=n(67),p=n(6),d=s(n(8)),g=n(26),y=n(17),m=n(37),v=function(){function t(t){this.contractApi=t}return e=t,t.prototype.canIssueStateUpdateChallenge=function(t,e){var n=this;return t.lock.runExclusive(function(){return n.canIssueStateUpdateChallengeInternal(t,e)})},t.prototype.canIssueStateUpdateChallengeInternal=function(t,e){return new Promise(function(n,r){return!t.isRegistered||t.isPendingRegistrationApproval?(y.Logging.error("reason 1"),n(!1)):t.registrationRound>=e.currentRound?(y.Logging.error("reason 2"),n(!1)):!t.previousRound||t.previousRound.roundNumber<e.currentRound-1?(y.Logging.error("reason 3"),n(!1)):t.registrationRound<t.previousRound.roundNumber&&!t.previousRound.proofOfStake?(y.Logging.error("reason 4"),n(!1)):t.previousRound.aggregate.lastConfirmedTransfer&&!t.previousRound.aggregate.lastConfirmedTransfer.confirmations.get(p.isSameHexValue(t.previousRound.aggregate.lastConfirmedTransfer.sender,t.address)?m.TransferAggregateType.DEBIT:m.TransferAggregateType.CREDIT)?(y.Logging.error("reason 5"),n(!1)):e.stateUpdateChallengeIssued||e.stateUpdateChallengeRound>=e.currentRound-1?(y.Logging.error("reason 6"),n(!1)):e.currentSubBlock<e.slackPeriod?(y.Logging.error("reason 7"),n(!1)):e?e.networkId!=t.networkId?(y.Logging.error("reason 9"),n(!1)):n(!e.isPunished):(y.Logging.error("reason 8"),n(!1))})},t.prototype.canRecoverAllFunds=function(t,e){var n=this;return t.lock.runExclusive(function(){return n.canRecoverAllFundsInternal(t,e)})},t.prototype.canRecoverAllFundsInternal=function(t,e){var n=this;return new Promise(function(r,i){var o=e.lastSubmissionRound-1;return!t.isRegistered||t.isPendingRegistrationApproval?(y.Logging.error("canRecoverAllFunds reason 1"),r(!1)):t.registrationRound>=o?(y.Logging.error("canRecoverAllFunds reason 2"),r(!1)):t.getRound(o)&&t.getRound(o).proofOfStake?e.recovered?(y.Logging.error("canRecoverAllFunds reason 4"),r(!1)):e.networkId!=t.networkId?(y.Logging.error("reason 9"),r(!1)):void n.contractApi.getAllReclaimableFunds(t.getRound(o).proofOfStake).then(function(t){return r(!t.isZero())}).catch(i):(y.Logging.error("canRecoverAllFunds reason 3"),r(!1))})},t.prototype.canRecoverOnChainFunds=function(t,e){var n=this;return t.lock.runExclusive(function(){return n.canRecoverOnChainFundsInternal(t,e)})},t.prototype.canRecoverOnChainFundsInternal=function(t,e){var n=this;return new Promise(function(r,i){var o=e.pendingWithdrawalRound+2;e.isWithdrawalPending&&e.lastSubmissionRound;return e.deposits?e.recovered?(y.Logging.error("canRecoverOnChainFunds reason 3"),r(!1)):e.networkId!=t.networkId?(y.Logging.error("reason 9"),r(!1)):void n.contractApi.getReclaimableOnChainFunds(t.tokenAddress,t.address,t.contractAddress).then(function(t){return r(!t.isZero())}).catch(i):(y.Logging.error("canRecoverOnChainFunds reason 1"),r(!1))})},t.prototype.issueStateUpdateChallenge=function(t,e){var n=this;return t.lock.runExclusive(function(){return new Promise(function(r,i){n.canIssueStateUpdateChallengeInternal(t,e).then(function(o){if(!o)return r(!1);var s=t.previousRound.aggregate.isTransferPending,u=s?c.Round.fromJSON(t.previousRound.json):t.previousRound;s&&u.aggregate.cancelPendingTransfer();var a=u.aggregate.lastConfirmedTransfer,h=a?a.confirmations.get(p.isSameHexValue(a.sender,t.address)?m.TransferAggregateType.DEBIT:m.TransferAggregateType.CREDIT):l.Signature.EMPTY;u.roundNumber!=t.registrationRound||a||(h=t.registrationApproval),y.Logging.log(u.proofOfStake),y.Logging.log(u.aggregate.trailIdentifier),y.Logging.log(u.aggregate.hash),y.Logging.log(h.checksum),y.Logging.log(h.json),a&&n.contractApi.verifyProofOfTransitionAgreement(t.tokenAddress,t.address,t.trailIdentifier,u.roundNumber,u.aggregate.transferTree.hash,u.aggregate.spent,u.aggregate.gained,h,t.contractAddress).then(function(t){y.Logging.log("res"),y.Logging.log(t)}).catch(function(t){y.Logging.error("bad"),y.Logging.error(t)}),u.proofOfStake?(h===l.Signature.EMPTY&&a&&y.Logging.error("Empty signature on aggregate."),n.contractApi.estimateChallengeInitialMerkleStateCost(t.address,u.proofOfStake,u.aggregate.transferTree.hash,u.aggregate.spent,u.aggregate.gained,h,t.contractAddress).then(function(o){console.log("estimateChallengeInitialMerkleStateCost: "+o),n.contractApi.submitChallengeInitialMerkleState(t.address,u.proofOfStake,u.aggregate.transferTree.hash,u.aggregate.spent,u.aggregate.gained,h,e.challengeCost.multipliedBy(o),t.contractAddress).then(r).catch(i)}).catch(i)):n.contractApi.estimateChallengeInitialEmptyStateCost(t.tokenAddress,t.address,t.trailIdentifier,u.aggregate.transferTree.hash,u.aggregate.spent,u.aggregate.gained,h,t.contractAddress).then(function(o){console.log("estimateChallengeInitialEmptyStateCost: "+o),n.contractApi.submitChallengeInitialEmptyState(t.tokenAddress,t.address,t.trailIdentifier,u.aggregate.transferTree.hash,u.aggregate.spent,u.aggregate.gained,h,e.challengeCost.multipliedBy(o),t.contractAddress).then(r).catch(i)}).catch(i)})})})},t.prototype.checkStateUpdateChallengeResponse=function(t,e){var n=this;return new Promise(function(e,r){var i,o,s=t.latestRound.roundNumber;n.contractApi.getStateUpdateEventAtRound(t.tokenAddress,t.address,s,t.contractAddress).then(function(r){if(!r||!r.length)return e(null);var u=r.find(function(e){return p.isSameHexValue(e.args.account,t.address)&&e.args.round.toNumber()==s});if(!u||!u.args)return e(null);var a=u.args;console.log("answer"),console.log(a),i=new h.ProofOfStake(t.contractAddress,t.tokenAddress,t.address,a.paint,a.trail.toNumber(),s,a.allotmentChain,a.membershipChain,a.values.map(function(t){return new d.default(t)}),a.LR[0],a.LR[1]);var c=p.remove0xPrefix(a.r.toString(16)),f=p.remove0xPrefix(a.s.toString(16)),g=p.remove0xPrefix(a.v.toString(16));return o=l.Signature.fromRSV(t.contractOwnerAddress,a.paint,[c,f,g].join("")),n.contractApi.verifyProof(t.getRound(s),i)}).then(function(e){if(!e)throw f.WalletUpdateError.PROOF_OF_STAKE_INVALID;return p.isSameHexValue(o.checksum,p.EMPTY_HASH)||n.contractApi.validateHubSignature(o,t.contractAddress)}).then(function(t){if(!t)throw f.WalletUpdateError.AGGREGATE_TRANSFER_CREDIT_HUB_SIGNATURE_INVALID;return e([i,o])}).catch(r)})},t.prototype.resolveOnChainStateUpdateDispute=function(t,e,n){var r=this;return t.lock.runExclusive(function(){return r.resolveOnChainStateUpdateDisputeInternal(t,e,n)})},t.prototype.resolveOnChainStateUpdateDisputeInternal=function(t,e,n){var r=this;return new Promise(function(i,o){if(t.latestRound.proofOfStake)return i(f.WalletUpdateError.LOGIC_PROOF_ALREADY_UPDATED);if(!e||!n)return o(f.WalletUpdateError.REMOTE_DATA_MISSING_MERKLE_PROOF);var s=t.latestRound,u=t.previousRound;r.contractApi.verifyProof(s,e).then(function(r){if(!r)return o(f.WalletUpdateError.PROOF_OF_STAKE_INVALID);if(e.amount.isLessThan(u.expectedBalance))return o(f.WalletUpdateError.PROOF_OF_STAKE_INSUFFICIENT_BALANCE);if(s.setProofOfStake(e),p.isSameHexValue(e.paint,u.aggregate.hash)){if(u.aggregate.isTransferPending)!p.isSameHexValue(u.aggregate.pendingTransfer.recipient,t.address)?(u.aggregate.pendingTransfer.confirmations.set(m.TransferAggregateType.DEBIT,n),u.aggregate.confirmPendingOutgoingTransfer()):(u.aggregate.pendingTransfer.confirmations.set(m.TransferAggregateType.CREDIT,n),u.aggregate.confirmPendingIncomingTransfer());return i(f.WalletUpdateError.REMOTE_DATA_MISSING_MERKLE_PROOF)}if(u.aggregate.isTransferPending){var a=g.Aggregate.fromJSON(u.aggregate.json);if(a.cancelPendingTransfer(),p.isSameHexValue(e.paint,a.hash))return u.aggregate.cancelPendingTransfer(),i(f.WalletUpdateError.LOGIC_TRANSFER_CONFIRM_ERROR)}return i(f.WalletUpdateError.LOGIC_UNKNOWN)}).catch(o)})},t.canIssueDeliveryChallenge=function(t,e,n){return!!n&&(!n.isPunished&&(!!e.authorizations.get(m.TransferAggregateType.DEBIT)&&(!!e.confirmations.get(m.TransferAggregateType.DEBIT)&&(!(!p.isSameHexValue(t.address,e.sender)&&!p.isSameHexValue(t.address,e.recipient))&&(e.round==n.currentRound-1&&!(n.currentSubBlock<n.slackPeriod))))))},t.prototype.issueDeliveryChallenge=function(t,n,r){var i=this;return t.lock.runExclusive(function(){return new Promise(function(o,s){if(!e.canIssueDeliveryChallenge(t,n,r))return s();var u=p.isSameHexValue(t.address,n.sender),a=n.authorizations.get(m.TransferAggregateType.DEBIT),c=n.confirmations.get(m.TransferAggregateType.DEBIT);i.contractApi.estimateDeliveryCommitmentCost(t.tokenAddress,t.address,n.sender,n.recipient,n.nonce,u?t.trailIdentifier:n.recipientTrailIdentifier,a.tx_set_index,n.recipientTrailIdentifier,a.tx_set_proof,a.tx_set_hash,new d.default(a.updated_spendings),new d.default(a.updated_gains),n.amount,c,t.contractAddress).then(function(e){console.log("estimateDeliveryCommitmentCost: "+e),i.contractApi.submitDeliveryCommitment(t.tokenAddress,t.address,n.sender,n.recipient,n.nonce,u?t.trailIdentifier:n.recipientTrailIdentifier,a.tx_set_index,n.recipientTrailIdentifier,a.tx_set_proof,a.tx_set_hash,new d.default(a.updated_spendings),new d.default(a.updated_gains),n.amount,c,r.challengeCost.multipliedBy(e),t.contractAddress).then(o).catch(s)}).catch(s)})})},t=e=r([u.injectable(),o(0,u.inject(a.ContractApiService)),i("design:paramtypes",[a.ContractApiService])],t);var e}();e.DisputeService=v},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(24),s=n(19),u=n(0),a=n(2),c=n(1),l=n(34);e.zip=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return"function"==typeof n&&t.pop(),o.fromArray(t,void 0).lift(new h(n))};var h=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new f(t,this.resultSelector))},t}();e.ZipOperator=h;var f=function(t){function e(e,n,r){void 0===r&&(r=Object.create(null));var i=t.call(this,e)||this;return i.iterators=[],i.active=0,i.resultSelector="function"==typeof n?n:null,i.values=r,i}return i(e,t),e.prototype._next=function(t){var e=this.iterators;s.isArray(t)?e.push(new d(t)):"function"==typeof t[l.iterator]?e.push(new p(t[l.iterator]())):e.push(new g(this.destination,this,t))},e.prototype._complete=function(){var t=this.iterators,e=t.length;if(0!==e){this.active=e;for(var n=0;n<e;n++){var r=t[n];r.stillUnsubscribed?this.add(r.subscribe(r,n)):this.active--}}else this.destination.complete()},e.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},e.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,n=this.destination,r=0;r<e;r++){if("function"==typeof(s=t[r]).hasValue&&!s.hasValue())return}var i=!1,o=[];for(r=0;r<e;r++){var s,u=(s=t[r]).next();if(s.hasCompleted()&&(i=!0),u.done)return void n.complete();o.push(u.value)}this.resultSelector?this._tryresultSelector(o):n.next(o),i&&n.complete()},e.prototype._tryresultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(u.Subscriber);e.ZipSubscriber=f;var p=function(){function t(t){this.iterator=t,this.nextResult=t.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},t.prototype.hasCompleted=function(){var t=this.nextResult;return t&&t.done},t}(),d=function(){function t(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return t.prototype[l.iterator]=function(){return this},t.prototype.next=function(t){var e=this.index++,n=this.array;return e<this.length?{value:n[e],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.array.length>this.index},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),g=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.parent=n,i.observable=r,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return i(e,t),e.prototype[l.iterator]=function(){return this},e.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},e.prototype.hasValue=function(){return this.buffer.length>0},e.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},e.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this.buffer.push(e),this.parent.checkIterators()},e.prototype.subscribe=function(t,e){return c.subscribeToResult(this,this.observable,this,e)},e}(a.OuterSubscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(10),s=n(84),u=n(2),a=n(1);e.timeoutWith=function(t,e,n){return void 0===n&&(n=o.async),function(r){var i=s.isDate(t),o=i?+t-n.now():Math.abs(t);return r.lift(new c(o,i,e,n))}};var c=function(){function t(t,e,n,r){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=n,this.scheduler=r}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},t}(),l=function(t){function e(e,n,r,i,o){var s=t.call(this,e)||this;return s.absoluteTimeout=n,s.waitFor=r,s.withObservable=i,s.scheduler=o,s.action=null,s.scheduleTimeout(),s}return i(e,t),e.dispatchTimeout=function(t){var e=t.withObservable;t._unsubscribeAndRecycle(),t.add(a.subscribeToResult(t,e))},e.prototype.scheduleTimeout=function(){var t=this.action;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(e.dispatchTimeout,this.waitFor,this))},e.prototype._next=function(e){this.absoluteTimeout||this.scheduleTimeout(),t.prototype._next.call(this,e)},e.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null},e}(u.OuterSubscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),s=n(1);e.defaultThrottleConfig={leading:!0,trailing:!1},e.throttle=function(t,n){return void 0===n&&(n=e.defaultThrottleConfig),function(e){return e.lift(new u(t,n.leading,n.trailing))}};var u=function(){function t(t,e,n){this.durationSelector=t,this.leading=e,this.trailing=n}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.durationSelector,this.leading,this.trailing))},t}(),a=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.destination=e,o.durationSelector=n,o._leading=r,o._trailing=i,o._hasValue=!1,o}return i(e,t),e.prototype._next=function(t){this._hasValue=!0,this._sendValue=t,this._throttled||(this._leading?this.send():this.throttle(t))},e.prototype.send=function(){var t=this._hasValue,e=this._sendValue;t&&(this.destination.next(e),this.throttle(e)),this._hasValue=!1,this._sendValue=null},e.prototype.throttle=function(t){var e=this.tryDurationSelector(t);e&&this.add(this._throttled=s.subscribeToResult(this,e))},e.prototype.tryDurationSelector=function(t){try{return this.durationSelector(t)}catch(t){return this.destination.error(t),null}},e.prototype.throttlingDone=function(){var t=this._throttled,e=this._trailing;t&&t.unsubscribe(),this._throttled=null,e&&this.send()},e.prototype.notifyNext=function(t,e,n,r,i){this.throttlingDone()},e.prototype.notifyComplete=function(){this.throttlingDone()},e}(o.OuterSubscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(7),s=n(168),u=n(5),a=n(78),c=n(52),l=n(79),h=function(t){function e(e,n,r){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=t.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=e<1?1:e,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return i(e,t),e.prototype.nextInfiniteTimeWindow=function(e){var n=this._events;n.push(e),n.length>this._bufferSize&&n.shift(),t.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this._events.push(new f(this._getNow(),e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new c.ObjectUnsubscribedError;if(this.isStopped||this.hasError?e=u.Subscription.EMPTY:(this.observers.push(t),e=new l.SubjectSubscription(this,t)),i&&t.add(t=new a.ObserveOnSubscriber(t,i)),n)for(var s=0;s<o&&!t.closed;s++)t.next(r[s]);else for(s=0;s<o&&!t.closed;s++)t.next(r[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||s.queue).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r},e}(o.Subject);e.ReplaySubject=h;var f=function(){return function(t,e){this.time=t,this.value=e}}()},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),s=n(55);e.observeOn=function(t,e){return void 0===e&&(e=0),function(n){return n.lift(new u(t,e))}};var u=function(){function t(t,e){void 0===e&&(e=0),this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.scheduler,this.delay))},t}();e.ObserveOnOperator=u;var a=function(t){function e(e,n,r){void 0===r&&(r=0);var i=t.call(this,e)||this;return i.scheduler=n,i.delay=r,i}return i(e,t),e.dispatch=function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.add(this.scheduler.schedule(e.dispatch,this.delay,new c(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(s.Notification.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(s.Notification.createError(t))},e.prototype._complete=function(){this.scheduleMessage(s.Notification.createComplete())},e}(o.Subscriber);e.ObserveOnSubscriber=a;var c=function(){return function(t,e){this.notification=t,this.destination=e}}();e.ObserveOnMessage=c},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e,n){var r=t.call(this)||this;return r.subject=e,r.subscriber=n,r.closed=!1,r}return i(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(n(5).Subscription);e.SubjectSubscription=o},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0);e.find=function(t,e){if("function"!=typeof t)throw new TypeError("predicate is not a function");return function(n){return n.lift(new s(t,n,!1,e))}};var s=function(){function t(t,e,n,r){this.predicate=t,this.source=e,this.yieldIndex=n,this.thisArg=r}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.predicate,this.source,this.yieldIndex,this.thisArg))},t}();e.FindValueOperator=s;var u=function(t){function e(e,n,r,i,o){var s=t.call(this,e)||this;return s.predicate=n,s.source=r,s.yieldIndex=i,s.thisArg=o,s.index=0,s}return i(e,t),e.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype._next=function(t){var e=this.predicate,n=this.thisArg,r=this.index++;try{e.call(n||this,t,r,this.source)&&this.notifyComplete(this.yieldIndex?r:t)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},e}(o.Subscriber);e.FindValueSubscriber=u},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),s=n(97),u=n(63);e.tap=function(t,e,n){return function(r){return r.lift(new a(t,e,n))}};var a=function(){function t(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.nextOrObserver,this.error,this.complete))},t}(),c=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o._tapNext=s.noop,o._tapError=s.noop,o._tapComplete=s.noop,o._tapError=r||s.noop,o._tapComplete=i||s.noop,u.isFunction(n)?(o._context=o,o._tapNext=n):n&&(o._context=n,o._tapNext=n.next||s.noop,o._tapError=n.error||s.noop,o._tapComplete=n.complete||s.noop),o}return i(e,t),e.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.next(t)},e.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},e}(o.Subscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),s=n(12),u=n(11);e.distinctUntilChanged=function(t,e){return function(n){return n.lift(new a(t,e))}};var a=function(){function t(t,e){this.compare=t,this.keySelector=e}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.compare,this.keySelector))},t}(),c=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.keySelector=r,i.hasKey=!1,"function"==typeof n&&(i.compare=n),i}return i(e,t),e.prototype.compare=function(t,e){return t===e},e.prototype._next=function(t){var e=t;if(this.keySelector&&(e=s.tryCatch(this.keySelector)(t))===u.errorObject)return this.destination.error(u.errorObject.e);var n=!1;if(this.hasKey){if((n=s.tryCatch(this.compare)(this.key,e))===u.errorObject)return this.destination.error(u.errorObject.e)}else this.hasKey=!0;!1===Boolean(n)&&(this.key=e,this.destination.next(t))},e}(o.Subscriber)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4);function i(t){var e=t.error;t.subscriber.error(e)}e.throwError=function(t,e){return e?new r.Observable(function(n){return e.schedule(i,0,{error:t,subscriber:n})}):new r.Observable(function(e){return e.error(t)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isDate=function(t){return t instanceof Date&&!isNaN(+t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(33);e.concatMap=function(t,e){return r.mergeMap(t,e,1)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(56);e.concatAll=function(){return r.mergeAll(1)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4);e.scalar=function(t){var e=new r.Observable(function(e){e.next(t),e.complete()});return e._isScalar=!0,e.value=t,e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(18),i=n(24),o=n(22),s=n(87);e.of=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];switch(r.isScheduler(n)?t.pop():n=void 0,t.length){case 0:return o.empty(n);case 1:return n?i.fromArray(t,n):s.scalar(t[0]);default:return i.fromArray(t,n)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(18),i=n(88),o=n(23),s=n(86);e.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1===t.length||2===t.length&&r.isScheduler(t[1])?o.from(t[0]):s.concatAll()(i.of.apply(void 0,t))}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(18),s=n(19),u=n(2),a=n(1),c=n(24),l={};e.combineLatest=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null,r=null;return o.isScheduler(t[t.length-1])&&(r=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&s.isArray(t[0])&&(t=t[0]),c.fromArray(t,r).lift(new h(n))};var h=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new f(t,this.resultSelector))},t}();e.CombineLatestOperator=h;var f=function(t){function e(e,n){var r=t.call(this,e)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return i(e,t),e.prototype._next=function(t){this.values.push(l),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add(a.subscribeToResult(this,r,r,n))}}},e.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.values,s=o[n],u=this.toRespond?s===l?--this.toRespond:this.toRespond:0;o[n]=e,0===u&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},e.prototype._tryResultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(u.OuterSubscriber);e.CombineLatestSubscriber=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isPromise=function(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isArrayLike=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(35);e.subscribeToObservable=function(t){return function(e){var n=t[r.observable]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(34);e.subscribeToIterable=function(t){return function(e){for(var n=t[r.iterator]();;){var i=n.next();if(i.done){e.complete();break}if(e.next(i.value),e.closed)break}return"function"==typeof n.return&&e.add(function(){n.return&&n.return()}),e}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(61);e.subscribeToPromise=function(t){return function(e){return t.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,r.hostReportError),e}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.subscribeToArray=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.closed||e.complete()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.noop=function(){}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(97);function i(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:r.noop}e.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i(t)},e.pipeFromArray=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),i=n(96),o=n(95),s=n(94),u=n(93),a=n(92),c=n(91),l=n(100),h=n(34),f=n(35);e.subscribeTo=function(t){if(t instanceof r.Observable)return function(e){return t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e)};if(t&&"function"==typeof t[f.observable])return u.subscribeToObservable(t);if(a.isArrayLike(t))return i.subscribeToArray(t);if(c.isPromise(t))return o.subscribeToPromise(t);if(t&&"function"==typeof t[h.iterator])return s.subscribeToIterable(t);var e=l.isObject(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isObject=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(62),i=n(61);e.empty={closed:!0,next:function(t){},error:function(t){if(r.config.useDeprecatedSynchronousErrorHandling)throw t;i.hostReportError(t)},complete:function(){}}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(12),s=n(11),u=n(2),a=n(1);e.audit=function(t){return function(e){return e.lift(new c(t))}};var c=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.durationSelector))},t}(),l=function(t){function e(e,n){var r=t.call(this,e)||this;return r.durationSelector=n,r.hasValue=!1,r}return i(e,t),e.prototype._next=function(t){if(this.value=t,this.hasValue=!0,!this.throttled){var e=o.tryCatch(this.durationSelector)(t);if(e===s.errorObject)this.destination.error(s.errorObject.e);else{var n=a.subscribeToResult(this,e);!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}}},e.prototype.clearThrottle=function(){var t=this.value,e=this.hasValue,n=this.throttled;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),e&&(this.value=null,this.hasValue=!1,this.destination.next(t))},e.prototype.notifyNext=function(t,e,n,r){this.clearThrottle()},e.prototype.notifyComplete=function(){this.clearThrottle()},e}(u.OuterSubscriber)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(102);e.audit=r.audit;var i=n(227);e.auditTime=i.auditTime;var o=n(223);e.buffer=o.buffer;var s=n(222);e.bufferCount=s.bufferCount;var u=n(221);e.bufferTime=u.bufferTime;var a=n(220);e.bufferToggle=a.bufferToggle;var c=n(219);e.bufferWhen=c.bufferWhen;var l=n(218);e.catchError=l.catchError;var h=n(217);e.combineAll=h.combineAll;var f=n(216);e.combineLatest=f.combineLatest;var p=n(210);e.concat=p.concat;var d=n(86);e.concatAll=d.concatAll;var g=n(85);e.concatMap=g.concatMap;var y=n(209);e.concatMapTo=y.concatMapTo;var m=n(208);e.count=m.count;var v=n(207);e.debounce=v.debounce;var b=n(206);e.debounceTime=b.debounceTime;var _=n(32);e.defaultIfEmpty=_.defaultIfEmpty;var w=n(205);e.delay=w.delay;var A=n(204);e.delayWhen=A.delayWhen;var T=n(203);e.dematerialize=T.dematerialize;var S=n(202);e.distinct=S.distinct;var M=n(82);e.distinctUntilChanged=M.distinctUntilChanged;var O=n(201);e.distinctUntilKeyChanged=O.distinctUntilKeyChanged;var E=n(200);e.elementAt=E.elementAt;var x=n(199);e.every=x.every;var I=n(198);e.exhaust=I.exhaust;var P=n(197);e.exhaustMap=P.exhaustMap;var R=n(196);e.expand=R.expand;var N=n(31);e.filter=N.filter;var C=n(195);e.finalize=C.finalize;var j=n(80);e.find=j.find;var L=n(194);e.findIndex=L.findIndex;var k=n(193);e.first=k.first;var D=n(192);e.groupBy=D.groupBy;var B=n(191);e.ignoreElements=B.ignoreElements;var U=n(190);e.isEmpty=U.isEmpty;var F=n(189);e.last=F.last;var W=n(21);e.map=W.map;var G=n(188);e.mapTo=G.mapTo;var V=n(187);e.materialize=V.materialize;var z=n(186);e.max=z.max;var H=n(185);e.merge=H.merge;var q=n(56);e.mergeAll=q.mergeAll;var Y=n(33);e.mergeMap=Y.mergeMap;var K=n(33);e.flatMap=K.mergeMap;var Z=n(183);e.mergeMapTo=Z.mergeMapTo;var J=n(182);e.mergeScan=J.mergeScan;var $=n(181);e.min=$.min;var X=n(29);e.multicast=X.multicast;var Q=n(78);e.observeOn=Q.observeOn;var tt=n(179);e.onErrorResumeNext=tt.onErrorResumeNext;var et=n(178);e.pairwise=et.pairwise;var nt=n(177);e.partition=nt.partition;var rt=n(175);e.pluck=rt.pluck;var it=n(174);e.publish=it.publish;var ot=n(173);e.publishBehavior=ot.publishBehavior;var st=n(171);e.publishLast=st.publishLast;var ut=n(169);e.publishReplay=ut.publishReplay;var at=n(165);e.race=at.race;var ct=n(40);e.reduce=ct.reduce;var lt=n(163);e.repeat=lt.repeat;var ht=n(162);e.repeatWhen=ht.repeatWhen;var ft=n(161);e.retry=ft.retry;var pt=n(160);e.retryWhen=pt.retryWhen;var dt=n(49);e.refCount=dt.refCount;var gt=n(159);e.sample=gt.sample;var yt=n(158);e.sampleTime=yt.sampleTime;var mt=n(50);e.scan=mt.scan;var vt=n(157);e.sequenceEqual=vt.sequenceEqual;var bt=n(156);e.share=bt.share;var _t=n(155);e.shareReplay=_t.shareReplay;var wt=n(154);e.single=wt.single;var At=n(153);e.skip=At.skip;var Tt=n(152);e.skipLast=Tt.skipLast;var St=n(151);e.skipUntil=St.skipUntil;var Mt=n(150);e.skipWhile=Mt.skipWhile;var Ot=n(149);e.startWith=Ot.startWith;var Et=n(148);e.subscribeOn=Et.subscribeOn;var xt=n(142);e.switchAll=xt.switchAll;var It=n(48);e.switchMap=It.switchMap;var Pt=n(141);e.switchMapTo=Pt.switchMapTo;var Rt=n(53);e.take=Rt.take;var Nt=n(51);e.takeLast=Nt.takeLast;var Ct=n(140);e.takeUntil=Ct.takeUntil;var jt=n(139);e.takeWhile=jt.takeWhile;var Lt=n(81);e.tap=Lt.tap;var kt=n(76);e.throttle=kt.throttle;var Dt=n(138);e.throttleTime=Dt.throttleTime;var Bt=n(137);e.timeInterval=Bt.timeInterval;var Ut=n(135);e.timeout=Ut.timeout;var Ft=n(75);e.timeoutWith=Ft.timeoutWith;var Wt=n(133);e.timestamp=Wt.timestamp;var Gt=n(132);e.toArray=Gt.toArray;var Vt=n(131);e.window=Vt.window;var zt=n(130);e.windowCount=zt.windowCount;var Ht=n(129);e.windowTime=Ht.windowTime;var qt=n(128);e.windowToggle=qt.windowToggle;var Yt=n(127);e.windowWhen=Yt.windowWhen;var Kt=n(126);e.withLatestFrom=Kt.withLatestFrom;var Zt=n(125);e.zip=Zt.zip;var Jt=n(124);e.zipAll=Jt.zipAll},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PAYMENT_HUB_ABI=[{constant:!0,inputs:[],name:"ROUNDS_KEPT",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"token",type:"address"},{name:"slot",type:"uint8"}],name:"getPendingWithdrawalsAtSlot",outputs:[{name:"",type:"uint256"},{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"slot",type:"uint8"}],name:"getChainValueAtSlot",outputs:[{name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"BLOCKS_PER_ROUND",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"token",type:"address"}],name:"getTokenTrail",outputs:[{name:"",type:"uint64"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"token",type:"address"},{name:"holder",type:"address"}],name:"getWallet",outputs:[{name:"",type:"bool"},{name:"",type:"uint256"},{name:"",type:"uint256"},{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"token",type:"address"},{name:"holder",type:"address"},{name:"trail",type:"uint64"},{name:"round",type:"uint256"},{name:"txSetRoot",type:"bytes32"},{name:"deltas",type:"uint256[2]"},{name:"attester",type:"address"},{name:"r",type:"bytes32"},{name:"s",type:"bytes32"},{name:"v",type:"uint8"}],name:"verifyProofOfTransitionAgreement",outputs:[{name:"checksumTransfer",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"hasMissedCheckpointSubmission",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"token",type:"address"},{name:"SR",type:"address[2]"},{name:"nonceAmount",type:"uint256[2]"},{name:"trails",type:"uint64[3]"},{name:"chain",type:"bytes32[]"},{name:"deltas",type:"uint256[2]"},{name:"rsTxSetRoot",type:"bytes32[3]"},{name:"v",type:"uint8"}],name:"submitDeliveryCommitment",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!0,inputs:[],name:"DEPOSITS_KEPT",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"token",type:"address"},{name:"sender",type:"address"},{name:"recipient",type:"address"}],name:"getChallenge",outputs:[{name:"",type:"uint8"},{name:"",type:"uint256"},{name:"",type:"uint256"},{name:"",type:"uint256"},{name:"",type:"uint256"},{name:"",type:"uint256"},{name:"",type:"uint256"},{name:"",type:"uint256"},{name:"",type:"uint64"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"EXTENDED_SLACK_PERIOD",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"allotmentTrail",type:"uint64"},{name:"membershipTrail",type:"uint64"},{name:"node",type:"bytes32"},{name:"root",type:"bytes32"},{name:"allotmentChain",type:"bytes32[]"},{name:"membershipChain",type:"bytes32[]"},{name:"value",type:"uint256[]"},{name:"LR",type:"uint256[2]"}],name:"verifyProofOfExclusiveAllotment",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!0,inputs:[{name:"token",type:"address"},{name:"slot",type:"uint8"}],name:"getDepositsAtSlot",outputs:[{name:"",type:"uint256"},{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"token",type:"address"},{name:"paint",type:"bytes32"},{name:"trail",type:"uint64"},{name:"allotmentChain",type:"bytes32[]"},{name:"membershipChain",type:"bytes32[]"},{name:"values",type:"uint256[]"},{name:"hubProofOfStakeInterval",type:"uint256[2]"},{name:"withdrawalAmount",type:"uint256"}],name:"requestWithdrawal",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!0,inputs:[],name:"SLACK_PERIOD",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"token",type:"address"},{name:"holder",type:"address"},{name:"checksumTransfer",type:"bytes32"},{name:"trail",type:"uint64"},{name:"round",type:"uint256"},{name:"allotmentChain",type:"bytes32[]"},{name:"membershipChain",type:"bytes32[]"},{name:"values",type:"uint256[]"},{name:"LR",type:"uint256[2]"}],name:"verifyProofOfStake",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"token",type:"address"},{name:"withdrawalAmount",type:"uint256"},{name:"expiry",type:"uint256"},{name:"r",type:"bytes32"},{name:"s",type:"bytes32"},{name:"v",type:"uint8"}],name:"requestAuthorizedWithdrawal",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"token",type:"address"},{name:"recipient",type:"address"}],name:"confirmWithdrawal",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"slot",type:"uint8"}],name:"getCheckpointAtSlot",outputs:[{name:"",type:"uint256"},{name:"",type:"bytes32"},{name:"",type:"uint24"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"token",type:"address"},{name:"holder",type:"address"}],name:"getOnChainTransactions",outputs:[{name:"currentRoundDeposits",type:"uint256"},{name:"currentRoundWithdrawals",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"token",type:"address"},{name:"addr",type:"address"},{name:"slot",type:"uint8"}],name:"getDepositAggregateAtSlot",outputs:[{name:"",type:"uint256"},{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"token",type:"address"},{name:"beneficiary",type:"address"},{name:"amount",type:"uint256"}],name:"deposit",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[{name:"token",type:"address"},{name:"txSetRoot",type:"bytes32"},{name:"trail",type:"uint64"},{name:"deltas",type:"uint256[2]"},{name:"r",type:"bytes32"},{name:"s",type:"bytes32"},{name:"v",type:"uint8"}],name:"submitInitialEmptyState",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!0,inputs:[],name:"currentRound",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"message",type:"bytes32"},{name:"r",type:"bytes32"},{name:"s",type:"bytes32"},{name:"v",type:"uint8"}],name:"signedMessageECRECOVER",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!0,inputs:[{name:"trail",type:"uint64"}],name:"getTokenAtTrail",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"hasOutstandingChallenges",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"token",type:"address"},{name:"holder",type:"address"},{name:"expiry",type:"uint256"},{name:"amount",type:"uint256"},{name:"attester",type:"address"},{name:"r",type:"bytes32"},{name:"s",type:"bytes32"},{name:"v",type:"uint8"}],name:"verifyWithdrawalAuthorization",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"genesis",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"token",type:"address"}],name:"recoverOnlyOnChainFunds",outputs:[{name:"reclaimed",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"round",type:"uint256"}],name:"getLiveChallenges",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"tokens",type:"address[2]"},{name:"senderTransferRecipientTrails",type:"uint64[3]"},{name:"allotmentChain",type:"bytes32[]"},{name:"membershipChain",type:"bytes32[]"},{name:"txChain",type:"bytes32[]"},{name:"values",type:"uint256[]"},{name:"lrDeltas",type:"uint256[2][2]"},{name:"sellBuyBalanceNonce",type:"uint256[4]"},{name:"txSetRoot",type:"bytes32[2]"}],name:"submitSwapCommitment",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[{name:"token",type:"address"},{name:"paint",type:"bytes32"},{name:"trail",type:"uint64"},{name:"allotmentChain",type:"bytes32[]"},{name:"membershipChain",type:"bytes32[]"},{name:"value",type:"uint256[]"},{name:"LR",type:"uint256[2]"},{name:"deltas",type:"uint256[2]"},{name:"rsTxSetRoot",type:"bytes32[3]"},{name:"v",type:"uint8"}],name:"submitInitialMerkleState",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!0,inputs:[{name:"trail",type:"uint256"},{name:"chain",type:"bytes32[]"},{name:"node",type:"bytes32"},{name:"merkleRoot",type:"bytes32"}],name:"verifyProofOfMembership",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!0,inputs:[],name:"lastSubmissionRound",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"MIN_GAS_COST",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"token",type:"address"},{name:"paint",type:"bytes32"},{name:"trail",type:"uint64"},{name:"allotmentChain",type:"bytes32[]"},{name:"membershipChain",type:"bytes32[]"},{name:"values",type:"uint256[]"},{name:"LR",type:"uint256[2]"}],name:"recoverAllFunds",outputs:[{name:"recovered",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"token",type:"address"},{name:"holder",type:"address"},{name:"withdrawalAmount",type:"uint256"},{name:"expiry",type:"uint256"},{name:"r",type:"bytes32"},{name:"s",type:"bytes32"},{name:"v",type:"uint8"}],name:"requestDelegatedWithdrawal",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"currentSubBlock",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"token",type:"address"},{name:"slot",type:"uint8"}],name:"getConfirmedWithdrawalsAtSlot",outputs:[{name:"",type:"uint256"},{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[{name:"blocksPerRound",type:"uint256"},{name:"owner",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"round",type:"uint256"},{indexed:!1,name:"merkleRoot",type:"bytes32"}],name:"CheckpointSubmission",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"token",type:"address"},{indexed:!0,name:"recipient",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"token",type:"address"},{indexed:!0,name:"requestor",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"WithdrawalRequest",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"token",type:"address"},{indexed:!0,name:"requestor",type:"address"}],name:"WithdrawalConfirmation",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"token",type:"address"},{indexed:!0,name:"recipient",type:"address"},{indexed:!0,name:"sender",type:"address"}],name:"ChallengeIssued",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"token",type:"address"},{indexed:!0,name:"account",type:"address"},{indexed:!0,name:"round",type:"uint256"},{indexed:!1,name:"trail",type:"uint64"},{indexed:!1,name:"allotmentChain",type:"bytes32[]"},{indexed:!1,name:"membershipChain",type:"bytes32[]"},{indexed:!1,name:"values",type:"uint256[]"},{indexed:!1,name:"LR",type:"uint256[2]"},{indexed:!1,name:"paint",type:"bytes32"},{indexed:!1,name:"r",type:"bytes32"},{indexed:!1,name:"s",type:"bytes32"},{indexed:!1,name:"v",type:"uint8"}],name:"StateUpdate",type:"event"},{constant:!1,inputs:[{name:"token",type:"address"}],name:"registerERC20",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(13),o=function(t,e){var n=t.parentRequest;return null!==n&&(!!e(n)||o(n,e))};e.traverseAncerstors=o;var s=function(t){return function(e){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(t)(e)};return n.metaData=new i.Metadata(t,e),n}};e.taggedConstraint=s;var u=s(r.NAMED_TAG);e.namedConstraint=u;e.typeConstraint=function(t){return function(e){var n=null;if(null!==e){if(n=e.bindings[0],"string"==typeof t)return n.serviceIdentifier===t;var r=e.bindings[0].implementationType;return t===r}return!1}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(66),i=n(65),o=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new i.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new r.BindingOnSyntax(this._binding)}return t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingWhenOnSyntax=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(25),o=n(13),s=n(254),u=function(){function t(t,e,n,u){this.guid=i.guid(),this.type=t,this.serviceIdentifier=n,this.name=new s.QueryableString(e||""),this.metadata=new Array;var a=null;"string"==typeof u?a=new o.Metadata(r.NAMED_TAG,u):u instanceof o.Metadata&&(a=u),null!==a&&this.metadata.push(a)}return t.prototype.hasTag=function(t){for(var e=0,n=this.metadata;e<n.length;e++){if(n[e].key===t)return!0}return!1},t.prototype.isArray=function(){return this.hasTag(r.MULTI_INJECT_TAG)},t.prototype.matchesArray=function(t){return this.matchesTag(r.MULTI_INJECT_TAG)(t)},t.prototype.isNamed=function(){return this.hasTag(r.NAMED_TAG)},t.prototype.isTagged=function(){return this.metadata.some(function(t){return t.key!==r.INJECT_TAG&&t.key!==r.MULTI_INJECT_TAG&&t.key!==r.NAME_TAG&&t.key!==r.UNMANAGED_TAG&&t.key!==r.NAMED_TAG})},t.prototype.isOptional=function(){return this.matchesTag(r.OPTIONAL_TAG)(!0)},t.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(t){return t.key===r.NAMED_TAG})[0]:null},t.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(t){return t.key!==r.INJECT_TAG&&t.key!==r.MULTI_INJECT_TAG&&t.key!==r.NAME_TAG&&t.key!==r.UNMANAGED_TAG&&t.key!==r.NAMED_TAG}):null},t.prototype.matchesNamedTag=function(t){return this.matchesTag(r.NAMED_TAG)(t)},t.prototype.matchesTag=function(t){var e=this;return function(n){for(var r=0,i=e.metadata;r<i.length;r++){var o=i[r];if(o.key===t&&o.value===n)return!0}return!1}},t}();e.Target=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(9),i=n(3),o=n(13),s=n(20),u=function(){function t(t){this._cb=t}return t.prototype.unwrap=function(){return this._cb()},t}();e.LazyServiceIdentifer=u,e.inject=function(t){return function(e,n,u){if(void 0===t)throw new Error(r.UNDEFINED_INJECT_ANNOTATION(e.name));var a=new o.Metadata(i.INJECT_TAG,t);"number"==typeof u?s.tagParameter(e,n,u,a):s.tagProperty(e,n,a)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(9);e.isStackOverflowExeption=function(t){return t instanceof RangeError||t.message===r.STACK_OVERFLOW}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=function(){function t(){}return t.prototype.getConstructorMetadata=function(t){return{compilerGeneratedMetadata:Reflect.getMetadata(r.PARAM_TYPES,t),userGeneratedMetadata:Reflect.getMetadata(r.TAGGED,t)||{}}},t.prototype.getPropertiesMetadata=function(t){return Reflect.getMetadata(r.TAGGED_PROP,t)||[]},t}();e.MetadataReader=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this._desc=t}return Object.defineProperty(t.prototype,"desc",{get:function(){return this._desc},enumerable:!0,configurable:!0}),t.SYNCHRONIZED=new t("Synchronized."),t.WAITING=new t("Waiting for additional data from server."),t.UNSAFE=new t("UNSAFE TO USE."),t}();e.WalletSyncState=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(111),i=n(67),o=function(){function t(t,e,n,r,i){this.wallet=t,this.syncState=e,this.updateError=n,this.contractState=r,this.hubState=i}return t.EMPTY_STATE=new t(null,r.WalletSyncState.WAITING,i.WalletUpdateError.NO_WALLET_SPECIFIED),t}();e.WalletState=o},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(8)),o=function(){function t(t,e,n,r,o,s,u,a,c,l,h,f,p,d,g,y,m,v,b,_,w,A,T,S,M,O,E,x){void 0===O&&(O=[new i.default(0),new i.default(0),new i.default(0)]),void 0===x&&(x=0),this.networkId=t,this.genesis=e,this.block=n,this.currentRound=r,this.currentSubBlock=o,this.blocksPerRound=s,this.slackPeriod=u,this.extendedSlackPeriod=a,this.roundsKept=c,this.depositsKept=l,this.lastSubmissionRound=h,this.contractBalance=f,this.lastCheckpointSubmitted=p,this.hasMissedCheckpointSubmission=d,this.hasOutstandingChallenges=g,this.liveChallenges=y,this.slackingChallenges=m,this.challengeCost=v,this.onChainBalance=b,this.stateUpdateChallengeIssued=_,this.stateUpdateChallengeBlock=w,this.stateUpdateChallengeRound=A,this.isWithdrawalPending=T,this.pendingWithdrawalAmount=S,this.pendingWithdrawalRound=M,this.deposits=O,this.recovered=E,this.timestamp=x,this.syncPeriod=2e4}return Object.defineProperty(t.prototype,"isCheckpointSubmitted",{get:function(){return this.lastSubmissionRound===this.currentRound},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isStateSynced",{get:function(){return(new Date).getTime()-this.timestamp<=this.syncPeriod},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPunished",{get:function(){return this.hasMissedCheckpointSubmission||this.hasOutstandingChallenges},enumerable:!0,configurable:!0}),t.EMPTY_STATE=new t(0,0,0,0,0,0,0,0,0,0,0,new i.default(0),"0x0000000000000000000000000000000000000000",!1,!1,0,0,new i.default(0),new i.default(0),!1,0,0,!1,new i.default(0),0,[new i.default(0),new i.default(0),new i.default(0)],!1,0),t}();e.ContractState=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,n){this.statusData=t,this.walletData=e,this.timestamp=n,this.syncPeriod=2e4}return Object.defineProperty(t.prototype,"isStateSynced",{get:function(){return(new Date).getTime()-this.timestamp<=this.syncPeriod},enumerable:!0,configurable:!0}),t.prototype.getMerkleProofData=function(t){return!this.walletData||!this.walletData.merkle_proofs||this.walletData.merkle_proofs.length<=t?null:this.walletData.merkle_proofs[t]},t.EMPTY_STATE=new t,t}();e.HubState=r},function(t,e,n){var r;/*! bignumber.js v4.1.0 https://github.com/MikeMcl/bignumber.js/LICENCE */!function(i){"use strict";var o,s=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,u=Math.ceil,a=Math.floor,c=" not a boolean or binary digit",l="rounding mode",h="number type has more than 15 significant digits",f="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_",p=1e14,d=14,g=9007199254740991,y=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],m=1e7,v=1e9;function b(t){var e=0|t;return t>0||t===e?e:e-1}function _(t){for(var e,n,r=1,i=t.length,o=t[0]+"";r<i;){for(e=t[r++]+"",n=d-e.length;n--;e="0"+e);o+=e}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function w(t,e){var n,r,i=t.c,o=e.c,s=t.s,u=e.s,a=t.e,c=e.e;if(!s||!u)return null;if(n=i&&!i[0],r=o&&!o[0],n||r)return n?r?0:-u:s;if(s!=u)return s;if(n=s<0,r=a==c,!i||!o)return r?0:!i^n?1:-1;if(!r)return a>c^n?1:-1;for(u=(a=i.length)<(c=o.length)?a:c,s=0;s<u;s++)if(i[s]!=o[s])return i[s]>o[s]^n?1:-1;return a==c?0:a>c^n?1:-1}function A(t,e,n){return(t=E(t))>=e&&t<=n}function T(t){return"[object Array]"==Object.prototype.toString.call(t)}function S(t,e,n){for(var r,i,o=[0],s=0,u=t.length;s<u;){for(i=o.length;i--;o[i]*=e);for(o[r=0]+=f.indexOf(t.charAt(s++));r<o.length;r++)o[r]>n-1&&(null==o[r+1]&&(o[r+1]=0),o[r+1]+=o[r]/n|0,o[r]%=n)}return o.reverse()}function M(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function O(t,e){var n,r;if(e<0){for(r="0.";++e;r+="0");t=r+t}else if(++e>(n=t.length)){for(r="0",e-=n;--e;r+="0");t+=r}else e<n&&(t=t.slice(0,e)+"."+t.slice(e));return t}function E(t){return(t=parseFloat(t))<0?u(t):a(t)}(o=function t(e){var n,r,i,o,x,I,P,R,N=0,C=Y.prototype,j=new Y(1),L=20,k=4,D=-7,B=21,U=-1e7,F=1e7,W=!0,G=$,V=!1,z=1,H=0,q={decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:"Â ",fractionGroupSize:0};function Y(t,e){var n,i,o,u,c,l,p=this;if(!(p instanceof Y))return W&&Q(26,"constructor call without new",t),new Y(t,e);if(null!=e&&G(e,2,64,N,"base")){if(l=t+"",10==(e|=0))return tt(p=new Y(t instanceof Y?t:l),L+p.e+1,k);if((u="number"==typeof t)&&0*t!=0||!new RegExp("^-?"+(n="["+f.slice(0,e)+"]+")+"(?:\\."+n+")?$",e<37?"i":"").test(l))return r(p,l,u,e);u?(p.s=1/t<0?(l=l.slice(1),-1):1,W&&l.replace(/^0\.0*|\./,"").length>15&&Q(N,h,t),u=!1):p.s=45===l.charCodeAt(0)?(l=l.slice(1),-1):1,l=K(l,10,e,p.s)}else{if(t instanceof Y)return p.s=t.s,p.e=t.e,p.c=(t=t.c)?t.slice():t,void(N=0);if((u="number"==typeof t)&&0*t==0){if(p.s=1/t<0?(t=-t,-1):1,t===~~t){for(i=0,o=t;o>=10;o/=10,i++);return p.e=i,p.c=[t],void(N=0)}l=t+""}else{if(!s.test(l=t+""))return r(p,l,u);p.s=45===l.charCodeAt(0)?(l=l.slice(1),-1):1}}for((i=l.indexOf("."))>-1&&(l=l.replace(".","")),(o=l.search(/e/i))>0?(i<0&&(i=o),i+=+l.slice(o+1),l=l.substring(0,o)):i<0&&(i=l.length),o=0;48===l.charCodeAt(o);o++);for(c=l.length;48===l.charCodeAt(--c););if(l=l.slice(o,c+1))if(c=l.length,u&&W&&c>15&&(t>g||t!==a(t))&&Q(N,h,p.s*t),(i=i-o-1)>F)p.c=p.e=null;else if(i<U)p.c=[p.e=0];else{if(p.e=i,p.c=[],o=(i+1)%d,i<0&&(o+=d),o<c){for(o&&p.c.push(+l.slice(0,o)),c-=d;o<c;)p.c.push(+l.slice(o,o+=d));l=l.slice(o),o=d-l.length}else o-=c;for(;o--;l+="0");p.c.push(+l)}else p.c=[p.e=0];N=0}function K(t,e,r,i){var o,s,u,a,c,l,h,p=t.indexOf("."),d=L,g=k;for(r<37&&(t=t.toLowerCase()),p>=0&&(u=H,H=0,t=t.replace(".",""),c=(h=new Y(r)).pow(t.length-p),H=u,h.c=S(O(_(c.c),c.e),10,e),h.e=h.c.length),s=u=(l=S(t,r,e)).length;0==l[--u];l.pop());if(!l[0])return"0";if(p<0?--s:(c.c=l,c.e=s,c.s=i,l=(c=n(c,h,d,g,e)).c,a=c.r,s=c.e),p=l[o=s+d+1],u=e/2,a=a||o<0||null!=l[o+1],a=g<4?(null!=p||a)&&(0==g||g==(c.s<0?3:2)):p>u||p==u&&(4==g||a||6==g&&1&l[o-1]||g==(c.s<0?8:7)),o<1||!l[0])t=a?O("1",-d):"0";else{if(l.length=o,a)for(--e;++l[--o]>e;)l[o]=0,o||(++s,l=[1].concat(l));for(u=l.length;!l[--u];);for(p=0,t="";p<=u;t+=f.charAt(l[p++]));t=O(t,s)}return t}function Z(t,e,n,r){var i,o,s,u,a;if(n=null!=n&&G(n,0,8,r,l)?0|n:k,!t.c)return t.toString();if(i=t.c[0],s=t.e,null==e)a=_(t.c),a=19==r||24==r&&s<=D?M(a,s):O(a,s);else if(o=(t=tt(new Y(t),e,n)).e,u=(a=_(t.c)).length,19==r||24==r&&(e<=o||o<=D)){for(;u<e;a+="0",u++);a=M(a,o)}else if(e-=s,a=O(a,o),o+1>u){if(--e>0)for(a+=".";e--;a+="0");}else if((e+=o-u)>0)for(o+1==u&&(a+=".");e--;a+="0");return t.s<0&&i?"-"+a:a}function J(t,e){var n,r,i=0;for(T(t[0])&&(t=t[0]),n=new Y(t[0]);++i<t.length;){if(!(r=new Y(t[i])).s){n=r;break}e.call(n,r)&&(n=r)}return n}function $(t,e,n,r,i){return(t<e||t>n||t!=E(t))&&Q(r,(i||"decimal places")+(t<e||t>n?" out of range":" not an integer"),t),!0}function X(t,e,n){for(var r=1,i=e.length;!e[--i];e.pop());for(i=e[0];i>=10;i/=10,r++);return(n=r+n*d-1)>F?t.c=t.e=null:n<U?t.c=[t.e=0]:(t.e=n,t.c=e),t}function Q(t,e,n){var r=new Error(["new BigNumber","cmp","config","div","divToInt","eq","gt","gte","lt","lte","minus","mod","plus","precision","random","round","shift","times","toDigits","toExponential","toFixed","toFormat","toFraction","pow","toPrecision","toString","BigNumber"][t]+"() "+e+": "+n);throw r.name="BigNumber Error",N=0,r}function tt(t,e,n,r){var i,o,s,c,l,h,f,g=t.c,m=y;if(g){t:{for(i=1,c=g[0];c>=10;c/=10,i++);if((o=e-i)<0)o+=d,s=e,f=(l=g[h=0])/m[i-s-1]%10|0;else if((h=u((o+1)/d))>=g.length){if(!r)break t;for(;g.length<=h;g.push(0));l=f=0,i=1,s=(o%=d)-d+1}else{for(l=c=g[h],i=1;c>=10;c/=10,i++);f=(s=(o%=d)-d+i)<0?0:l/m[i-s-1]%10|0}if(r=r||e<0||null!=g[h+1]||(s<0?l:l%m[i-s-1]),r=n<4?(f||r)&&(0==n||n==(t.s<0?3:2)):f>5||5==f&&(4==n||r||6==n&&(o>0?s>0?l/m[i-s]:0:g[h-1])%10&1||n==(t.s<0?8:7)),e<1||!g[0])return g.length=0,r?(e-=t.e+1,g[0]=m[(d-e%d)%d],t.e=-e||0):g[0]=t.e=0,t;if(0==o?(g.length=h,c=1,h--):(g.length=h+1,c=m[d-o],g[h]=s>0?a(l/m[i-s]%m[s])*c:0),r)for(;;){if(0==h){for(o=1,s=g[0];s>=10;s/=10,o++);for(s=g[0]+=c,c=1;s>=10;s/=10,c++);o!=c&&(t.e++,g[0]==p&&(g[0]=1));break}if(g[h]+=c,g[h]!=p)break;g[h--]=0,c=1}for(o=g.length;0===g[--o];g.pop());}t.e>F?t.c=t.e=null:t.e<U&&(t.c=[t.e=0])}return t}return Y.another=t,Y.ROUND_UP=0,Y.ROUND_DOWN=1,Y.ROUND_CEIL=2,Y.ROUND_FLOOR=3,Y.ROUND_HALF_UP=4,Y.ROUND_HALF_DOWN=5,Y.ROUND_HALF_EVEN=6,Y.ROUND_HALF_CEIL=7,Y.ROUND_HALF_FLOOR=8,Y.EUCLID=9,Y.config=Y.set=function(){var t,e,n=0,r={},i=arguments,o=i[0],s=o&&"object"==typeof o?function(){if(o.hasOwnProperty(e))return null!=(t=o[e])}:function(){if(i.length>n)return null!=(t=i[n++])};return s(e="DECIMAL_PLACES")&&G(t,0,v,2,e)&&(L=0|t),r[e]=L,s(e="ROUNDING_MODE")&&G(t,0,8,2,e)&&(k=0|t),r[e]=k,s(e="EXPONENTIAL_AT")&&(T(t)?G(t[0],-v,0,2,e)&&G(t[1],0,v,2,e)&&(D=0|t[0],B=0|t[1]):G(t,-v,v,2,e)&&(D=-(B=0|(t<0?-t:t)))),r[e]=[D,B],s(e="RANGE")&&(T(t)?G(t[0],-v,-1,2,e)&&G(t[1],1,v,2,e)&&(U=0|t[0],F=0|t[1]):G(t,-v,v,2,e)&&(0|t?U=-(F=0|(t<0?-t:t)):W&&Q(2,e+" cannot be zero",t))),r[e]=[U,F],s(e="ERRORS")&&(t===!!t||1===t||0===t?(N=0,G=(W=!!t)?$:A):W&&Q(2,e+c,t)),r[e]=W,s(e="CRYPTO")&&(!0===t||!1===t||1===t||0===t?t?!(t="undefined"==typeof crypto)&&crypto&&(crypto.getRandomValues||crypto.randomBytes)?V=!0:W?Q(2,"crypto unavailable",t?void 0:crypto):V=!1:V=!1:W&&Q(2,e+c,t)),r[e]=V,s(e="MODULO_MODE")&&G(t,0,9,2,e)&&(z=0|t),r[e]=z,s(e="POW_PRECISION")&&G(t,0,v,2,e)&&(H=0|t),r[e]=H,s(e="FORMAT")&&("object"==typeof t?q=t:W&&Q(2,e+" not an object",t)),r[e]=q,r},Y.max=function(){return J(arguments,C.lt)},Y.min=function(){return J(arguments,C.gt)},Y.random=(i=9007199254740992*Math.random()&2097151?function(){return a(9007199254740992*Math.random())}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(t){var e,n,r,o,s,c=0,l=[],h=new Y(j);if(t=null!=t&&G(t,0,v,14)?0|t:L,o=u(t/d),V)if(crypto.getRandomValues){for(e=crypto.getRandomValues(new Uint32Array(o*=2));c<o;)(s=131072*e[c]+(e[c+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),e[c]=n[0],e[c+1]=n[1]):(l.push(s%1e14),c+=2);c=o/2}else if(crypto.randomBytes){for(e=crypto.randomBytes(o*=7);c<o;)(s=281474976710656*(31&e[c])+1099511627776*e[c+1]+4294967296*e[c+2]+16777216*e[c+3]+(e[c+4]<<16)+(e[c+5]<<8)+e[c+6])>=9e15?crypto.randomBytes(7).copy(e,c):(l.push(s%1e14),c+=7);c=o/7}else V=!1,W&&Q(14,"crypto unavailable",crypto);if(!V)for(;c<o;)(s=i())<9e15&&(l[c++]=s%1e14);for(o=l[--c],t%=d,o&&t&&(s=y[d-t],l[c]=a(o/s)*s);0===l[c];l.pop(),c--);if(c<0)l=[r=0];else{for(r=-1;0===l[0];l.splice(0,1),r-=d);for(c=1,s=l[0];s>=10;s/=10,c++);c<d&&(r-=d-c)}return h.e=r,h.c=l,h}),n=function(){function t(t,e,n){var r,i,o,s,u=0,a=t.length,c=e%m,l=e/m|0;for(t=t.slice();a--;)u=((i=c*(o=t[a]%m)+(r=l*o+(s=t[a]/m|0)*c)%m*m+u)/n|0)+(r/m|0)+l*s,t[a]=i%n;return u&&(t=[u].concat(t)),t}function e(t,e,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(t[i]!=e[i]){o=t[i]>e[i]?1:-1;break}return o}function n(t,e,n,r){for(var i=0;n--;)t[n]-=i,i=t[n]<e[n]?1:0,t[n]=i*r+t[n]-e[n];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(r,i,o,s,u){var c,l,h,f,g,y,m,v,_,w,A,T,S,M,O,E,x,I=r.s==i.s?1:-1,P=r.c,R=i.c;if(!(P&&P[0]&&R&&R[0]))return new Y(r.s&&i.s&&(P?!R||P[0]!=R[0]:R)?P&&0==P[0]||!R?0*I:I/0:NaN);for(_=(v=new Y(I)).c=[],I=o+(l=r.e-i.e)+1,u||(u=p,l=b(r.e/d)-b(i.e/d),I=I/d|0),h=0;R[h]==(P[h]||0);h++);if(R[h]>(P[h]||0)&&l--,I<0)_.push(1),f=!0;else{for(M=P.length,E=R.length,h=0,I+=2,(g=a(u/(R[0]+1)))>1&&(R=t(R,g,u),P=t(P,g,u),E=R.length,M=P.length),S=E,A=(w=P.slice(0,E)).length;A<E;w[A++]=0);x=R.slice(),x=[0].concat(x),O=R[0],R[1]>=u/2&&O++;do{if(g=0,(c=e(R,w,E,A))<0){if(T=w[0],E!=A&&(T=T*u+(w[1]||0)),(g=a(T/O))>1)for(g>=u&&(g=u-1),m=(y=t(R,g,u)).length,A=w.length;1==e(y,w,m,A);)g--,n(y,E<m?x:R,m,u),m=y.length,c=1;else 0==g&&(c=g=1),m=(y=R.slice()).length;if(m<A&&(y=[0].concat(y)),n(w,y,A,u),A=w.length,-1==c)for(;e(R,w,E,A)<1;)g++,n(w,E<A?x:R,A,u),A=w.length}else 0===c&&(g++,w=[0]);_[h++]=g,w[0]?w[A++]=P[S]||0:(w=[P[S]],A=1)}while((S++<M||null!=w[0])&&I--);f=null!=w[0],_[0]||_.splice(0,1)}if(u==p){for(h=1,I=_[0];I>=10;I/=10,h++);tt(v,o+(v.e=h+l*d-1)+1,s,f)}else v.e=l,v.r=+f;return v}}(),o=/^(-?)0([xbo])(?=\w[\w.]*$)/i,x=/^([^.]+)\.$/,I=/^\.([^.]+)$/,P=/^-?(Infinity|NaN)$/,R=/^\s*\+(?=[\w.])|^\s+|\s+$/g,r=function(t,e,n,r){var i,s=n?e:e.replace(R,"");if(P.test(s))t.s=isNaN(s)?null:s<0?-1:1;else{if(!n&&(s=s.replace(o,function(t,e,n){return i="x"==(n=n.toLowerCase())?16:"b"==n?2:8,r&&r!=i?t:e}),r&&(i=r,s=s.replace(x,"$1").replace(I,"0.$1")),e!=s))return new Y(s,i);W&&Q(N,"not a"+(r?" base "+r:"")+" number",e),t.s=null}t.c=t.e=null,N=0},C.absoluteValue=C.abs=function(){var t=new Y(this);return t.s<0&&(t.s=1),t},C.ceil=function(){return tt(new Y(this),this.e+1,2)},C.comparedTo=C.cmp=function(t,e){return N=1,w(this,new Y(t,e))},C.decimalPlaces=C.dp=function(){var t,e,n=this.c;if(!n)return null;if(t=((e=n.length-1)-b(this.e/d))*d,e=n[e])for(;e%10==0;e/=10,t--);return t<0&&(t=0),t},C.dividedBy=C.div=function(t,e){return N=3,n(this,new Y(t,e),L,k)},C.dividedToIntegerBy=C.divToInt=function(t,e){return N=4,n(this,new Y(t,e),0,1)},C.equals=C.eq=function(t,e){return N=5,0===w(this,new Y(t,e))},C.floor=function(){return tt(new Y(this),this.e+1,3)},C.greaterThan=C.gt=function(t,e){return N=6,w(this,new Y(t,e))>0},C.greaterThanOrEqualTo=C.gte=function(t,e){return N=7,1===(e=w(this,new Y(t,e)))||0===e},C.isFinite=function(){return!!this.c},C.isInteger=C.isInt=function(){return!!this.c&&b(this.e/d)>this.c.length-2},C.isNaN=function(){return!this.s},C.isNegative=C.isNeg=function(){return this.s<0},C.isZero=function(){return!!this.c&&0==this.c[0]},C.lessThan=C.lt=function(t,e){return N=8,w(this,new Y(t,e))<0},C.lessThanOrEqualTo=C.lte=function(t,e){return N=9,-1===(e=w(this,new Y(t,e)))||0===e},C.minus=C.sub=function(t,e){var n,r,i,o,s=this,u=s.s;if(N=10,e=(t=new Y(t,e)).s,!u||!e)return new Y(NaN);if(u!=e)return t.s=-e,s.plus(t);var a=s.e/d,c=t.e/d,l=s.c,h=t.c;if(!a||!c){if(!l||!h)return l?(t.s=-e,t):new Y(h?s:NaN);if(!l[0]||!h[0])return h[0]?(t.s=-e,t):new Y(l[0]?s:3==k?-0:0)}if(a=b(a),c=b(c),l=l.slice(),u=a-c){for((o=u<0)?(u=-u,i=l):(c=a,i=h),i.reverse(),e=u;e--;i.push(0));i.reverse()}else for(r=(o=(u=l.length)<(e=h.length))?u:e,u=e=0;e<r;e++)if(l[e]!=h[e]){o=l[e]<h[e];break}if(o&&(i=l,l=h,h=i,t.s=-t.s),(e=(r=h.length)-(n=l.length))>0)for(;e--;l[n++]=0);for(e=p-1;r>u;){if(l[--r]<h[r]){for(n=r;n&&!l[--n];l[n]=e);--l[n],l[r]+=p}l[r]-=h[r]}for(;0==l[0];l.splice(0,1),--c);return l[0]?X(t,l,c):(t.s=3==k?-1:1,t.c=[t.e=0],t)},C.modulo=C.mod=function(t,e){var r,i,o=this;return N=11,t=new Y(t,e),!o.c||!t.s||t.c&&!t.c[0]?new Y(NaN):!t.c||o.c&&!o.c[0]?new Y(o):(9==z?(i=t.s,t.s=1,r=n(o,t,0,3),t.s=i,r.s*=i):r=n(o,t,0,z),o.minus(r.times(t)))},C.negated=C.neg=function(){var t=new Y(this);return t.s=-t.s||null,t},C.plus=C.add=function(t,e){var n,r=this,i=r.s;if(N=12,e=(t=new Y(t,e)).s,!i||!e)return new Y(NaN);if(i!=e)return t.s=-e,r.minus(t);var o=r.e/d,s=t.e/d,u=r.c,a=t.c;if(!o||!s){if(!u||!a)return new Y(i/0);if(!u[0]||!a[0])return a[0]?t:new Y(u[0]?r:0*i)}if(o=b(o),s=b(s),u=u.slice(),i=o-s){for(i>0?(s=o,n=a):(i=-i,n=u),n.reverse();i--;n.push(0));n.reverse()}for((i=u.length)-(e=a.length)<0&&(n=a,a=u,u=n,e=i),i=0;e;)i=(u[--e]=u[e]+a[e]+i)/p|0,u[e]=p===u[e]?0:u[e]%p;return i&&(u=[i].concat(u),++s),X(t,u,s)},C.precision=C.sd=function(t){var e,n,r=this,i=r.c;if(null!=t&&t!==!!t&&1!==t&&0!==t&&(W&&Q(13,"argument"+c,t),t!=!!t&&(t=null)),!i)return null;if(e=(n=i.length-1)*d+1,n=i[n]){for(;n%10==0;n/=10,e--);for(n=i[0];n>=10;n/=10,e++);}return t&&r.e+1>e&&(e=r.e+1),e},C.round=function(t,e){var n=new Y(this);return(null==t||G(t,0,v,15))&&tt(n,~~t+this.e+1,null!=e&&G(e,0,8,15,l)?0|e:k),n},C.shift=function(t){var e=this;return G(t,-g,g,16,"argument")?e.times("1e"+E(t)):new Y(e.c&&e.c[0]&&(t<-g||t>g)?e.s*(t<0?0:1/0):e)},C.squareRoot=C.sqrt=function(){var t,e,r,i,o,s=this,u=s.c,a=s.s,c=s.e,l=L+4,h=new Y("0.5");if(1!==a||!u||!u[0])return new Y(!a||a<0&&(!u||u[0])?NaN:u?s:1/0);if(0==(a=Math.sqrt(+s))||a==1/0?(((e=_(u)).length+c)%2==0&&(e+="0"),a=Math.sqrt(e),c=b((c+1)/2)-(c<0||c%2),r=new Y(e=a==1/0?"1e"+c:(e=a.toExponential()).slice(0,e.indexOf("e")+1)+c)):r=new Y(a+""),r.c[0])for((a=(c=r.e)+l)<3&&(a=0);;)if(o=r,r=h.times(o.plus(n(s,o,l,1))),_(o.c).slice(0,a)===(e=_(r.c)).slice(0,a)){if(r.e<c&&--a,"9999"!=(e=e.slice(a-3,a+1))&&(i||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(tt(r,r.e+L+2,1),t=!r.times(r).eq(s));break}if(!i&&(tt(o,o.e+L+2,0),o.times(o).eq(s))){r=o;break}l+=4,a+=4,i=1}return tt(r,r.e+L+1,k,t)},C.times=C.mul=function(t,e){var n,r,i,o,s,u,a,c,l,h,f,g,y,v,_,w=this,A=w.c,T=(N=17,t=new Y(t,e)).c;if(!(A&&T&&A[0]&&T[0]))return!w.s||!t.s||A&&!A[0]&&!T||T&&!T[0]&&!A?t.c=t.e=t.s=null:(t.s*=w.s,A&&T?(t.c=[0],t.e=0):t.c=t.e=null),t;for(r=b(w.e/d)+b(t.e/d),t.s*=w.s,(a=A.length)<(h=T.length)&&(y=A,A=T,T=y,i=a,a=h,h=i),i=a+h,y=[];i--;y.push(0));for(v=p,_=m,i=h;--i>=0;){for(n=0,f=T[i]%_,g=T[i]/_|0,o=i+(s=a);o>i;)n=((c=f*(c=A[--s]%_)+(u=g*c+(l=A[s]/_|0)*f)%_*_+y[o]+n)/v|0)+(u/_|0)+g*l,y[o--]=c%v;y[o]=n}return n?++r:y.splice(0,1),X(t,y,r)},C.toDigits=function(t,e){var n=new Y(this);return t=null!=t&&G(t,1,v,18,"precision")?0|t:null,e=null!=e&&G(e,0,8,18,l)?0|e:k,t?tt(n,t,e):n},C.toExponential=function(t,e){return Z(this,null!=t&&G(t,0,v,19)?1+~~t:null,e,19)},C.toFixed=function(t,e){return Z(this,null!=t&&G(t,0,v,20)?~~t+this.e+1:null,e,20)},C.toFormat=function(t,e){var n=Z(this,null!=t&&G(t,0,v,21)?~~t+this.e+1:null,e,21);if(this.c){var r,i=n.split("."),o=+q.groupSize,s=+q.secondaryGroupSize,u=q.groupSeparator,a=i[0],c=i[1],l=this.s<0,h=l?a.slice(1):a,f=h.length;if(s&&(r=o,o=s,s=r,f-=r),o>0&&f>0){for(r=f%o||o,a=h.substr(0,r);r<f;r+=o)a+=u+h.substr(r,o);s>0&&(a+=u+h.slice(r)),l&&(a="-"+a)}n=c?a+q.decimalSeparator+((s=+q.fractionGroupSize)?c.replace(new RegExp("\\d{"+s+"}\\B","g"),"$&"+q.fractionGroupSeparator):c):a}return n},C.toFraction=function(t){var e,r,i,o,s,u,a,c,l,h=W,f=this,p=f.c,g=new Y(j),m=r=new Y(j),v=a=new Y(j);if(null!=t&&(W=!1,u=new Y(t),W=h,(h=u.isInt())&&!u.lt(j)||(W&&Q(22,"max denominator "+(h?"out of range":"not an integer"),t),t=!h&&u.c&&tt(u,u.e+1,1).gte(j)?u:null)),!p)return f.toString();for(l=_(p),o=g.e=l.length-f.e-1,g.c[0]=y[(s=o%d)<0?d+s:s],t=!t||u.cmp(g)>0?o>0?g:m:u,s=F,F=1/0,u=new Y(l),a.c[0]=0;c=n(u,g,0,1),1!=(i=r.plus(c.times(v))).cmp(t);)r=v,v=i,m=a.plus(c.times(i=m)),a=i,g=u.minus(c.times(i=g)),u=i;return i=n(t.minus(r),v,0,1),a=a.plus(i.times(m)),r=r.plus(i.times(v)),a.s=m.s=f.s,e=n(m,v,o*=2,k).minus(f).abs().cmp(n(a,r,o,k).minus(f).abs())<1?[m.toString(),v.toString()]:[a.toString(),r.toString()],F=s,e},C.toNumber=function(){return+this},C.toPower=C.pow=function(t,e){var n,r,i,o=a(t<0?-t:+t),s=this;if(null!=e&&(N=23,e=new Y(e)),!G(t,-g,g,23,"exponent")&&(!isFinite(t)||o>g&&(t/=0)||parseFloat(t)!=t&&!(t=NaN))||0==t)return n=Math.pow(+s,t),new Y(e?n%e:n);for(e?t>1&&s.gt(j)&&s.isInt()&&e.gt(j)&&e.isInt()?s=s.mod(e):(i=e,e=null):H&&(n=u(H/d+2)),r=new Y(j);;){if(o%2){if(!(r=r.times(s)).c)break;n?r.c.length>n&&(r.c.length=n):e&&(r=r.mod(e))}if(!(o=a(o/2)))break;s=s.times(s),n?s.c&&s.c.length>n&&(s.c.length=n):e&&(s=s.mod(e))}return e?r:(t<0&&(r=j.div(r)),i?r.mod(i):n?tt(r,H,k):r)},C.toPrecision=function(t,e){return Z(this,null!=t&&G(t,1,v,24,"precision")?0|t:null,e,24)},C.toString=function(t){var e,n=this,r=n.s,i=n.e;return null===i?r?(e="Infinity",r<0&&(e="-"+e)):e="NaN":(e=_(n.c),e=null!=t&&G(t,2,64,25,"base")?K(O(e,i),0|t,10,r):i<=D||i>=B?M(e,i):O(e,i),r<0&&n.c[0]&&(e="-"+e)),e},C.truncated=C.trunc=function(){return tt(new Y(this),this.e+1,1)},C.valueOf=C.toJSON=function(){var t,e=this,n=e.e;return null===n?e.toString():(t=_(e.c),t=n<=D||n>=B?M(t,n):O(t,n),e.s<0?"-"+t:t)},C.isBigNumber=!0,null!=e&&Y.config(e),Y}()).default=o.BigNumber=o,void 0===(r=function(){return o}.call(e,n,e,t))||(t.exports=r)}()},function(t,e,n){(function(t){!function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}function o(t,e,n){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(n=e,e=10),this._init(t||0,e||10,n||"be"))}var s;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{s=n(71).Buffer}catch(t){}function u(t,e,n){for(var r=0,i=Math.min(t.length,n),o=e;o<i;o++){var s=t.charCodeAt(o)-48;r<<=4,r|=s>=49&&s<=54?s-49+10:s>=17&&s<=22?s-17+10:15&s}return r}function a(t,e,n,r){for(var i=0,o=Math.min(t.length,n),s=e;s<o;s++){var u=t.charCodeAt(s)-48;i*=r,i+=u>=49?u-49+10:u>=17?u-17+10:u}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,n){if("number"==typeof t)return this._initNumber(t,e,n);if("object"==typeof t)return this._initArray(t,e,n);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&i++,16===e?this._parseHex(t,i):this._parseBase(t,e,i),"-"===t[0]&&(this.negative=1),this.strip(),"le"===n&&this._initArray(this.toArray(),e,n)},o.prototype._initNumber=function(t,e,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),e,n)},o.prototype._initArray=function(t,e,n){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,u=0;if("be"===n)for(i=t.length-1,o=0;i>=0;i-=3)s=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=s<<u&67108863,this.words[o+1]=s>>>26-u&67108863,(u+=24)>=26&&(u-=26,o++);else if("le"===n)for(i=0,o=0;i<t.length;i+=3)s=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=s<<u&67108863,this.words[o+1]=s>>>26-u&67108863,(u+=24)>=26&&(u-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var r,i,o=0;for(n=t.length-6,r=0;n>=e;n-=6)i=u(t,n,n+6),this.words[r]|=i<<o&67108863,this.words[r+1]|=i>>>26-o&4194303,(o+=24)>=26&&(o-=26,r++);n+6!==e&&(i=u(t,e,n+6),this.words[r]|=i<<o&67108863,this.words[r+1]|=i>>>26-o&4194303),this.strip()},o.prototype._parseBase=function(t,e,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=e)r++;r--,i=i/e|0;for(var o=t.length-n,s=o%r,u=Math.min(o,o-s)+n,c=0,l=n;l<u;l+=r)c=a(t,l,l+r,e),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var h=1;for(c=a(t,l,t.length,e),l=0;l<s;l++)h*=e;this.imuln(h),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,e,n){n.negative=e.negative^t.negative;var r=t.length+e.length|0;n.length=r,r=r-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,u=67108863&s,a=s/67108864|0;n.words[0]=u;for(var c=1;c<r;c++){for(var l=a>>>26,h=67108863&a,f=Math.min(c,e.length-1),p=Math.max(0,c-t.length+1);p<=f;p++){var d=c-p|0;l+=(s=(i=0|t.words[d])*(o=0|e.words[p])+h)/67108864|0,h=67108863&s}n.words[c]=0|h,a=0|l}return 0!==a?n.words[c]=0|a:n.length--,n.strip()}o.prototype.toString=function(t,e){var n;if(t=t||10,e=0|e||1,16===t||"hex"===t){n="";for(var i=0,o=0,s=0;s<this.length;s++){var u=this.words[s],a=(16777215&(u<<i|o)).toString(16);n=0!==(o=u>>>24-i&16777215)||s!==this.length-1?c[6-a.length]+a+n:a+n,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(n=o.toString(16)+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var f=l[t],p=h[t];n="";var d=this.clone();for(d.negative=0;!d.isZero();){var g=d.modn(p).toString(t);n=(d=d.idivn(p)).isZero()?g+n:c[f-g.length]+g+n}for(this.isZero()&&(n="0"+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return r(void 0!==s),this.toArrayLike(s,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,n){var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0"),this.strip();var s,u,a="le"===e,c=new t(o),l=this.clone();if(a){for(u=0;!l.isZero();u++)s=l.andln(255),l.iushrn(8),c[u]=s;for(;u<o;u++)c[u]=0}else{for(u=0;u<o-i;u++)c[u]=0;for(u=0;!l.isZero();u++)s=l.andln(255),l.iushrn(8),c[o-u-1]=s}return c},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,n=0;return e>=4096&&(n+=13,e>>>=13),e>=64&&(n+=7,e>>>=7),e>=8&&(n+=4,e>>>=4),e>=2&&(n+=2,e>>>=2),n+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,n=0;return 0==(8191&e)&&(n+=13,e>>>=13),0==(127&e)&&(n+=7,e>>>=7),0==(15&e)&&(n+=4,e>>>=4),0==(3&e)&&(n+=2,e>>>=2),0==(1&e)&&n++,n},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var n=this._zeroBits(this.words[e]);if(t+=n,26!==n)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var n=0;n<e.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,n;this.length>t.length?(e=this,n=t):(e=t,n=this);for(var r=0;r<n.length;r++)this.words[r]=e.words[r]^n.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),n=t%26;this._expand(e),n>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var n=t/26|0,i=t%26;return this._expand(n+1),this.words[n]=e?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,n,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(n=this,r=t):(n=t,r=this);for(var i=0,o=0;o<r.length;o++)e=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<n.length;o++)e=(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n,r,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=t):(n=t,r=this);for(var o=0,s=0;s<r.length;s++)o=(e=(0|n.words[s])-(0|r.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<n.length;s++)o=(e=(0|n.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<n.length&&n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this.length=Math.max(this.length,s),n!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,n){var r,i,o,s=t.words,u=e.words,a=n.words,c=0,l=0|s[0],h=8191&l,f=l>>>13,p=0|s[1],d=8191&p,g=p>>>13,y=0|s[2],m=8191&y,v=y>>>13,b=0|s[3],_=8191&b,w=b>>>13,A=0|s[4],T=8191&A,S=A>>>13,M=0|s[5],O=8191&M,E=M>>>13,x=0|s[6],I=8191&x,P=x>>>13,R=0|s[7],N=8191&R,C=R>>>13,j=0|s[8],L=8191&j,k=j>>>13,D=0|s[9],B=8191&D,U=D>>>13,F=0|u[0],W=8191&F,G=F>>>13,V=0|u[1],z=8191&V,H=V>>>13,q=0|u[2],Y=8191&q,K=q>>>13,Z=0|u[3],J=8191&Z,$=Z>>>13,X=0|u[4],Q=8191&X,tt=X>>>13,et=0|u[5],nt=8191&et,rt=et>>>13,it=0|u[6],ot=8191&it,st=it>>>13,ut=0|u[7],at=8191&ut,ct=ut>>>13,lt=0|u[8],ht=8191&lt,ft=lt>>>13,pt=0|u[9],dt=8191&pt,gt=pt>>>13;n.negative=t.negative^e.negative,n.length=19;var yt=(c+(r=Math.imul(h,W))|0)+((8191&(i=(i=Math.imul(h,G))+Math.imul(f,W)|0))<<13)|0;c=((o=Math.imul(f,G))+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(d,W),i=(i=Math.imul(d,G))+Math.imul(g,W)|0,o=Math.imul(g,G);var mt=(c+(r=r+Math.imul(h,z)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(f,z)|0))<<13)|0;c=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(mt>>>26)|0,mt&=67108863,r=Math.imul(m,W),i=(i=Math.imul(m,G))+Math.imul(v,W)|0,o=Math.imul(v,G),r=r+Math.imul(d,z)|0,i=(i=i+Math.imul(d,H)|0)+Math.imul(g,z)|0,o=o+Math.imul(g,H)|0;var vt=(c+(r=r+Math.imul(h,Y)|0)|0)+((8191&(i=(i=i+Math.imul(h,K)|0)+Math.imul(f,Y)|0))<<13)|0;c=((o=o+Math.imul(f,K)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(_,W),i=(i=Math.imul(_,G))+Math.imul(w,W)|0,o=Math.imul(w,G),r=r+Math.imul(m,z)|0,i=(i=i+Math.imul(m,H)|0)+Math.imul(v,z)|0,o=o+Math.imul(v,H)|0,r=r+Math.imul(d,Y)|0,i=(i=i+Math.imul(d,K)|0)+Math.imul(g,Y)|0,o=o+Math.imul(g,K)|0;var bt=(c+(r=r+Math.imul(h,J)|0)|0)+((8191&(i=(i=i+Math.imul(h,$)|0)+Math.imul(f,J)|0))<<13)|0;c=((o=o+Math.imul(f,$)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(T,W),i=(i=Math.imul(T,G))+Math.imul(S,W)|0,o=Math.imul(S,G),r=r+Math.imul(_,z)|0,i=(i=i+Math.imul(_,H)|0)+Math.imul(w,z)|0,o=o+Math.imul(w,H)|0,r=r+Math.imul(m,Y)|0,i=(i=i+Math.imul(m,K)|0)+Math.imul(v,Y)|0,o=o+Math.imul(v,K)|0,r=r+Math.imul(d,J)|0,i=(i=i+Math.imul(d,$)|0)+Math.imul(g,J)|0,o=o+Math.imul(g,$)|0;var _t=(c+(r=r+Math.imul(h,Q)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(f,Q)|0))<<13)|0;c=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(O,W),i=(i=Math.imul(O,G))+Math.imul(E,W)|0,o=Math.imul(E,G),r=r+Math.imul(T,z)|0,i=(i=i+Math.imul(T,H)|0)+Math.imul(S,z)|0,o=o+Math.imul(S,H)|0,r=r+Math.imul(_,Y)|0,i=(i=i+Math.imul(_,K)|0)+Math.imul(w,Y)|0,o=o+Math.imul(w,K)|0,r=r+Math.imul(m,J)|0,i=(i=i+Math.imul(m,$)|0)+Math.imul(v,J)|0,o=o+Math.imul(v,$)|0,r=r+Math.imul(d,Q)|0,i=(i=i+Math.imul(d,tt)|0)+Math.imul(g,Q)|0,o=o+Math.imul(g,tt)|0;var wt=(c+(r=r+Math.imul(h,nt)|0)|0)+((8191&(i=(i=i+Math.imul(h,rt)|0)+Math.imul(f,nt)|0))<<13)|0;c=((o=o+Math.imul(f,rt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(I,W),i=(i=Math.imul(I,G))+Math.imul(P,W)|0,o=Math.imul(P,G),r=r+Math.imul(O,z)|0,i=(i=i+Math.imul(O,H)|0)+Math.imul(E,z)|0,o=o+Math.imul(E,H)|0,r=r+Math.imul(T,Y)|0,i=(i=i+Math.imul(T,K)|0)+Math.imul(S,Y)|0,o=o+Math.imul(S,K)|0,r=r+Math.imul(_,J)|0,i=(i=i+Math.imul(_,$)|0)+Math.imul(w,J)|0,o=o+Math.imul(w,$)|0,r=r+Math.imul(m,Q)|0,i=(i=i+Math.imul(m,tt)|0)+Math.imul(v,Q)|0,o=o+Math.imul(v,tt)|0,r=r+Math.imul(d,nt)|0,i=(i=i+Math.imul(d,rt)|0)+Math.imul(g,nt)|0,o=o+Math.imul(g,rt)|0;var At=(c+(r=r+Math.imul(h,ot)|0)|0)+((8191&(i=(i=i+Math.imul(h,st)|0)+Math.imul(f,ot)|0))<<13)|0;c=((o=o+Math.imul(f,st)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(N,W),i=(i=Math.imul(N,G))+Math.imul(C,W)|0,o=Math.imul(C,G),r=r+Math.imul(I,z)|0,i=(i=i+Math.imul(I,H)|0)+Math.imul(P,z)|0,o=o+Math.imul(P,H)|0,r=r+Math.imul(O,Y)|0,i=(i=i+Math.imul(O,K)|0)+Math.imul(E,Y)|0,o=o+Math.imul(E,K)|0,r=r+Math.imul(T,J)|0,i=(i=i+Math.imul(T,$)|0)+Math.imul(S,J)|0,o=o+Math.imul(S,$)|0,r=r+Math.imul(_,Q)|0,i=(i=i+Math.imul(_,tt)|0)+Math.imul(w,Q)|0,o=o+Math.imul(w,tt)|0,r=r+Math.imul(m,nt)|0,i=(i=i+Math.imul(m,rt)|0)+Math.imul(v,nt)|0,o=o+Math.imul(v,rt)|0,r=r+Math.imul(d,ot)|0,i=(i=i+Math.imul(d,st)|0)+Math.imul(g,ot)|0,o=o+Math.imul(g,st)|0;var Tt=(c+(r=r+Math.imul(h,at)|0)|0)+((8191&(i=(i=i+Math.imul(h,ct)|0)+Math.imul(f,at)|0))<<13)|0;c=((o=o+Math.imul(f,ct)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(L,W),i=(i=Math.imul(L,G))+Math.imul(k,W)|0,o=Math.imul(k,G),r=r+Math.imul(N,z)|0,i=(i=i+Math.imul(N,H)|0)+Math.imul(C,z)|0,o=o+Math.imul(C,H)|0,r=r+Math.imul(I,Y)|0,i=(i=i+Math.imul(I,K)|0)+Math.imul(P,Y)|0,o=o+Math.imul(P,K)|0,r=r+Math.imul(O,J)|0,i=(i=i+Math.imul(O,$)|0)+Math.imul(E,J)|0,o=o+Math.imul(E,$)|0,r=r+Math.imul(T,Q)|0,i=(i=i+Math.imul(T,tt)|0)+Math.imul(S,Q)|0,o=o+Math.imul(S,tt)|0,r=r+Math.imul(_,nt)|0,i=(i=i+Math.imul(_,rt)|0)+Math.imul(w,nt)|0,o=o+Math.imul(w,rt)|0,r=r+Math.imul(m,ot)|0,i=(i=i+Math.imul(m,st)|0)+Math.imul(v,ot)|0,o=o+Math.imul(v,st)|0,r=r+Math.imul(d,at)|0,i=(i=i+Math.imul(d,ct)|0)+Math.imul(g,at)|0,o=o+Math.imul(g,ct)|0;var St=(c+(r=r+Math.imul(h,ht)|0)|0)+((8191&(i=(i=i+Math.imul(h,ft)|0)+Math.imul(f,ht)|0))<<13)|0;c=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(B,W),i=(i=Math.imul(B,G))+Math.imul(U,W)|0,o=Math.imul(U,G),r=r+Math.imul(L,z)|0,i=(i=i+Math.imul(L,H)|0)+Math.imul(k,z)|0,o=o+Math.imul(k,H)|0,r=r+Math.imul(N,Y)|0,i=(i=i+Math.imul(N,K)|0)+Math.imul(C,Y)|0,o=o+Math.imul(C,K)|0,r=r+Math.imul(I,J)|0,i=(i=i+Math.imul(I,$)|0)+Math.imul(P,J)|0,o=o+Math.imul(P,$)|0,r=r+Math.imul(O,Q)|0,i=(i=i+Math.imul(O,tt)|0)+Math.imul(E,Q)|0,o=o+Math.imul(E,tt)|0,r=r+Math.imul(T,nt)|0,i=(i=i+Math.imul(T,rt)|0)+Math.imul(S,nt)|0,o=o+Math.imul(S,rt)|0,r=r+Math.imul(_,ot)|0,i=(i=i+Math.imul(_,st)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,st)|0,r=r+Math.imul(m,at)|0,i=(i=i+Math.imul(m,ct)|0)+Math.imul(v,at)|0,o=o+Math.imul(v,ct)|0,r=r+Math.imul(d,ht)|0,i=(i=i+Math.imul(d,ft)|0)+Math.imul(g,ht)|0,o=o+Math.imul(g,ft)|0;var Mt=(c+(r=r+Math.imul(h,dt)|0)|0)+((8191&(i=(i=i+Math.imul(h,gt)|0)+Math.imul(f,dt)|0))<<13)|0;c=((o=o+Math.imul(f,gt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(B,z),i=(i=Math.imul(B,H))+Math.imul(U,z)|0,o=Math.imul(U,H),r=r+Math.imul(L,Y)|0,i=(i=i+Math.imul(L,K)|0)+Math.imul(k,Y)|0,o=o+Math.imul(k,K)|0,r=r+Math.imul(N,J)|0,i=(i=i+Math.imul(N,$)|0)+Math.imul(C,J)|0,o=o+Math.imul(C,$)|0,r=r+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(P,Q)|0,o=o+Math.imul(P,tt)|0,r=r+Math.imul(O,nt)|0,i=(i=i+Math.imul(O,rt)|0)+Math.imul(E,nt)|0,o=o+Math.imul(E,rt)|0,r=r+Math.imul(T,ot)|0,i=(i=i+Math.imul(T,st)|0)+Math.imul(S,ot)|0,o=o+Math.imul(S,st)|0,r=r+Math.imul(_,at)|0,i=(i=i+Math.imul(_,ct)|0)+Math.imul(w,at)|0,o=o+Math.imul(w,ct)|0,r=r+Math.imul(m,ht)|0,i=(i=i+Math.imul(m,ft)|0)+Math.imul(v,ht)|0,o=o+Math.imul(v,ft)|0;var Ot=(c+(r=r+Math.imul(d,dt)|0)|0)+((8191&(i=(i=i+Math.imul(d,gt)|0)+Math.imul(g,dt)|0))<<13)|0;c=((o=o+Math.imul(g,gt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,r=Math.imul(B,Y),i=(i=Math.imul(B,K))+Math.imul(U,Y)|0,o=Math.imul(U,K),r=r+Math.imul(L,J)|0,i=(i=i+Math.imul(L,$)|0)+Math.imul(k,J)|0,o=o+Math.imul(k,$)|0,r=r+Math.imul(N,Q)|0,i=(i=i+Math.imul(N,tt)|0)+Math.imul(C,Q)|0,o=o+Math.imul(C,tt)|0,r=r+Math.imul(I,nt)|0,i=(i=i+Math.imul(I,rt)|0)+Math.imul(P,nt)|0,o=o+Math.imul(P,rt)|0,r=r+Math.imul(O,ot)|0,i=(i=i+Math.imul(O,st)|0)+Math.imul(E,ot)|0,o=o+Math.imul(E,st)|0,r=r+Math.imul(T,at)|0,i=(i=i+Math.imul(T,ct)|0)+Math.imul(S,at)|0,o=o+Math.imul(S,ct)|0,r=r+Math.imul(_,ht)|0,i=(i=i+Math.imul(_,ft)|0)+Math.imul(w,ht)|0,o=o+Math.imul(w,ft)|0;var Et=(c+(r=r+Math.imul(m,dt)|0)|0)+((8191&(i=(i=i+Math.imul(m,gt)|0)+Math.imul(v,dt)|0))<<13)|0;c=((o=o+Math.imul(v,gt)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(B,J),i=(i=Math.imul(B,$))+Math.imul(U,J)|0,o=Math.imul(U,$),r=r+Math.imul(L,Q)|0,i=(i=i+Math.imul(L,tt)|0)+Math.imul(k,Q)|0,o=o+Math.imul(k,tt)|0,r=r+Math.imul(N,nt)|0,i=(i=i+Math.imul(N,rt)|0)+Math.imul(C,nt)|0,o=o+Math.imul(C,rt)|0,r=r+Math.imul(I,ot)|0,i=(i=i+Math.imul(I,st)|0)+Math.imul(P,ot)|0,o=o+Math.imul(P,st)|0,r=r+Math.imul(O,at)|0,i=(i=i+Math.imul(O,ct)|0)+Math.imul(E,at)|0,o=o+Math.imul(E,ct)|0,r=r+Math.imul(T,ht)|0,i=(i=i+Math.imul(T,ft)|0)+Math.imul(S,ht)|0,o=o+Math.imul(S,ft)|0;var xt=(c+(r=r+Math.imul(_,dt)|0)|0)+((8191&(i=(i=i+Math.imul(_,gt)|0)+Math.imul(w,dt)|0))<<13)|0;c=((o=o+Math.imul(w,gt)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(B,Q),i=(i=Math.imul(B,tt))+Math.imul(U,Q)|0,o=Math.imul(U,tt),r=r+Math.imul(L,nt)|0,i=(i=i+Math.imul(L,rt)|0)+Math.imul(k,nt)|0,o=o+Math.imul(k,rt)|0,r=r+Math.imul(N,ot)|0,i=(i=i+Math.imul(N,st)|0)+Math.imul(C,ot)|0,o=o+Math.imul(C,st)|0,r=r+Math.imul(I,at)|0,i=(i=i+Math.imul(I,ct)|0)+Math.imul(P,at)|0,o=o+Math.imul(P,ct)|0,r=r+Math.imul(O,ht)|0,i=(i=i+Math.imul(O,ft)|0)+Math.imul(E,ht)|0,o=o+Math.imul(E,ft)|0;var It=(c+(r=r+Math.imul(T,dt)|0)|0)+((8191&(i=(i=i+Math.imul(T,gt)|0)+Math.imul(S,dt)|0))<<13)|0;c=((o=o+Math.imul(S,gt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(B,nt),i=(i=Math.imul(B,rt))+Math.imul(U,nt)|0,o=Math.imul(U,rt),r=r+Math.imul(L,ot)|0,i=(i=i+Math.imul(L,st)|0)+Math.imul(k,ot)|0,o=o+Math.imul(k,st)|0,r=r+Math.imul(N,at)|0,i=(i=i+Math.imul(N,ct)|0)+Math.imul(C,at)|0,o=o+Math.imul(C,ct)|0,r=r+Math.imul(I,ht)|0,i=(i=i+Math.imul(I,ft)|0)+Math.imul(P,ht)|0,o=o+Math.imul(P,ft)|0;var Pt=(c+(r=r+Math.imul(O,dt)|0)|0)+((8191&(i=(i=i+Math.imul(O,gt)|0)+Math.imul(E,dt)|0))<<13)|0;c=((o=o+Math.imul(E,gt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,r=Math.imul(B,ot),i=(i=Math.imul(B,st))+Math.imul(U,ot)|0,o=Math.imul(U,st),r=r+Math.imul(L,at)|0,i=(i=i+Math.imul(L,ct)|0)+Math.imul(k,at)|0,o=o+Math.imul(k,ct)|0,r=r+Math.imul(N,ht)|0,i=(i=i+Math.imul(N,ft)|0)+Math.imul(C,ht)|0,o=o+Math.imul(C,ft)|0;var Rt=(c+(r=r+Math.imul(I,dt)|0)|0)+((8191&(i=(i=i+Math.imul(I,gt)|0)+Math.imul(P,dt)|0))<<13)|0;c=((o=o+Math.imul(P,gt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,r=Math.imul(B,at),i=(i=Math.imul(B,ct))+Math.imul(U,at)|0,o=Math.imul(U,ct),r=r+Math.imul(L,ht)|0,i=(i=i+Math.imul(L,ft)|0)+Math.imul(k,ht)|0,o=o+Math.imul(k,ft)|0;var Nt=(c+(r=r+Math.imul(N,dt)|0)|0)+((8191&(i=(i=i+Math.imul(N,gt)|0)+Math.imul(C,dt)|0))<<13)|0;c=((o=o+Math.imul(C,gt)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,r=Math.imul(B,ht),i=(i=Math.imul(B,ft))+Math.imul(U,ht)|0,o=Math.imul(U,ft);var Ct=(c+(r=r+Math.imul(L,dt)|0)|0)+((8191&(i=(i=i+Math.imul(L,gt)|0)+Math.imul(k,dt)|0))<<13)|0;c=((o=o+Math.imul(k,gt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863;var jt=(c+(r=Math.imul(B,dt))|0)+((8191&(i=(i=Math.imul(B,gt))+Math.imul(U,dt)|0))<<13)|0;return c=((o=Math.imul(U,gt))+(i>>>13)|0)+(jt>>>26)|0,jt&=67108863,a[0]=yt,a[1]=mt,a[2]=vt,a[3]=bt,a[4]=_t,a[5]=wt,a[6]=At,a[7]=Tt,a[8]=St,a[9]=Mt,a[10]=Ot,a[11]=Et,a[12]=xt,a[13]=It,a[14]=Pt,a[15]=Rt,a[16]=Nt,a[17]=Ct,a[18]=jt,0!==c&&(a[19]=c,n.length++),n};function d(t,e,n){return(new g).mulp(t,e,n)}function g(t,e){this.x=t,this.y=e}Math.imul||(p=f),o.prototype.mulTo=function(t,e){var n=this.length+t.length;return 10===this.length&&10===t.length?p(this,t,e):n<63?f(this,t,e):n<1024?function(t,e,n){n.negative=e.negative^t.negative,n.length=t.length+e.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var s=i;i=0;for(var u=67108863&r,a=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=a;c++){var l=o-c,h=(0|t.words[l])*(0|e.words[c]),f=67108863&h;u=67108863&(f=f+u|0),i+=(s=(s=s+(h/67108864|0)|0)+(f>>>26)|0)>>>26,s&=67108863}n.words[o]=u,r=s,s=i}return 0!==r?n.words[o]=r:n.length--,n.strip()}(this,t,e):d(this,t,e)},g.prototype.makeRBT=function(t){for(var e=new Array(t),n=o.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,n,t);return e},g.prototype.revBin=function(t,e,n){if(0===t||t===n-1)return t;for(var r=0,i=0;i<e;i++)r|=(1&t)<<e-i-1,t>>=1;return r},g.prototype.permute=function(t,e,n,r,i,o){for(var s=0;s<o;s++)r[s]=e[t[s]],i[s]=n[t[s]]},g.prototype.transform=function(t,e,n,r,i,o){this.permute(o,t,e,n,r,i);for(var s=1;s<i;s<<=1)for(var u=s<<1,a=Math.cos(2*Math.PI/u),c=Math.sin(2*Math.PI/u),l=0;l<i;l+=u)for(var h=a,f=c,p=0;p<s;p++){var d=n[l+p],g=r[l+p],y=n[l+p+s],m=r[l+p+s],v=h*y-f*m;m=h*m+f*y,y=v,n[l+p]=d+y,r[l+p]=g+m,n[l+p+s]=d-y,r[l+p+s]=g-m,p!==u&&(v=a*h-c*f,f=a*f+c*h,h=v)}},g.prototype.guessLen13b=function(t,e){var n=1|Math.max(e,t),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},g.prototype.conjugate=function(t,e,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=t[r];t[r]=t[n-r-1],t[n-r-1]=i,i=e[r],e[r]=-e[n-r-1],e[n-r-1]=-i}},g.prototype.normalize13b=function(t,e){for(var n=0,r=0;r<e/2;r++){var i=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+n;t[r]=67108863&i,n=i<67108864?0:i/67108864|0}return t},g.prototype.convert13b=function(t,e,n,i){for(var o=0,s=0;s<e;s++)o+=0|t[s],n[2*s]=8191&o,o>>>=13,n[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<i;++s)n[s]=0;r(0===o),r(0==(-8192&o))},g.prototype.stub=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=0;return e},g.prototype.mulp=function(t,e,n){var r=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(r),o=this.stub(r),s=new Array(r),u=new Array(r),a=new Array(r),c=new Array(r),l=new Array(r),h=new Array(r),f=n.words;f.length=r,this.convert13b(t.words,t.length,s,r),this.convert13b(e.words,e.length,c,r),this.transform(s,o,u,a,r,i),this.transform(c,o,l,h,r,i);for(var p=0;p<r;p++){var d=u[p]*l[p]-a[p]*h[p];a[p]=u[p]*h[p]+a[p]*l[p],u[p]=d}return this.conjugate(u,a,r),this.transform(u,a,f,o,r,i),this.conjugate(f,o,r),this.normalize13b(f,r),n.negative=t.negative^e.negative,n.length=t.length+e.length,n.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),d(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){r("number"==typeof t),r(t<67108864);for(var e=0,n=0;n<this.length;n++){var i=(0|this.words[n])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[n]=67108863&o}return 0!==e&&(this.words[n]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),n=0;n<e.length;n++){var r=n/26|0,i=n%26;e[n]=(t.words[r]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var n=this,r=0;r<e.length&&0===e[r];r++,n=n.sqr());if(++r<e.length)for(var i=n.sqr();r<e.length;r++,i=i.sqr())0!==e[r]&&(n=n.mul(i));return n},o.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,n=t%26,i=(t-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(e=0;e<this.length;e++){var u=this.words[e]&o,a=(0|this.words[e])-u<<n;this.words[e]=a|s,s=u>>>26-n}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,n){var i;r("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),u=67108863^67108863>>>o<<o,a=n;if(i-=s,i=Math.max(0,i),a){for(var c=0;c<s;c++)a.words[c]=this.words[c];a.length=s}if(0===s);else if(this.length>s)for(this.length-=s,c=0;c<this.length;c++)this.words[c]=this.words[c+s];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var h=0|this.words[c];this.words[c]=l<<26-o|h>>>o,l=h&u}return a&&0!==l&&(a.words[a.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,n){return r(0===this.negative),this.iushrn(t,e,n)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26,i=1<<e;return!(this.length<=n)&&!!(this.words[n]&i)},o.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==e&&n++,this.length=Math.min(n,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,n){var i,o,s=t.length+n;this._expand(s);var u=0;for(i=0;i<t.length;i++){o=(0|this.words[i+n])+u;var a=(0|t.words[i])*e;u=((o-=67108863&a)>>26)-(a/67108864|0),this.words[i+n]=67108863&o}for(;i<this.length-n;i++)u=(o=(0|this.words[i+n])+u)>>26,this.words[i+n]=67108863&o;if(0===u)return this.strip();for(r(-1===u),u=0,i=0;i<this.length;i++)u=(o=-(0|this.words[i])+u)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var n=(this.length,t.length),r=this.clone(),i=t,s=0|i.words[i.length-1];0!==(n=26-this._countBits(s))&&(i=i.ushln(n),r.iushln(n),s=0|i.words[i.length-1]);var u,a=r.length-i.length;if("mod"!==e){(u=new o(null)).length=a+1,u.words=new Array(u.length);for(var c=0;c<u.length;c++)u.words[c]=0}var l=r.clone()._ishlnsubmul(i,1,a);0===l.negative&&(r=l,u&&(u.words[a]=1));for(var h=a-1;h>=0;h--){var f=67108864*(0|r.words[i.length+h])+(0|r.words[i.length+h-1]);for(f=Math.min(f/s|0,67108863),r._ishlnsubmul(i,f,h);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(i,1,h),r.isZero()||(r.negative^=1);u&&(u.words[h]=f)}return u&&u.strip(),r.strip(),"div"!==e&&0!==n&&r.iushrn(n),{div:u||null,mod:r}},o.prototype.divmod=function(t,e,n){return r(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(u=this.neg().divmod(t,e),"mod"!==e&&(i=u.div.neg()),"div"!==e&&(s=u.mod.neg(),n&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(u=this.divmod(t.neg(),e),"mod"!==e&&(i=u.div.neg()),{div:i,mod:u.mod}):0!=(this.negative&t.negative)?(u=this.neg().divmod(t.neg(),e),"div"!==e&&(s=u.mod.neg(),n&&0!==s.negative&&s.isub(t)),{div:u.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,s,u},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var n=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),i=t.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){r(t<=67108863);for(var e=(1<<26)%t,n=0,i=this.length-1;i>=0;i--)n=(e*n+(0|this.words[i]))%t;return n},o.prototype.idivn=function(t){r(t<=67108863);for(var e=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*e;this.words[n]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),s=new o(0),u=new o(0),a=new o(1),c=0;e.isEven()&&n.isEven();)e.iushrn(1),n.iushrn(1),++c;for(var l=n.clone(),h=e.clone();!e.isZero();){for(var f=0,p=1;0==(e.words[0]&p)&&f<26;++f,p<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(l),s.isub(h)),i.iushrn(1),s.iushrn(1);for(var d=0,g=1;0==(n.words[0]&g)&&d<26;++d,g<<=1);if(d>0)for(n.iushrn(d);d-- >0;)(u.isOdd()||a.isOdd())&&(u.iadd(l),a.isub(h)),u.iushrn(1),a.iushrn(1);e.cmp(n)>=0?(e.isub(n),i.isub(u),s.isub(a)):(n.isub(e),u.isub(i),a.isub(s))}return{a:u,b:a,gcd:n.iushln(c)}},o.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,s=new o(1),u=new o(0),a=n.clone();e.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,l=1;0==(e.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(e.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(a),s.iushrn(1);for(var h=0,f=1;0==(n.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(n.iushrn(h);h-- >0;)u.isOdd()&&u.iadd(a),u.iushrn(1);e.cmp(n)>=0?(e.isub(n),s.isub(u)):(n.isub(e),u.isub(s))}return(i=0===e.cmpn(1)?s:u).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),n=t.clone();e.negative=0,n.negative=0;for(var r=0;e.isEven()&&n.isEven();r++)e.iushrn(1),n.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=e.cmp(n);if(i<0){var o=e;e=n,n=o}else if(0===i||0===n.cmpn(1))break;e.isub(n)}return n.iushln(r)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,n=(t-e)/26,i=1<<e;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var o=i,s=n;0!==o&&s<this.length;s++){var u=0|this.words[s];o=(u+=o)>>>26,u&=67108863,this.words[s]=u}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)e=1;else{n&&(t=-t),r(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|t.words[n];if(r!==i){r<i?e=-1:r>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new A(t)},o.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var y={k256:null,p224:null,p192:null,p25519:null};function m(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){m.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){m.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){m.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function w(){m.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function A(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function T(t){A.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}m.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},m.prototype.ireduce=function(t){var e,n=t;do{this.split(n,this.tmp),e=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):n.strip(),n},m.prototype.split=function(t,e){t.iushrn(this.n,0,e)},m.prototype.imulK=function(t){return t.imul(this.k)},i(v,m),v.prototype.split=function(t,e){for(var n=Math.min(t.length,9),r=0;r<n;r++)e.words[r]=t.words[r];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var i=t.words[9];for(e.words[e.length++]=4194303&i,r=10;r<t.length;r++){var o=0|t.words[r];t.words[r-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,t.words[r-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,n=0;n<t.length;n++){var r=0|t.words[n];e+=977*r,t.words[n]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(b,m),i(_,m),i(w,m),w.prototype.imulK=function(t){for(var e=0,n=0;n<t.length;n++){var r=19*(0|t.words[n])+e,i=67108863&r;r>>>=26,t.words[n]=i,e=r}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(y[t])return y[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new b;else if("p192"===t)e=new _;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new w}return y[t]=e,e},A.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},A.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},A.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},A.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},A.prototype.add=function(t,e){this._verify2(t,e);var n=t.add(e);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},A.prototype.iadd=function(t,e){this._verify2(t,e);var n=t.iadd(e);return n.cmp(this.m)>=0&&n.isub(this.m),n},A.prototype.sub=function(t,e){this._verify2(t,e);var n=t.sub(e);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},A.prototype.isub=function(t,e){this._verify2(t,e);var n=t.isub(e);return n.cmpn(0)<0&&n.iadd(this.m),n},A.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},A.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},A.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},A.prototype.isqr=function(t){return this.imul(t,t.clone())},A.prototype.sqr=function(t){return this.mul(t,t)},A.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var n=this.m.add(new o(1)).iushrn(2);return this.pow(t,n)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);r(!i.isZero());var u=new o(1).toRed(this),a=u.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,c).cmp(a);)l.redIAdd(a);for(var h=this.pow(l,i),f=this.pow(t,i.addn(1).iushrn(1)),p=this.pow(t,i),d=s;0!==p.cmp(u);){for(var g=p,y=0;0!==g.cmp(u);y++)g=g.redSqr();r(y<d);var m=this.pow(h,new o(1).iushln(d-y-1));f=f.redMul(m),h=m.redSqr(),p=p.redMul(h),d=y}return f},A.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},A.prototype.pow=function(t,e){if(e.isZero())return new o(1);if(0===e.cmpn(1))return t.clone();var n=new Array(16);n[0]=new o(1).toRed(this),n[1]=t;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],t);var i=n[0],s=0,u=0,a=e.bitLength()%26;for(0===a&&(a=26),r=e.length-1;r>=0;r--){for(var c=e.words[r],l=a-1;l>=0;l--){var h=c>>l&1;i!==n[0]&&(i=this.sqr(i)),0!==h||0!==s?(s<<=1,s|=h,(4===++u||0===r&&0===l)&&(i=this.mul(i,n[s]),u=0,s=0)):u=0}a=26}return i},A.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},A.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new T(t)},i(T,A),T.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},T.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},T.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},T.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var n=t.mul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},T.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===t||t,this)}).call(this,n(47)(t))},function(t,e,n){var r=n(72),i=n(116),o=n(118),s=n(279),u=n(278),a=function(t){return t instanceof i||t&&t.constructor&&"BN"===t.constructor.name},c=function(t){return t&&t.constructor&&"BigNumber"===t.constructor.name},l=function(t){try{return o.apply(null,arguments)}catch(e){throw new Error(e+' Given value: "'+t+'"')}},h=function(t){return!!/^(0x)?[0-9a-f]{40}$/i.test(t)&&(!(!/^(0x|0X)?[0-9a-f]{40}$/.test(t)&&!/^(0x|0X)?[0-9A-F]{40}$/.test(t))||f(t))},f=function(t){t=t.replace(/^0x/i,"");for(var e=m(t.toLowerCase()).replace(/^0x/i,""),n=0;n<40;n++)if(parseInt(e[n],16)>7&&t[n].toUpperCase()!==t[n]||parseInt(e[n],16)<=7&&t[n].toLowerCase()!==t[n])return!1;return!0},p=function(t){var e="";t=(t=(t=(t=(t=s.encode(t)).replace(/^(?:\u0000)*/,"")).split("").reverse().join("")).replace(/^(?:\u0000)*/,"")).split("").reverse().join("");for(var n=0;n<t.length;n++){var r=t.charCodeAt(n).toString(16);e+=r.length<2?"0"+r:r}return"0x"+e},d=function(t){if(r.isNull(t)||r.isUndefined(t))return t;if(!isFinite(t)&&!y(t))throw new Error('Given input "'+t+'" is not a number.');var e=l(t),n=e.toString(16);return e.lt(new i(0))?"-0x"+n.substr(1):"0x"+n},g=function(t){if(t=t.toString(16),!y(t))throw new Error('Given value "'+t+'" is not a valid hex string.');t=t.replace(/^0x/i,"");for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},y=function(t){return(r.isString(t)||r.isNumber(t))&&/^(-)?0x[0-9a-f]*$/i.test(t)},m=function(t){y(t)&&/^0x/i.test(t.toString())&&(t=g(t));var e=u.keccak256(t);return"0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470"===e?null:e};m._Hash=u,t.exports={BN:i,isBN:a,isBigNumber:c,toBN:l,isAddress:h,isBloom:function(t){return!(!/^(0x)?[0-9a-f]{512}$/i.test(t)||!/^(0x)?[0-9a-f]{512}$/.test(t)&&!/^(0x)?[0-9A-F]{512}$/.test(t))},isTopic:function(t){return!(!/^(0x)?[0-9a-f]{64}$/i.test(t)||!/^(0x)?[0-9a-f]{64}$/.test(t)&&!/^(0x)?[0-9A-F]{64}$/.test(t))},checkAddressChecksum:f,utf8ToHex:p,hexToUtf8:function(t){if(!y(t))throw new Error('The parameter "'+t+'" must be a valid HEX string.');for(var e="",n=0,r=(t=(t=(t=(t=(t=t.replace(/^0x/i,"")).replace(/^(?:00)*/,"")).split("").reverse().join("")).replace(/^(?:00)*/,"")).split("").reverse().join("")).length,i=0;i<r;i+=2)n=parseInt(t.substr(i,2),16),e+=String.fromCharCode(n);return s.decode(e)},hexToNumber:function(t){return t?l(t).toNumber():t},hexToNumberString:function(t){return t?l(t).toString(10):t},numberToHex:d,toHex:function(t,e){if(h(t))return e?"address":"0x"+t.toLowerCase().replace(/^0x/i,"");if(r.isBoolean(t))return e?"bool":t?"0x01":"0x00";if(r.isObject(t)&&!c(t)&&!a(t))return e?"string":p(JSON.stringify(t));if(r.isString(t)){if(0===t.indexOf("-0x")||0===t.indexOf("-0X"))return e?"int256":d(t);if(0===t.indexOf("0x")||0===t.indexOf("0X"))return e?"bytes":t;if(!isFinite(t))return e?"string":p(t)}return e?t<0?"int256":"uint256":d(t)},hexToBytes:g,bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return"0x"+e.join("")},isHex:function(t){return(r.isString(t)||r.isNumber(t))&&/^(-0x|0x)?[0-9a-f]*$/i.test(t)},isHexStrict:y,leftPad:function(t,e,n){var r=/^0x/i.test(t)||"number"==typeof t,i=e-(t=t.toString(16).replace(/^0x/i,"")).length+1>=0?e-t.length+1:0;return(r?"0x":"")+new Array(i).join(n||"0")+t},rightPad:function(t,e,n){var r=/^0x/i.test(t)||"number"==typeof t,i=e-(t=t.toString(16).replace(/^0x/i,"")).length+1>=0?e-t.length+1:0;return(r?"0x":"")+t+new Array(i).join(n||"0")},toTwosComplement:function(t){return"0x"+l(t).toTwos(256).toString(16,64)},sha3:m}},function(t,e,n){var r=n(282),i=n(281);t.exports=function(t){if("string"==typeof t||"number"==typeof t){var e=new r(1),n=String(t).toLowerCase().trim(),o="0x"===n.substr(0,2)||"-0x"===n.substr(0,3),s=i(n);if("-"===s.substr(0,1)&&(s=i(s.slice(1)),e=new r(-1,10)),!(s=""===s?"0":s).match(/^-?[0-9]+$/)&&s.match(/^[0-9A-Fa-f]+$/)||s.match(/^[a-fA-F]+$/)||!0===o&&s.match(/^[0-9A-Fa-f]+$/))return new r(s,16).mul(e);if((s.match(/^-?[0-9]+$/)||""===s)&&!1===o)return new r(s,10).mul(e)}else if("object"==typeof t&&t.toString&&!t.pop&&!t.push&&t.toString(10).match(/^-?[0-9]+$/)&&(t.mul||t.dividedToIntegerBy))return new r(t.toString(10),10);throw new Error("[number-to-bn] while converting number "+JSON.stringify(t)+" to BN.js instance, error: invalid number value. Value must be an integer, hex string, BN or BigNumber instance. Note, decimals are not supported.")}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(39),s=n(6),u=function(t){function e(n,r,i){var o=t.call(this)||this;o.leaves=n,o.index=i;var u=n.length;if(0===u)o._hash=s.EMPTY_HASH;else if(1===u)o._hash=n[0].hash,r[n[0].id]=o;else{var a=Math.floor(u/2),c=n.slice(0,a),l=n.slice(a,u);o.leftChild=new e(c,r,2*i),o.rightChild=new e(l,r,2*i+1),o.leftChild.parent=o,o.rightChild.parent=o,o._hash=s.Web3Utils.soliditySha3({type:"bytes32",value:o.leftChild._hash},{type:"bytes32",value:o.rightChild._hash})}return o}return i(e,t),e.proofChain=function(t){return t.map(function(t){return t.hash})},Object.defineProperty(e.prototype,"hash",{get:function(){return this._hash},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0==this.leaves.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"proof",{get:function(){return this.getProof([])},enumerable:!0,configurable:!0}),e.prototype.getProof=function(t){var e=this.parent;return void 0===e?t:(t.push(e.leftChild===this?e.rightChild._hash:e.leftChild._hash),e.getProof(t))},e}(o.Hashable);e.MerkleTree=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.description=t}return Object.defineProperty(t.prototype,"desc",{get:function(){return this.description},enumerable:!0,configurable:!0}),t.PENDING_RECIPIENT_APPROVAL=new t(""),t.PENDING_PROVIDER_APPROVAL=new t(""),t.MISSING_CREDIT_CONFIRMATION=new t(""),t.MISSING_RECEIPT=new t(""),t.DELIVERY_RATIFIED=new t(""),t.DELIVERY_CONFIRMED=new t(""),t.CANCELLED=new t(""),t.SWAP_ACTIVE=new t(""),t.SWAP_FULFILLED=new t(""),t.SWAP_FINALIZED=new t(""),t.SWAP_FROZEN=new t(""),t}();e.TransferState=r},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=this&&this.__param||function(t,e){return function(n,r){e(n,r,t)}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(14),u=n(15),a=n(68),c=n(6),l=n(17),h=function(){function t(t){this.storage=t}return e=t,t.prototype.saveWallet=function(t){try{var n=e.walletInstanceKey(t),r=this.storage.set(n,c.JSONbig.stringify(t.json));return this.addToIndex(t),r}catch(t){return l.Logging.error(t),!1}},t.prototype.loadWallet=function(t,n,r,i){try{var o=e.walletKey(t,n,r,i),s=this.storage.get(o);if(!s)return this.removeFromIndex(new a.Wallet(t,n,null,r,i,null)),null;var u=a.Wallet.fromJSON(c.JSONbig.parse(s));return this.addToIndex(u),u}catch(t){return l.Logging.error(t),null}},t.prototype.wallets=function(){var t=this.storage.get(e.INDEX_KEY);return t?new Map(c.JSONbig.parse(t)):new Map},t.prototype.addToIndex=function(t){var n=this.wallets();n.set(e.walletInstanceKey(t),{address:t.address,networkId:t.networkId,contractAddress:t.contractAddress,webAddress:t.webAddress,tokenAddress:t.tokenAddress}),this.storage.set(e.INDEX_KEY,c.JSONbig.stringify(Array.from(n.entries())))},t.prototype.removeFromIndex=function(t){var n=this.wallets();n.delete(e.walletInstanceKey(t)),this.storage.set(e.INDEX_KEY,c.JSONbig.stringify(Array.from(n.entries())))},t.walletInstanceKey=function(t){return e.walletKey(t.address,t.networkId,t.contractAddress,t.tokenAddress)},t.walletKey=function(t,e,n,r){return c.Web3Utils.soliditySha3({type:"address",value:t},{type:"uint256",value:e},{type:"address",value:n},{type:"address",value:r})},t.INDEX_KEY="lqd-wallet-client-index",t=e=r([s.injectable(),o(0,s.inject(u.TYPES.EXTERNAL.STORAGE_MANAGER_INTERFACE)),i("design:paramtypes",[Object])],t);var e}();e.WalletStorageService=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t){this.wallet=t}}();e.StatePoll=r},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=this&&this.__param||function(t,e){return function(n,r){e(n,r,t)}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(14),u=n(28),a=n(122),c=n(15),l=n(103),h=function(){function t(t){this.walletStatePollObserver=t,this.pollTimer=new u.Subject;var e=u.from(this.pollTimer);this.pollTrigger=e.pipe(l.switchAll())}return t.prototype.startSynchronization=function(t,e,n){this.subscribeToPollTrigger(t),this.pollTimer.next(u.timer(e,n))},t.prototype.stopSynchronization=function(){this.pollSubscription&&this.pollSubscription.unsubscribe()},t.prototype.triggerSynchronization=function(t){this.walletStatePollObserver.next(new a.StatePoll(t))},t.prototype.subscribeToPollTrigger=function(t){var e=this;this.pollSubscription&&!this.pollSubscription.closed||(this.pollSubscription=this.pollTrigger.subscribe(function(){e.triggerSynchronization(t)}))},t=r([s.injectable(),o(0,s.inject(c.TYPES.SUBJECT.WALLET_STATE_POLL)),i("design:paramtypes",[Object])],t)}();e.PollService=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(74);e.zipAll=function(t){return function(e){return e.lift(new r.ZipOperator(t))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(74);e.zip=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(r.zip.apply(void 0,[e].concat(t)))}}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),s=n(1);e.withLatestFrom=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){var n;"function"==typeof t[t.length-1]&&(n=t.pop());var r=t;return e.lift(new u(r,n))}};var u=function(){function t(t,e){this.observables=t,this.project=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.observables,this.project))},t}(),a=function(t){function e(e,n,r){var i=t.call(this,e)||this;i.observables=n,i.project=r,i.toRespond=[];var o=n.length;i.values=new Array(o);for(var u=0;u<o;u++)i.toRespond.push(u);for(u=0;u<o;u++){var a=n[u];i.add(s.subscribeToResult(i,a,a,u))}return i}return i(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.values[n]=e;var o=this.toRespond;if(o.length>0){var s=o.indexOf(n);-1!==s&&o.splice(s,1)}},e.prototype.notifyComplete=function(){},e.prototype._next=function(t){if(0===this.toRespond.length){var e=[t].concat(this.values);this.project?this._tryProject(e):this.destination.next(e)}},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(o.OuterSubscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(7),s=n(12),u=n(11),a=n(2),c=n(1);e.windowWhen=function(t){return function(e){return e.lift(new l(t))}};var l=function(){function t(t){this.closingSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.closingSelector))},t}(),h=function(t){function e(e,n){var r=t.call(this,e)||this;return r.destination=e,r.closingSelector=n,r.openWindow(),r}return i(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.openWindow(i)},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){this.openWindow(t)},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t),this.unsubscribeClosingNotification()},e.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},e.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},e.prototype.openWindow=function(t){void 0===t&&(t=null),t&&(this.remove(t),t.unsubscribe());var e=this.window;e&&e.complete();var n=this.window=new o.Subject;this.destination.next(n);var r=s.tryCatch(this.closingSelector)();if(r===u.errorObject){var i=u.errorObject.e;this.destination.error(i),this.window.error(i)}else this.add(this.closingNotification=c.subscribeToResult(this,r))},e}(a.OuterSubscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(7),s=n(5),u=n(12),a=n(11),c=n(2),l=n(1);e.windowToggle=function(t,e){return function(n){return n.lift(new h(t,e))}};var h=function(){function t(t,e){this.openings=t,this.closingSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new f(t,this.openings,this.closingSelector))},t}(),f=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.openings=n,i.closingSelector=r,i.contexts=[],i.add(i.openSubscription=l.subscribeToResult(i,n,n)),i}return i(e,t),e.prototype._next=function(t){var e=this.contexts;if(e)for(var n=e.length,r=0;r<n;r++)e[r].window.next(t)},e.prototype._error=function(e){var n=this.contexts;if(this.contexts=null,n)for(var r=n.length,i=-1;++i<r;){var o=n[i];o.window.error(e),o.subscription.unsubscribe()}t.prototype._error.call(this,e)},e.prototype._complete=function(){var e=this.contexts;if(this.contexts=null,e)for(var n=e.length,r=-1;++r<n;){var i=e[r];i.window.complete(),i.subscription.unsubscribe()}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.contexts;if(this.contexts=null,t)for(var e=t.length,n=-1;++n<e;){var r=t[n];r.window.unsubscribe(),r.subscription.unsubscribe()}},e.prototype.notifyNext=function(t,e,n,r,i){if(t===this.openings){var c=this.closingSelector,h=u.tryCatch(c)(e);if(h===a.errorObject)return this.error(a.errorObject.e);var f=new o.Subject,p=new s.Subscription,d={window:f,subscription:p};this.contexts.push(d);var g=l.subscribeToResult(this,h,d);g.closed?this.closeWindow(this.contexts.length-1):(g.context=d,p.add(g)),this.destination.next(f)}else this.closeWindow(this.contexts.indexOf(t))},e.prototype.notifyError=function(t){this.error(t)},e.prototype.notifyComplete=function(t){t!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(t.context))},e.prototype.closeWindow=function(t){if(-1!==t){var e=this.contexts,n=e[t],r=n.window,i=n.subscription;e.splice(t,1),r.complete(),i.unsubscribe()}},e}(c.OuterSubscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(7),s=n(10),u=n(0),a=n(57),c=n(18);e.windowTime=function(t){var e=s.async,n=null,r=Number.POSITIVE_INFINITY;return c.isScheduler(arguments[3])&&(e=arguments[3]),c.isScheduler(arguments[2])?e=arguments[2]:a.isNumeric(arguments[2])&&(r=arguments[2]),c.isScheduler(arguments[1])?e=arguments[1]:a.isNumeric(arguments[1])&&(n=arguments[1]),function(i){return i.lift(new l(t,n,r,e))}};var l=function(){function t(t,e,n,r){this.windowTimeSpan=t,this.windowCreationInterval=e,this.maxWindowSize=n,this.scheduler=r}return t.prototype.call=function(t,e){return e.subscribe(new f(t,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},t}(),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._numberOfNextedValues=0,e}return i(e,t),e.prototype.next=function(e){this._numberOfNextedValues++,t.prototype.next.call(this,e)},Object.defineProperty(e.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),e}(o.Subject),f=function(t){function e(e,n,r,i,o){var s=t.call(this,e)||this;s.destination=e,s.windowTimeSpan=n,s.windowCreationInterval=r,s.maxWindowSize=i,s.scheduler=o,s.windows=[];var u=s.openWindow();if(null!==r&&r>=0){var a={subscriber:s,window:u,context:null},c={windowTimeSpan:n,windowCreationInterval:r,subscriber:s,scheduler:o};s.add(o.schedule(g,n,a)),s.add(o.schedule(d,r,c))}else{var l={subscriber:s,window:u,windowTimeSpan:n};s.add(o.schedule(p,n,l))}return s}return i(e,t),e.prototype._next=function(t){for(var e=this.windows,n=e.length,r=0;r<n;r++){var i=e[r];i.closed||(i.next(t),i.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(i))}},e.prototype._error=function(t){for(var e=this.windows;e.length>0;)e.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){for(var t=this.windows;t.length>0;){var e=t.shift();e.closed||e.complete()}this.destination.complete()},e.prototype.openWindow=function(){var t=new h;return this.windows.push(t),this.destination.next(t),t},e.prototype.closeWindow=function(t){t.complete();var e=this.windows;e.splice(e.indexOf(t),1)},e}(u.Subscriber);function p(t){var e=t.subscriber,n=t.windowTimeSpan,r=t.window;r&&e.closeWindow(r),t.window=e.openWindow(),this.schedule(t,n)}function d(t){var e=t.windowTimeSpan,n=t.subscriber,r=t.scheduler,i=t.windowCreationInterval,o={action:this,subscription:null},s={subscriber:n,window:n.openWindow(),context:o};o.subscription=r.schedule(g,e,s),this.add(o.subscription),this.schedule(t,i)}function g(t){var e=t.subscriber,n=t.window,r=t.context;r&&r.action&&r.subscription&&r.action.remove(r.subscription),e.closeWindow(n)}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),s=n(7);e.windowCount=function(t,e){return void 0===e&&(e=0),function(n){return n.lift(new u(t,e))}};var u=function(){function t(t,e){this.windowSize=t,this.startWindowEvery=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.windowSize,this.startWindowEvery))},t}(),a=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.destination=e,i.windowSize=n,i.startWindowEvery=r,i.windows=[new s.Subject],i.count=0,e.next(i.windows[0]),i}return i(e,t),e.prototype._next=function(t){for(var e=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,n=this.destination,r=this.windowSize,i=this.windows,o=i.length,u=0;u<o&&!this.closed;u++)i[u].next(t);var a=this.count-r+1;if(a>=0&&a%e==0&&!this.closed&&i.shift().complete(),++this.count%e==0&&!this.closed){var c=new s.Subject;i.push(c),n.next(c)}},e.prototype._error=function(t){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().complete();this.destination.complete()},e.prototype._unsubscribe=function(){this.count=0,this.windows=null},e}(o.Subscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(7),s=n(2),u=n(1);e.window=function(t){return function(e){return e.lift(new a(t))}};var a=function(){function t(t){this.windowBoundaries=t}return t.prototype.call=function(t,e){var n=new c(t),r=e.subscribe(n);return r.closed||n.add(u.subscribeToResult(n,this.windowBoundaries)),r},t}(),c=function(t){function e(e){var n=t.call(this,e)||this;return n.window=new o.Subject,e.next(n.window),n}return i(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.openWindow()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){this._complete()},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t)},e.prototype._complete=function(){this.window.complete(),this.destination.complete()},e.prototype._unsubscribe=function(){this.window=null},e.prototype.openWindow=function(){var t=this.window;t&&t.complete();var e=this.destination,n=this.window=new o.Subject;e.next(n)},e}(s.OuterSubscriber)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(40);function i(t,e,n){return 0===n?[e]:(t.push(e),t)}e.toArray=function(){return r.reduce(i,[])}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(10),i=n(21);e.timestamp=function(t){return void 0===t&&(t=r.async),i.map(function(e){return new o(e,t.now())})};var o=function(){return function(t,e){this.value=t,this.timestamp=e}}();e.Timestamp=o},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){var n=t.call(this,"Timeout has occurred")||this;return n.name="TimeoutError",Object.setPrototypeOf(n,e.prototype),n}return i(e,t),e}(Error);e.TimeoutError=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(10),i=n(134),o=n(75),s=n(83);e.timeout=function(t,e){return void 0===e&&(e=r.async),o.timeoutWith(t,s.throwError(new i.TimeoutError),e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),i=n(23),o=n(22);e.defer=function(t){return new r.Observable(function(e){var n;try{n=t()}catch(t){return void e.error(t)}return(n?i.from(n):o.empty()).subscribe(e)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(10),i=n(50),o=n(136),s=n(21);e.timeInterval=function(t){return void 0===t&&(t=r.async),function(e){return o.defer(function(){return e.pipe(i.scan(function(e,n){var r=e.current;return{value:n,current:t.now(),last:r}},{current:t.now(),value:void 0,last:void 0}),s.map(function(t){var e=t.current,n=t.last,r=t.value;return new u(r,e-n)}))})}};var u=function(){return function(t,e){this.value=t,this.interval=e}}();e.TimeInterval=u},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),s=n(10),u=n(76);e.throttleTime=function(t,e,n){return void 0===e&&(e=s.async),void 0===n&&(n=u.defaultThrottleConfig),function(r){return r.lift(new a(t,e,n.leading,n.trailing))}};var a=function(){function t(t,e,n,r){this.duration=t,this.scheduler=e,this.leading=n,this.trailing=r}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.duration,this.scheduler,this.leading,this.trailing))},t}(),c=function(t){function e(e,n,r,i,o){var s=t.call(this,e)||this;return s.duration=n,s.scheduler=r,s.leading=i,s.trailing=o,s._hasTrailingValue=!1,s._trailingValue=null,s}return i(e,t),e.prototype._next=function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(l,this.duration,{subscriber:this})),this.leading&&this.destination.next(t))},e.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},e.prototype.clearThrottle=function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)},e}(o.Subscriber);function l(t){t.subscriber.clearThrottle()}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0);e.takeWhile=function(t){return function(e){return e.lift(new s(t))}};var s=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.predicate))},t}(),u=function(t){function e(e,n){var r=t.call(this,e)||this;return r.predicate=n,r.index=0,r}return i(e,t),e.prototype._next=function(t){var e,n=this.destination;try{e=this.predicate(t,this.index++)}catch(t){return void n.error(t)}this.nextOrComplete(t,e)},e.prototype.nextOrComplete=function(t,e){var n=this.destination;Boolean(e)?n.next(t):n.complete()},e}(o.Subscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),s=n(1);e.takeUntil=function(t){return function(e){return e.lift(new u(t))}};var u=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var n=new a(t),r=s.subscribeToResult(n,this.notifier);return r&&!r.closed?(n.add(r),e.subscribe(n)):n},t}(),a=function(t){function e(e){return t.call(this,e)||this}return i(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.complete()},e.prototype.notifyComplete=function(){},e}(o.OuterSubscriber)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(48);e.switchMapTo=function(t,e){return e?r.switchMap(function(){return t},e):r.switchMap(function(){return t})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(48),i=n(43);e.switchAll=function(){return r.switchMap(i.identity)}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}},e}(n(58).AsyncScheduler);e.AsapScheduler=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=1,i={};e.Immediate={setImmediate:function(t){var e=r++;return i[e]=t,Promise.resolve().then(function(){return function(t){var e=i[t];e&&e()}(e)}),e},clearImmediate:function(t){delete i[t]}}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(144),s=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return i(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=o.Immediate.setImmediate(e.flush.bind(e,null))))},e.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(o.Immediate.clearImmediate(n),e.scheduled=void 0)},e}(n(59).AsyncAction);e.AsapAction=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(145),i=n(143);e.asap=new i.AsapScheduler(r.AsapAction)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),s=n(146),u=n(57),a=function(t){function e(e,n,r){void 0===n&&(n=0),void 0===r&&(r=s.asap);var i=t.call(this)||this;return i.source=e,i.delayTime=n,i.scheduler=r,(!u.isNumeric(n)||n<0)&&(i.delayTime=0),r&&"function"==typeof r.schedule||(i.scheduler=s.asap),i}return i(e,t),e.create=function(t,n,r){return void 0===n&&(n=0),void 0===r&&(r=s.asap),new e(t,n,r)},e.dispatch=function(t){var e=t.source,n=t.subscriber;return this.add(e.subscribe(n))},e.prototype._subscribe=function(t){var n=this.delayTime,r=this.source;return this.scheduler.schedule(e.dispatch,n,{source:r,subscriber:t})},e}(o.Observable);e.SubscribeOnObservable=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(147);e.subscribeOn=function(t,e){return void 0===e&&(e=0),function(n){return n.lift(new i(t,e))}};var i=function(){function t(t,e){this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return new r.SubscribeOnObservable(e,this.delay,this.scheduler).subscribe(t)},t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(24),i=n(87),o=n(22),s=n(89),u=n(18);e.startWith=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){var n=t[t.length-1];u.isScheduler(n)?t.pop():n=null;var a=t.length;return 1!==a||n?a>0?s.concat(r.fromArray(t,n),e):s.concat(o.empty(n),e):s.concat(i.scalar(t[0]),e)}}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0);e.skipWhile=function(t){return function(e){return e.lift(new s(t))}};var s=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.predicate))},t}(),u=function(t){function e(e,n){var r=t.call(this,e)||this;return r.predicate=n,r.skipping=!0,r.index=0,r}return i(e,t),e.prototype._next=function(t){var e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)},e.prototype.tryCallPredicate=function(t){try{var e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(t){this.destination.error(t)}},e}(o.Subscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),s=n(1);e.skipUntil=function(t){return function(e){return e.lift(new u(t))}};var u=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.notifier))},t}(),a=function(t){function e(e,n){var r=t.call(this,e)||this;return r.hasValue=!1,r.add(r.innerSubscription=s.subscribeToResult(r,n)),r}return i(e,t),e.prototype._next=function(e){this.hasValue&&t.prototype._next.call(this,e)},e.prototype.notifyNext=function(t,e,n,r,i){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},e.prototype.notifyComplete=function(){},e}(o.OuterSubscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),s=n(42);e.skipLast=function(t){return function(e){return e.lift(new u(t))}};var u=function(){function t(t){if(this._skipCount=t,this._skipCount<0)throw new s.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return 0===this._skipCount?e.subscribe(new o.Subscriber(t)):e.subscribe(new a(t,this._skipCount))},t}(),a=function(t){function e(e,n){var r=t.call(this,e)||this;return r._skipCount=n,r._count=0,r._ring=new Array(n),r}return i(e,t),e.prototype._next=function(t){var e=this._skipCount,n=this._count++;if(n<e)this._ring[n]=t;else{var r=n%e,i=this._ring,o=i[r];i[r]=t,this.destination.next(o)}},e}(o.Subscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0);e.skip=function(t){return function(e){return e.lift(new s(t))}};var s=function(){function t(t){this.total=t}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.total))},t}(),u=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return i(e,t),e.prototype._next=function(t){++this.count>this.total&&this.destination.next(t)},e}(o.Subscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),s=n(41);e.single=function(t){return function(e){return e.lift(new u(t,e))}};var u=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.predicate,this.source))},t}(),a=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.source=r,i.seenValue=!1,i.index=0,i}return i(e,t),e.prototype.applySingleValue=function(t){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=t)},e.prototype._next=function(t){var e=this.index++;this.predicate?this.tryNext(t,e):this.applySingleValue(t)},e.prototype.tryNext=function(t,e){try{this.predicate(t,e,this.source)&&this.applySingleValue(t)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){var t=this.destination;this.index>0?(t.next(this.seenValue?this.singleValue:void 0),t.complete()):t.error(new s.EmptyError)},e}(o.Subscriber)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(77);e.shareReplay=function(t,e,n){return function(i){return i.lift(function(t,e,n){var i,o,s=0,u=!1,a=!1;return function(c){s++,i&&!u||(u=!1,i=new r.ReplaySubject(t,e,n),o=c.subscribe({next:function(t){i.next(t)},error:function(t){u=!0,i.error(t)},complete:function(){a=!0,i.complete()}}));var l=i.subscribe(this);return function(){s--,l.unsubscribe(),o&&0===s&&a&&o.unsubscribe()}}}(t,e,n))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(29),i=n(49),o=n(7);function s(){return new o.Subject}e.share=function(){return function(t){return i.refCount()(r.multicast(s)(t))}}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),s=n(12),u=n(11);e.sequenceEqual=function(t,e){return function(n){return n.lift(new a(t,e))}};var a=function(){function t(t,e){this.compareTo=t,this.comparor=e}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.compareTo,this.comparor))},t}();e.SequenceEqualOperator=a;var c=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.compareTo=n,i.comparor=r,i._a=[],i._b=[],i._oneComplete=!1,i.add(n.subscribe(new l(e,i))),i}return i(e,t),e.prototype._next=function(t){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(t),this.checkValues())},e.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},e.prototype.checkValues=function(){for(var t=this._a,e=this._b,n=this.comparor;t.length>0&&e.length>0;){var r=t.shift(),i=e.shift(),o=!1;n?(o=s.tryCatch(n)(r,i))===u.errorObject&&this.destination.error(u.errorObject.e):o=r===i,o||this.emit(!1)}},e.prototype.emit=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype.nextB=function(t){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(t),this.checkValues())},e}(o.Subscriber);e.SequenceEqualSubscriber=c;var l=function(t){function e(e,n){var r=t.call(this,e)||this;return r.parent=n,r}return i(e,t),e.prototype._next=function(t){this.parent.nextB(t)},e.prototype._error=function(t){this.parent.error(t)},e.prototype._complete=function(){this.parent._complete()},e}(o.Subscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),s=n(10);e.sampleTime=function(t,e){return void 0===e&&(e=s.async),function(n){return n.lift(new u(t,e))}};var u=function(){function t(t,e){this.period=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.period,this.scheduler))},t}(),a=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.period=n,i.scheduler=r,i.hasValue=!1,i.add(r.schedule(c,n,{subscriber:i,period:n})),i}return i(e,t),e.prototype._next=function(t){this.lastValue=t,this.hasValue=!0},e.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},e}(o.Subscriber);function c(t){var e=t.subscriber,n=t.period;e.notifyNext(),this.schedule(t,n)}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),s=n(1);e.sample=function(t){return function(e){return e.lift(new u(t))}};var u=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var n=new a(t),r=e.subscribe(n);return r.add(s.subscribeToResult(n,this.notifier)),r},t}(),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasValue=!1,e}return i(e,t),e.prototype._next=function(t){this.value=t,this.hasValue=!0},e.prototype.notifyNext=function(t,e,n,r,i){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},e}(o.OuterSubscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(7),s=n(12),u=n(11),a=n(2),c=n(1);e.retryWhen=function(t){return function(e){return e.lift(new l(t,e))}};var l=function(){function t(t,e){this.notifier=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.notifier,this.source))},t}(),h=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.notifier=n,i.source=r,i}return i(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=this.errors,r=this.retries,i=this.retriesSubscription;if(r)this.errors=null,this.retriesSubscription=null;else{if(n=new o.Subject,(r=s.tryCatch(this.notifier)(n))===u.errorObject)return t.prototype.error.call(this,u.errorObject.e);i=c.subscribeToResult(this,r)}this._unsubscribeAndRecycle(),this.errors=n,this.retries=r,this.retriesSubscription=i,n.next(e)}},e.prototype._unsubscribe=function(){var t=this.errors,e=this.retriesSubscription;t&&(t.unsubscribe(),this.errors=null),e&&(e.unsubscribe(),this.retriesSubscription=null),this.retries=null},e.prototype.notifyNext=function(t,e,n,r,i){var o=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=o,this.source.subscribe(this)},e}(a.OuterSubscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0);e.retry=function(t){return void 0===t&&(t=-1),function(e){return e.lift(new s(t,e))}};var s=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.count,this.source))},t}(),u=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.count=n,i.source=r,i}return i(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=this.source,r=this.count;if(0===r)return t.prototype.error.call(this,e);r>-1&&(this.count=r-1),n.subscribe(this._unsubscribeAndRecycle())}},e}(o.Subscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(7),s=n(12),u=n(11),a=n(2),c=n(1);e.repeatWhen=function(t){return function(e){return e.lift(new l(t))}};var l=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.notifier,e))},t}(),h=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.notifier=n,i.source=r,i.sourceIsBeingSubscribedTo=!0,i}return i(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},e.prototype.notifyComplete=function(e){if(!1===this.sourceIsBeingSubscribedTo)return t.prototype.complete.call(this)},e.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return t.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next()}},e.prototype._unsubscribe=function(){var t=this.notifications,e=this.retriesSubscription;t&&(t.unsubscribe(),this.notifications=null),e&&(e.unsubscribe(),this.retriesSubscription=null),this.retries=null},e.prototype._unsubscribeAndRecycle=function(){var e=this._unsubscribe;return this._unsubscribe=null,t.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=e,this},e.prototype.subscribeToRetries=function(){this.notifications=new o.Subject;var e=s.tryCatch(this.notifier)(this.notifications);if(e===u.errorObject)return t.prototype.complete.call(this);this.retries=e,this.retriesSubscription=c.subscribeToResult(this,e)},e}(a.OuterSubscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),s=n(22);e.repeat=function(t){return void 0===t&&(t=-1),function(e){return 0===t?s.empty():t<0?e.lift(new u(-1,e)):e.lift(new u(t-1,e))}};var u=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.count,this.source))},t}(),a=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.count=n,i.source=r,i}return i(e,t),e.prototype.complete=function(){if(!this.isStopped){var e=this.source,n=this.count;if(0===n)return t.prototype.complete.call(this);n>-1&&(this.count=n-1),e.subscribe(this._unsubscribeAndRecycle())}},e}(o.Subscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(19),s=n(24),u=n(2),a=n(1);e.race=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){if(!o.isArray(t[0]))return t[0];t=t[0]}return s.fromArray(t,void 0).lift(new c)};var c=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new l(t))},t}();e.RaceOperator=c;var l=function(t){function e(e){var n=t.call(this,e)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return i(e,t),e.prototype._next=function(t){this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var n=0;n<e&&!this.hasFirst;n++){var r=t[n],i=a.subscribeToResult(this,r,r,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},e.prototype.notifyNext=function(t,e,n,r,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==n){var s=this.subscriptions[o];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(e)},e}(u.OuterSubscriber);e.RaceSubscriber=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(19),i=n(164);e.race=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return 1===t.length&&r.isArray(t[0])&&(t=t[0]),e.lift.call(i.race.apply(void 0,[e].concat(t)))}}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(n(58).AsyncScheduler);e.QueueScheduler=o},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return i(e,t),e.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?t.prototype.requestAsyncId.call(this,e,n,r):e.flush(this)},e}(n(59).AsyncAction);e.QueueAction=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(167),i=n(166);e.queue=new i.QueueScheduler(r.QueueAction)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(77),i=n(29);e.publishReplay=function(t,e,n,o){n&&"function"!=typeof n&&(o=n);var s="function"==typeof n?n:void 0,u=new r.ReplaySubject(t,e,o);return function(t){return i.multicast(function(){return u},s)(t)}}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(7),s=n(5),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.value=null,e.hasNext=!1,e.hasCompleted=!1,e}return i(e,t),e.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),s.Subscription.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),s.Subscription.EMPTY):t.prototype._subscribe.call(this,e)},e.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},e.prototype.error=function(e){this.hasCompleted||t.prototype.error.call(this,e)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&t.prototype.next.call(this,this.value),t.prototype.complete.call(this)},e}(o.Subject);e.AsyncSubject=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(170),i=n(29);e.publishLast=function(){return function(t){return i.multicast(new r.AsyncSubject)(t)}}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(7),s=n(52),u=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return i(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new s.ObjectUnsubscribedError;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(o.Subject);e.BehaviorSubject=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(172),i=n(29);e.publishBehavior=function(t){return function(e){return i.multicast(new r.BehaviorSubject(t))(e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(7),i=n(29);e.publish=function(t){return t?i.multicast(function(){return new r.Subject},t):i.multicast(new r.Subject)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(21);e.pluck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.length;if(0===n)throw new Error("list of properties cannot be empty.");return function(e){return r.map(function(t,e){return function(n){for(var r=n,i=0;i<e;i++){var o=r[t[i]];if(void 0===o)return;r=o}return r}}(t,n))(e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.not=function(t,e){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=t,n.thisArg=e,n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(176),i=n(31);e.partition=function(t,e){return function(n){return[i.filter(t,e)(n),i.filter(r.not(t,e))(n)]}}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0);e.pairwise=function(){return function(t){return t.lift(new s)}};var s=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new u(t))},t}(),u=function(t){function e(e){var n=t.call(this,e)||this;return n.hasPrev=!1,n}return i(e,t),e.prototype._next=function(t){this.hasPrev?this.destination.next([this.prev,t]):this.hasPrev=!0,this.prev=t},e}(o.Subscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(23),s=n(19),u=n(2),a=n(1);e.onErrorResumeNext=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1===t.length&&s.isArray(t[0])&&(t=t[0]),function(e){return e.lift(new c(t))}},e.onErrorResumeNextStatic=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n;return 1===t.length&&s.isArray(t[0])&&(t=t[0]),n=t.shift(),o.from(n,null).lift(new c(t))};var c=function(){function t(t){this.nextSources=t}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.nextSources))},t}(),l=function(t){function e(e,n){var r=t.call(this,e)||this;return r.destination=e,r.nextSources=n,r}return i(e,t),e.prototype.notifyError=function(t,e){this.subscribeToNextSource()},e.prototype.notifyComplete=function(t){this.subscribeToNextSource()},e.prototype._error=function(t){this.subscribeToNextSource()},e.prototype._complete=function(){this.subscribeToNextSource()},e.prototype.subscribeToNextSource=function(){var t=this.nextSources.shift();t?this.add(a.subscribeToResult(this,t)):this.destination.complete()},e}(u.OuterSubscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(7),s=n(4),u=n(0),a=n(5),c=n(49),l=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return i(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new a.Subscription).add(this.source.subscribe(new f(this.getSubject(),this))),t.closed?(this._connection=null,t=a.Subscription.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return c.refCount()(this)},e}(s.Observable);e.ConnectableObservable=l;var h=l.prototype;e.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:h._subscribe},_isComplete:{value:h._isComplete,writable:!0},getSubject:{value:h.getSubject},connect:{value:h.connect},refCount:{value:h.refCount}};var f=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return i(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(o.SubjectSubscriber),p=(function(){function t(t){this.connectable=t}t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new p(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}(),function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return i(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(u.Subscriber))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(40);e.min=function(t){var e="function"==typeof t?function(e,n){return t(e,n)<0?e:n}:function(t,e){return t<e?t:e};return r.reduce(e)}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(12),s=n(11),u=n(1),a=n(2);e.mergeScan=function(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(r){return r.lift(new c(t,e,n))}};var c=function(){function t(t,e,n){this.accumulator=t,this.seed=e,this.concurrent=n}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.accumulator,this.seed,this.concurrent))},t}();e.MergeScanOperator=c;var l=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.accumulator=n,o.acc=r,o.concurrent=i,o.hasValue=!1,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return i(e,t),e.prototype._next=function(t){if(this.active<this.concurrent){var e=this.index++,n=o.tryCatch(this.accumulator)(this.acc,t),r=this.destination;n===s.errorObject?r.error(s.errorObject.e):(this.active++,this._innerSub(n,t,e))}else this.buffer.push(t)},e.prototype._innerSub=function(t,e,n){this.add(u.subscribeToResult(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.destination;this.acc=e,this.hasValue=!0,o.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},e}(a.OuterSubscriber);e.MergeScanSubscriber=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(33);e.mergeMapTo=function(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof e?r.mergeMap(function(){return t},e,n):("number"==typeof e&&(n=e),r.mergeMap(function(){return t},n))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),i=n(18),o=n(56),s=n(24);e.merge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Number.POSITIVE_INFINITY,u=null,a=t[t.length-1];return i.isScheduler(a)?(u=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof a&&(n=t.pop()),null===u&&1===t.length&&t[0]instanceof r.Observable?t[0]:o.mergeAll(n)(s.fromArray(t,u))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(184);e.merge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(r.merge.apply(void 0,[e].concat(t)))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(40);e.max=function(t){var e="function"==typeof t?function(e,n){return t(e,n)>0?e:n}:function(t,e){return t>e?t:e};return r.reduce(e)}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),s=n(55);e.materialize=function(){return function(t){return t.lift(new u)}};var u=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new a(t))},t}(),a=function(t){function e(e){return t.call(this,e)||this}return i(e,t),e.prototype._next=function(t){this.destination.next(s.Notification.createNext(t))},e.prototype._error=function(t){var e=this.destination;e.next(s.Notification.createError(t)),e.complete()},e.prototype._complete=function(){var t=this.destination;t.next(s.Notification.createComplete()),t.complete()},e}(o.Subscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0);e.mapTo=function(t){return function(e){return e.lift(new s(t))}};var s=function(){function t(t){this.value=t}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.value))},t}(),u=function(t){function e(e,n){var r=t.call(this,e)||this;return r.value=n,r}return i(e,t),e.prototype._next=function(t){this.destination.next(this.value)},e}(o.Subscriber)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(41),i=n(31),o=n(51),s=n(54),u=n(32),a=n(43);e.last=function(t,e){var n=arguments.length>=2;return function(c){return c.pipe(t?i.filter(function(e,n){return t(e,n,c)}):a.identity,o.takeLast(1),n?u.defaultIfEmpty(e):s.throwIfEmpty(function(){return new r.EmptyError}))}}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0);e.isEmpty=function(){return function(t){return t.lift(new s)}};var s=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new u(t))},t}(),u=function(t){function e(e){return t.call(this,e)||this}return i(e,t),e.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype._next=function(t){this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(o.Subscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0);e.ignoreElements=function(){return function(t){return t.lift(new s)}};var s=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new u(t))},t}(),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._next=function(t){},e}(o.Subscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),s=n(5),u=n(4),a=n(7);e.groupBy=function(t,e,n,r){return function(i){return i.lift(new c(t,e,n,r))}};var c=function(){function t(t,e,n,r){this.keySelector=t,this.elementSelector=e,this.durationSelector=n,this.subjectSelector=r}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},t}(),l=function(t){function e(e,n,r,i,o){var s=t.call(this,e)||this;return s.keySelector=n,s.elementSelector=r,s.durationSelector=i,s.subjectSelector=o,s.groups=null,s.attemptedToUnsubscribe=!1,s.count=0,s}return i(e,t),e.prototype._next=function(t){var e;try{e=this.keySelector(t)}catch(t){return void this.error(t)}this._group(t,e)},e.prototype._group=function(t,e){var n=this.groups;n||(n=this.groups=new Map);var r,i=n.get(e);if(this.elementSelector)try{r=this.elementSelector(t)}catch(t){this.error(t)}else r=t;if(!i){i=this.subjectSelector?this.subjectSelector():new a.Subject,n.set(e,i);var o=new f(e,i,this);if(this.destination.next(o),this.durationSelector){var s=void 0;try{s=this.durationSelector(new f(e,i))}catch(t){return void this.error(t)}this.add(s.subscribe(new h(e,i,this)))}}i.closed||i.next(r)},e.prototype._error=function(t){var e=this.groups;e&&(e.forEach(function(e,n){e.error(t)}),e.clear()),this.destination.error(t)},e.prototype._complete=function(){var t=this.groups;t&&(t.forEach(function(t,e){t.complete()}),t.clear()),this.destination.complete()},e.prototype.removeGroup=function(t){this.groups.delete(t)},e.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&t.prototype.unsubscribe.call(this))},e}(o.Subscriber),h=function(t){function e(e,n,r){var i=t.call(this,n)||this;return i.key=e,i.group=n,i.parent=r,i}return i(e,t),e.prototype._next=function(t){this.complete()},e.prototype._unsubscribe=function(){var t=this.parent,e=this.key;this.key=this.parent=null,t&&t.removeGroup(e)},e}(o.Subscriber),f=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.groupSubject=n,i.refCountSubscription=r,i}return i(e,t),e.prototype._subscribe=function(t){var e=new s.Subscription,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&e.add(new p(n)),e.add(r.subscribe(t)),e},e}(u.Observable);e.GroupedObservable=f;var p=function(t){function e(e){var n=t.call(this)||this;return n.parent=e,e.count++,n}return i(e,t),e.prototype.unsubscribe=function(){var e=this.parent;e.closed||this.closed||(t.prototype.unsubscribe.call(this),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())},e}(s.Subscription)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(41),i=n(31),o=n(53),s=n(32),u=n(54),a=n(43);e.first=function(t,e){var n=arguments.length>=2;return function(c){return c.pipe(t?i.filter(function(e,n){return t(e,n,c)}):a.identity,o.take(1),n?s.defaultIfEmpty(e):u.throwIfEmpty(function(){return new r.EmptyError}))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(80);e.findIndex=function(t,e){return function(n){return n.lift(new r.FindValueOperator(t,n,!0,e))}}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),s=n(5);e.finalize=function(t){return function(e){return e.lift(new u(t))}};var u=function(){function t(t){this.callback=t}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.callback))},t}(),a=function(t){function e(e,n){var r=t.call(this,e)||this;return r.add(new s.Subscription(n)),r}return i(e,t),e}(o.Subscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(12),s=n(11),u=n(2),a=n(1);e.expand=function(t,e,n){return void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=void 0),e=(e||0)<1?Number.POSITIVE_INFINITY:e,function(r){return r.lift(new c(t,e,n))}};var c=function(){function t(t,e,n){this.project=t,this.concurrent=e,this.scheduler=n}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.project,this.concurrent,this.scheduler))},t}();e.ExpandOperator=c;var l=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.project=n,o.concurrent=r,o.scheduler=i,o.index=0,o.active=0,o.hasCompleted=!1,r<Number.POSITIVE_INFINITY&&(o.buffer=[]),o}return i(e,t),e.dispatch=function(t){var e=t.subscriber,n=t.result,r=t.value,i=t.index;e.subscribeToProjection(n,r,i)},e.prototype._next=function(t){var n=this.destination;if(n.closed)this._complete();else{var r=this.index++;if(this.active<this.concurrent){n.next(t);var i=o.tryCatch(this.project)(t,r);if(i===s.errorObject)n.error(s.errorObject.e);else if(this.scheduler){var u={subscriber:this,result:i,value:t,index:r};this.add(this.scheduler.schedule(e.dispatch,0,u))}else this.subscribeToProjection(i,t,r)}else this.buffer.push(t)}},e.prototype.subscribeToProjection=function(t,e,n){this.active++,this.add(a.subscribeToResult(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this._next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e&&e.length>0&&this._next(e.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},e}(u.OuterSubscriber);e.ExpandSubscriber=l},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),s=n(1),u=n(21),a=n(23);e.exhaustMap=function t(e,n){return n?function(r){return r.pipe(t(function(t,r){return a.from(e(t,r)).pipe(u.map(function(e,i){return n(t,e,r,i)}))}))}:function(t){return t.lift(new c(e))}};var c=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.project))},t}(),l=function(t){function e(e,n){var r=t.call(this,e)||this;return r.project=n,r.hasSubscription=!1,r.hasCompleted=!1,r.index=0,r}return i(e,t),e.prototype._next=function(t){this.hasSubscription||this.tryNext(t)},e.prototype.tryNext=function(t){var e=this.index++,n=this.destination;try{var r=this.project(t,e);this.hasSubscription=!0,this.add(s.subscribeToResult(this,r,t,e))}catch(t){n.error(t)}},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.remove(t),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(o.OuterSubscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),s=n(1);e.exhaust=function(){return function(t){return t.lift(new u)}};var u=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new a(t))},t}(),a=function(t){function e(e){var n=t.call(this,e)||this;return n.hasCompleted=!1,n.hasSubscription=!1,n}return i(e,t),e.prototype._next=function(t){this.hasSubscription||(this.hasSubscription=!0,this.add(s.subscribeToResult(this,t)))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},e.prototype.notifyComplete=function(t){this.remove(t),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(o.OuterSubscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0);e.every=function(t,e){return function(n){return n.lift(new s(t,e,n))}};var s=function(){function t(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.predicate,this.thisArg,this.source))},t}(),u=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.predicate=n,o.thisArg=r,o.source=i,o.index=0,o.thisArg=r||o,o}return i(e,t),e.prototype.notifyComplete=function(t){this.destination.next(t),this.destination.complete()},e.prototype._next=function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e||this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(o.Subscriber)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(42),i=n(31),o=n(54),s=n(32),u=n(53);e.elementAt=function(t,e){if(t<0)throw new r.ArgumentOutOfRangeError;var n=arguments.length>=2;return function(a){return a.pipe(i.filter(function(e,n){return n===t}),u.take(1),n?s.defaultIfEmpty(e):o.throwIfEmpty(function(){return new r.ArgumentOutOfRangeError}))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(82);e.distinctUntilKeyChanged=function(t,e){return r.distinctUntilChanged(function(n,r){return e?e(n[t],r[t]):n[t]===r[t]})}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),s=n(1);e.distinct=function(t,e){return function(n){return n.lift(new u(t,e))}};var u=function(){function t(t,e){this.keySelector=t,this.flushes=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.keySelector,this.flushes))},t}(),a=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.keySelector=n,i.values=new Set,r&&i.add(s.subscribeToResult(i,r)),i}return i(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.values.clear()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype._next=function(t){this.keySelector?this._useKeySelector(t):this._finalizeNext(t,t)},e.prototype._useKeySelector=function(t){var e,n=this.destination;try{e=this.keySelector(t)}catch(t){return void n.error(t)}this._finalizeNext(e,t)},e.prototype._finalizeNext=function(t,e){var n=this.values;n.has(t)||(n.add(t),this.destination.next(e))},e}(o.OuterSubscriber);e.DistinctSubscriber=a},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0);e.dematerialize=function(){return function(t){return t.lift(new s)}};var s=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new u(t))},t}(),u=function(t){function e(e){return t.call(this,e)||this}return i(e,t),e.prototype._next=function(t){t.observe(this.destination)},e}(o.Subscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),s=n(4),u=n(2),a=n(1);e.delayWhen=function(t,e){return e?function(n){return new h(n,e).lift(new c(t))}:function(e){return e.lift(new c(t))}};var c=function(){function t(t){this.delayDurationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.delayDurationSelector))},t}(),l=function(t){function e(e,n){var r=t.call(this,e)||this;return r.delayDurationSelector=n,r.completed=!1,r.delayNotifierSubscriptions=[],r}return i(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(t),this.removeSubscription(i),this.tryComplete()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){var e=this.removeSubscription(t);e&&this.destination.next(e),this.tryComplete()},e.prototype._next=function(t){try{var e=this.delayDurationSelector(t);e&&this.tryDelay(e,t)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){this.completed=!0,this.tryComplete()},e.prototype.removeSubscription=function(t){t.unsubscribe();var e=this.delayNotifierSubscriptions.indexOf(t);return-1!==e&&this.delayNotifierSubscriptions.splice(e,1),t.outerValue},e.prototype.tryDelay=function(t,e){var n=a.subscribeToResult(this,t,e);n&&!n.closed&&(this.add(n),this.delayNotifierSubscriptions.push(n))},e.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},e}(u.OuterSubscriber),h=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subscriptionDelay=n,r}return i(e,t),e.prototype._subscribe=function(t){this.subscriptionDelay.subscribe(new f(t,this.source))},e}(s.Observable),f=function(t){function e(e,n){var r=t.call(this)||this;return r.parent=e,r.source=n,r.sourceSubscribed=!1,r}return i(e,t),e.prototype._next=function(t){this.subscribeToSource()},e.prototype._error=function(t){this.unsubscribe(),this.parent.error(t)},e.prototype._complete=function(){this.subscribeToSource()},e.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},e}(o.Subscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(10),s=n(84),u=n(0),a=n(55);e.delay=function(t,e){void 0===e&&(e=o.async);var n=s.isDate(t)?+t-e.now():Math.abs(t);return function(t){return t.lift(new c(n,e))}};var c=function(){function t(t,e){this.delay=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.delay,this.scheduler))},t}(),l=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.delay=n,i.scheduler=r,i.queue=[],i.active=!1,i.errored=!1,i}return i(e,t),e.dispatch=function(t){for(var e=t.source,n=e.queue,r=t.scheduler,i=t.destination;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){var o=Math.max(0,n[0].time-r.now());this.schedule(t,o)}else this.unsubscribe(),e.active=!1},e.prototype._schedule=function(t){this.active=!0,this.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(!0!==this.errored){var e=this.scheduler,n=new h(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}},e.prototype._next=function(t){this.scheduleNotification(a.Notification.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t)},e.prototype._complete=function(){this.scheduleNotification(a.Notification.createComplete())},e}(u.Subscriber),h=function(){return function(t,e){this.time=t,this.notification=e}}()},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),s=n(10);e.debounceTime=function(t,e){return void 0===e&&(e=s.async),function(n){return n.lift(new u(t,e))}};var u=function(){function t(t,e){this.dueTime=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.dueTime,this.scheduler))},t}(),a=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.dueTime=n,i.scheduler=r,i.debouncedSubscription=null,i.lastValue=null,i.hasValue=!1,i}return i(e,t),e.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(c,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var t=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}},e.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},e}(o.Subscriber);function c(t){t.debouncedNext()}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),s=n(1);e.debounce=function(t){return function(e){return e.lift(new u(t))}};var u=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.durationSelector))},t}(),a=function(t){function e(e,n){var r=t.call(this,e)||this;return r.durationSelector=n,r.hasValue=!1,r.durationSubscription=null,r}return i(e,t),e.prototype._next=function(t){try{var e=this.durationSelector.call(this,t);e&&this._tryNext(t,e)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){this.emitValue(),this.destination.complete()},e.prototype._tryNext=function(t,e){var n=this.durationSubscription;this.value=t,this.hasValue=!0,n&&(n.unsubscribe(),this.remove(n)),(n=s.subscribeToResult(this,e))&&!n.closed&&this.add(this.durationSubscription=n)},e.prototype.notifyNext=function(t,e,n,r,i){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){if(this.hasValue){var e=this.value,n=this.durationSubscription;n&&(this.durationSubscription=null,n.unsubscribe(),this.remove(n)),this.value=null,this.hasValue=!1,t.prototype._next.call(this,e)}},e}(o.OuterSubscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0);e.count=function(t){return function(e){return e.lift(new s(t,e))}};var s=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.predicate,this.source))},t}(),u=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.source=r,i.count=0,i.index=0,i}return i(e,t),e.prototype._next=function(t){this.predicate?this._tryPredicate(t):this.count++},e.prototype._tryPredicate=function(t){var e;try{e=this.predicate(t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e&&this.count++},e.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},e}(o.Subscriber)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(85);e.concatMapTo=function(t,e){return r.concatMap(function(){return t},e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(89);e.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(r.concat.apply(void 0,[e].concat(t)))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),i=n(5),o=n(35),s=n(93);e.fromObservable=function(t,e){return e?new r.Observable(function(n){var r=new i.Subscription;return r.add(e.schedule(function(){var i=t[o.observable]();r.add(i.subscribe({next:function(t){r.add(e.schedule(function(){return n.next(t)}))},error:function(t){r.add(e.schedule(function(){return n.error(t)}))},complete:function(){r.add(e.schedule(function(){return n.complete()}))}}))})),r}):new r.Observable(s.subscribeToObservable(t))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),i=n(5),o=n(34),s=n(94);e.fromIterable=function(t,e){if(!t)throw new Error("Iterable cannot be null");return e?new r.Observable(function(n){var r,s=new i.Subscription;return s.add(function(){r&&"function"==typeof r.return&&r.return()}),s.add(e.schedule(function(){r=t[o.iterator](),s.add(e.schedule(function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(t){return void n.error(t)}e?n.complete():(n.next(t),this.schedule())}}))})),s}):new r.Observable(s.subscribeToIterable(t))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),i=n(5),o=n(95);e.fromPromise=function(t,e){return e?new r.Observable(function(n){var r=new i.Subscription;return r.add(e.schedule(function(){return t.then(function(t){r.add(e.schedule(function(){n.next(t),r.add(e.schedule(function(){return n.complete()}))}))},function(t){r.add(e.schedule(function(){return n.error(t)}))})})),r}):new r.Observable(o.subscribeToPromise(t))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(34);e.isIterable=function(t){return t&&"function"==typeof t[r.iterator]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(35);e.isInteropObservable=function(t){return t&&"function"==typeof t[r.observable]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(19),i=n(90),o=n(23);e.combineLatest=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null;return"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&r.isArray(t[0])&&(t=t[0].slice()),function(e){return e.lift.call(o.from([e].concat(t)),new i.CombineLatestOperator(n))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(90);e.combineAll=function(t){return function(e){return e.lift(new r.CombineLatestOperator(t))}}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),s=n(1);e.catchError=function(t){return function(e){var n=new u(t),r=e.lift(n);return n.caught=r}};var u=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.selector,this.caught))},t}(),a=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.selector=n,i.caught=r,i}return i(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=void 0;try{n=this.selector(e,this.caught)}catch(e){return void t.prototype.error.call(this,e)}this._unsubscribeAndRecycle(),this.add(s.subscribeToResult(this,n))}},e}(o.OuterSubscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(5),s=n(12),u=n(11),a=n(2),c=n(1);e.bufferWhen=function(t){return function(e){return e.lift(new l(t))}};var l=function(){function t(t){this.closingSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.closingSelector))},t}(),h=function(t){function e(e,n){var r=t.call(this,e)||this;return r.closingSelector=n,r.subscribing=!1,r.openBuffer(),r}return i(e,t),e.prototype._next=function(t){this.buffer.push(t)},e.prototype._complete=function(){var e=this.buffer;e&&this.destination.next(e),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.buffer=null,this.subscribing=!1},e.prototype.notifyNext=function(t,e,n,r,i){this.openBuffer()},e.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},e.prototype.openBuffer=function(){var t=this.closingSubscription;t&&(this.remove(t),t.unsubscribe());var e=this.buffer;this.buffer&&this.destination.next(e),this.buffer=[];var n=s.tryCatch(this.closingSelector)();n===u.errorObject?this.error(u.errorObject.e):(t=new o.Subscription,this.closingSubscription=t,this.add(t),this.subscribing=!0,t.add(c.subscribeToResult(this,n)),this.subscribing=!1)},e}(a.OuterSubscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(5),s=n(1),u=n(2);e.bufferToggle=function(t,e){return function(n){return n.lift(new a(t,e))}};var a=function(){function t(t,e){this.openings=t,this.closingSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.openings,this.closingSelector))},t}(),c=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.openings=n,i.closingSelector=r,i.contexts=[],i.add(s.subscribeToResult(i,n)),i}return i(e,t),e.prototype._next=function(t){for(var e=this.contexts,n=e.length,r=0;r<n;r++)e[r].buffer.push(t)},e.prototype._error=function(e){for(var n=this.contexts;n.length>0;){var r=n.shift();r.subscription.unsubscribe(),r.buffer=null,r.subscription=null}this.contexts=null,t.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this.contexts;e.length>0;){var n=e.shift();this.destination.next(n.buffer),n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,r,i){t?this.closeBuffer(t):this.openBuffer(e)},e.prototype.notifyComplete=function(t){this.closeBuffer(t.context)},e.prototype.openBuffer=function(t){try{var e=this.closingSelector.call(this,t);e&&this.trySubscribe(e)}catch(t){this._error(t)}},e.prototype.closeBuffer=function(t){var e=this.contexts;if(e&&t){var n=t.buffer,r=t.subscription;this.destination.next(n),e.splice(e.indexOf(t),1),this.remove(r),r.unsubscribe()}},e.prototype.trySubscribe=function(t){var e=this.contexts,n=new o.Subscription,r={buffer:[],subscription:n};e.push(r);var i=s.subscribeToResult(this,t,r);!i||i.closed?this.closeBuffer(r):(i.context=r,this.add(i),n.add(i))},e}(u.OuterSubscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(10),s=n(0),u=n(18);e.bufferTime=function(t){var e=arguments.length,n=o.async;u.isScheduler(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],e--);var r=null;e>=2&&(r=arguments[1]);var i=Number.POSITIVE_INFINITY;return e>=3&&(i=arguments[2]),function(e){return e.lift(new a(t,r,i,n))}};var a=function(){function t(t,e,n,r){this.bufferTimeSpan=t,this.bufferCreationInterval=e,this.maxBufferSize=n,this.scheduler=r}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},t}(),c=function(){return function(){this.buffer=[]}}(),l=function(t){function e(e,n,r,i,o){var s=t.call(this,e)||this;s.bufferTimeSpan=n,s.bufferCreationInterval=r,s.maxBufferSize=i,s.scheduler=o,s.contexts=[];var u=s.openContext();if(s.timespanOnly=null==r||r<0,s.timespanOnly){var a={subscriber:s,context:u,bufferTimeSpan:n};s.add(u.closeAction=o.schedule(h,n,a))}else{var c={subscriber:s,context:u},l={bufferTimeSpan:n,bufferCreationInterval:r,subscriber:s,scheduler:o};s.add(u.closeAction=o.schedule(p,n,c)),s.add(o.schedule(f,r,l))}return s}return i(e,t),e.prototype._next=function(t){for(var e,n=this.contexts,r=n.length,i=0;i<r;i++){var o=n[i],s=o.buffer;s.push(t),s.length==this.maxBufferSize&&(e=o)}e&&this.onBufferFull(e)},e.prototype._error=function(e){this.contexts.length=0,t.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this.contexts,n=this.destination;e.length>0;){var r=e.shift();n.next(r.buffer)}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.contexts=null},e.prototype.onBufferFull=function(t){this.closeContext(t);var e=t.closeAction;if(e.unsubscribe(),this.remove(e),!this.closed&&this.timespanOnly){t=this.openContext();var n=this.bufferTimeSpan,r={subscriber:this,context:t,bufferTimeSpan:n};this.add(t.closeAction=this.scheduler.schedule(h,n,r))}},e.prototype.openContext=function(){var t=new c;return this.contexts.push(t),t},e.prototype.closeContext=function(t){this.destination.next(t.buffer);var e=this.contexts;(e?e.indexOf(t):-1)>=0&&e.splice(e.indexOf(t),1)},e}(s.Subscriber);function h(t){var e=t.subscriber,n=t.context;n&&e.closeContext(n),e.closed||(t.context=e.openContext(),t.context.closeAction=this.schedule(t,t.bufferTimeSpan))}function f(t){var e=t.bufferCreationInterval,n=t.bufferTimeSpan,r=t.subscriber,i=t.scheduler,o=r.openContext();r.closed||(r.add(o.closeAction=i.schedule(p,n,{subscriber:r,context:o})),this.schedule(t,e))}function p(t){var e=t.subscriber,n=t.context;e.closeContext(n)}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0);e.bufferCount=function(t,e){return void 0===e&&(e=null),function(n){return n.lift(new s(t,e))}};var s=function(){function t(t,e){this.bufferSize=t,this.startBufferEvery=e,this.subscriberClass=e&&t!==e?a:u}return t.prototype.call=function(t,e){return e.subscribe(new this.subscriberClass(t,this.bufferSize,this.startBufferEvery))},t}(),u=function(t){function e(e,n){var r=t.call(this,e)||this;return r.bufferSize=n,r.buffer=[],r}return i(e,t),e.prototype._next=function(t){var e=this.buffer;e.push(t),e.length==this.bufferSize&&(this.destination.next(e),this.buffer=[])},e.prototype._complete=function(){var e=this.buffer;e.length>0&&this.destination.next(e),t.prototype._complete.call(this)},e}(o.Subscriber),a=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.bufferSize=n,i.startBufferEvery=r,i.buffers=[],i.count=0,i}return i(e,t),e.prototype._next=function(t){var e=this.bufferSize,n=this.startBufferEvery,r=this.buffers,i=this.count;this.count++,i%n==0&&r.push([]);for(var o=r.length;o--;){var s=r[o];s.push(t),s.length===e&&(r.splice(o,1),this.destination.next(s))}},e.prototype._complete=function(){for(var e=this.buffers,n=this.destination;e.length>0;){var r=e.shift();r.length>0&&n.next(r)}t.prototype._complete.call(this)},e}(o.Subscriber)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),s=n(1);e.buffer=function(t){return function(e){return e.lift(new u(t))}};var u=function(){function t(t){this.closingNotifier=t}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.closingNotifier))},t}(),a=function(t){function e(e,n){var r=t.call(this,e)||this;return r.buffer=[],r.add(s.subscribeToResult(r,n)),r}return i(e,t),e.prototype._next=function(t){this.buffer.push(t)},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.buffer;this.buffer=[],this.destination.next(o)},e}(o.OuterSubscriber)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),i=n(10),o=n(57),s=n(18);function u(t){var e=t.index,n=t.period,r=t.subscriber;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}e.timer=function(t,e,n){void 0===t&&(t=0);var a=-1;return o.isNumeric(e)?a=Number(e)<1?1:Number(e):s.isScheduler(e)&&(n=e),s.isScheduler(n)||(n=i.async),new r.Observable(function(e){var r=o.isNumeric(t)?t:+t-n.now();return n.schedule(u,r,{index:0,period:a,subscriber:e})})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=Date.now?Date.now:function(){return+new Date},t}();e.Scheduler=r},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e,n){return t.call(this)||this}return i(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(n(5).Subscription);e.Action=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(10),i=n(102),o=n(224);e.auditTime=function(t,e){return void 0===e&&(e=r.async),i.audit(function(){return o.timer(t,e)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(60),o=n(101);e.toSubscriber=function(t,e,n){if(t){if(t instanceof r.Subscriber)return t;if(t[i.rxSubscriber])return t[i.rxSubscriber]()}return t||e||n?new r.Subscriber(t,e,n):new r.Subscriber(o.empty)}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e,n,r){var i=t.call(this)||this;return i.parent=e,i.outerValue=n,i.outerIndex=r,i.index=0,i}return i(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(n(0).Subscriber);e.InnerSubscriber=o},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(n){var r=t.call(this,n?n.length+" errors occurred during unsubscription:\n  "+n.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"")||this;return r.errors=n,r.name="UnsubscriptionError",Object.setPrototypeOf(r,e.prototype),r}return i(e,t),e}(Error);e.UnsubscriptionError=o},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=this&&this.__param||function(t,e){return function(n,r){e(n,r,t)}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(14),a=n(15),c=n(28),l=n(44),h=n(64),f=n(112),p=n(30),d=s(n(8)),g=n(111),y=n(27),m=n(26),v=n(38),b=n(6),_=n(67),w=n(103),A=n(69),T=n(46),S=n(17),M=n(37),O=function(){function t(t,e,n,r,i,o){var s=this;this.walletStatePollObservable=t,this.hubStateFetchObservable=e,this.contractStateFetchObservable=n,this.walletStateSyncObserver=r,this.contractApi=i,this.hubApi=o,t.subscribe(function(t){c.combineLatest(n,e).pipe(w.take(1)).subscribe(function(e){var n=e[0],r=e[1];s.syncWalletState(t.wallet,n,r).then(function(t){s.walletStateSyncObserver.next(t)})})})}return t.prototype.syncWalletState=function(t,e,n){var r=this;return t.lock.runExclusive(function(){return r.updateOnChainData(t,e,n).then(function(){return r.updatePendingRegistrationState(t,e,n)}).then(function(){return r.updateRegistrationState(t,e,n)}).then(function(){return r.updateOlderRoundStates(t,e,n)}).then(function(){return r.updatePreviousRoundState(t,e,n)}).then(function(){return new Promise(function(i,o){return r.updateCurrentRoundState(t,e,n).then(function(){return e.isPunished?o(_.WalletUpdateError.PROVIDER_PUNISHED):i(new f.WalletState(t,g.WalletSyncState.SYNCHRONIZED,null,e,n))}).catch(o)})}).catch(function(r){return S.Logging.debug(r),new f.WalletState(t,g.WalletSyncState.UNSAFE,r,e,n)})})},t.prototype.updateOnChainData=function(t,e,n){return S.Logging.debug("updateOnChainData"),new Promise(function(n,r){return t?e?e.networkId!=t.networkId?r(_.WalletUpdateError.INCORRECT_NETWORK_ID):(t.onChainBalance=e.onChainBalance,n()):r(_.WalletUpdateError.NO_CONTRACT_STATE_SPECIFIED):r(_.WalletUpdateError.NO_WALLET_SPECIFIED)})},t.prototype.updatePendingRegistrationState=function(t,e,n){var r=this;S.Logging.debug("updatePendingRegistrationState");var i,o=n?n.walletData:null;return new Promise(function(n,s){if(!t)return s(_.WalletUpdateError.NO_WALLET_SPECIFIED);if(t.isRegistered)return n();if(!e)return s(_.WalletUpdateError.NO_CONTRACT_STATE_SPECIFIED);if(!(o&&o.registration&&o.registration.wallet_signature&&o.registration.round))return t.unmarkPendingRegistrationApproval(),s(_.WalletUpdateError.UNREGISTERED_NO_REQUEST);if(o.registration.round>e.currentRound)return t.unmarkPendingRegistrationApproval(),s(_.WalletUpdateError.UNREGISTERED_BAD_REQUEST);i=t.getAdmissionAggregate(o.registration.round);var u=y.Signature.fromRSV(t.address,i.hash,o.registration.wallet_signature);r.contractApi.validateAggregateSignature(i,u,t.contractAddress).then(function(e){return e?(t.markPendingRegistrationApproval(o.registration.round),n()):s(_.WalletUpdateError.UNREGISTERED_BAD_REQUEST)}).catch(s)})},t.prototype.updateRegistrationState=function(t,e,n){var r=this;S.Logging.debug("updateRegistrationState");var i,o=n?n.walletData:null;return new Promise(function(n,s){if(!t)return s(_.WalletUpdateError.NO_WALLET_SPECIFIED);if(t.isRegistered)return n();if(!t.isPendingRegistrationApproval)return s(_.WalletUpdateError.UNREGISTERED_APPROVAL_NOT_PENDING);if(!e)return s(_.WalletUpdateError.NO_CONTRACT_STATE_SPECIFIED);if(!o||!o.registration||!o.registration.hub_signature)return s(_.WalletUpdateError.UNREGISTERED_APPROVAL_NOT_PROVIDED);i=t.getAdmissionAggregate(t.registrationRound,o.registration.trail_identifier);var u=y.Signature.fromRSV(t.contractOwnerAddress,i.hash,o.registration.hub_signature);r.contractApi.validateAggregateSignature(i,u,t.contractAddress).then(function(e){return e?(t.markRegistered(u,o.registration.trail_identifier),n()):s(_.WalletUpdateError.UNREGISTERED_APPROVAL_INVALID)}).catch(s)})},t.prototype.updateOlderRoundStates=function(t,e,n){var r=this;return S.Logging.debug("updateOlderRoundStates"),new Promise(function(i,o){return t?t.isRegistered?e?t.latestRound.roundNumber>=e.currentRound-1?i():r.updateLatestLocalRoundProofStake(t,e,n).then(function(){return r.updateLatestRoundAggregate(t,e,n)}).then(function(){return r.updateLatestRoundDeposits(t,e,n)}).then(function(){return r.updateLatestRoundOnChainWithdrawal(t,e,n)}).then(function(){return r.updateLatestRoundDeliveryReceipts(t,e,n)}).then(function(){return r.progressRound(t,e,n)}).then(function(){return r.updateOlderRoundStates(t,e,n)}).then(i).catch(o):o(_.WalletUpdateError.NO_CONTRACT_STATE_SPECIFIED):o(_.WalletUpdateError.UNREGISTERED):o(_.WalletUpdateError.NO_WALLET_SPECIFIED)})},t.prototype.updatePreviousRoundState=function(t,e,n){var r=this;return S.Logging.debug("updatePreviousRoundState"),new Promise(function(i,o){return t?t.isRegistered?e?t.latestRound.roundNumber<e.currentRound-1?o(_.WalletUpdateError.LOGIC_OLD_ROUNDS_NOT_UPDATED):t.latestRound.roundNumber==e.currentRound?i():r.updateLatestLocalRoundProofStake(t,e,n).then(function(){return r.updateLatestRoundAggregate(t,e,n)}).then(function(){return r.updateLatestRoundDeposits(t,e,n)}).then(function(){return r.updateLatestRoundOnChainWithdrawal(t,e,n)}).then(function(){return r.updateLatestRoundDeliveryReceipts(t,e,n)}).then(function(){return r.progressRound(t,e,n)}).then(i).catch(o):o(_.WalletUpdateError.NO_CONTRACT_STATE_SPECIFIED):o(_.WalletUpdateError.UNREGISTERED):o(_.WalletUpdateError.NO_WALLET_SPECIFIED)})},t.prototype.updateCurrentRoundState=function(t,e,n){var r=this;return S.Logging.debug("updateCurrentRoundState"),new Promise(function(i,o){return t?t.isRegistered?e?t.latestRound.roundNumber<e.currentRound?o(_.WalletUpdateError.LOGIC_PREVIOUS_ROUND_NOT_UPDATED):r.updateCurrentRoundOnChainDeposits(t,e,n).then(function(){return r.updateLatestLocalRoundProofStake(t,e,n)}).then(function(){return r.updateLatestRoundAggregate(t,e,n)}).then(function(){return r.updateLatestRoundDeposits(t,e,n)}).then(function(){return r.updateLatestRoundOnChainWithdrawal(t,e,n)}).then(function(){return r.updateLatestRoundDeliveryReceipts(t,e,n)}).then(i).catch(o):o(_.WalletUpdateError.NO_CONTRACT_STATE_SPECIFIED):o(_.WalletUpdateError.UNREGISTERED):o(_.WalletUpdateError.NO_WALLET_SPECIFIED)})},t.prototype.updateLatestLocalRoundProofStake=function(t,e,n){var r=this;S.Logging.debug("updateLatestLocalRoundProofStake");var i=n?n.walletData:null;return new Promise(function(n,o){if(!t)return o(_.WalletUpdateError.NO_WALLET_SPECIFIED);if(!t.isRegistered)return o(_.WalletUpdateError.UNREGISTERED);if(!e)return o(_.WalletUpdateError.NO_CONTRACT_STATE_SPECIFIED);var s=t.latestRound;if(!s)return o(_.WalletUpdateError.LOCAL_DATA_MISSING_LATEST_ROUND);if(s.proofOfStake||s.roundNumber==t.registrationRound)return n();if(s.roundNumber==e.currentRound&&!e.isCheckpointSubmitted)return e.currentSubBlock>e.extendedSlackPeriod?o(_.WalletUpdateError.REMOTE_DATA_MISSING_MERKLE_PROOF):n();var u=t.getRound(s.roundNumber-1);if(!u)return o(_.WalletUpdateError.LOCAL_DATA_MISSING_PREVIOUS_ROUND);if(!i||!i.merkle_proofs||!i.merkle_proofs.length)return o(_.WalletUpdateError.REMOTE_DATA_NO_MERKLE_PROOFS);var a=i.merkle_proofs.find(function(t){return t.round_number==s.roundNumber});if(!a)return o(_.WalletUpdateError.REMOTE_DATA_MISSING_MERKLE_PROOF);if(a.trail!=t.trailIdentifier)return o(_.WalletUpdateError.PROOF_OF_STAKE_INVALID_TRAIL);var c=new v.ProofOfStake(t.contractAddress,t.tokenAddress,t.address,a.paint,a.trail,a.round_number,a.allotment_chain,a.membership_chain,a.values.map(function(t){return new d.default(t)}),new d.default(a.left),new d.default(a.right));return s.proposedProofOfStake=c,c.amount.isLessThan(u.expectedBalance)?o(_.WalletUpdateError.PROOF_OF_STAKE_INSUFFICIENT_BALANCE):s.roundNumber<=e.currentRound-e.roundsKept+1?(s.setProofOfStake(c),n()):void r.contractApi.verifyProof(s,c).then(function(t){if(!t)return o(_.WalletUpdateError.PROOF_OF_STAKE_INVALID);if(u.aggregate.transferTree.isEmpty){if(!b.isSameHexValue(c.paint,b.EMPTY_HASH)&&!b.isSameHexValue(c.paint,u.aggregate.hash))return S.Logging.error(c.paint),S.Logging.error("not empty"),o(_.WalletUpdateError.PROOF_OF_STAKE_UNEXPECTED_PAINT)}else if(!b.isSameHexValue(c.paint,u.aggregate.hash))return S.Logging.error(c.paint),S.Logging.error(u.aggregate.hash),S.Logging.log(u.aggregate),o(_.WalletUpdateError.PROOF_OF_STAKE_UNEXPECTED_PAINT);return s.setProofOfStake(c),n()}).catch(o)})},t.prototype.updateLatestRoundAggregate=function(t,e,n){var r=this;S.Logging.debug("updateLatestRoundAggregate");var i=n?n.walletData:null;return new Promise(function(o,s){if(!t)return s(_.WalletUpdateError.NO_WALLET_SPECIFIED);if(!t.isRegistered)return s(_.WalletUpdateError.UNREGISTERED);if(!i||!i.transfers)return o();var u=t.latestRound;if(!u)return s(_.WalletUpdateError.LOCAL_DATA_MISSING_LATEST_ROUND);var a=i.transfers.filter(function(t){return t.round==u.roundNumber}).sort(function(t,e){return t.id-e.id});return r.updateLatestRoundAggregateTransactions(t,a,0,e,n).then(o).catch(s)})},t.prototype.updateLatestRoundAggregateTransactions=function(t,e,n,r,i){var o=this;return S.Logging.debug("updateLatestRoundAggregateTransactions"),new Promise(function(s,u){if(!t)return u(_.WalletUpdateError.NO_WALLET_SPECIFIED);if(!t.isRegistered)return u(_.WalletUpdateError.UNREGISTERED);if(!e||n>=e.length)return s();var a=function(s,u){return o.updateLatestRoundAggregateTransactions(t,e,n+1,r,i).then(s).catch(u)},c=e[n];return(b.isSameHexValue(c.wallet.address,c.recipient.address)&&!b.isSameHexValue(c.wallet.token,c.recipient.token)?o.updateLatestRoundAggregateSwaps(t,c,r,i,a):o.updateLatestRoundAggregateTransfers(t,c,r,i,a)).then(s).catch(u)})},t.prototype.updateLatestRoundAggregateTransfers=function(t,e,n,r,i){var o=this;return S.Logging.debug("updateLatestRoundAggregateTransfers"),new Promise(function(n,r){var s=b.isSameHexValue(e.wallet.address,t.address)&&b.isSameHexValue(e.wallet.token,t.tokenAddress),u=t.latestRound,a=u.aggregate.latestTransfer,c=function(n,r){return o.contractApi.validateTransferDebit(e,t.contractOwnerAddress,t.contractAddress,t.tokenAddress).then(function(a){if(!a)return r(_.WalletUpdateError.AGGREGATE_TRANSFER_DEBIT_HUB_SIGNATURE_INVALID);var c=m.Aggregate.checksum(t.contractAddress,t.tokenAddress,e.wallet.address,e.wallet_trail_identifier,e.round,e.sender_aggregate.tx_set_hash,new d.default(e.sender_aggregate.updated_spendings),new d.default(e.sender_aggregate.updated_gains)),l=y.Signature.fromRSV(t.contractOwnerAddress,c,e.sender_aggregate.hub_signature);return u.aggregate.latestTransfer.confirmations.set(M.TransferAggregateType.DEBIT,l),o.contractApi.validateTransferCredit(e,t.contractOwnerAddress,t.contractAddress,t.tokenAddress).then(function(o){if(!o)return r(_.WalletUpdateError.AGGREGATE_TRANSFER_CREDIT_HUB_SIGNATURE_INVALID);var a=m.Aggregate.checksum(t.contractAddress,t.tokenAddress,e.recipient.address,e.recipient_trail_identifier,e.round,e.recipient_aggregate.tx_set_hash,new d.default(e.recipient_aggregate.updated_spendings),new d.default(e.recipient_aggregate.updated_gains)),c=y.Signature.fromRSV(t.contractOwnerAddress,a,e.recipient_aggregate.hub_signature);if(u.aggregate.latestTransfer.confirmations.set(M.TransferAggregateType.CREDIT,c),s){if(!u.aggregate.confirmPendingOutgoingTransfer())return r(_.WalletUpdateError.LOGIC_TRANSFER_CONFIRM_ERROR_OUTGOING)}else if(!u.aggregate.confirmPendingIncomingTransfer())return r(_.WalletUpdateError.LOGIC_TRANSFER_CONFIRM_ERROR_INCOMING);return i(n,r)})})};if(a&&e.id<a.txId)return i(n,r);if(a&&e.id==a.txId){if(u.removePendingIncomingTransfer(e),!u.aggregate.isTransferPending)return i(n,r);if(e.processed&&e.voided)return u.addCancelledTransfer(e),u.aggregate.cancelPendingTransfer(),i(n,r);if(s){if(!b.isSameHexValue(u.aggregate.transferTree.hash,e.sender_aggregate.tx_set_hash))return r(_.WalletUpdateError.AGGREGATE_TX_SET_ROOT_INVALID_OUTGOING)}else if(e.recipient_aggregate&&!b.isSameHexValue(u.aggregate.transferTree.hash,e.recipient_aggregate.tx_set_hash))return r(_.WalletUpdateError.AGGREGATE_TX_SET_ROOT_INVALID_INCOMING);return o.contractApi.validateTransferDebit(e,e.wallet.address,t.contractAddress,t.tokenAddress).then(function(s){return s?e.recipient_aggregate?(a.authorizations.get(M.TransferAggregateType.DEBIT)||a.authorizations.set(M.TransferAggregateType.DEBIT,e.sender_aggregate),o.contractApi.validateTransferCredit(e,e.recipient.address,t.contractAddress,t.tokenAddress).then(function(t){return t?(a.authorizations.get(M.TransferAggregateType.CREDIT)||a.authorizations.set(M.TransferAggregateType.CREDIT,e.recipient_aggregate),e.processed?c(n,r):i(n,r)):r(_.WalletUpdateError.AGGREGATE_TRANSFER_CREDIT_WALLET_SIGNATURE_INVALID)})):i(n,r):r(_.WalletUpdateError.AGGREGATE_TRANSFER_DEBIT_WALLET_SIGNATURE_INVALID)})}if(e.processed&&e.voided)return u.removePendingIncomingTransfer(e),u.addCancelledTransfer(e),i(n,r);var l=m.Aggregate.fromJSON(u.aggregate.json);l.isTransferPending&&l.cancelPendingTransfer();s?l.createOutgoingTransfer(e.recipient.address,e.recipient_trail_identifier,new d.default(e.amount),new d.default(e.nonce)):l.createIncomingTransfer(e.wallet.address,new d.default(e.amount),new d.default(e.nonce),e.id);if(s){if(u.aggregate.isTransferPending)return r(_.WalletUpdateError.LOGIC_AGGREGATION_FORK);if(!b.isSameHexValue(l.transferTree.hash,e.sender_aggregate.tx_set_hash))return r(_.WalletUpdateError.AGGREGATE_TX_SET_ROOT_INVALID_OUTGOING)}else if(e.recipient_aggregate){if(u.aggregate.isTransferPending)return r(_.WalletUpdateError.LOGIC_AGGREGATION_FORK);if(!b.isSameHexValue(l.transferTree.hash,e.recipient_aggregate.tx_set_hash))return r(_.WalletUpdateError.AGGREGATE_TX_SET_ROOT_INVALID_INCOMING)}return o.contractApi.validateTransferDebit(e,e.wallet.address,t.contractAddress,t.tokenAddress).then(function(a){return a?(s?u.aggregate.createOutgoingTransfer(e.recipient.address,e.recipient_trail_identifier,new d.default(e.amount),new d.default(e.nonce),e.id).authorizations.set(M.TransferAggregateType.DEBIT,e.sender_aggregate):u.addPendingIncomingTransfer(e),e.recipient_aggregate?o.contractApi.validateTransferCredit(e,e.recipient.address,t.contractAddress,t.tokenAddress).then(function(t){return t?(s||(u.aggregate.createIncomingTransfer(e.wallet.address,new d.default(e.amount),new d.default(e.nonce),e.id).authorizations.set(M.TransferAggregateType.DEBIT,e.sender_aggregate),u.removePendingIncomingTransfer(e)),u.aggregate.latestTransfer.authorizations.set(M.TransferAggregateType.CREDIT,e.recipient_aggregate),e.processed?c(n,r):i(n,r)):r(_.WalletUpdateError.AGGREGATE_TRANSFER_CREDIT_WALLET_SIGNATURE_INVALID)}):i(n,r)):r(_.WalletUpdateError.AGGREGATE_TRANSFER_DEBIT_WALLET_SIGNATURE_INVALID)})})},t.prototype.updateLatestRoundAggregateSwaps=function(t,e,n,r,i){var o=this;return S.Logging.debug("updateLatestRoundAggregateSwaps"),new Promise(function(n,r){var s=b.isSameHexValue(e.wallet.address,t.address)&&b.isSameHexValue(e.wallet.token,t.tokenAddress),u=t.latestRound,a=u.aggregate.latestTransfer;if(!(b.isSameHexValue(e.wallet.address,e.recipient.address)&&!b.isSameHexValue(e.wallet.token,e.recipient.token)))return r(_.WalletUpdateError.LOGIC_AGGREGATION_FORK);var c=function(){if(S.Logging.debug("processSwapFinalization"),!e.matched_amounts||!e.recipient_finalization_aggregate)return i(n,r);if(s){if(u.aggregate.latestTransfer.authorizations.set(M.TransferAggregateType.FINALIZATION,e.recipient_finalization_aggregate),!e.recipient_finalization_aggregate.hub_signature)return i(n,r);var a=m.Aggregate.checksum(t.contractAddress,e.recipient.token,e.recipient.address,e.recipient_trail_identifier,e.round,e.recipient_finalization_aggregate.tx_set_hash,new d.default(e.recipient_finalization_aggregate.updated_spendings),new d.default(e.recipient_finalization_aggregate.updated_gains)),c=y.Signature.fromRSV(t.contractOwnerAddress,a,e.recipient_finalization_aggregate.hub_signature);return u.aggregate.latestTransfer.confirmations.set(M.TransferAggregateType.FINALIZATION,c),u.aggregate.latestTransfer.amountsMatched=e.matched_amounts,u.aggregate.finalizePendingSwap()?i(n,r):new Promise(function(){return r(_.WalletUpdateError.SWAP_FINALIZATION_FAILURE)})}return o.contractApi.validateDataAggregate(e,e.recipient_finalization_aggregate,e.recipient,t.address,t.contractAddress,t.tokenAddress,T.Transfer.FULFILLED_SWAP_MARKER).then(function(s){return s?(u.aggregate.latestTransfer.authorizations.set(M.TransferAggregateType.FINALIZATION,e.recipient_finalization_aggregate),e.recipient_finalization_aggregate.hub_signature?o.contractApi.validateDataAggregate(e,e.recipient_finalization_aggregate,e.recipient,t.contractOwnerAddress,t.contractAddress,t.tokenAddress,T.Transfer.FULFILLED_SWAP_MARKER).then(function(o){if(!o)return r(_.WalletUpdateError.AGGREGATE_FINALIZATION_HUB_SIGNATURE_INVALID);var s=m.Aggregate.checksum(t.contractAddress,t.tokenAddress,t.address,t.trailIdentifier,e.round,e.recipient_finalization_aggregate.tx_set_hash,new d.default(e.recipient_finalization_aggregate.updated_spendings),new d.default(e.recipient_finalization_aggregate.updated_gains)),a=y.Signature.fromRSV(t.contractOwnerAddress,s,e.recipient_finalization_aggregate.hub_signature);return u.aggregate.latestTransfer.confirmations.set(M.TransferAggregateType.FINALIZATION,a),u.aggregate.latestTransfer.amountsMatched=e.matched_amounts,u.aggregate.finalizePendingSwap()?i(n,r):new Promise(function(){return r(_.WalletUpdateError.SWAP_FINALIZATION_FAILURE)})}):i(n,r)):r(_.WalletUpdateError.AGGREGATE_FINALIZATION_WALLET_SIGNATURE_INVALID)})},l=function(){if(S.Logging.debug("processSwapFreezing"),e.complete||!e.cancelled)return c();if(!e.swap_freezing_signature)return i(n,r);var a=u.aggregate.latestTransfer;e.matched_amounts&&(a.amountsMatched=e.matched_amounts);var l=y.Signature.fromRSV(t.address,a.cancellationHash,e.swap_freezing_signature);o.contractApi.validateSignature(l,t.contractAddress).then(function(c){return c?(a.confirmations.set(M.TransferAggregateType.FREEZING,l),e.sender_cancellation_aggregate&&e.recipient_cancellation_aggregate?void(s?o.contractApi.validateDataAggregate(e,e.sender_cancellation_aggregate,e.wallet,e.wallet.address,t.contractAddress,t.tokenAddress,t.getRoundSwapStartingBalance(u.roundNumber)).then(function(s){return s?(a.authorizations.set(M.TransferAggregateType.SENDER_CANCELLATION,e.sender_cancellation_aggregate),e.sender_cancellation_aggregate.hub_signature&&e.recipient_cancellation_aggregate.hub_signature?o.contractApi.validateDataAggregate(e,e.sender_cancellation_aggregate,e.wallet,t.contractOwnerAddress,t.contractAddress,t.tokenAddress,t.getRoundSwapStartingBalance(u.roundNumber)).then(function(o){if(!o)return r(_.WalletUpdateError.AGGREGATE_SENDER_CANCELLATION_HUB_SIGNATURE_INVALID);a.authorizations.set(M.TransferAggregateType.RECIPIENT_CANCELLATION,e.recipient_cancellation_aggregate);var s=m.Aggregate.checksum(t.contractAddress,t.tokenAddress,t.address,t.trailIdentifier,e.round,e.sender_cancellation_aggregate.tx_set_hash,new d.default(e.sender_cancellation_aggregate.updated_spendings),new d.default(e.sender_cancellation_aggregate.updated_gains)),c=y.Signature.fromRSV(t.contractOwnerAddress,s,e.sender_cancellation_aggregate.hub_signature);a.confirmations.set(M.TransferAggregateType.SENDER_CANCELLATION,c);var l=m.Aggregate.checksum(t.contractAddress,e.recipient.token,e.recipient.address,e.recipient_trail_identifier,e.round,e.recipient_cancellation_aggregate.tx_set_hash,new d.default(e.recipient_cancellation_aggregate.updated_spendings),new d.default(e.recipient_cancellation_aggregate.updated_gains)),h=y.Signature.fromRSV(t.contractOwnerAddress,l,e.recipient_cancellation_aggregate.hub_signature);return a.confirmations.set(M.TransferAggregateType.RECIPIENT_CANCELLATION,h),u.aggregate.cancelPendingSwap()?i(n,r):r(_.WalletUpdateError.SWAP_CANCELLATION_FAILURE)}):i(n,r)):r(_.WalletUpdateError.AGGREGATE_SENDER_CANCELLATION_WALLET_SIGNATURE_INVALID)}):o.contractApi.validateDataAggregate(e,e.recipient_cancellation_aggregate,e.recipient,e.recipient.address,t.contractAddress,t.tokenAddress,T.Transfer.FULFILLED_SWAP_MARKER).then(function(s){return s?(a.authorizations.set(M.TransferAggregateType.RECIPIENT_CANCELLATION,e.recipient_cancellation_aggregate),e.sender_cancellation_aggregate.hub_signature&&e.recipient_cancellation_aggregate.hub_signature?o.contractApi.validateDataAggregate(e,e.recipient_cancellation_aggregate,e.recipient,t.contractOwnerAddress,t.contractAddress,t.tokenAddress,T.Transfer.FULFILLED_SWAP_MARKER).then(function(o){if(!o)return r(_.WalletUpdateError.AGGREGATE_RECIPIENT_CANCELLATION_HUB_SIGNATURE_INVALID);a.authorizations.set(M.TransferAggregateType.SENDER_CANCELLATION,e.sender_cancellation_aggregate);var s=m.Aggregate.checksum(t.contractAddress,e.wallet.token,e.wallet.address,e.wallet_trail_identifier,e.round,e.sender_cancellation_aggregate.tx_set_hash,new d.default(e.sender_cancellation_aggregate.updated_spendings),new d.default(e.sender_cancellation_aggregate.updated_gains)),c=y.Signature.fromRSV(t.contractOwnerAddress,s,e.sender_cancellation_aggregate.hub_signature);a.confirmations.set(M.TransferAggregateType.SENDER_CANCELLATION,c);var l=m.Aggregate.checksum(t.contractAddress,t.tokenAddress,t.address,t.trailIdentifier,e.round,e.recipient_cancellation_aggregate.tx_set_hash,new d.default(e.recipient_cancellation_aggregate.updated_spendings),new d.default(e.recipient_cancellation_aggregate.updated_gains)),h=y.Signature.fromRSV(t.contractOwnerAddress,l,e.recipient_cancellation_aggregate.hub_signature);return a.confirmations.set(M.TransferAggregateType.RECIPIENT_CANCELLATION,h),u.aggregate.cancelPendingSwap()?i(n,r):r(_.WalletUpdateError.SWAP_CANCELLATION_FAILURE)}):i(n,r)):r(_.WalletUpdateError.AGGREGATE_RECIPIENT_CANCELLATION_WALLET_SIGNATURE_INVALID)})):i(n,r)):r(_.WalletUpdateError.INVALID_WALLET_FREEZE_REQUEST_SIGNATURE)})},h=function(){if(S.Logging.debug("processSwapFulfillment"),e.matched_amounts&&(u.aggregate.latestTransfer.amountsMatched=e.matched_amounts),!e.complete)return l();if(!e.recipient_fulfillment_aggregate||!e.recipient_fulfillment_aggregate.hub_signature)return new Promise(function(){return r(_.WalletUpdateError.AGGREGATE_FULFILLMENT_HUB_SIGNATURE_MISSING)});if(s){var n=m.Aggregate.checksum(t.contractAddress,e.recipient.token,e.recipient.address,e.recipient_trail_identifier,e.round,e.recipient_fulfillment_aggregate.tx_set_hash,new d.default(e.recipient_fulfillment_aggregate.updated_spendings),new d.default(e.recipient_fulfillment_aggregate.updated_gains)),i=y.Signature.fromRSV(t.contractOwnerAddress,n,e.recipient_fulfillment_aggregate.hub_signature);return u.aggregate.latestTransfer.confirmations.set(M.TransferAggregateType.FULFILLMENT,i),u.aggregate.fulfillPendingSwap()?c():new Promise(function(){return r(_.WalletUpdateError.SWAP_FULFILLMENT_FAILURE)})}return o.contractApi.validateDataAggregate(e,e.recipient_fulfillment_aggregate,e.recipient,t.contractOwnerAddress,t.contractAddress,t.tokenAddress,T.Transfer.FULFILLED_SWAP_MARKER).then(function(n){if(!n)return r(_.WalletUpdateError.AGGREGATE_FULFILLMENT_HUB_SIGNATURE_INVALID);var i=m.Aggregate.checksum(t.contractAddress,t.tokenAddress,t.address,t.trailIdentifier,e.round,e.recipient_fulfillment_aggregate.tx_set_hash,new d.default(e.recipient_fulfillment_aggregate.updated_spendings),new d.default(e.recipient_fulfillment_aggregate.updated_gains)),o=y.Signature.fromRSV(t.contractOwnerAddress,i,e.recipient_fulfillment_aggregate.hub_signature);return u.aggregate.latestTransfer.confirmations.set(M.TransferAggregateType.FULFILLMENT,o),u.aggregate.fulfillPendingSwap()?c():r(_.WalletUpdateError.SWAP_FULFILLMENT_FAILURE)})},f=function(){if(S.Logging.debug("processSwapActivation"),!e.sender_aggregate.hub_signature||!e.recipient_aggregate.hub_signature)return l();var n=m.Aggregate.checksum(t.contractAddress,e.wallet.token,e.wallet.address,e.wallet_trail_identifier,e.round,e.sender_aggregate.tx_set_hash,new d.default(e.sender_aggregate.updated_spendings),new d.default(e.sender_aggregate.updated_gains)),i=y.Signature.fromRSV(t.contractOwnerAddress,n,e.sender_aggregate.hub_signature),a=m.Aggregate.checksum(t.contractAddress,e.recipient.token,e.recipient.address,e.recipient_trail_identifier,e.round,e.recipient_aggregate.tx_set_hash,new d.default(e.recipient_aggregate.updated_spendings),new d.default(e.recipient_aggregate.updated_gains)),c=y.Signature.fromRSV(t.contractOwnerAddress,a,e.recipient_aggregate.hub_signature);return s?o.contractApi.validateDataAggregate(e,e.sender_aggregate,e.wallet,t.contractOwnerAddress,t.contractAddress,e.wallet.token,t.getRoundSwapStartingBalance(u.roundNumber)).then(function(t){return t?(u.aggregate.latestTransfer.confirmations.set(M.TransferAggregateType.DEBIT,i),u.aggregate.latestTransfer.confirmations.set(M.TransferAggregateType.CREDIT,c),h()):r(_.WalletUpdateError.AGGREGATE_SWAP_DEBIT_HUB_SIGNATURE_INVALID)}):o.contractApi.validateDataAggregate(e,e.recipient_aggregate,e.recipient,t.contractOwnerAddress,t.contractAddress,e.recipient.token,t.getRoundSwapStartingBalance(u.roundNumber)).then(function(t){return t?(u.aggregate.latestTransfer.confirmations.set(M.TransferAggregateType.DEBIT,i),u.aggregate.latestTransfer.confirmations.set(M.TransferAggregateType.CREDIT,c),h()):r(_.WalletUpdateError.AGGREGATE_SWAP_CREDIT_HUB_SIGNATURE_INVALID)})},p=function(a){return S.Logging.debug("processSwapEnrollment"),e.processed&&e.voided?(u.removePendingIncomingTransfer(e),u.addCancelledTransfer(e),i(n,r)):s?o.contractApi.validateDataAggregate(e,e.sender_aggregate,e.wallet,e.wallet.address,t.contractAddress,e.wallet.token,t.getRoundSwapStartingBalance(u.roundNumber)).then(function(n){if(!n)return r(_.WalletUpdateError.AGGREGATE_SWAP_DEBIT_WALLET_SIGNATURE_INVALID);a&&u.aggregate.createOutgoingSwap(e.recipient.address,e.recipient.token,e.recipient_trail_identifier,new d.default(e.amount),new d.default(e.amount_swapped),t.getRoundSwapStartingBalance(u.roundNumber),new d.default(e.nonce),e.id);var i=u.aggregate.latestTransfer;return i.authorizations.get(M.TransferAggregateType.DEBIT)||i.authorizations.set(M.TransferAggregateType.DEBIT,e.sender_aggregate),i.authorizations.get(M.TransferAggregateType.CREDIT)||i.authorizations.set(M.TransferAggregateType.CREDIT,e.recipient_aggregate),i.authorizations.get(M.TransferAggregateType.FULFILLMENT)||i.authorizations.set(M.TransferAggregateType.FULFILLMENT,e.recipient_fulfillment_aggregate),f()}):o.contractApi.validateDataAggregate(e,e.recipient_aggregate,e.recipient,e.recipient.address,t.contractAddress,e.recipient.token,t.getRoundSwapStartingBalance(u.roundNumber)).then(function(n){return n?o.contractApi.validateDataAggregate(e,e.recipient_fulfillment_aggregate,e.recipient,t.address,t.contractAddress,t.tokenAddress,T.Transfer.FULFILLED_SWAP_MARKER).then(function(n){if(!n)return r(_.WalletUpdateError.AGGREGATE_FULFILLMENT_WALLET_SIGNATURE_INVALID);if(a)u.aggregate.createIncomingSwap(e.wallet.address,e.wallet.token,new d.default(e.amount),new d.default(e.amount_swapped),t.getRoundSwapStartingBalance(u.roundNumber),new d.default(e.nonce),e.id);var i=u.aggregate.latestTransfer;return i.authorizations.get(M.TransferAggregateType.DEBIT)||i.authorizations.set(M.TransferAggregateType.DEBIT,e.sender_aggregate),i.authorizations.get(M.TransferAggregateType.CREDIT)||i.authorizations.set(M.TransferAggregateType.CREDIT,e.recipient_aggregate),i.authorizations.get(M.TransferAggregateType.FULFILLMENT)||i.authorizations.set(M.TransferAggregateType.FULFILLMENT,e.recipient_fulfillment_aggregate),f()}):r(_.WalletUpdateError.AGGREGATE_SWAP_CREDIT_WALLET_SIGNATURE_INVALID)})};if(a&&e.id<a.txId)return i(n,r);if(a&&e.id==a.txId)return u.aggregate.isTransferPending?a.isSwapFinalized?r(_.WalletUpdateError.LOGIC_AGGREGATION_FORK):a.isSwapFulfilled?c():a.isSwapActive?h():s&&!b.isSameHexValue(u.aggregate.transferTree.hash,e.sender_aggregate.tx_set_hash)?r(_.WalletUpdateError.AGGREGATE_TX_SET_ROOT_INVALID_OUTGOING):s||b.isSameHexValue(u.aggregate.transferTree.hash,e.recipient_aggregate.tx_set_hash)?p(!1):r(_.WalletUpdateError.AGGREGATE_TX_SET_ROOT_INVALID_INCOMING):i(n,r);if(e.processed&&e.voided)return u.removePendingIncomingTransfer(e),u.addCancelledTransfer(e),i(n,r);if(u.aggregate.isTransferPending)return r(_.WalletUpdateError.LOGIC_AGGREGATION_FORK);var g=m.Aggregate.fromJSON(u.aggregate.json);return g.isTransferPending&&g.cancelPendingTransfer(),s?g.createOutgoingSwap(e.recipient.address,e.recipient.token,e.recipient_trail_identifier,new d.default(e.amount),new d.default(e.amount_swapped),t.getRoundSwapStartingBalance(u.roundNumber),new d.default(e.nonce),e.id):g.createIncomingSwap(e.wallet.address,e.wallet.token,new d.default(e.amount),new d.default(e.amount_swapped),t.getRoundSwapStartingBalance(u.roundNumber),new d.default(e.nonce),e.id),s&&!b.isSameHexValue(g.transferTree.hash,e.sender_aggregate.tx_set_hash)?r(_.WalletUpdateError.AGGREGATE_TX_SET_ROOT_INVALID_OUTGOING):s||b.isSameHexValue(g.transferTree.hash,e.recipient_aggregate.tx_set_hash)?p(!0):r(_.WalletUpdateError.AGGREGATE_TX_SET_ROOT_INVALID_INCOMING)})},t.prototype.updateLatestRoundWithdrawalRequests=function(t,e,n){S.Logging.debug("updateLatestRoundWithdrawalRequests");var r=n?n.walletData:null;return new Promise(function(e,n){if(!t)return n(_.WalletUpdateError.NO_WALLET_SPECIFIED);if(!t.isRegistered)return n(_.WalletUpdateError.UNREGISTERED);if(!(r&&r.withdrawal_requests&&r.withdrawal_requests.length))return e();if(!t.latestRound)return n(_.WalletUpdateError.LOCAL_DATA_MISSING_LATEST_ROUND);t.latestRound;try{return e()}catch(t){return n(t)}})},t.prototype.updateLatestRoundOnChainWithdrawal=function(t,e,n){return S.Logging.debug("updateLatestRoundOnChainWithdrawal"),new Promise(function(n,r){if(!t)return r(_.WalletUpdateError.NO_WALLET_SPECIFIED);if(!t.isRegistered)return r(_.WalletUpdateError.UNREGISTERED);if(!e)return r(_.WalletUpdateError.NO_CONTRACT_STATE_SPECIFIED);if(!t.latestRound)return r(_.WalletUpdateError.LOCAL_DATA_MISSING_LATEST_ROUND);if(!e.isWithdrawalPending)return t.latestRound.isWithdrawalPending&&t.latestRound.confirmWithdrawal(),n();if(e.pendingWithdrawalRound>t.latestRound.roundNumber)return n();t.latestRound.setWithdrawalPending(e.pendingWithdrawalAmount,e.pendingWithdrawalRound);var i=t.latestRound.roundNumber-e.pendingWithdrawalRound,o=e.currentRound>t.latestRound.roundNumber?e.extendedSlackPeriod+1:e.currentSubBlock;return(i>2||2==i&&o>e.extendedSlackPeriod)&&t.latestRound.markWithdrawalReady(),n()})},t.prototype.updateLatestRoundDeposits=function(t,e,n){S.Logging.debug("updateLatestRoundDeposits");var r=n?n.walletData:null;return new Promise(function(e,n){if(!t)return n(_.WalletUpdateError.NO_WALLET_SPECIFIED);if(!t.isRegistered)return n(_.WalletUpdateError.UNREGISTERED);if(!r||!r.deposits||!r.deposits.length)return e();var i=t.latestRound;if(!i)return n(_.WalletUpdateError.LOCAL_DATA_MISSING_LATEST_ROUND);try{return r.deposits.filter(function(t){return t.round==i.roundNumber}).map(function(t){return new A.Deposit(t.txid,t.block,t.round,new d.default(t.amount))}).map(function(t){return i.addDeposit(t)}),e()}catch(t){return n(t)}})},t.prototype.updateCurrentRoundOnChainDeposits=function(t,e,n){return S.Logging.debug("updateCurrentRoundOnChainDeposits"),new Promise(function(n,r){if(!t)return r(_.WalletUpdateError.NO_WALLET_SPECIFIED);if(!t.isRegistered)return r(_.WalletUpdateError.UNREGISTERED);if(!e)return r(_.WalletUpdateError.NO_CONTRACT_STATE_SPECIFIED);try{t.latestRound&&(t.latestRound.onChainDeposit=e.deposits[0]),t.previousRound&&(t.previousRound.onChainDeposit=e.deposits[1]),t.secondPreviousRound&&(t.secondPreviousRound.onChainDeposit=e.deposits[2])}catch(t){return r(t)}return n()})},t.prototype.updateLatestRoundDeliveryReceipts=function(t,e,n){var r=this;S.Logging.debug("updateLatestRoundDeliveryReceipts");var i=n?n.walletData:null;return new Promise(function(o,s){if(!t)return s(_.WalletUpdateError.NO_WALLET_SPECIFIED);if(!t.isRegistered)return s(_.WalletUpdateError.UNREGISTERED);var u=t.latestRound;if(!u)return s(_.WalletUpdateError.LOCAL_DATA_MISSING_LATEST_ROUND);if(u.roundNumber==t.registrationRound)return o();if(u.roundNumber==e.currentRound&&!e.isCheckpointSubmitted)return e.currentSubBlock>e.slackPeriod?s(_.WalletUpdateError.PROVIDER_NOT_AUDITABLE):o();var a=i?i.transfers.filter(function(t){return t.round==u.roundNumber-1}).sort(function(t,e){return t.id-e.id}):[],c=t.previousRound.aggregate.transfers;return r.updateDeliveryReceipt(t,c,a,0,e,n).then(o).catch(s)})},t.prototype.updateDeliveryReceipt=function(t,e,n,r,i,o,s){var u=this;return void 0===s&&(s=!1),S.Logging.debug("updateDeliveryReceipt"),new Promise(function(a,c){if(!t)return c(_.WalletUpdateError.NO_WALLET_SPECIFIED);if(!e||r>=e.length)return s?c(_.WalletUpdateError.REMOTE_DATA_INVALID_DELIVERY_RECEIPT):a();var l=function(a,c,l){return void 0===l&&(l=s),u.updateDeliveryReceipt(t,e,n,r+1,i,o,l).then(a).catch(c)},h=e[r];if(h.deliveryProof)return l(a,c,s);if(b.isSameHexValue(t.address,h.recipient))return l(a,c,s);if(h.round<i.currentRound-i.roundsKept)return l(a,c,s);if(!h.confirmations.get(M.TransferAggregateType.DEBIT)||!h.confirmations.get(M.TransferAggregateType.CREDIT))return c(_.WalletUpdateError.LOGIC_RECEIPT_VALIDATION_ERROR_MISSING_CONFIRMATION);var f=n.find(function(t){return t.id==h.txId});if(!f||!f.delivery_proof)return S.Logging.error(h),S.Logging.error(n),l(a,c,!0);u.contractApi.validateDeliveryProof(h,f,t.contractAddress,t.tokenAddress).then(function(t){return t?(h.saveDeliveryProof(f.delivery_proof),l(a,c,s)):l(a,c,!0)})})},t.prototype.progressRound=function(t,e,n){return S.Logging.debug("progressRound"),new Promise(function(n,r){if(!t)return r(_.WalletUpdateError.NO_WALLET_SPECIFIED);if(!t.isRegistered)return r(_.WalletUpdateError.UNREGISTERED);if(!e)return r(_.WalletUpdateError.NO_CONTRACT_STATE_SPECIFIED);if(t.latestRound.roundNumber===e.currentRound)return r(_.WalletUpdateError.LOGIC_PREMATURE_ROUND_ADVANCEMENT);var i=new p.Round(t.contractAddress,t.tokenAddress,t.address,t.trailIdentifier,t.latestRound.roundNumber+1);return t.addRound(i),n()})},t=r([u.injectable(),o(0,u.inject(a.TYPES.SUBJECT.WALLET_STATE_POLL)),o(1,u.inject(a.TYPES.SUBJECT.HUB_STATE_FETCH)),o(2,u.inject(a.TYPES.SUBJECT.CONTRACT_STATE_FETCH)),o(3,u.inject(a.TYPES.SUBJECT.WALLET_STATE_SYNC)),o(4,u.inject(l.ContractApiService)),o(5,u.inject(h.HubApiService)),i("design:paramtypes",[c.Observable,c.Observable,c.Observable,Object,l.ContractApiService,h.HubApiService])],t)}();e.WalletStateService=O},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=this&&this.__param||function(t,e){return function(n,r){e(n,r,t)}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(64),u=n(114),a=n(14),c=n(15),l=n(28),h=function(){function t(t,e,n){var r=this;this.walletStatePollObservable=t,this.hubStateFetchObserver=e,this.hubApi=n,t.subscribe(function(t){r.fetchHubState(t.wallet).then(function(t){r.hubStateFetchObserver.next(t)})})}return t.prototype.fetchHubState=function(t){var e=this,n=new u.HubState;return n.timestamp=(new Date).getTime(),this.hubApi.getStatusData(t.webAddress).then(function(r){return n.statusData=r,e.hubApi.getWalletData(t,t.latestRound.roundNumber-1)}).then(function(t){return n.walletData=t,n}).catch(function(){return n})},t=r([a.injectable(),o(0,a.inject(c.TYPES.SUBJECT.WALLET_STATE_POLL)),o(1,a.inject(c.TYPES.SUBJECT.HUB_STATE_FETCH)),o(2,a.inject(s.HubApiService)),i("design:paramtypes",[l.Observable,Object,s.HubApiService])],t)}();e.HubStateService=h},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=this&&this.__param||function(t,e){return function(n,r){e(n,r,t)}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(14),a=n(28),c=n(44),l=n(15),h=n(113),f=s(n(8)),p=n(17),d=n(6),g=function(){function t(t,e,n){var r=this;this.walletStatePollObservable=t,this.contractStateFetchObserver=e,this.contractApi=n,t.subscribe(function(t){r.fetchContractState(t.wallet).then(function(t){r.contractStateFetchObserver.next(t)})})}return t.prototype.fetchContractState=function(t){var e=this;p.Logging.debug("fetchContractState");var n=new h.ContractState,r=d.isSameHexValue(t.contractAddress,t.tokenAddress)?null:t.tokenAddress;return n.timestamp=(new Date).getTime(),this.contractApi.networkId().then(function(t){return n.networkId=t,e.contractApi.latestBlock()}).then(function(r){return n.block=r.number,e.contractApi.genesis(t.contractAddress)}).then(function(r){return n.genesis=r,e.contractApi.currentRound(t.contractAddress)}).then(function(r){return n.currentRound=r,e.contractApi.currentSubBlock(t.contractAddress)}).then(function(r){return n.currentSubBlock=r,e.contractApi.getBlocksPerRound(t.contractAddress)}).then(function(r){return n.blocksPerRound=r,e.contractApi.getSlackPeriod(t.contractAddress)}).then(function(r){return n.slackPeriod=r,e.contractApi.getChallengeCost(t.contractAddress)}).then(function(r){return n.challengeCost=r,e.contractApi.getLiveChallenges(n.currentRound,t.contractAddress)}).then(function(r){return n.liveChallenges=r,e.contractApi.getLiveChallenges(n.currentRound-1,t.contractAddress)}).then(function(r){return n.slackingChallenges=r,e.contractApi.getExtendedSlackPeriod(t.contractAddress)}).then(function(r){return n.extendedSlackPeriod=r,e.contractApi.getRoundsKept(t.contractAddress)}).then(function(r){return n.roundsKept=r,e.contractApi.getDepositsKept(t.contractAddress)}).then(function(r){return n.depositsKept=r,e.contractApi.lastSubmissionRound(t.contractAddress)}).then(function(i){return n.lastSubmissionRound=i,e.contractApi.balance(t.contractAddress,r)}).then(function(r){return n.contractBalance=r,e.contractApi.hasMissedCheckpointSubmission(t.contractAddress)}).then(function(r){return n.hasMissedCheckpointSubmission=r,e.contractApi.hasOutstandingChallenges(t.contractAddress)}).then(function(r){return n.hasOutstandingChallenges=r,e.contractApi.checkpoint(n.lastSubmissionRound,t.contractAddress,n.roundsKept)}).then(function(i){return n.lastCheckpointSubmitted=i[1],e.contractApi.balance(t.address,r)}).then(function(r){return n.onChainBalance=r,e.contractApi.getDeposits(t.address,n.currentRound,n.depositsKept,t.tokenAddress,t.contractAddress)}).then(function(r){return n.deposits[0]=r,e.contractApi.getDeposits(t.address,n.currentRound-1,n.depositsKept,t.tokenAddress,t.contractAddress)}).then(function(r){return n.deposits[1]=r,e.contractApi.getDeposits(t.address,n.currentRound-2,n.depositsKept,t.tokenAddress,t.contractAddress)}).then(function(r){return n.deposits[2]=r,e.contractApi.recordBook(t.tokenAddress,t.address,t.contractAddress)}).then(function(r){return n.isWithdrawalPending=!1,n.pendingWithdrawalAmount=new f.default(0),n.pendingWithdrawalRound=0,r[0].valueOf()&&(n.isWithdrawalPending=!0,n.pendingWithdrawalAmount=new f.default(r[2].valueOf()),n.pendingWithdrawalRound=r[1].valueOf()),n.recovered=r[3].valueOf(),e.contractApi.getChallengeBook(t.tokenAddress,t.address,t.address,t.contractAddress)}).then(function(t){return n.stateUpdateChallengeIssued=parseInt(t[0].valueOf(),10)>0,n.stateUpdateChallengeBlock=parseInt(t[1].valueOf(),10),n.stateUpdateChallengeRound=parseInt(t[2].valueOf(),10),n}).catch(function(t){return p.Logging.error(t),null})},t=r([u.injectable(),o(0,u.inject(l.TYPES.SUBJECT.WALLET_STATE_POLL)),o(1,u.inject(l.TYPES.SUBJECT.CONTRACT_STATE_FETCH)),o(2,u.inject(c.ContractApiService)),i("design:paramtypes",[a.Observable,Object,c.ContractApiService])],t)}();e.ContractStateService=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ERC20_ABI=[{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"who",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"to",type:"address"},{name:"value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"},{constant:!0,inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}]},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=this&&this.__param||function(t,e){return function(n,r){e(n,r,t)}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(64),a=n(44),c=n(233),l=n(232),h=n(231),f=n(28),p=n(15),d=n(30),g=n(123),y=n(121),m=s(n(8)),v=n(14),b=n(68),_=n(27),w=n(73),A=n(120),T=n(6),S=n(17),M=n(37),O=n(26),E=n(45),x=function(){function t(t,e,n,r,i,o,s,u,a,c,l,h,f,p){this.walletStorageService=t,this.synchronizationPollService=e,this.web3Service=n,this.hubApiService=r,this.contractApiService=i,this.contractStateFetchService=o,this.hubStateFetchService=s,this.walletStateService=u,this.disputeService=a,this.walletStatePollObserver=c,this.web3ConnectivityObservable=l,this.hubStateObservable=h,this.contractStateObservable=f,this.walletStateSyncObservable=p}return t.prototype.prepareSwap=function(t,e,n,r,i){var o=d.Round.fromJSON(t.latestRound.json),s=d.Round.fromJSON(e.latestRound.json);return new Promise(function(u,a){if(n.gt(t.offChainBalance))return S.Logging.error("Insufficient balance."),a();if(o.aggregate.isTransferPending)return S.Logging.error("Another transfer is pending for the sender wallet."),a();if(s.aggregate.isTransferPending)return S.Logging.error("Another transfer is pending for the recipient wallet."),a();if(!T.isSameHexValue(t.contractAddress,e.contractAddress))return S.Logging.error("Wallets are not in the same hub contract."),a();if(t.networkId!=e.networkId)return S.Logging.error("Wallets are not on the same network."),a();if(!T.isSameHexValue(t.address,e.address))return S.Logging.error("Sender and recipient wallet are not the same address."),a();if(T.isSameHexValue(t.tokenAddress,e.tokenAddress))return S.Logging.error("Cannot swap the same token for itself."),a();if(!t.isRegistered)return S.Logging.error("Unregistered sender wallet."),a();if(!e.isRegistered)return S.Logging.error("Unregistered recipient wallet."),a();if(o.roundNumber!=s.roundNumber)return S.Logging.error("Swapping wallets are in different rounds."),a();var c=o.aggregate.createOutgoingSwap(e.address,e.tokenAddress,e.trailIdentifier,n,r,t.getRoundSwapStartingBalance(t.latestRound.roundNumber),i);if(null===c)return S.Logging.error("No outgoing swap created."),a();var l=new E.BalanceMarker(t.contractAddress,t.tokenAddress,t.address,t.latestRound.roundNumber,t.offChainBalance.minus(n));if(null===l)return S.Logging.error("Balance marker not created"),a();if(null===s.aggregate.createIncomingSwap(t.address,t.tokenAddress,n,r,e.getRoundSwapStartingBalance(e.latestRound.roundNumber),c.nonce))return S.Logging.error("No incoming swap created."),a();for(var h=d.Round.fromJSON(s.json),f=h.aggregate.pendingTransfer,p=0,g=[M.TransferAggregateType.DEBIT,M.TransferAggregateType.CREDIT,M.TransferAggregateType.FULFILLMENT];p<g.length;p++){var y=g[p];f.authorizations.set(y,{}),f.confirmations.set(y,_.Signature.EMPTY)}return f.amountsMatched={out:n.toFixed(0),in:r.toFixed(0)},h.aggregate.fulfillPendingSwap()?(S.Logging.debug("Data prepared."),S.Logging.debug({senderAggregate:[o.aggregate.spent.toFixed(0),o.aggregate.gained.toFixed(0),o.aggregate.transferTree.hash,o.aggregate.hash],recipientAggregate:[s.aggregate.spent.toFixed(0),s.aggregate.gained.toFixed(0),s.aggregate.transferTree.hash,s.aggregate.hash],recipientFulfillmentAggregate:[h.aggregate.spent.toFixed(0),h.aggregate.gained.toFixed(0),h.aggregate.transferTree.hash,h.aggregate.hash],marker:[l.amount.toFixed(0),l.hash]}),u({senderTransfer:c,recipientTransfer:c,hashes:{senderAggregate:o.aggregate.hash,recipientAggregate:s.aggregate.hash,recipientFulfillmentAggregate:h.aggregate.hash,marker:l.hash}})):(S.Logging.error("Fake swap fulfillment failure."),a())})},t.prototype.sendSwap=function(t,e,n,r,i,o,s){var u=this;return new Promise(function(a,c){u.hubApiService.sendSwap(t,e,n.senderTransfer,r,i,o,s).then(function(r){var i=t.getRound(n.senderTransfer.round),o=e.getRound(n.senderTransfer.round);if(!i||!o)return a(!1);var s=i.aggregate.createOutgoingSwap(e.address,e.tokenAddress,e.trailIdentifier,n.senderTransfer.amount,n.senderTransfer.amountSwapped,n.senderTransfer.startingBalance,n.senderTransfer.nonce,r.id),u=o.aggregate.createIncomingSwap(t.address,t.tokenAddress,n.recipientTransfer.amount,n.recipientTransfer.amountSwapped,n.recipientTransfer.startingBalance,n.recipientTransfer.nonce,r.id);return a(!(!s||!u))}).catch(c)})},t.prototype.sendSwapFreeze=function(t,e,n){var r=this;return new Promise(function(i,o){r.hubApiService.sendSwapFreeze(t,e,n).then(function(t){return i(!0)}).catch(o)})},t.prepareSwapFinalization=function(t,e){var n=e.authorizations.get(M.TransferAggregateType.FULFILLMENT);if(!n)return null;var r=new m.default(e.amountsMatched.in);if(r.lt(e.amountSwapped))return null;var i=r.minus(e.amountSwapped);return{hashes:{recipientFinalizationAggregate:O.Aggregate.checksum(t.contractAddress,e.recipientTokenAddress,e.recipient,e.recipientTrailIdentifier,e.round,n.tx_set_hash,new m.default(n.updated_spendings),new m.default(n.updated_gains).plus(i))}}},t.prototype.sendSwapFinalization=function(t,e,n){var r=this;return new Promise(function(i,o){r.hubApiService.sendSwapFinalization(t,e,n).then(function(t){return i(!0)}).catch(o)})},t.prepareSwapCancellation=function(t,e){var n=e.authorizations.get(M.TransferAggregateType.DEBIT),r=e.authorizations.get(M.TransferAggregateType.FULFILLMENT);if(!n)return S.Logging.error("Missing debit authorization."),null;if(!r)return S.Logging.error("Missing fulfillment authorization."),null;var i=new m.default(e.amountsMatched.in),o=new m.default(e.amountsMatched.out),s=e.amount.minus(o),u=i.multipliedBy(e.amount).dividedToIntegerBy(100),a=e.amountSwapped.multipliedBy(o).dividedToIntegerBy(100);if(u.lt(a))return S.Logging.error("Unfair termination price."),null;var c=T.isSameHexValue(t.tokenAddress,e.tokenAddress);S.Logging.debug([t.contractAddress,e.tokenAddress,e.sender,c?t.trailIdentifier:e.recipientTrailIdentifier,e.round,n.tx_set_hash,new m.default(n.updated_spendings).toFixed(0),new m.default(n.updated_gains).plus(s).toFixed(0),s.toFixed(0)]);var l=O.Aggregate.checksum(t.contractAddress,e.tokenAddress,e.sender,c?t.trailIdentifier:e.recipientTrailIdentifier,e.round,n.tx_set_hash,new m.default(n.updated_spendings),new m.default(n.updated_gains).plus(s));S.Logging.debug([t.contractAddress,e.recipientTokenAddress,e.recipient,e.recipientTrailIdentifier,e.round,r.tx_set_hash,new m.default(r.updated_spendings).plus(e.amountSwapped).toFixed(0),new m.default(r.updated_gains).plus(i).toFixed(0),i.toFixed(0)]);var h=O.Aggregate.checksum(t.contractAddress,e.recipientTokenAddress,e.recipient,e.recipientTrailIdentifier,e.round,r.tx_set_hash,new m.default(r.updated_spendings).plus(e.amountSwapped),new m.default(r.updated_gains).plus(i));return S.Logging.debug("Data prepared."),S.Logging.debug({hashes:{senderCancellationAggregate:[new m.default(n.updated_spendings).toFixed(0),new m.default(n.updated_gains).plus(s).toFixed(0),n.tx_set_hash,l],recipientCancellationAggregate:[new m.default(r.updated_spendings).plus(e.amountSwapped).toFixed(0),new m.default(r.updated_gains).plus(i).toFixed(0),r.tx_set_hash,h]}}),{hashes:{senderCancellationAggregate:l,recipientCancellationAggregate:h}}},t.prototype.sendSwapCancellation=function(t,e,n,r){var i=this;return new Promise(function(o,s){i.hubApiService.sendSwapCancellation(t,e,n,r).then(function(t){return o(!0)}).catch(s)})},t.prototype.prepareOutgoingTransfer=function(t,e,n,r){var i=this,o=d.Round.fromJSON(t.latestRound.json);return new Promise(function(s,u){return n.gt(t.offChainBalance)?(S.Logging.error("Insufficient balance."),u()):o.aggregate.isTransferPending?(S.Logging.error("Another transfer is already pending."),u()):void i.hubApiService.whoisWallet(t.tokenAddress,e,t.webAddress).then(function(a){if(!a||null==a.trail_identifier||void 0==a.trail_identifier)return S.Logging.error("Recipient wallet unregistered."),u();var c=new b.Wallet(e,t.networkId,t.contractOwnerAddress,t.contractAddress,t.tokenAddress,t.webAddress),l=c.getAdmissionAggregate(a.round),h=_.Signature.fromRSV(e,l.hash,a.wallet_signature);i.contractApiService.validateAggregateSignature(l,h,t.contractAddress).then(function(l){if(!l)return S.Logging.error("Bad Recipient Admission Request."),u();var h=c.getAdmissionAggregate(a.round,a.trail_identifier),f=_.Signature.fromRSV(t.contractOwnerAddress,h.hash,a.hub_signature);i.contractApiService.validateAggregateSignature(h,f,t.contractAddress).then(function(i){if(!i)return S.Logging.error("Bad Recipient Admission Approval."),u();var c=o.aggregate.createOutgoingTransfer(e,a.trail_identifier,n,r);if(null===c)return S.Logging.error("No outgoing transfer created."),u();var l=new E.BalanceMarker(t.contractAddress,t.tokenAddress,t.address,t.latestRound.roundNumber,t.offChainBalance.minus(n));return null===l?(S.Logging.error("No balance marker created."),u()):(S.Logging.debug("Data prepared."),S.Logging.debug({transfer:c,hashes:{aggregate:[o.aggregate.spent.toFixed(0),o.aggregate.gained.toFixed(0),o.aggregate.transferTree.hash,o.aggregate.hash],marker:[l.amount.toFixed(0),l.hash]}}),s({transfer:c,hashes:{aggregate:o.aggregate.hash,marker:l.hash}}))})})}).catch(u)})},t.prototype.sendOutgoingTransfer=function(t,e,n,r){var i=this;return new Promise(function(o,s){i.hubApiService.sendTransfer(t,e.transfer,n,r).then(function(n){var r=t.getRound(e.transfer.round);if(!r)return o(!1);var i=r.aggregate.createOutgoingTransfer(e.transfer.recipient,e.transfer.recipientTrailIdentifier,e.transfer.amount,e.transfer.nonce,n.id);return o(!!i)}).catch(s)})},t.prepareReceipt=function(t,e){var n=d.Round.fromJSON(t.latestRound.json),r=n.aggregate.createIncomingTransfer(e.sender,e.amount,e.nonce,e.txId);return r?(S.Logging.debug("Data prepared"),S.Logging.debug({transfer:r,hashes:{aggregate:[n.aggregate.spent.toFixed(0),n.aggregate.gained.toFixed(0),n.aggregate.transferTree.hash,n.aggregate.hash],marker:null}}),{transfer:r,hashes:{aggregate:n.aggregate.hash,marker:null}}):null},t.prototype.sendIncomingTransferReceipt=function(t,e,n){var r=this;return new Promise(function(i,o){r.hubApiService.sendReceipt(t,e.transfer.txId,n).then(function(n){var r=t.getRound(e.transfer.round);if(!r)return i(!1);var o=r.aggregate.createIncomingTransfer(e.transfer.sender,e.transfer.amount,e.transfer.nonce,e.transfer.txId);return i(!!o)}).catch(o)})},t.prototype.getAdmissionDigest=function(t){var e=this;return new Promise(function(n,r){e.contractApiService.currentRound(t.contractAddress).then(function(e){return n(t.getAdmissionAggregate(e).hash)}).catch(r)})},t.prototype.initiateWithdrawal=function(t,e){var n=this;return new Promise(function(r,i){if(e.gt(t.withdrawableAmount))return i();n.contractApiService.getChallengeCost(t.contractAddress).then(function(i){n.contractApiService.requestWithdrawal(e,t.address,t.previousRound.proofOfStake,t.contractAddress,i).then(r)}).catch(i)})},t.prototype.confirmWithdrawal=function(t){return this.contractApiService.confirmWithdrawal(t.tokenAddress,t.address,t.contractAddress)},t.resolveTransferState=function(t,e){var n=T.isSameHexValue(e.address,t.sender)&&T.isSameHexValue(e.tokenAddress,t.tokenAddress);return t.authorizations.get(M.TransferAggregateType.DEBIT)?t.isSwap?t.confirmations.get(M.TransferAggregateType.DEBIT)?t.confirmations.get(M.TransferAggregateType.CREDIT)?t.deliveryProof?A.TransferState.DELIVERY_RATIFIED:t.isSwapFinalized?A.TransferState.SWAP_FINALIZED:t.isSwapFulfilled?A.TransferState.SWAP_FULFILLED:t.isSwapFrozen?A.TransferState.SWAP_FROZEN:t.isSwapActive?A.TransferState.SWAP_ACTIVE:t.round===e.latestRound.roundNumber?A.TransferState.DELIVERY_CONFIRMED:e.latestRound.proofOfStake?void 0:A.TransferState.DELIVERY_CONFIRMED:A.TransferState.MISSING_CREDIT_CONFIRMATION:A.TransferState.PENDING_PROVIDER_APPROVAL:t.authorizations.get(M.TransferAggregateType.CREDIT)?t.confirmations.get(M.TransferAggregateType.DEBIT)?t.confirmations.get(M.TransferAggregateType.CREDIT)?t.deliveryProof?A.TransferState.DELIVERY_RATIFIED:t.round===e.latestRound.roundNumber?A.TransferState.DELIVERY_CONFIRMED:e.latestRound.proofOfStake?n?A.TransferState.MISSING_RECEIPT:A.TransferState.DELIVERY_RATIFIED:A.TransferState.DELIVERY_CONFIRMED:A.TransferState.MISSING_CREDIT_CONFIRMATION:A.TransferState.PENDING_PROVIDER_APPROVAL:A.TransferState.PENDING_RECIPIENT_APPROVAL:A.TransferState.CANCELLED},t.blocksToWithdrawalConfirmation=function(t,e){var n=t.latestRound;if(!e||!n.isWithdrawalPending)return-1;if(n.isWithdrawalReady)return 0;var r=n.withdrawalRound,i=n.roundNumber-r;return e.extendedSlackPeriod+e.blocksPerRound*(2-i)-e.currentSubBlock+1},t=r([v.injectable(),o(0,v.inject(y.WalletStorageService)),o(1,v.inject(g.PollService)),o(2,v.inject(p.TYPES.EXTERNAL.WEB3_SERVICE_INTERFACE)),o(3,v.inject(u.HubApiService)),o(4,v.inject(a.ContractApiService)),o(5,v.inject(c.ContractStateService)),o(6,v.inject(l.HubStateService)),o(7,v.inject(h.WalletStateService)),o(8,v.inject(w.DisputeService)),o(9,v.inject(p.TYPES.SUBJECT.WALLET_STATE_POLL)),o(10,v.inject(p.TYPES.SUBJECT.WEB3_CONNECTIVITY)),o(11,v.inject(p.TYPES.SUBJECT.HUB_STATE_FETCH)),o(12,v.inject(p.TYPES.SUBJECT.CONTRACT_STATE_FETCH)),o(13,v.inject(p.TYPES.SUBJECT.WALLET_STATE_SYNC)),i("design:paramtypes",[y.WalletStorageService,g.PollService,Object,u.HubApiService,a.ContractApiService,c.ContractStateService,l.HubStateService,h.WalletStateService,w.DisputeService,Object,f.Observable,f.Observable,f.Observable,f.Observable])],t)}();e.LQDClient=x},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiBindToService=function(t){return function(e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.forEach(function(n){return t.bind(n).toService(e)})}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(9),i=n(3),o=n(13);e.postConstruct=function(){return function(t,e,n){var s=new o.Metadata(i.POST_CONSTRUCT,e);if(Reflect.hasOwnMetadata(i.POST_CONSTRUCT,t.constructor))throw new Error(r.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(i.POST_CONSTRUCT,s,t.constructor)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(13),o=n(20);e.targetName=function(t){return function(e,n,s){var u=new i.Metadata(r.NAME_TAG,t);o.tagParameter(e,n,s,u)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(13),o=n(20);e.multiInject=function(t){return function(e,n,s){var u=new i.Metadata(r.MULTI_INJECT_TAG,t);"number"==typeof s?o.tagParameter(e,n,s,u):o.tagProperty(e,n,u)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(13),o=n(20);e.unmanaged=function(){return function(t,e,n){var s=new i.Metadata(r.UNMANAGED_TAG,!0);o.tagParameter(t,e,n,s)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(13),o=n(20);e.optional=function(){return function(t,e,n){var s=new i.Metadata(r.OPTIONAL_TAG,!0);"number"==typeof n?o.tagParameter(t,e,n,s):o.tagProperty(t,e,s)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(13),o=n(20);e.named=function(t){return function(e,n,s){var u=new i.Metadata(r.NAMED_TAG,t);"number"==typeof s?o.tagParameter(e,n,s,u):o.tagProperty(e,n,u)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(13),i=n(20);e.tagged=function(t,e){return function(n,o,s){var u=new r.Metadata(t,e);"number"==typeof s?i.tagParameter(n,o,s,u):i.tagProperty(n,o,u)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(9),i=n(3);e.injectable=function(){return function(t){if(Reflect.hasOwnMetadata(i.PARAM_TYPES,t))throw new Error(r.DUPLICATED_INJECTABLE_DECORATOR);var e=Reflect.getMetadata(i.DESIGN_PARAM_TYPES,t)||[];return Reflect.defineMetadata(i.PARAM_TYPES,e,t),t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(25),i=function(){return function(t){this.guid=r.guid(),this.registry=t}}();e.ContainerModule=i;var o=function(){return function(t){this.guid=r.guid(),this.registry=t}}();e.AsyncContainerModule=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(9),i=function(){function t(){this._map=new Map}return t.prototype.getMap=function(){return this._map},t.prototype.add=function(t,e){if(null===t||void 0===t)throw new Error(r.NULL_ARGUMENT);if(null===e||void 0===e)throw new Error(r.NULL_ARGUMENT);var n=this._map.get(t);void 0!==n?(n.push(e),this._map.set(t,n)):this._map.set(t,[e])},t.prototype.get=function(t){if(null===t||void 0===t)throw new Error(r.NULL_ARGUMENT);var e=this._map.get(t);if(void 0!==e)return e;throw new Error(r.KEY_NOT_FOUND)},t.prototype.remove=function(t){if(null===t||void 0===t)throw new Error(r.NULL_ARGUMENT);if(!this._map.delete(t))throw new Error(r.KEY_NOT_FOUND)},t.prototype.removeByCondition=function(t){var e=this;this._map.forEach(function(n,r){var i=n.filter(function(e){return!t(e)});i.length>0?e._map.set(r,i):e._map.delete(r)})},t.prototype.hasKey=function(t){if(null===t||void 0===t)throw new Error(r.NULL_ARGUMENT);return this._map.has(t)},t.prototype.clone=function(){var e=new t;return this._map.forEach(function(t,n){t.forEach(function(t){return e.add(n,t.clone())})}),e},t.prototype.traverse=function(t){this._map.forEach(function(e,n){t(n,e)})},t}();e.Lookup=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.of=function(e,n){var r=new t;return r.bindings=e,r.middleware=n,r},t}();e.ContainerSnapshot=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(16),i=n(106),o=function(){function t(t){this._binding=t}return t.prototype.inRequestScope=function(){return this._binding.scope=r.BindingScopeEnum.Request,new i.BindingWhenOnSyntax(this._binding)},t.prototype.inSingletonScope=function(){return this._binding.scope=r.BindingScopeEnum.Singleton,new i.BindingWhenOnSyntax(this._binding)},t.prototype.inTransientScope=function(){return this._binding.scope=r.BindingScopeEnum.Transient,new i.BindingWhenOnSyntax(this._binding)},t}();e.BindingInSyntax=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(248),i=n(66),o=n(65),s=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new o.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new i.BindingOnSyntax(this._binding),this._bindingInSyntax=new r.BindingInSyntax(t)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingInWhenOnSyntax=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(9),i=n(16),o=n(249),s=n(106),u=function(){function t(t){this._binding=t}return t.prototype.to=function(t){return this._binding.type=i.BindingTypeEnum.Instance,this._binding.implementationType=t,new o.BindingInWhenOnSyntax(this._binding)},t.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(""+r.INVALID_TO_SELF_VALUE);var t=this._binding.serviceIdentifier;return this.to(t)},t.prototype.toConstantValue=function(t){return this._binding.type=i.BindingTypeEnum.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,new s.BindingWhenOnSyntax(this._binding)},t.prototype.toDynamicValue=function(t){return this._binding.type=i.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new o.BindingInWhenOnSyntax(this._binding)},t.prototype.toConstructor=function(t){return this._binding.type=i.BindingTypeEnum.Constructor,this._binding.implementationType=t,new s.BindingWhenOnSyntax(this._binding)},t.prototype.toFactory=function(t){return this._binding.type=i.BindingTypeEnum.Factory,this._binding.factory=t,new s.BindingWhenOnSyntax(this._binding)},t.prototype.toFunction=function(t){if("function"!=typeof t)throw new Error(r.INVALID_FUNCTION_BINDING);var e=this.toConstantValue(t);return this._binding.type=i.BindingTypeEnum.Function,e},t.prototype.toAutoFactory=function(t){return this._binding.type=i.BindingTypeEnum.Factory,this._binding.factory=function(e){return function(){return e.container.get(t)}},new s.BindingWhenOnSyntax(this._binding)},t.prototype.toProvider=function(t){return this._binding.type=i.BindingTypeEnum.Provider,this._binding.provider=t,new s.BindingWhenOnSyntax(this._binding)},t.prototype.toService=function(t){this.toDynamicValue(function(e){return e.container.get(t)})},t}();e.BindingToSyntax=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(9),i=n(16),o=n(3);e.resolveInstance=function(t,e,n){var s,u,a=null;if(e.length>0){var c=e.filter(function(t){return null!==t.target&&t.target.type===i.TargetTypeEnum.ConstructorArgument}).map(n);u=c,a=function(t,e,n){var r=e.filter(function(t){return null!==t.target&&t.target.type===i.TargetTypeEnum.ClassProperty}),o=r.map(n);return r.forEach(function(e,n){var r;r=e.target.name.value();var i=o[n];t[r]=i}),t}(a=new((s=t).bind.apply(s,[void 0].concat(u))),e,n)}else a=new t;return function(t,e){if(Reflect.hasMetadata(o.POST_CONSTRUCT,t)){var n=Reflect.getMetadata(o.POST_CONSTRUCT,t);try{e[n.value]()}catch(e){throw new Error(r.POST_CONSTRUCT_ERROR(t.name,e.message))}}}(t,a),a}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(9),i=n(16),o=n(109),s=n(36),u=n(251),a=function(t,e,n){try{return n()}catch(n){throw o.isStackOverflowExeption(n)?new Error(r.CIRCULAR_DEPENDENCY_IN_FACTORY(t,e.toString())):n}},c=function(t){return function(e){e.parentContext.setCurrentRequest(e);var n=e.bindings,o=e.childRequests,l=e.target&&e.target.isArray(),h=!(e.parentRequest&&e.parentRequest.target&&e.target&&e.parentRequest.target.matchesArray(e.target.serviceIdentifier));if(l&&h)return o.map(function(e){return c(t)(e)});var f=null;if(!e.target.isOptional()||0!==n.length){var p=n[0],d=p.scope===i.BindingScopeEnum.Singleton,g=p.scope===i.BindingScopeEnum.Request;if(d&&p.activated)return p.cache;if(g&&null!==t&&t.has(p.guid))return t.get(p.guid);if(p.type===i.BindingTypeEnum.ConstantValue)f=p.cache;else if(p.type===i.BindingTypeEnum.Function)f=p.cache;else if(p.type===i.BindingTypeEnum.Constructor)f=p.implementationType;else if(p.type===i.BindingTypeEnum.DynamicValue&&null!==p.dynamicValue)f=a("toDynamicValue",p.serviceIdentifier,function(){return p.dynamicValue(e.parentContext)});else if(p.type===i.BindingTypeEnum.Factory&&null!==p.factory)f=a("toFactory",p.serviceIdentifier,function(){return p.factory(e.parentContext)});else if(p.type===i.BindingTypeEnum.Provider&&null!==p.provider)f=a("toProvider",p.serviceIdentifier,function(){return p.provider(e.parentContext)});else{if(p.type!==i.BindingTypeEnum.Instance||null===p.implementationType){var y=s.getServiceIdentifierAsString(e.serviceIdentifier);throw new Error(r.INVALID_BINDING_TYPE+" "+y)}f=u.resolveInstance(p.implementationType,o,c(t))}return"function"==typeof p.onActivation&&(f=p.onActivation(e.parentContext,f)),d&&(p.cache=f,p.activated=!0),g&&null!==t&&!t.has(p.guid)&&t.set(p.guid,f),f}}};e.resolve=function(t){return c(t.plan.rootRequest.requestScope)(t.plan.rootRequest)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(25),i=function(){function t(t,e,n,i,o){this.guid=r.guid(),this.serviceIdentifier=t,this.parentContext=e,this.parentRequest=n,this.target=o,this.childRequests=[],this.bindings=Array.isArray(i)?i:[i],this.requestScope=null===n?new Map:null}return t.prototype.addChildRequest=function(e,n,r){var i=new t(e,this.parentContext,this,n,r);return this.childRequests.push(i),i},t}();e.Request=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.str=t}return t.prototype.startsWith=function(t){return 0===this.str.indexOf(t)},t.prototype.endsWith=function(t){var e,n=t.split("").reverse().join("");return e=this.str.split("").reverse().join(""),this.startsWith.call({str:e},n)},t.prototype.contains=function(t){return-1!==this.str.indexOf(t)},t.prototype.equals=function(t){return this.str===t},t.prototype.value=function(){return this.str},t}();e.QueryableString=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(108),i=n(9),o=n(16),s=n(3),u=n(36),a=n(107);function c(t,e,n,r){var f=t.getConstructorMetadata(n),p=f.compilerGeneratedMetadata;if(void 0===p){var d=i.MISSING_INJECTABLE_ANNOTATION+" "+e+".";throw new Error(d)}var g=f.userGeneratedMetadata,y=Object.keys(g),m=function(t,e,n,r,i){for(var o=[],s=0;s<i;s++){var u=s,a=l(u,t,e,n,r);null!==a&&o.push(a)}return o}(r,e,p,g,0===n.length&&y.length>0?y.length:n.length),v=function t(e,n){var r=e.getPropertiesMetadata(n);var i=[];var s=Object.keys(r);for(var u=0,c=s;u<c.length;u++){var l=c[u],f=r[l],p=h(r[l]),d=p.targetName||l,g=p.inject||p.multiInject,y=new a.Target(o.TargetTypeEnum.ClassProperty,d,g);y.metadata=f,i.push(y)}var m=Object.getPrototypeOf(n.prototype).constructor;if(m!==Object){var v=t(e,m);i=i.concat(v)}return i}(t,n),b=m.concat(v),_=function t(e,n){var r=Object.getPrototypeOf(n.prototype).constructor;if(r!==Object){var i=u.getFunctionName(r),o=c(e,i,r,!0),a=o.map(function(t){return t.metadata.filter(function(t){return t.key===s.UNMANAGED_TAG})}),l=[].concat.apply([],a).length,h=o.length-l;return h>0?h:t(e,r)}return 0}(t,n);if(b.length<_){var w=i.ARGUMENTS_LENGTH_MISMATCH_1+e+i.ARGUMENTS_LENGTH_MISMATCH_2;throw new Error(w)}return b}function l(t,e,n,s,u){var c=u[t.toString()]||[],l=h(c),f=!0!==l.unmanaged,p=s[t],d=l.inject||l.multiInject;if((p=d||p)instanceof r.LazyServiceIdentifer&&(p=p.unwrap()),f){var g=p===Object,y=p===Function;if(!e&&(g||y||void 0===p)){var m=i.MISSING_INJECT_ANNOTATION+" argument "+t+" in class "+n+".";throw new Error(m)}var v=new a.Target(o.TargetTypeEnum.ConstructorArgument,l.targetName,p);return v.metadata=c,v}return null}function h(t){var e={};return t.forEach(function(t){e[t.key.toString()]=t.value}),{inject:e[s.INJECT_TAG],multiInject:e[s.MULTI_INJECT_TAG],targetName:e[s.NAME_TAG],unmanaged:e[s.UNMANAGED_TAG]}}e.getDependencies=function(t,e){return c(t,u.getFunctionName(e),e,!1)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t,e){this.parentContext=t,this.rootRequest=e}}();e.Plan=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(25),i=function(){function t(t){this.guid=r.guid(),this.container=t}return t.prototype.addPlan=function(t){this.plan=t},t.prototype.setCurrentRequest=function(t){this.currentRequest=t},t}();e.Context=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(258),i=n(9),o=n(16),s=n(3),u=n(109),a=n(36),c=n(257),l=n(13),h=n(256),f=n(255),p=n(253),d=n(107);function g(t){return t._bindingDictionary}function y(t,e,n,o,s){var u=m(n.container,s.serviceIdentifier),c=[];return u.length===r.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof s.serviceIdentifier&&t.getConstructorMetadata(s.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(s.serviceIdentifier).toSelf(),u=m(n.container,s.serviceIdentifier)),c=e?u:u.filter(function(t){var e=new p.Request(t.serviceIdentifier,n,o,t,s);return t.constraint(e)}),function(t,e,n,o){switch(e.length){case r.BindingCount.NoBindingsAvailable:if(n.isOptional())return e;var s=a.getServiceIdentifierAsString(t),u=i.NOT_REGISTERED;throw u+=a.listMetadataForTarget(s,n),u+=a.listRegisteredBindingsForServiceIdentifier(o,s,m),new Error(u);case r.BindingCount.OnlyOneBindingAvailable:if(!n.isArray())return e;case r.BindingCount.MultipleBindingsAvailable:default:if(n.isArray())return e;var s=a.getServiceIdentifierAsString(t),u=i.AMBIGUOUS_MATCH+" "+s;throw u+=a.listRegisteredBindingsForServiceIdentifier(o,s,m),new Error(u)}}(s.serviceIdentifier,c,s,n.container),c}function m(t,e){var n=[],r=g(t);return r.hasKey(e)?n=r.get(e):null!==t.parent&&(n=m(t.parent,e)),n}e.getBindingDictionary=g,e.plan=function(t,e,n,r,i,g,m,v){void 0===v&&(v=!1);var b=new c.Context(e),_=function(t,e,n,r,i,o){var u=t?s.MULTI_INJECT_TAG:s.INJECT_TAG,a=new l.Metadata(u,n),c=new d.Target(e,r,n,a);if(void 0!==i){var h=new l.Metadata(i,o);c.metadata.push(h)}return c}(n,r,i,"",g,m);try{return function t(e,n,r,i,s,u){var a,c;if(null===s){a=y(e,n,i,null,u),c=new p.Request(r,i,null,a,u);var l=new h.Plan(i,c);i.addPlan(l)}else a=y(e,n,i,s,u),c=s.addChildRequest(u.serviceIdentifier,a,u);a.forEach(function(n){var r=null;if(u.isArray())r=c.addChildRequest(n.serviceIdentifier,n,u);else{if(n.cache)return;r=c}n.type===o.BindingTypeEnum.Instance&&null!==n.implementationType&&f.getDependencies(e,n.implementationType).forEach(function(n){t(e,!1,n.serviceIdentifier,i,r,n)})})}(t,v,i,b,null,_),b}catch(t){throw u.isStackOverflowExeption(t)&&b.plan&&a.circularDependencyToException(b.plan.rootRequest),t}},e.createMockRequest=function(t,e,n,r){var i=new d.Target(o.TargetTypeEnum.Variable,"",e,new l.Metadata(n,r)),s=new c.Context(t);return new p.Request(e,s,null,[],i)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(16),i=n(25),o=function(){function t(t,e){this.guid=i.guid(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=r.BindingTypeEnum.Invalid,this.constraint=function(t){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return t.prototype.clone=function(){var e=new t(this.serviceIdentifier,this.scope);return e.activated=!1,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.cache=this.cache,e},t}();e.Binding=o},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{a(r.next(t))}catch(t){o(t)}}function u(t){try{a(r.throw(t))}catch(t){o(t)}}function a(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,u)}a((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(260),s=n(9),u=n(16),a=n(3),c=n(110),l=n(259),h=n(252),f=n(250),p=n(25),d=n(36),g=n(247),y=n(246),m=function(){function t(t){if(void 0!==t){if("object"!=typeof t)throw new Error(""+s.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0!==t.defaultScope&&t.defaultScope!==u.BindingScopeEnum.Singleton&&t.defaultScope!==u.BindingScopeEnum.Transient&&t.defaultScope!==u.BindingScopeEnum.Request)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0!==t.autoBindInjectable&&"boolean"!=typeof t.autoBindInjectable)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);this.options={autoBindInjectable:t.autoBindInjectable,defaultScope:t.defaultScope}}else this.options={autoBindInjectable:!1,defaultScope:u.BindingScopeEnum.Transient};this.guid=p.guid(),this._bindingDictionary=new y.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new c.MetadataReader}return t.merge=function(e,n){var r=new t,i=l.getBindingDictionary(r),o=l.getBindingDictionary(e),s=l.getBindingDictionary(n);function u(t,e){t.traverse(function(t,n){n.forEach(function(t){e.add(t.serviceIdentifier,t.clone())})})}return u(o,i),u(s,i),r},t.prototype.load=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this._getContainerModuleHelpersFactory(),r=0,i=t;r<i.length;r++){var o=i[r],s=n(o.guid);o.registry(s.bindFunction,s.unbindFunction,s.isboundFunction,s.rebindFunction)}},t.prototype.loadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r(this,void 0,void 0,function(){var e,n,r,o,s;return i(this,function(i){switch(i.label){case 0:e=this._getContainerModuleHelpersFactory(),n=0,r=t,i.label=1;case 1:return n<r.length?(o=r[n],s=e(o.guid),[4,o.registry(s.bindFunction,s.unbindFunction,s.isboundFunction,s.rebindFunction)]):[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},t.prototype.unload=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.forEach(function(e){var n,r=(n=e.guid,function(t){return t.moduleId===n});t._bindingDictionary.removeByCondition(r)})},t.prototype.bind=function(t){var e=this.options.defaultScope||u.BindingScopeEnum.Transient,n=new o.Binding(t,e);return this._bindingDictionary.add(t,n),new f.BindingToSyntax(n)},t.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},t.prototype.unbind=function(t){try{this._bindingDictionary.remove(t)}catch(e){throw new Error(s.CANNOT_UNBIND+" "+d.getServiceIdentifierAsString(t))}},t.prototype.unbindAll=function(){this._bindingDictionary=new y.Lookup},t.prototype.isBound=function(t){var e=this._bindingDictionary.hasKey(t);return!e&&this.parent&&(e=this.parent.isBound(t)),e},t.prototype.isBoundNamed=function(t,e){return this.isBoundTagged(t,a.NAMED_TAG,e)},t.prototype.isBoundTagged=function(t,e,n){var r=!1;if(this._bindingDictionary.hasKey(t)){var i=this._bindingDictionary.get(t),o=l.createMockRequest(this,t,e,n);r=i.some(function(t){return t.constraint(o)})}return!r&&this.parent&&(r=this.parent.isBoundTagged(t,e,n)),r},t.prototype.snapshot=function(){this._snapshots.push(g.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},t.prototype.restore=function(){var t=this._snapshots.pop();if(void 0===t)throw new Error(s.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=t.bindings,this._middleware=t.middleware},t.prototype.createChild=function(){var e=new t;return e.parent=this,e},t.prototype.applyMiddleware=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=t.reduce(function(t,e){return e(t)},n)},t.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},t.prototype.get=function(t){return this._get(!1,!1,u.TargetTypeEnum.Variable,t)},t.prototype.getTagged=function(t,e,n){return this._get(!1,!1,u.TargetTypeEnum.Variable,t,e,n)},t.prototype.getNamed=function(t,e){return this.getTagged(t,a.NAMED_TAG,e)},t.prototype.getAll=function(t){return this._get(!0,!0,u.TargetTypeEnum.Variable,t)},t.prototype.getAllTagged=function(t,e,n){return this._get(!1,!0,u.TargetTypeEnum.Variable,t,e,n)},t.prototype.getAllNamed=function(t,e){return this.getAllTagged(t,a.NAMED_TAG,e)},t.prototype.resolve=function(e){var n=new t;return n.bind(e).toSelf(),n.parent=this,n.get(e)},t.prototype._getContainerModuleHelpersFactory=function(){var t=this,e=function(t,e){t._binding.moduleId=e};return function(n){return{bindFunction:(r=n,function(n){var i=t.bind.bind(t)(n);return e(i,r),i}),isboundFunction:function(e){return t.isBound.bind(t)(e)},rebindFunction:function(n){return function(r){var i=t.rebind.bind(t)(r);return e(i,n),i}}(n),unbindFunction:function(e){t.unbind.bind(t)(e)}};var r}},t.prototype._get=function(t,e,n,r,i,o){var u=null,a={avoidConstraints:t,contextInterceptor:function(t){return t},isMultiInject:e,key:i,serviceIdentifier:r,targetType:n,value:o};if(this._middleware){if(void 0===(u=this._middleware(a))||null===u)throw new Error(s.INVALID_MIDDLEWARE_RETURN)}else u=this._planAndResolve()(a);return u},t.prototype._planAndResolve=function(){var t=this;return function(e){var n=l.plan(t._metadataReader,t,e.isMultiInject,e.targetType,e.serviceIdentifier,e.key,e.value,e.avoidConstraints);return n=e.contextInterceptor(n),h.resolve(n)}},t}();e.Container=m},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var a,c=[],l=!1,h=-1;function f(){l&&a&&(l=!1,a.length?c=a.concat(c):h=-1,c.length&&p())}function p(){if(!l){var t=u(f);l=!0;for(var e=c.length;e;){for(a=c,c=[];++h<e;)a&&a[h].run();h=-1,e=c.length}a=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||l||u(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){(function(t,e){
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var n;!function(n){!function(r){var i="object"==typeof e?e:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),o=s(n);function s(t,e){return function(n,r){"function"!=typeof t[n]&&Object.defineProperty(t,n,{configurable:!0,writable:!0,value:r}),e&&e(n,r)}}void 0===i.Reflect?i.Reflect=n:o=s(i.Reflect,o),function(e){var n=Object.prototype.hasOwnProperty,r="function"==typeof Symbol,i=r&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=r&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",s="function"==typeof Object.create,u={__proto__:[]}instanceof Array,a=!s&&!u,c={create:s?function(){return C(Object.create(null))}:u?function(){return C({__proto__:null})}:function(){return C({})},has:a?function(t,e){return n.call(t,e)}:function(t,e){return e in t},get:a?function(t,e){return n.call(t,e)?t[e]:void 0}:function(t,e){return t[e]}},l=Object.getPrototypeOf(Function),h="object"==typeof t&&t.env&&"true"===t.env.REFLECT_METADATA_USE_MAP_POLYFILL,f=h||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var t={},e=[],n=function(){function t(t,e,n){this._index=0,this._keys=t,this._values=e,this._selector=n}return t.prototype["@@iterator"]=function(){return this},t.prototype[o]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var n=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var n=this._find(t,!0);return this._values[n]=e,this},e.prototype.delete=function(e){var n=this._find(e,!1);if(n>=0){for(var r=this._keys.length,i=n+1;i<r;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new n(this._keys,this._values,r)},e.prototype.values=function(){return new n(this._keys,this._values,i)},e.prototype.entries=function(){return new n(this._keys,this._values,s)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[o]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function r(t,e){return t}function i(t,e){return e}function s(t,e){return[t,e]}}():Map,p=h||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function t(){this._map=new f}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[o]=function(){return this.keys()},t}():Set,d=new(h||"function"!=typeof WeakMap?function(){var t=16,e=c.create(),r=i();return function(){function t(){this._key=i()}return t.prototype.has=function(t){var e=o(t,!1);return void 0!==e&&c.has(e,this._key)},t.prototype.get=function(t){var e=o(t,!1);return void 0!==e?c.get(e,this._key):void 0},t.prototype.set=function(t,e){var n=o(t,!0);return n[this._key]=e,this},t.prototype.delete=function(t){var e=o(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=i()},t}();function i(){var t;do{t="@@WeakMap@@"+u()}while(c.has(e,t));return e[t]=!0,t}function o(t,e){if(!n.call(t,r)){if(!e)return;Object.defineProperty(t,r,{value:c.create()})}return t[r]}function s(t,e){for(var n=0;n<e;++n)t[n]=255*Math.random()|0;return t}function u(){var e=function(t){if("function"==typeof Uint8Array)return"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):s(new Uint8Array(t),t);return s(new Array(t),t)}(t);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var n="",r=0;r<t;++r){var i=e[r];4!==r&&6!==r&&8!==r||(n+="-"),i<16&&(n+="0"),n+=i.toString(16).toLowerCase()}return n}}():WeakMap);function g(t,e,n){var r=d.get(t);if(w(r)){if(!n)return;r=new f,d.set(t,r)}var i=r.get(e);if(w(i)){if(!n)return;i=new f,r.set(e,i)}return i}function y(t,e,n){var r=g(e,n,!1);return!w(r)&&!!r.has(t)}function m(t,e,n){var r=g(e,n,!1);if(!w(r))return r.get(t)}function v(t,e,n,r){var i=g(n,r,!0);i.set(t,e)}function b(t,e){var n=[],r=g(t,e,!1);if(w(r))return n;for(var i=r.keys(),s=function(t){var e=I(t,o);if(!E(e))throw new TypeError;var n=e.call(t);if(!T(n))throw new TypeError;return n}(i),u=0;;){var a=P(s);if(!a)return n.length=u,n;var c=a.value;try{n[u]=c}catch(t){try{R(s)}finally{throw t}}u++}}function _(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function w(t){return void 0===t}function A(t){return null===t}function T(t){return"object"==typeof t?null!==t:"function"==typeof t}function S(t,e){switch(_(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var n=3===e?"string":5===e?"number":"default",r=I(t,i);if(void 0!==r){var o=r.call(t,n);if(T(o))throw new TypeError;return o}return function(t,e){if("string"===e){var n=t.toString;if(E(n)){var r=n.call(t);if(!T(r))return r}var i=t.valueOf;if(E(i)){var r=i.call(t);if(!T(r))return r}}else{var i=t.valueOf;if(E(i)){var r=i.call(t);if(!T(r))return r}var o=t.toString;if(E(o)){var r=o.call(t);if(!T(r))return r}}throw new TypeError}(t,"default"===n?"number":n)}function M(t){var e=S(t,3);return"symbol"==typeof e?e:function(t){return""+t}(e)}function O(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function E(t){return"function"==typeof t}function x(t){return"function"==typeof t}function I(t,e){var n=t[e];if(void 0!==n&&null!==n){if(!E(n))throw new TypeError;return n}}function P(t){var e=t.next();return!e.done&&e}function R(t){var e=t.return;e&&e.call(t)}function N(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===l)return e;if(e!==l)return e;var n=t.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return e;var i=r.constructor;return"function"!=typeof i?e:i===t?e:i}function C(t){return t.__=void 0,delete t.__,t}e("decorate",function(t,e,n,r){if(w(n)){if(!O(t))throw new TypeError;if(!x(e))throw new TypeError;return function(t,e){for(var n=t.length-1;n>=0;--n){var r=t[n],i=r(e);if(!w(i)&&!A(i)){if(!x(i))throw new TypeError;e=i}}return e}(t,e)}if(!O(t))throw new TypeError;if(!T(e))throw new TypeError;if(!T(r)&&!w(r)&&!A(r))throw new TypeError;return A(r)&&(r=void 0),n=M(n),function(t,e,n,r){for(var i=t.length-1;i>=0;--i){var o=t[i],s=o(e,n,r);if(!w(s)&&!A(s)){if(!T(s))throw new TypeError;r=s}}return r}(t,e,n,r)}),e("metadata",function(t,e){return function(n,r){if(!T(n))throw new TypeError;if(!w(r)&&!function(t){switch(_(t)){case 3:case 4:return!0;default:return!1}}(r))throw new TypeError;v(t,e,n,r)}}),e("defineMetadata",function(t,e,n,r){if(!T(n))throw new TypeError;w(r)||(r=M(r));return v(t,e,n,r)}),e("hasMetadata",function(t,e,n){if(!T(e))throw new TypeError;w(n)||(n=M(n));return function t(e,n,r){var i=y(e,n,r);if(i)return!0;var o=N(n);if(!A(o))return t(e,o,r);return!1}(t,e,n)}),e("hasOwnMetadata",function(t,e,n){if(!T(e))throw new TypeError;w(n)||(n=M(n));return y(t,e,n)}),e("getMetadata",function(t,e,n){if(!T(e))throw new TypeError;w(n)||(n=M(n));return function t(e,n,r){var i=y(e,n,r);if(i)return m(e,n,r);var o=N(n);if(!A(o))return t(e,o,r);return}(t,e,n)}),e("getOwnMetadata",function(t,e,n){if(!T(e))throw new TypeError;w(n)||(n=M(n));return m(t,e,n)}),e("getMetadataKeys",function(t,e){if(!T(t))throw new TypeError;w(e)||(e=M(e));return function t(e,n){var r=b(e,n);var i=N(e);if(null===i)return r;var o=t(i,n);if(o.length<=0)return r;if(r.length<=0)return o;var s=new p;var u=[];for(var a=0,c=r;a<c.length;a++){var l=c[a],h=s.has(l);h||(s.add(l),u.push(l))}for(var f=0,d=o;f<d.length;f++){var l=d[f],h=s.has(l);h||(s.add(l),u.push(l))}return u}(t,e)}),e("getOwnMetadataKeys",function(t,e){if(!T(t))throw new TypeError;w(e)||(e=M(e));return b(t,e)}),e("deleteMetadata",function(t,e,n){if(!T(e))throw new TypeError;w(n)||(n=M(n));var r=g(e,n,!1);if(w(r))return!1;if(!r.delete(t))return!1;if(r.size>0)return!0;var i=d.get(e);return i.delete(n),i.size>0||(d.delete(e),!0)})}(o)}()}(n||(n={}))}).call(this,n(262),n(70))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(263);var r=n(14),i=n(28),o=n(15),s=n(17),u=function(){function t(){}return t.createClassContainer=function(t,e,n,u){var a=new r.Container({defaultScope:"Singleton",autoBindInjectable:!0});return a.bind(o.TYPES.SUBJECT.WEB3_CONNECTIVITY).toConstantValue(new i.Subject),a.bind(o.TYPES.SUBJECT.HUB_STATE_FETCH).toConstantValue(new i.Subject),a.bind(o.TYPES.SUBJECT.CONTRACT_STATE_FETCH).toConstantValue(new i.Subject),a.bind(o.TYPES.SUBJECT.WALLET_STATE_SYNC).toConstantValue(new i.Subject),a.bind(o.TYPES.SUBJECT.WALLET_STATE_POLL).toConstantValue(new i.Subject),a.bind(o.TYPES.EXTERNAL.REST_API_INTERFACE).toConstantValue(t),a.bind(o.TYPES.EXTERNAL.WEB3_SERVICE_INTERFACE).to(e),a.bind(o.TYPES.EXTERNAL.STORAGE_MANAGER_INTERFACE).toConstantValue(n),a.bind(o.TYPES.EXTERNAL.LOGGING_INTERFACE).toConstantValue(u),s.Logging.loggingInterface=u,a},t}();e.WalletClassesContainerFactory=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){this.connected=t,this.accounts=e}return t.DISCONNECTED=new t(!1,[]),t}();e.Web3Connectivity=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){this.connected=t,this.accounts=e}return t.DISCONNECTED=new t(!1,[]),t}();e.ChainConnectivity=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t,e,n,r){this.checkpointSubmitted=t,this.checkpointMerkleRoot=e,this.checkpointBlock=n,this.checkpointUpperbound=r}}();e.RoundState=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this._queue=[],this._pending=!1}return t.prototype.isLocked=function(){return this._pending},t.prototype.acquire=function(){var t=this,e=new Promise(function(e){return t._queue.push(e)});return this._pending||this._dispatchNext(),e},t.prototype.runExclusive=function(t){return this.acquire().then(function(e){var n;try{n=t()}catch(t){throw e(),t}return Promise.resolve(n).then(function(t){return e(),t},function(t){throw e(),t})})},t.prototype._dispatchNext=function(){this._queue.length>0?(this._pending=!0,this._queue.shift()(this._dispatchNext.bind(this))):this._pending=!1},t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(268);e.Mutex=r.default},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(8)),o=function(){function t(t){this._value=t}return Object.defineProperty(t.prototype,"ether",{get:function(){return this._value.dividedBy(t.ether).integerValue(i.default.ROUND_FLOOR).toNumber()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"finney",{get:function(){return this._value.modulo(t.ether).dividedBy(t.finney).integerValue(i.default.ROUND_FLOOR).toNumber()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"szabo",{get:function(){return this._value.modulo(t.finney).dividedBy(t.szabo).integerValue(i.default.ROUND_FLOOR).toNumber()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wei",{get:function(){return this._value.modulo(t.szabo).integerValue(i.default.ROUND_FLOOR).toNumber()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"str",{get:function(){var t=[];return this.ether>0&&t.push(this.ether+" eth"),this.finney>0&&t.push(this.finney+" fny"),this.szabo>0&&t.push(this.szabo+" sbo"),this.wei>0&&0==t.length&&t.push(this.wei+" wei"),0==t.length&&t.push("0"),t.join(" ")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longStr",{get:function(){var t=[];return this.ether>0&&t.push(this.ether+" eth"),this.finney>0&&t.push(this.finney+" fny"),this.szabo>0&&t.push(this.szabo+" sbo"),this.wei>0&&t.push(this.wei+" wei"),0==t.length&&t.push("0 wei"),t.join(" ")},enumerable:!0,configurable:!0}),t.ether=new i.default("1000000000000000000"),t.finney=new i.default("1000000000000000"),t.szabo=new i.default("1000000000000"),t}();e.Balance=o},function(t,e,n){var r=null;t.exports=function(t){"use strict";var e={strict:!1,storeAsString:!1};void 0!==t&&null!==t&&(!0===t.strict&&(e.strict=!0),!0===t.storeAsString&&(e.storeAsString=!0));var i,o,s,u,a={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},c=function(t){throw{name:"SyntaxError",message:t,at:i,text:s}},l=function(t){return t&&t!==o&&c("Expected '"+t+"' instead of '"+o+"'"),o=s.charAt(i),i+=1,o},h=function(){var t,i="";for("-"===o&&(i="-",l("-"));o>="0"&&o<="9";)i+=o,l();if("."===o)for(i+=".";l()&&o>="0"&&o<="9";)i+=o;if("e"===o||"E"===o)for(i+=o,l(),"-"!==o&&"+"!==o||(i+=o,l());o>="0"&&o<="9";)i+=o,l();if(t=+i,isFinite(t))return null==r&&(r=n(115)),i.length>15?!0===e.storeAsString?i:new r(i):t;c("Bad number")},f=function(){var t,e,n,r="";if('"'===o)for(;l();){if('"'===o)return l(),r;if("\\"===o)if(l(),"u"===o){for(n=0,e=0;e<4&&(t=parseInt(l(),16),isFinite(t));e+=1)n=16*n+t;r+=String.fromCharCode(n)}else{if("string"!=typeof a[o])break;r+=a[o]}else r+=o}c("Bad string")},p=function(){for(;o&&o<=" ";)l()};return u=function(){switch(p(),o){case"{":return function(){var t,n={};if("{"===o){if(l("{"),p(),"}"===o)return l("}"),n;for(;o;){if(t=f(),p(),l(":"),!0===e.strict&&Object.hasOwnProperty.call(n,t)&&c('Duplicate key "'+t+'"'),n[t]=u(),p(),"}"===o)return l("}"),n;l(","),p()}}c("Bad object")}();case"[":return function(){var t=[];if("["===o){if(l("["),p(),"]"===o)return l("]"),t;for(;o;){if(t.push(u()),p(),"]"===o)return l("]"),t;l(","),p()}}c("Bad array")}();case'"':return f();case"-":return h();default:return o>="0"&&o<="9"?h():function(){switch(o){case"t":return l("t"),l("r"),l("u"),l("e"),!0;case"f":return l("f"),l("a"),l("l"),l("s"),l("e"),!1;case"n":return l("n"),l("u"),l("l"),l("l"),null}c("Unexpected '"+o+"'")}()}},function(t,e){var n;return s=t+"",i=0,o=" ",n=u(),p(),o&&c("Syntax error"),"function"==typeof e?function t(n,r){var i,o=n[r];return o&&"object"==typeof o&&Object.keys(o).forEach(function(e){void 0!==(i=t(o,e))?o[e]=i:delete o[e]}),e.call(n,r,o)}({"":n},""):n}}},function(t,e,n){var r=n(115),i=t.exports;!function(){"use strict";var t,e,n,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function u(t){return o.lastIndex=0,o.test(t)?'"'+t.replace(o,function(t){var e=s[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}"function"!=typeof i.stringify&&(i.stringify=function(i,o,s){var a;if(t="",e="","number"==typeof s)for(a=0;a<s;a+=1)e+=" ";else"string"==typeof s&&(e=s);if(n=o,o&&"function"!=typeof o&&("object"!=typeof o||"number"!=typeof o.length))throw new Error("JSON.stringify");return function i(o,s){var a,c,l,h,f,p=t,d=s[o],g=null!=d&&(d instanceof r||d.isBigNumber);switch(d&&"object"==typeof d&&"function"==typeof d.toJSON&&(d=d.toJSON(o)),"function"==typeof n&&(d=n.call(s,o,d)),typeof d){case"string":return g?d:u(d);case"number":return isFinite(d)?String(d):"null";case"boolean":case"null":return String(d);case"object":if(!d)return"null";if(t+=e,f=[],"[object Array]"===Object.prototype.toString.apply(d)){for(h=d.length,a=0;a<h;a+=1)f[a]=i(a,d)||"null";return l=0===f.length?"[]":t?"[\n"+t+f.join(",\n"+t)+"\n"+p+"]":"["+f.join(",")+"]",t=p,l}if(n&&"object"==typeof n)for(h=n.length,a=0;a<h;a+=1)"string"==typeof n[a]&&(l=i(c=n[a],d))&&f.push(u(c)+(t?": ":":")+l);else Object.keys(d).forEach(function(e){var n=i(e,d);n&&f.push(u(e)+(t?": ":":")+n)});return l=0===f.length?"{}":t?"{\n"+t+f.join(",\n"+t)+"\n"+p+"}":"{"+f.join(",")+"}",t=p,l}}("",{"":i})})}()},function(t,e,n){var r=n(272).stringify,i=n(271);t.exports=function(t){return{parse:i(t),stringify:r}},t.exports.parse=i(),t.exports.stringify=r},function(t,e){t.exports=window.crypto},function(t,e,n){t.exports=n(274)},function(t,e,n){t.exports=function(t,e){var r=n(275),i="function"==typeof e;if(t>65536){if(!i)throw new Error("Requested too many random bytes.");e(new Error("Requested too many random bytes."))}if(void 0!==r&&r.randomBytes){if(!i)return"0x"+r.randomBytes(t).toString("hex");r.randomBytes(t,function(t,n){t?e(a):e(null,"0x"+n.toString("hex"))})}else{var o;if(void 0!==r?o=r:"undefined"!=typeof msCrypto&&(o=msCrypto),o&&o.getRandomValues){var s=o.getRandomValues(new Uint8Array(t)),u="0x"+Array.from(s).map(function(t){return t.toString(16)}).join("");if(!i)return u;e(null,u)}else{var a=new Error('No "crypto" object available. This Browser doesn\'t support generating secure random bytes.');if(!i)throw a;e(a)}}}},function(t,e,n){var r=n(72),i=n(116),o=n(117),s=function(t){var e=typeof t;if("string"===e)return o.isHexStrict(t)?new i(t.replace(/0x/i,""),16):new i(t,10);if("number"===e)return new i(t);if(o.isBigNumber(t))return new i(t.toString(10));if(o.isBN(t))return t;throw new Error(t+" is not a number")},u=function(t,e,n){var r,u,a;if("bytes"===(t=(a=t).startsWith("int[")?"int256"+a.slice(3):"int"===a?"int256":a.startsWith("uint[")?"uint256"+a.slice(4):"uint"===a?"uint256":a.startsWith("fixed[")?"fixed128x128"+a.slice(5):"fixed"===a?"fixed128x128":a.startsWith("ufixed[")?"ufixed128x128"+a.slice(6):"ufixed"===a?"ufixed128x128":a)){if(e.replace(/^0x/i,"").length%2!=0)throw new Error("Invalid bytes characters "+e.length);return e}if("string"===t)return o.utf8ToHex(e);if("bool"===t)return e?"01":"00";if(t.startsWith("address")){if(r=n?64:40,!o.isAddress(e))throw new Error(e+" is not a valid address, or the checksum is invalid.");return o.leftPad(e.toLowerCase(),r)}if(r=function(t){var e=/^\D+(\d+).*$/.exec(t);return e?parseInt(e[1],10):null}(t),t.startsWith("bytes")){if(!r)throw new Error("bytes[] not yet supported in solidity");if(n&&(r=32),r<1||r>32||r<e.replace(/^0x/i,"").length/2)throw new Error("Invalid bytes"+r+" for "+e);return o.rightPad(e,2*r)}if(t.startsWith("uint")){if(r%8||r<8||r>256)throw new Error("Invalid uint"+r+" size");if((u=s(e)).bitLength()>r)throw new Error("Supplied uint exceeds width: "+r+" vs "+u.bitLength());if(u.lt(new i(0)))throw new Error("Supplied uint "+u.toString()+" is negative");return r?o.leftPad(u.toString("hex"),r/8*2):u}if(t.startsWith("int")){if(r%8||r<8||r>256)throw new Error("Invalid int"+r+" size");if((u=s(e)).bitLength()>r)throw new Error("Supplied int exceeds width: "+r+" vs "+u.bitLength());return u.lt(new i(0))?u.toTwos(r).toString("hex"):r?o.leftPad(u.toString("hex"),r/8*2):u}throw new Error("Unsupported or invalid type: "+t)},a=function(t){if(r.isArray(t))throw new Error("Autodetection of array types is not supported.");var e,n,s="";if(r.isObject(t)&&(t.hasOwnProperty("v")||t.hasOwnProperty("t")||t.hasOwnProperty("value")||t.hasOwnProperty("type"))?(e=t.t||t.type,s=t.v||t.value):(e=o.toHex(t,!0),s=o.toHex(t),e.startsWith("int")||e.startsWith("uint")||(e="bytes")),!e.startsWith("int")&&!e.startsWith("uint")||"string"!=typeof s||/^(-)?0x/i.test(s)||(s=new i(s)),r.isArray(s)){if((n=function(t){var e=/^\D+\d*\[(\d+)\]$/.exec(t);return e?parseInt(e[1],10):null}(e))&&s.length!==n)throw new Error(e+" is not matching the given array "+JSON.stringify(s));n=s.length}return r.isArray(s)?s.map(function(t){return u(e,t,n).toString("hex").replace("0x","")}).join(""):u(e,s,n).toString("hex").replace("0x","")};t.exports=function(){var t=Array.prototype.slice.call(arguments),e=r.map(t,a);return o.sha3("0x"+e.join(""))}},function(t,e){var n="0123456789abcdef".split(""),r=[1,256,65536,16777216],i=[0,8,16,24],o=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],s=function(t){var e,n,r,i,s,u,a,c,l,h,f,p,d,g,y,m,v,b,_,w,A,T,S,M,O,E,x,I,P,R,N,C,j,L,k,D,B,U,F,W,G,V,z,H,q,Y,K,Z,J,$,X,Q,tt,et,nt,rt,it,ot,st,ut,at,ct,lt;for(r=0;r<48;r+=2)i=t[0]^t[10]^t[20]^t[30]^t[40],s=t[1]^t[11]^t[21]^t[31]^t[41],u=t[2]^t[12]^t[22]^t[32]^t[42],a=t[3]^t[13]^t[23]^t[33]^t[43],c=t[4]^t[14]^t[24]^t[34]^t[44],l=t[5]^t[15]^t[25]^t[35]^t[45],h=t[6]^t[16]^t[26]^t[36]^t[46],f=t[7]^t[17]^t[27]^t[37]^t[47],e=(p=t[8]^t[18]^t[28]^t[38]^t[48])^(u<<1|a>>>31),n=(d=t[9]^t[19]^t[29]^t[39]^t[49])^(a<<1|u>>>31),t[0]^=e,t[1]^=n,t[10]^=e,t[11]^=n,t[20]^=e,t[21]^=n,t[30]^=e,t[31]^=n,t[40]^=e,t[41]^=n,e=i^(c<<1|l>>>31),n=s^(l<<1|c>>>31),t[2]^=e,t[3]^=n,t[12]^=e,t[13]^=n,t[22]^=e,t[23]^=n,t[32]^=e,t[33]^=n,t[42]^=e,t[43]^=n,e=u^(h<<1|f>>>31),n=a^(f<<1|h>>>31),t[4]^=e,t[5]^=n,t[14]^=e,t[15]^=n,t[24]^=e,t[25]^=n,t[34]^=e,t[35]^=n,t[44]^=e,t[45]^=n,e=c^(p<<1|d>>>31),n=l^(d<<1|p>>>31),t[6]^=e,t[7]^=n,t[16]^=e,t[17]^=n,t[26]^=e,t[27]^=n,t[36]^=e,t[37]^=n,t[46]^=e,t[47]^=n,e=h^(i<<1|s>>>31),n=f^(s<<1|i>>>31),t[8]^=e,t[9]^=n,t[18]^=e,t[19]^=n,t[28]^=e,t[29]^=n,t[38]^=e,t[39]^=n,t[48]^=e,t[49]^=n,g=t[0],y=t[1],Y=t[11]<<4|t[10]>>>28,K=t[10]<<4|t[11]>>>28,I=t[20]<<3|t[21]>>>29,P=t[21]<<3|t[20]>>>29,ut=t[31]<<9|t[30]>>>23,at=t[30]<<9|t[31]>>>23,V=t[40]<<18|t[41]>>>14,z=t[41]<<18|t[40]>>>14,L=t[2]<<1|t[3]>>>31,k=t[3]<<1|t[2]>>>31,m=t[13]<<12|t[12]>>>20,v=t[12]<<12|t[13]>>>20,Z=t[22]<<10|t[23]>>>22,J=t[23]<<10|t[22]>>>22,R=t[33]<<13|t[32]>>>19,N=t[32]<<13|t[33]>>>19,ct=t[42]<<2|t[43]>>>30,lt=t[43]<<2|t[42]>>>30,et=t[5]<<30|t[4]>>>2,nt=t[4]<<30|t[5]>>>2,D=t[14]<<6|t[15]>>>26,B=t[15]<<6|t[14]>>>26,b=t[25]<<11|t[24]>>>21,_=t[24]<<11|t[25]>>>21,$=t[34]<<15|t[35]>>>17,X=t[35]<<15|t[34]>>>17,C=t[45]<<29|t[44]>>>3,j=t[44]<<29|t[45]>>>3,M=t[6]<<28|t[7]>>>4,O=t[7]<<28|t[6]>>>4,rt=t[17]<<23|t[16]>>>9,it=t[16]<<23|t[17]>>>9,U=t[26]<<25|t[27]>>>7,F=t[27]<<25|t[26]>>>7,w=t[36]<<21|t[37]>>>11,A=t[37]<<21|t[36]>>>11,Q=t[47]<<24|t[46]>>>8,tt=t[46]<<24|t[47]>>>8,H=t[8]<<27|t[9]>>>5,q=t[9]<<27|t[8]>>>5,E=t[18]<<20|t[19]>>>12,x=t[19]<<20|t[18]>>>12,ot=t[29]<<7|t[28]>>>25,st=t[28]<<7|t[29]>>>25,W=t[38]<<8|t[39]>>>24,G=t[39]<<8|t[38]>>>24,T=t[48]<<14|t[49]>>>18,S=t[49]<<14|t[48]>>>18,t[0]=g^~m&b,t[1]=y^~v&_,t[10]=M^~E&I,t[11]=O^~x&P,t[20]=L^~D&U,t[21]=k^~B&F,t[30]=H^~Y&Z,t[31]=q^~K&J,t[40]=et^~rt&ot,t[41]=nt^~it&st,t[2]=m^~b&w,t[3]=v^~_&A,t[12]=E^~I&R,t[13]=x^~P&N,t[22]=D^~U&W,t[23]=B^~F&G,t[32]=Y^~Z&$,t[33]=K^~J&X,t[42]=rt^~ot&ut,t[43]=it^~st&at,t[4]=b^~w&T,t[5]=_^~A&S,t[14]=I^~R&C,t[15]=P^~N&j,t[24]=U^~W&V,t[25]=F^~G&z,t[34]=Z^~$&Q,t[35]=J^~X&tt,t[44]=ot^~ut&ct,t[45]=st^~at&lt,t[6]=w^~T&g,t[7]=A^~S&y,t[16]=R^~C&M,t[17]=N^~j&O,t[26]=W^~V&L,t[27]=G^~z&k,t[36]=$^~Q&H,t[37]=X^~tt&q,t[46]=ut^~ct&et,t[47]=at^~lt&nt,t[8]=T^~g&m,t[9]=S^~y&v,t[18]=C^~M&E,t[19]=j^~O&x,t[28]=V^~L&D,t[29]=z^~k&B,t[38]=Q^~H&Y,t[39]=tt^~q&K,t[48]=ct^~et&rt,t[49]=lt^~nt&it,t[0]^=o[r],t[1]^=o[r+1]},u=function(t){return function(e){var o;if("0x"===e.slice(0,2)){o=[];for(var u=2,a=e.length;u<a;u+=2)o.push(parseInt(e.slice(u,u+2),16))}else o=e;return function(t,e){for(var o,u=e.length,a=t.blocks,c=t.blockCount<<2,l=t.blockCount,h=t.outputBlocks,f=t.s,p=0;p<u;){if(t.reset)for(t.reset=!1,a[0]=t.block,y=1;y<l+1;++y)a[y]=0;if("string"!=typeof e)for(y=t.start;p<u&&y<c;++p)a[y>>2]|=e[p]<<i[3&y++];else for(y=t.start;p<u&&y<c;++p)(o=e.charCodeAt(p))<128?a[y>>2]|=o<<i[3&y++]:o<2048?(a[y>>2]|=(192|o>>6)<<i[3&y++],a[y>>2]|=(128|63&o)<<i[3&y++]):o<55296||o>=57344?(a[y>>2]|=(224|o>>12)<<i[3&y++],a[y>>2]|=(128|o>>6&63)<<i[3&y++],a[y>>2]|=(128|63&o)<<i[3&y++]):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++p)),a[y>>2]|=(240|o>>18)<<i[3&y++],a[y>>2]|=(128|o>>12&63)<<i[3&y++],a[y>>2]|=(128|o>>6&63)<<i[3&y++],a[y>>2]|=(128|63&o)<<i[3&y++]);if(t.lastByteIndex=y,y>=c){for(t.start=y-c,t.block=a[l],y=0;y<l;++y)f[y]^=a[y];s(f),t.reset=!0}else t.start=y}if(a[(y=t.lastByteIndex)>>2]|=r[3&y],t.lastByteIndex===c)for(a[0]=a[l],y=1;y<l+1;++y)a[y]=0;for(a[l-1]|=2147483648,y=0;y<l;++y)f[y]^=a[y];s(f);for(var d,g="",y=0,m=0;m<h;){for(y=0;y<l&&m<h;++y,++m)d=f[y],g+=n[d>>4&15]+n[15&d]+n[d>>12&15]+n[d>>8&15]+n[d>>20&15]+n[d>>16&15]+n[d>>28&15]+n[d>>24&15];m%l==0&&(s(f),y=0)}return"0x"+g}(function(t){return{blocks:[],reset:!0,block:0,start:0,blockCount:1600-(t<<1)>>5,outputBlocks:t>>5,s:(e=[0,0,0,0,0,0,0,0,0,0],[].concat(e,e,e,e,e))};var e}(t),o)}};t.exports={keccak256:u(256),keccak512:u(512),keccak256s:u(256),keccak512s:u(512)}},function(t,e,n){(function(t,r){var i;/*! https://mths.be/utf8js v2.0.0 by @mathias */!function(o){var s="object"==typeof e&&e,u=("object"==typeof t&&t&&t.exports,"object"==typeof r&&r);u.global!==u&&u.window;var a,c,l,h=String.fromCharCode;function f(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function p(t){if(t>=55296&&t<=57343)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function d(t,e){return h(t>>e&63|128)}function g(t){if(0==(4294967168&t))return h(t);var e="";return 0==(4294965248&t)?e=h(t>>6&31|192):0==(4294901760&t)?(p(t),e=h(t>>12&15|224),e+=d(t,6)):0==(4292870144&t)&&(e=h(t>>18&7|240),e+=d(t,12),e+=d(t,6)),e+=h(63&t|128)}function y(){if(l>=c)throw Error("Invalid byte index");var t=255&a[l];if(l++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function m(){var t,e;if(l>c)throw Error("Invalid byte index");if(l==c)return!1;if(t=255&a[l],l++,0==(128&t))return t;if(192==(224&t)){if((e=(31&t)<<6|y())>=128)return e;throw Error("Invalid continuation byte")}if(224==(240&t)){if((e=(15&t)<<12|y()<<6|y())>=2048)return p(e),e;throw Error("Invalid continuation byte")}if(240==(248&t)&&(e=(15&t)<<18|y()<<12|y()<<6|y())>=65536&&e<=1114111)return e;throw Error("Invalid UTF-8 detected")}var v={version:"2.0.0",encode:function(t){for(var e=f(t),n=e.length,r=-1,i="";++r<n;)i+=g(e[r]);return i},decode:function(t){a=f(t),c=a.length,l=0;for(var e,n=[];!1!==(e=m());)n.push(e);return function(t){for(var e,n=t.length,r=-1,i="";++r<n;)(e=t[r])>65535&&(i+=h((e-=65536)>>>10&1023|55296),e=56320|1023&e),i+=h(e);return i}(n)}};void 0===(i=function(){return v}.call(e,n,e,t))||(t.exports=i)}()}).call(this,n(47)(t),n(70))},function(t,e){t.exports=function(t){if("string"!=typeof t)throw new Error("[is-hex-prefixed] value must be type 'string', is currently type "+typeof t+", while checking isHexPrefixed.");return"0x"===t.slice(0,2)}},function(t,e,n){var r=n(280);t.exports=function(t){return"string"!=typeof t?t:r(t)?t.slice(2):t}},function(t,e,n){(function(t){!function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}function o(t,e,n){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(n=e,e=10),this._init(t||0,e||10,n||"be"))}var s;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{s=n(71).Buffer}catch(t){}function u(t,e,n){for(var r=0,i=Math.min(t.length,n),o=e;o<i;o++){var s=t.charCodeAt(o)-48;r<<=4,r|=s>=49&&s<=54?s-49+10:s>=17&&s<=22?s-17+10:15&s}return r}function a(t,e,n,r){for(var i=0,o=Math.min(t.length,n),s=e;s<o;s++){var u=t.charCodeAt(s)-48;i*=r,i+=u>=49?u-49+10:u>=17?u-17+10:u}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,n){if("number"==typeof t)return this._initNumber(t,e,n);if("object"==typeof t)return this._initArray(t,e,n);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&i++,16===e?this._parseHex(t,i):this._parseBase(t,e,i),"-"===t[0]&&(this.negative=1),this.strip(),"le"===n&&this._initArray(this.toArray(),e,n)},o.prototype._initNumber=function(t,e,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),e,n)},o.prototype._initArray=function(t,e,n){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,u=0;if("be"===n)for(i=t.length-1,o=0;i>=0;i-=3)s=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=s<<u&67108863,this.words[o+1]=s>>>26-u&67108863,(u+=24)>=26&&(u-=26,o++);else if("le"===n)for(i=0,o=0;i<t.length;i+=3)s=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=s<<u&67108863,this.words[o+1]=s>>>26-u&67108863,(u+=24)>=26&&(u-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var r,i,o=0;for(n=t.length-6,r=0;n>=e;n-=6)i=u(t,n,n+6),this.words[r]|=i<<o&67108863,this.words[r+1]|=i>>>26-o&4194303,(o+=24)>=26&&(o-=26,r++);n+6!==e&&(i=u(t,e,n+6),this.words[r]|=i<<o&67108863,this.words[r+1]|=i>>>26-o&4194303),this.strip()},o.prototype._parseBase=function(t,e,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=e)r++;r--,i=i/e|0;for(var o=t.length-n,s=o%r,u=Math.min(o,o-s)+n,c=0,l=n;l<u;l+=r)c=a(t,l,l+r,e),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var h=1;for(c=a(t,l,t.length,e),l=0;l<s;l++)h*=e;this.imuln(h),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,e,n){n.negative=e.negative^t.negative;var r=t.length+e.length|0;n.length=r,r=r-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,u=67108863&s,a=s/67108864|0;n.words[0]=u;for(var c=1;c<r;c++){for(var l=a>>>26,h=67108863&a,f=Math.min(c,e.length-1),p=Math.max(0,c-t.length+1);p<=f;p++){var d=c-p|0;l+=(s=(i=0|t.words[d])*(o=0|e.words[p])+h)/67108864|0,h=67108863&s}n.words[c]=0|h,a=0|l}return 0!==a?n.words[c]=0|a:n.length--,n.strip()}o.prototype.toString=function(t,e){var n;if(t=t||10,e=0|e||1,16===t||"hex"===t){n="";for(var i=0,o=0,s=0;s<this.length;s++){var u=this.words[s],a=(16777215&(u<<i|o)).toString(16);n=0!==(o=u>>>24-i&16777215)||s!==this.length-1?c[6-a.length]+a+n:a+n,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(n=o.toString(16)+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var f=l[t],p=h[t];n="";var d=this.clone();for(d.negative=0;!d.isZero();){var g=d.modn(p).toString(t);n=(d=d.idivn(p)).isZero()?g+n:c[f-g.length]+g+n}for(this.isZero()&&(n="0"+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return r(void 0!==s),this.toArrayLike(s,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,n){var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0"),this.strip();var s,u,a="le"===e,c=new t(o),l=this.clone();if(a){for(u=0;!l.isZero();u++)s=l.andln(255),l.iushrn(8),c[u]=s;for(;u<o;u++)c[u]=0}else{for(u=0;u<o-i;u++)c[u]=0;for(u=0;!l.isZero();u++)s=l.andln(255),l.iushrn(8),c[o-u-1]=s}return c},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,n=0;return e>=4096&&(n+=13,e>>>=13),e>=64&&(n+=7,e>>>=7),e>=8&&(n+=4,e>>>=4),e>=2&&(n+=2,e>>>=2),n+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,n=0;return 0==(8191&e)&&(n+=13,e>>>=13),0==(127&e)&&(n+=7,e>>>=7),0==(15&e)&&(n+=4,e>>>=4),0==(3&e)&&(n+=2,e>>>=2),0==(1&e)&&n++,n},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var n=this._zeroBits(this.words[e]);if(t+=n,26!==n)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var n=0;n<e.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,n;this.length>t.length?(e=this,n=t):(e=t,n=this);for(var r=0;r<n.length;r++)this.words[r]=e.words[r]^n.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),n=t%26;this._expand(e),n>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var n=t/26|0,i=t%26;return this._expand(n+1),this.words[n]=e?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,n,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(n=this,r=t):(n=t,r=this);for(var i=0,o=0;o<r.length;o++)e=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<n.length;o++)e=(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n,r,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=t):(n=t,r=this);for(var o=0,s=0;s<r.length;s++)o=(e=(0|n.words[s])-(0|r.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<n.length;s++)o=(e=(0|n.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<n.length&&n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this.length=Math.max(this.length,s),n!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,n){var r,i,o,s=t.words,u=e.words,a=n.words,c=0,l=0|s[0],h=8191&l,f=l>>>13,p=0|s[1],d=8191&p,g=p>>>13,y=0|s[2],m=8191&y,v=y>>>13,b=0|s[3],_=8191&b,w=b>>>13,A=0|s[4],T=8191&A,S=A>>>13,M=0|s[5],O=8191&M,E=M>>>13,x=0|s[6],I=8191&x,P=x>>>13,R=0|s[7],N=8191&R,C=R>>>13,j=0|s[8],L=8191&j,k=j>>>13,D=0|s[9],B=8191&D,U=D>>>13,F=0|u[0],W=8191&F,G=F>>>13,V=0|u[1],z=8191&V,H=V>>>13,q=0|u[2],Y=8191&q,K=q>>>13,Z=0|u[3],J=8191&Z,$=Z>>>13,X=0|u[4],Q=8191&X,tt=X>>>13,et=0|u[5],nt=8191&et,rt=et>>>13,it=0|u[6],ot=8191&it,st=it>>>13,ut=0|u[7],at=8191&ut,ct=ut>>>13,lt=0|u[8],ht=8191&lt,ft=lt>>>13,pt=0|u[9],dt=8191&pt,gt=pt>>>13;n.negative=t.negative^e.negative,n.length=19;var yt=(c+(r=Math.imul(h,W))|0)+((8191&(i=(i=Math.imul(h,G))+Math.imul(f,W)|0))<<13)|0;c=((o=Math.imul(f,G))+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(d,W),i=(i=Math.imul(d,G))+Math.imul(g,W)|0,o=Math.imul(g,G);var mt=(c+(r=r+Math.imul(h,z)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(f,z)|0))<<13)|0;c=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(mt>>>26)|0,mt&=67108863,r=Math.imul(m,W),i=(i=Math.imul(m,G))+Math.imul(v,W)|0,o=Math.imul(v,G),r=r+Math.imul(d,z)|0,i=(i=i+Math.imul(d,H)|0)+Math.imul(g,z)|0,o=o+Math.imul(g,H)|0;var vt=(c+(r=r+Math.imul(h,Y)|0)|0)+((8191&(i=(i=i+Math.imul(h,K)|0)+Math.imul(f,Y)|0))<<13)|0;c=((o=o+Math.imul(f,K)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(_,W),i=(i=Math.imul(_,G))+Math.imul(w,W)|0,o=Math.imul(w,G),r=r+Math.imul(m,z)|0,i=(i=i+Math.imul(m,H)|0)+Math.imul(v,z)|0,o=o+Math.imul(v,H)|0,r=r+Math.imul(d,Y)|0,i=(i=i+Math.imul(d,K)|0)+Math.imul(g,Y)|0,o=o+Math.imul(g,K)|0;var bt=(c+(r=r+Math.imul(h,J)|0)|0)+((8191&(i=(i=i+Math.imul(h,$)|0)+Math.imul(f,J)|0))<<13)|0;c=((o=o+Math.imul(f,$)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(T,W),i=(i=Math.imul(T,G))+Math.imul(S,W)|0,o=Math.imul(S,G),r=r+Math.imul(_,z)|0,i=(i=i+Math.imul(_,H)|0)+Math.imul(w,z)|0,o=o+Math.imul(w,H)|0,r=r+Math.imul(m,Y)|0,i=(i=i+Math.imul(m,K)|0)+Math.imul(v,Y)|0,o=o+Math.imul(v,K)|0,r=r+Math.imul(d,J)|0,i=(i=i+Math.imul(d,$)|0)+Math.imul(g,J)|0,o=o+Math.imul(g,$)|0;var _t=(c+(r=r+Math.imul(h,Q)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(f,Q)|0))<<13)|0;c=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(O,W),i=(i=Math.imul(O,G))+Math.imul(E,W)|0,o=Math.imul(E,G),r=r+Math.imul(T,z)|0,i=(i=i+Math.imul(T,H)|0)+Math.imul(S,z)|0,o=o+Math.imul(S,H)|0,r=r+Math.imul(_,Y)|0,i=(i=i+Math.imul(_,K)|0)+Math.imul(w,Y)|0,o=o+Math.imul(w,K)|0,r=r+Math.imul(m,J)|0,i=(i=i+Math.imul(m,$)|0)+Math.imul(v,J)|0,o=o+Math.imul(v,$)|0,r=r+Math.imul(d,Q)|0,i=(i=i+Math.imul(d,tt)|0)+Math.imul(g,Q)|0,o=o+Math.imul(g,tt)|0;var wt=(c+(r=r+Math.imul(h,nt)|0)|0)+((8191&(i=(i=i+Math.imul(h,rt)|0)+Math.imul(f,nt)|0))<<13)|0;c=((o=o+Math.imul(f,rt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(I,W),i=(i=Math.imul(I,G))+Math.imul(P,W)|0,o=Math.imul(P,G),r=r+Math.imul(O,z)|0,i=(i=i+Math.imul(O,H)|0)+Math.imul(E,z)|0,o=o+Math.imul(E,H)|0,r=r+Math.imul(T,Y)|0,i=(i=i+Math.imul(T,K)|0)+Math.imul(S,Y)|0,o=o+Math.imul(S,K)|0,r=r+Math.imul(_,J)|0,i=(i=i+Math.imul(_,$)|0)+Math.imul(w,J)|0,o=o+Math.imul(w,$)|0,r=r+Math.imul(m,Q)|0,i=(i=i+Math.imul(m,tt)|0)+Math.imul(v,Q)|0,o=o+Math.imul(v,tt)|0,r=r+Math.imul(d,nt)|0,i=(i=i+Math.imul(d,rt)|0)+Math.imul(g,nt)|0,o=o+Math.imul(g,rt)|0;var At=(c+(r=r+Math.imul(h,ot)|0)|0)+((8191&(i=(i=i+Math.imul(h,st)|0)+Math.imul(f,ot)|0))<<13)|0;c=((o=o+Math.imul(f,st)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(N,W),i=(i=Math.imul(N,G))+Math.imul(C,W)|0,o=Math.imul(C,G),r=r+Math.imul(I,z)|0,i=(i=i+Math.imul(I,H)|0)+Math.imul(P,z)|0,o=o+Math.imul(P,H)|0,r=r+Math.imul(O,Y)|0,i=(i=i+Math.imul(O,K)|0)+Math.imul(E,Y)|0,o=o+Math.imul(E,K)|0,r=r+Math.imul(T,J)|0,i=(i=i+Math.imul(T,$)|0)+Math.imul(S,J)|0,o=o+Math.imul(S,$)|0,r=r+Math.imul(_,Q)|0,i=(i=i+Math.imul(_,tt)|0)+Math.imul(w,Q)|0,o=o+Math.imul(w,tt)|0,r=r+Math.imul(m,nt)|0,i=(i=i+Math.imul(m,rt)|0)+Math.imul(v,nt)|0,o=o+Math.imul(v,rt)|0,r=r+Math.imul(d,ot)|0,i=(i=i+Math.imul(d,st)|0)+Math.imul(g,ot)|0,o=o+Math.imul(g,st)|0;var Tt=(c+(r=r+Math.imul(h,at)|0)|0)+((8191&(i=(i=i+Math.imul(h,ct)|0)+Math.imul(f,at)|0))<<13)|0;c=((o=o+Math.imul(f,ct)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(L,W),i=(i=Math.imul(L,G))+Math.imul(k,W)|0,o=Math.imul(k,G),r=r+Math.imul(N,z)|0,i=(i=i+Math.imul(N,H)|0)+Math.imul(C,z)|0,o=o+Math.imul(C,H)|0,r=r+Math.imul(I,Y)|0,i=(i=i+Math.imul(I,K)|0)+Math.imul(P,Y)|0,o=o+Math.imul(P,K)|0,r=r+Math.imul(O,J)|0,i=(i=i+Math.imul(O,$)|0)+Math.imul(E,J)|0,o=o+Math.imul(E,$)|0,r=r+Math.imul(T,Q)|0,i=(i=i+Math.imul(T,tt)|0)+Math.imul(S,Q)|0,o=o+Math.imul(S,tt)|0,r=r+Math.imul(_,nt)|0,i=(i=i+Math.imul(_,rt)|0)+Math.imul(w,nt)|0,o=o+Math.imul(w,rt)|0,r=r+Math.imul(m,ot)|0,i=(i=i+Math.imul(m,st)|0)+Math.imul(v,ot)|0,o=o+Math.imul(v,st)|0,r=r+Math.imul(d,at)|0,i=(i=i+Math.imul(d,ct)|0)+Math.imul(g,at)|0,o=o+Math.imul(g,ct)|0;var St=(c+(r=r+Math.imul(h,ht)|0)|0)+((8191&(i=(i=i+Math.imul(h,ft)|0)+Math.imul(f,ht)|0))<<13)|0;c=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(B,W),i=(i=Math.imul(B,G))+Math.imul(U,W)|0,o=Math.imul(U,G),r=r+Math.imul(L,z)|0,i=(i=i+Math.imul(L,H)|0)+Math.imul(k,z)|0,o=o+Math.imul(k,H)|0,r=r+Math.imul(N,Y)|0,i=(i=i+Math.imul(N,K)|0)+Math.imul(C,Y)|0,o=o+Math.imul(C,K)|0,r=r+Math.imul(I,J)|0,i=(i=i+Math.imul(I,$)|0)+Math.imul(P,J)|0,o=o+Math.imul(P,$)|0,r=r+Math.imul(O,Q)|0,i=(i=i+Math.imul(O,tt)|0)+Math.imul(E,Q)|0,o=o+Math.imul(E,tt)|0,r=r+Math.imul(T,nt)|0,i=(i=i+Math.imul(T,rt)|0)+Math.imul(S,nt)|0,o=o+Math.imul(S,rt)|0,r=r+Math.imul(_,ot)|0,i=(i=i+Math.imul(_,st)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,st)|0,r=r+Math.imul(m,at)|0,i=(i=i+Math.imul(m,ct)|0)+Math.imul(v,at)|0,o=o+Math.imul(v,ct)|0,r=r+Math.imul(d,ht)|0,i=(i=i+Math.imul(d,ft)|0)+Math.imul(g,ht)|0,o=o+Math.imul(g,ft)|0;var Mt=(c+(r=r+Math.imul(h,dt)|0)|0)+((8191&(i=(i=i+Math.imul(h,gt)|0)+Math.imul(f,dt)|0))<<13)|0;c=((o=o+Math.imul(f,gt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(B,z),i=(i=Math.imul(B,H))+Math.imul(U,z)|0,o=Math.imul(U,H),r=r+Math.imul(L,Y)|0,i=(i=i+Math.imul(L,K)|0)+Math.imul(k,Y)|0,o=o+Math.imul(k,K)|0,r=r+Math.imul(N,J)|0,i=(i=i+Math.imul(N,$)|0)+Math.imul(C,J)|0,o=o+Math.imul(C,$)|0,r=r+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(P,Q)|0,o=o+Math.imul(P,tt)|0,r=r+Math.imul(O,nt)|0,i=(i=i+Math.imul(O,rt)|0)+Math.imul(E,nt)|0,o=o+Math.imul(E,rt)|0,r=r+Math.imul(T,ot)|0,i=(i=i+Math.imul(T,st)|0)+Math.imul(S,ot)|0,o=o+Math.imul(S,st)|0,r=r+Math.imul(_,at)|0,i=(i=i+Math.imul(_,ct)|0)+Math.imul(w,at)|0,o=o+Math.imul(w,ct)|0,r=r+Math.imul(m,ht)|0,i=(i=i+Math.imul(m,ft)|0)+Math.imul(v,ht)|0,o=o+Math.imul(v,ft)|0;var Ot=(c+(r=r+Math.imul(d,dt)|0)|0)+((8191&(i=(i=i+Math.imul(d,gt)|0)+Math.imul(g,dt)|0))<<13)|0;c=((o=o+Math.imul(g,gt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,r=Math.imul(B,Y),i=(i=Math.imul(B,K))+Math.imul(U,Y)|0,o=Math.imul(U,K),r=r+Math.imul(L,J)|0,i=(i=i+Math.imul(L,$)|0)+Math.imul(k,J)|0,o=o+Math.imul(k,$)|0,r=r+Math.imul(N,Q)|0,i=(i=i+Math.imul(N,tt)|0)+Math.imul(C,Q)|0,o=o+Math.imul(C,tt)|0,r=r+Math.imul(I,nt)|0,i=(i=i+Math.imul(I,rt)|0)+Math.imul(P,nt)|0,o=o+Math.imul(P,rt)|0,r=r+Math.imul(O,ot)|0,i=(i=i+Math.imul(O,st)|0)+Math.imul(E,ot)|0,o=o+Math.imul(E,st)|0,r=r+Math.imul(T,at)|0,i=(i=i+Math.imul(T,ct)|0)+Math.imul(S,at)|0,o=o+Math.imul(S,ct)|0,r=r+Math.imul(_,ht)|0,i=(i=i+Math.imul(_,ft)|0)+Math.imul(w,ht)|0,o=o+Math.imul(w,ft)|0;var Et=(c+(r=r+Math.imul(m,dt)|0)|0)+((8191&(i=(i=i+Math.imul(m,gt)|0)+Math.imul(v,dt)|0))<<13)|0;c=((o=o+Math.imul(v,gt)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(B,J),i=(i=Math.imul(B,$))+Math.imul(U,J)|0,o=Math.imul(U,$),r=r+Math.imul(L,Q)|0,i=(i=i+Math.imul(L,tt)|0)+Math.imul(k,Q)|0,o=o+Math.imul(k,tt)|0,r=r+Math.imul(N,nt)|0,i=(i=i+Math.imul(N,rt)|0)+Math.imul(C,nt)|0,o=o+Math.imul(C,rt)|0,r=r+Math.imul(I,ot)|0,i=(i=i+Math.imul(I,st)|0)+Math.imul(P,ot)|0,o=o+Math.imul(P,st)|0,r=r+Math.imul(O,at)|0,i=(i=i+Math.imul(O,ct)|0)+Math.imul(E,at)|0,o=o+Math.imul(E,ct)|0,r=r+Math.imul(T,ht)|0,i=(i=i+Math.imul(T,ft)|0)+Math.imul(S,ht)|0,o=o+Math.imul(S,ft)|0;var xt=(c+(r=r+Math.imul(_,dt)|0)|0)+((8191&(i=(i=i+Math.imul(_,gt)|0)+Math.imul(w,dt)|0))<<13)|0;c=((o=o+Math.imul(w,gt)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(B,Q),i=(i=Math.imul(B,tt))+Math.imul(U,Q)|0,o=Math.imul(U,tt),r=r+Math.imul(L,nt)|0,i=(i=i+Math.imul(L,rt)|0)+Math.imul(k,nt)|0,o=o+Math.imul(k,rt)|0,r=r+Math.imul(N,ot)|0,i=(i=i+Math.imul(N,st)|0)+Math.imul(C,ot)|0,o=o+Math.imul(C,st)|0,r=r+Math.imul(I,at)|0,i=(i=i+Math.imul(I,ct)|0)+Math.imul(P,at)|0,o=o+Math.imul(P,ct)|0,r=r+Math.imul(O,ht)|0,i=(i=i+Math.imul(O,ft)|0)+Math.imul(E,ht)|0,o=o+Math.imul(E,ft)|0;var It=(c+(r=r+Math.imul(T,dt)|0)|0)+((8191&(i=(i=i+Math.imul(T,gt)|0)+Math.imul(S,dt)|0))<<13)|0;c=((o=o+Math.imul(S,gt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(B,nt),i=(i=Math.imul(B,rt))+Math.imul(U,nt)|0,o=Math.imul(U,rt),r=r+Math.imul(L,ot)|0,i=(i=i+Math.imul(L,st)|0)+Math.imul(k,ot)|0,o=o+Math.imul(k,st)|0,r=r+Math.imul(N,at)|0,i=(i=i+Math.imul(N,ct)|0)+Math.imul(C,at)|0,o=o+Math.imul(C,ct)|0,r=r+Math.imul(I,ht)|0,i=(i=i+Math.imul(I,ft)|0)+Math.imul(P,ht)|0,o=o+Math.imul(P,ft)|0;var Pt=(c+(r=r+Math.imul(O,dt)|0)|0)+((8191&(i=(i=i+Math.imul(O,gt)|0)+Math.imul(E,dt)|0))<<13)|0;c=((o=o+Math.imul(E,gt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,r=Math.imul(B,ot),i=(i=Math.imul(B,st))+Math.imul(U,ot)|0,o=Math.imul(U,st),r=r+Math.imul(L,at)|0,i=(i=i+Math.imul(L,ct)|0)+Math.imul(k,at)|0,o=o+Math.imul(k,ct)|0,r=r+Math.imul(N,ht)|0,i=(i=i+Math.imul(N,ft)|0)+Math.imul(C,ht)|0,o=o+Math.imul(C,ft)|0;var Rt=(c+(r=r+Math.imul(I,dt)|0)|0)+((8191&(i=(i=i+Math.imul(I,gt)|0)+Math.imul(P,dt)|0))<<13)|0;c=((o=o+Math.imul(P,gt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,r=Math.imul(B,at),i=(i=Math.imul(B,ct))+Math.imul(U,at)|0,o=Math.imul(U,ct),r=r+Math.imul(L,ht)|0,i=(i=i+Math.imul(L,ft)|0)+Math.imul(k,ht)|0,o=o+Math.imul(k,ft)|0;var Nt=(c+(r=r+Math.imul(N,dt)|0)|0)+((8191&(i=(i=i+Math.imul(N,gt)|0)+Math.imul(C,dt)|0))<<13)|0;c=((o=o+Math.imul(C,gt)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,r=Math.imul(B,ht),i=(i=Math.imul(B,ft))+Math.imul(U,ht)|0,o=Math.imul(U,ft);var Ct=(c+(r=r+Math.imul(L,dt)|0)|0)+((8191&(i=(i=i+Math.imul(L,gt)|0)+Math.imul(k,dt)|0))<<13)|0;c=((o=o+Math.imul(k,gt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863;var jt=(c+(r=Math.imul(B,dt))|0)+((8191&(i=(i=Math.imul(B,gt))+Math.imul(U,dt)|0))<<13)|0;return c=((o=Math.imul(U,gt))+(i>>>13)|0)+(jt>>>26)|0,jt&=67108863,a[0]=yt,a[1]=mt,a[2]=vt,a[3]=bt,a[4]=_t,a[5]=wt,a[6]=At,a[7]=Tt,a[8]=St,a[9]=Mt,a[10]=Ot,a[11]=Et,a[12]=xt,a[13]=It,a[14]=Pt,a[15]=Rt,a[16]=Nt,a[17]=Ct,a[18]=jt,0!==c&&(a[19]=c,n.length++),n};function d(t,e,n){return(new g).mulp(t,e,n)}function g(t,e){this.x=t,this.y=e}Math.imul||(p=f),o.prototype.mulTo=function(t,e){var n=this.length+t.length;return 10===this.length&&10===t.length?p(this,t,e):n<63?f(this,t,e):n<1024?function(t,e,n){n.negative=e.negative^t.negative,n.length=t.length+e.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var s=i;i=0;for(var u=67108863&r,a=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=a;c++){var l=o-c,h=(0|t.words[l])*(0|e.words[c]),f=67108863&h;u=67108863&(f=f+u|0),i+=(s=(s=s+(h/67108864|0)|0)+(f>>>26)|0)>>>26,s&=67108863}n.words[o]=u,r=s,s=i}return 0!==r?n.words[o]=r:n.length--,n.strip()}(this,t,e):d(this,t,e)},g.prototype.makeRBT=function(t){for(var e=new Array(t),n=o.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,n,t);return e},g.prototype.revBin=function(t,e,n){if(0===t||t===n-1)return t;for(var r=0,i=0;i<e;i++)r|=(1&t)<<e-i-1,t>>=1;return r},g.prototype.permute=function(t,e,n,r,i,o){for(var s=0;s<o;s++)r[s]=e[t[s]],i[s]=n[t[s]]},g.prototype.transform=function(t,e,n,r,i,o){this.permute(o,t,e,n,r,i);for(var s=1;s<i;s<<=1)for(var u=s<<1,a=Math.cos(2*Math.PI/u),c=Math.sin(2*Math.PI/u),l=0;l<i;l+=u)for(var h=a,f=c,p=0;p<s;p++){var d=n[l+p],g=r[l+p],y=n[l+p+s],m=r[l+p+s],v=h*y-f*m;m=h*m+f*y,y=v,n[l+p]=d+y,r[l+p]=g+m,n[l+p+s]=d-y,r[l+p+s]=g-m,p!==u&&(v=a*h-c*f,f=a*f+c*h,h=v)}},g.prototype.guessLen13b=function(t,e){var n=1|Math.max(e,t),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},g.prototype.conjugate=function(t,e,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=t[r];t[r]=t[n-r-1],t[n-r-1]=i,i=e[r],e[r]=-e[n-r-1],e[n-r-1]=-i}},g.prototype.normalize13b=function(t,e){for(var n=0,r=0;r<e/2;r++){var i=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+n;t[r]=67108863&i,n=i<67108864?0:i/67108864|0}return t},g.prototype.convert13b=function(t,e,n,i){for(var o=0,s=0;s<e;s++)o+=0|t[s],n[2*s]=8191&o,o>>>=13,n[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<i;++s)n[s]=0;r(0===o),r(0==(-8192&o))},g.prototype.stub=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=0;return e},g.prototype.mulp=function(t,e,n){var r=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(r),o=this.stub(r),s=new Array(r),u=new Array(r),a=new Array(r),c=new Array(r),l=new Array(r),h=new Array(r),f=n.words;f.length=r,this.convert13b(t.words,t.length,s,r),this.convert13b(e.words,e.length,c,r),this.transform(s,o,u,a,r,i),this.transform(c,o,l,h,r,i);for(var p=0;p<r;p++){var d=u[p]*l[p]-a[p]*h[p];a[p]=u[p]*h[p]+a[p]*l[p],u[p]=d}return this.conjugate(u,a,r),this.transform(u,a,f,o,r,i),this.conjugate(f,o,r),this.normalize13b(f,r),n.negative=t.negative^e.negative,n.length=t.length+e.length,n.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),d(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){r("number"==typeof t),r(t<67108864);for(var e=0,n=0;n<this.length;n++){var i=(0|this.words[n])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[n]=67108863&o}return 0!==e&&(this.words[n]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),n=0;n<e.length;n++){var r=n/26|0,i=n%26;e[n]=(t.words[r]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var n=this,r=0;r<e.length&&0===e[r];r++,n=n.sqr());if(++r<e.length)for(var i=n.sqr();r<e.length;r++,i=i.sqr())0!==e[r]&&(n=n.mul(i));return n},o.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,n=t%26,i=(t-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(e=0;e<this.length;e++){var u=this.words[e]&o,a=(0|this.words[e])-u<<n;this.words[e]=a|s,s=u>>>26-n}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,n){var i;r("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),u=67108863^67108863>>>o<<o,a=n;if(i-=s,i=Math.max(0,i),a){for(var c=0;c<s;c++)a.words[c]=this.words[c];a.length=s}if(0===s);else if(this.length>s)for(this.length-=s,c=0;c<this.length;c++)this.words[c]=this.words[c+s];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var h=0|this.words[c];this.words[c]=l<<26-o|h>>>o,l=h&u}return a&&0!==l&&(a.words[a.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,n){return r(0===this.negative),this.iushrn(t,e,n)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26,i=1<<e;return!(this.length<=n)&&!!(this.words[n]&i)},o.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==e&&n++,this.length=Math.min(n,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,n){var i,o,s=t.length+n;this._expand(s);var u=0;for(i=0;i<t.length;i++){o=(0|this.words[i+n])+u;var a=(0|t.words[i])*e;u=((o-=67108863&a)>>26)-(a/67108864|0),this.words[i+n]=67108863&o}for(;i<this.length-n;i++)u=(o=(0|this.words[i+n])+u)>>26,this.words[i+n]=67108863&o;if(0===u)return this.strip();for(r(-1===u),u=0,i=0;i<this.length;i++)u=(o=-(0|this.words[i])+u)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var n=(this.length,t.length),r=this.clone(),i=t,s=0|i.words[i.length-1];0!==(n=26-this._countBits(s))&&(i=i.ushln(n),r.iushln(n),s=0|i.words[i.length-1]);var u,a=r.length-i.length;if("mod"!==e){(u=new o(null)).length=a+1,u.words=new Array(u.length);for(var c=0;c<u.length;c++)u.words[c]=0}var l=r.clone()._ishlnsubmul(i,1,a);0===l.negative&&(r=l,u&&(u.words[a]=1));for(var h=a-1;h>=0;h--){var f=67108864*(0|r.words[i.length+h])+(0|r.words[i.length+h-1]);for(f=Math.min(f/s|0,67108863),r._ishlnsubmul(i,f,h);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(i,1,h),r.isZero()||(r.negative^=1);u&&(u.words[h]=f)}return u&&u.strip(),r.strip(),"div"!==e&&0!==n&&r.iushrn(n),{div:u||null,mod:r}},o.prototype.divmod=function(t,e,n){return r(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(u=this.neg().divmod(t,e),"mod"!==e&&(i=u.div.neg()),"div"!==e&&(s=u.mod.neg(),n&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(u=this.divmod(t.neg(),e),"mod"!==e&&(i=u.div.neg()),{div:i,mod:u.mod}):0!=(this.negative&t.negative)?(u=this.neg().divmod(t.neg(),e),"div"!==e&&(s=u.mod.neg(),n&&0!==s.negative&&s.isub(t)),{div:u.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,s,u},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var n=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),i=t.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){r(t<=67108863);for(var e=(1<<26)%t,n=0,i=this.length-1;i>=0;i--)n=(e*n+(0|this.words[i]))%t;return n},o.prototype.idivn=function(t){r(t<=67108863);for(var e=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*e;this.words[n]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),s=new o(0),u=new o(0),a=new o(1),c=0;e.isEven()&&n.isEven();)e.iushrn(1),n.iushrn(1),++c;for(var l=n.clone(),h=e.clone();!e.isZero();){for(var f=0,p=1;0==(e.words[0]&p)&&f<26;++f,p<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(l),s.isub(h)),i.iushrn(1),s.iushrn(1);for(var d=0,g=1;0==(n.words[0]&g)&&d<26;++d,g<<=1);if(d>0)for(n.iushrn(d);d-- >0;)(u.isOdd()||a.isOdd())&&(u.iadd(l),a.isub(h)),u.iushrn(1),a.iushrn(1);e.cmp(n)>=0?(e.isub(n),i.isub(u),s.isub(a)):(n.isub(e),u.isub(i),a.isub(s))}return{a:u,b:a,gcd:n.iushln(c)}},o.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,s=new o(1),u=new o(0),a=n.clone();e.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,l=1;0==(e.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(e.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(a),s.iushrn(1);for(var h=0,f=1;0==(n.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(n.iushrn(h);h-- >0;)u.isOdd()&&u.iadd(a),u.iushrn(1);e.cmp(n)>=0?(e.isub(n),s.isub(u)):(n.isub(e),u.isub(s))}return(i=0===e.cmpn(1)?s:u).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),n=t.clone();e.negative=0,n.negative=0;for(var r=0;e.isEven()&&n.isEven();r++)e.iushrn(1),n.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=e.cmp(n);if(i<0){var o=e;e=n,n=o}else if(0===i||0===n.cmpn(1))break;e.isub(n)}return n.iushln(r)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,n=(t-e)/26,i=1<<e;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var o=i,s=n;0!==o&&s<this.length;s++){var u=0|this.words[s];o=(u+=o)>>>26,u&=67108863,this.words[s]=u}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)e=1;else{n&&(t=-t),r(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|t.words[n];if(r!==i){r<i?e=-1:r>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new A(t)},o.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var y={k256:null,p224:null,p192:null,p25519:null};function m(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){m.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){m.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){m.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function w(){m.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function A(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function T(t){A.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}m.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},m.prototype.ireduce=function(t){var e,n=t;do{this.split(n,this.tmp),e=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):n.strip(),n},m.prototype.split=function(t,e){t.iushrn(this.n,0,e)},m.prototype.imulK=function(t){return t.imul(this.k)},i(v,m),v.prototype.split=function(t,e){for(var n=Math.min(t.length,9),r=0;r<n;r++)e.words[r]=t.words[r];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var i=t.words[9];for(e.words[e.length++]=4194303&i,r=10;r<t.length;r++){var o=0|t.words[r];t.words[r-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,t.words[r-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,n=0;n<t.length;n++){var r=0|t.words[n];e+=977*r,t.words[n]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(b,m),i(_,m),i(w,m),w.prototype.imulK=function(t){for(var e=0,n=0;n<t.length;n++){var r=19*(0|t.words[n])+e,i=67108863&r;r>>>=26,t.words[n]=i,e=r}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(y[t])return y[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new b;else if("p192"===t)e=new _;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new w}return y[t]=e,e},A.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},A.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},A.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},A.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},A.prototype.add=function(t,e){this._verify2(t,e);var n=t.add(e);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},A.prototype.iadd=function(t,e){this._verify2(t,e);var n=t.iadd(e);return n.cmp(this.m)>=0&&n.isub(this.m),n},A.prototype.sub=function(t,e){this._verify2(t,e);var n=t.sub(e);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},A.prototype.isub=function(t,e){this._verify2(t,e);var n=t.isub(e);return n.cmpn(0)<0&&n.iadd(this.m),n},A.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},A.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},A.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},A.prototype.isqr=function(t){return this.imul(t,t.clone())},A.prototype.sqr=function(t){return this.mul(t,t)},A.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var n=this.m.add(new o(1)).iushrn(2);return this.pow(t,n)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);r(!i.isZero());var u=new o(1).toRed(this),a=u.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,c).cmp(a);)l.redIAdd(a);for(var h=this.pow(l,i),f=this.pow(t,i.addn(1).iushrn(1)),p=this.pow(t,i),d=s;0!==p.cmp(u);){for(var g=p,y=0;0!==g.cmp(u);y++)g=g.redSqr();r(y<d);var m=this.pow(h,new o(1).iushln(d-y-1));f=f.redMul(m),h=m.redSqr(),p=p.redMul(h),d=y}return f},A.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},A.prototype.pow=function(t,e){if(e.isZero())return new o(1);if(0===e.cmpn(1))return t.clone();var n=new Array(16);n[0]=new o(1).toRed(this),n[1]=t;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],t);var i=n[0],s=0,u=0,a=e.bitLength()%26;for(0===a&&(a=26),r=e.length-1;r>=0;r--){for(var c=e.words[r],l=a-1;l>=0;l--){var h=c>>l&1;i!==n[0]&&(i=this.sqr(i)),0!==h||0!==s?(s<<=1,s|=h,(4===++u||0===r&&0===l)&&(i=this.mul(i,n[s]),u=0,s=0)):u=0}a=26}return i},A.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},A.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new T(t)},i(T,A),T.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},T.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},T.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},T.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var n=t.mul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},T.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===t||t,this)}).call(this,n(47)(t))},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e){e.read=function(t,e,n,r,i){var o,s,u=8*i-r-1,a=(1<<u)-1,c=a>>1,l=-7,h=n?i-1:0,f=n?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-l)-1,p>>=-l,l+=u;l>0;o=256*o+t[e+h],h+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+t[e+h],h+=f,l-=8);if(0===o)o=1-c;else{if(o===a)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=c}return(p?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,u,a,c=8*o-i-1,l=(1<<c)-1,h=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(a=Math.pow(2,-s))<1&&(s--,a*=2),(e+=s+h>=1?f/a:f*Math.pow(2,1-h))*a>=2&&(s++,a/=2),s+h>=l?(u=0,s=l):s+h>=1?(u=(e*a-1)*Math.pow(2,i),s+=h):(u=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[n+p]=255&u,p+=d,u/=256,i-=8);for(s=s<<i|u,c+=i;c>0;t[n+p]=255&s,p+=d,s/=256,c-=8);t[n+p-d]|=128*g}},function(t,e,n){"use strict";e.byteLength=function(t){return 3*t.length/4-c(t)},e.toByteArray=function(t){var e,n,r,s,u,a=t.length;s=c(t),u=new o(3*a/4-s),n=s>0?a-4:a;var l=0;for(e=0;e<n;e+=4)r=i[t.charCodeAt(e)]<<18|i[t.charCodeAt(e+1)]<<12|i[t.charCodeAt(e+2)]<<6|i[t.charCodeAt(e+3)],u[l++]=r>>16&255,u[l++]=r>>8&255,u[l++]=255&r;2===s?(r=i[t.charCodeAt(e)]<<2|i[t.charCodeAt(e+1)]>>4,u[l++]=255&r):1===s&&(r=i[t.charCodeAt(e)]<<10|i[t.charCodeAt(e+1)]<<4|i[t.charCodeAt(e+2)]>>2,u[l++]=r>>8&255,u[l++]=255&r);return u},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o="",s=[],u=0,a=n-i;u<a;u+=16383)s.push(l(t,u,u+16383>a?a:u+16383));1===i?(e=t[n-1],o+=r[e>>2],o+=r[e<<4&63],o+="=="):2===i&&(e=(t[n-2]<<8)+t[n-1],o+=r[e>>10],o+=r[e>>4&63],o+=r[e<<2&63],o+="=");return s.push(o),s.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,a=s.length;u<a;++u)r[u]=s[u],i[s.charCodeAt(u)]=u;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function l(t,e,n){for(var i,o,s=[],u=e;u<n;u+=3)i=(t[u]<<16&16711680)+(t[u+1]<<8&65280)+(255&t[u+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e,n){(function(t){!function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}function o(t,e,n){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(n=e,e=10),this._init(t||0,e||10,n||"be"))}var s;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{s=n(71).Buffer}catch(t){}function u(t,e,n){for(var r=0,i=Math.min(t.length,n),o=e;o<i;o++){var s=t.charCodeAt(o)-48;r<<=4,r|=s>=49&&s<=54?s-49+10:s>=17&&s<=22?s-17+10:15&s}return r}function a(t,e,n,r){for(var i=0,o=Math.min(t.length,n),s=e;s<o;s++){var u=t.charCodeAt(s)-48;i*=r,i+=u>=49?u-49+10:u>=17?u-17+10:u}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,n){if("number"==typeof t)return this._initNumber(t,e,n);if("object"==typeof t)return this._initArray(t,e,n);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&i++,16===e?this._parseHex(t,i):this._parseBase(t,e,i),"-"===t[0]&&(this.negative=1),this.strip(),"le"===n&&this._initArray(this.toArray(),e,n)},o.prototype._initNumber=function(t,e,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),e,n)},o.prototype._initArray=function(t,e,n){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,u=0;if("be"===n)for(i=t.length-1,o=0;i>=0;i-=3)s=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=s<<u&67108863,this.words[o+1]=s>>>26-u&67108863,(u+=24)>=26&&(u-=26,o++);else if("le"===n)for(i=0,o=0;i<t.length;i+=3)s=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=s<<u&67108863,this.words[o+1]=s>>>26-u&67108863,(u+=24)>=26&&(u-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var r,i,o=0;for(n=t.length-6,r=0;n>=e;n-=6)i=u(t,n,n+6),this.words[r]|=i<<o&67108863,this.words[r+1]|=i>>>26-o&4194303,(o+=24)>=26&&(o-=26,r++);n+6!==e&&(i=u(t,e,n+6),this.words[r]|=i<<o&67108863,this.words[r+1]|=i>>>26-o&4194303),this.strip()},o.prototype._parseBase=function(t,e,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=e)r++;r--,i=i/e|0;for(var o=t.length-n,s=o%r,u=Math.min(o,o-s)+n,c=0,l=n;l<u;l+=r)c=a(t,l,l+r,e),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var h=1;for(c=a(t,l,t.length,e),l=0;l<s;l++)h*=e;this.imuln(h),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,e,n){n.negative=e.negative^t.negative;var r=t.length+e.length|0;n.length=r,r=r-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,u=67108863&s,a=s/67108864|0;n.words[0]=u;for(var c=1;c<r;c++){for(var l=a>>>26,h=67108863&a,f=Math.min(c,e.length-1),p=Math.max(0,c-t.length+1);p<=f;p++){var d=c-p|0;l+=(s=(i=0|t.words[d])*(o=0|e.words[p])+h)/67108864|0,h=67108863&s}n.words[c]=0|h,a=0|l}return 0!==a?n.words[c]=0|a:n.length--,n.strip()}o.prototype.toString=function(t,e){var n;if(t=t||10,e=0|e||1,16===t||"hex"===t){n="";for(var i=0,o=0,s=0;s<this.length;s++){var u=this.words[s],a=(16777215&(u<<i|o)).toString(16);n=0!==(o=u>>>24-i&16777215)||s!==this.length-1?c[6-a.length]+a+n:a+n,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(n=o.toString(16)+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var f=l[t],p=h[t];n="";var d=this.clone();for(d.negative=0;!d.isZero();){var g=d.modn(p).toString(t);n=(d=d.idivn(p)).isZero()?g+n:c[f-g.length]+g+n}for(this.isZero()&&(n="0"+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return r(void 0!==s),this.toArrayLike(s,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,n){var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0"),this.strip();var s,u,a="le"===e,c=new t(o),l=this.clone();if(a){for(u=0;!l.isZero();u++)s=l.andln(255),l.iushrn(8),c[u]=s;for(;u<o;u++)c[u]=0}else{for(u=0;u<o-i;u++)c[u]=0;for(u=0;!l.isZero();u++)s=l.andln(255),l.iushrn(8),c[o-u-1]=s}return c},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,n=0;return e>=4096&&(n+=13,e>>>=13),e>=64&&(n+=7,e>>>=7),e>=8&&(n+=4,e>>>=4),e>=2&&(n+=2,e>>>=2),n+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,n=0;return 0==(8191&e)&&(n+=13,e>>>=13),0==(127&e)&&(n+=7,e>>>=7),0==(15&e)&&(n+=4,e>>>=4),0==(3&e)&&(n+=2,e>>>=2),0==(1&e)&&n++,n},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var n=this._zeroBits(this.words[e]);if(t+=n,26!==n)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var n=0;n<e.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,n;this.length>t.length?(e=this,n=t):(e=t,n=this);for(var r=0;r<n.length;r++)this.words[r]=e.words[r]^n.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),n=t%26;this._expand(e),n>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var n=t/26|0,i=t%26;return this._expand(n+1),this.words[n]=e?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,n,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(n=this,r=t):(n=t,r=this);for(var i=0,o=0;o<r.length;o++)e=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<n.length;o++)e=(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n,r,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=t):(n=t,r=this);for(var o=0,s=0;s<r.length;s++)o=(e=(0|n.words[s])-(0|r.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<n.length;s++)o=(e=(0|n.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<n.length&&n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this.length=Math.max(this.length,s),n!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,n){var r,i,o,s=t.words,u=e.words,a=n.words,c=0,l=0|s[0],h=8191&l,f=l>>>13,p=0|s[1],d=8191&p,g=p>>>13,y=0|s[2],m=8191&y,v=y>>>13,b=0|s[3],_=8191&b,w=b>>>13,A=0|s[4],T=8191&A,S=A>>>13,M=0|s[5],O=8191&M,E=M>>>13,x=0|s[6],I=8191&x,P=x>>>13,R=0|s[7],N=8191&R,C=R>>>13,j=0|s[8],L=8191&j,k=j>>>13,D=0|s[9],B=8191&D,U=D>>>13,F=0|u[0],W=8191&F,G=F>>>13,V=0|u[1],z=8191&V,H=V>>>13,q=0|u[2],Y=8191&q,K=q>>>13,Z=0|u[3],J=8191&Z,$=Z>>>13,X=0|u[4],Q=8191&X,tt=X>>>13,et=0|u[5],nt=8191&et,rt=et>>>13,it=0|u[6],ot=8191&it,st=it>>>13,ut=0|u[7],at=8191&ut,ct=ut>>>13,lt=0|u[8],ht=8191&lt,ft=lt>>>13,pt=0|u[9],dt=8191&pt,gt=pt>>>13;n.negative=t.negative^e.negative,n.length=19;var yt=(c+(r=Math.imul(h,W))|0)+((8191&(i=(i=Math.imul(h,G))+Math.imul(f,W)|0))<<13)|0;c=((o=Math.imul(f,G))+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(d,W),i=(i=Math.imul(d,G))+Math.imul(g,W)|0,o=Math.imul(g,G);var mt=(c+(r=r+Math.imul(h,z)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(f,z)|0))<<13)|0;c=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(mt>>>26)|0,mt&=67108863,r=Math.imul(m,W),i=(i=Math.imul(m,G))+Math.imul(v,W)|0,o=Math.imul(v,G),r=r+Math.imul(d,z)|0,i=(i=i+Math.imul(d,H)|0)+Math.imul(g,z)|0,o=o+Math.imul(g,H)|0;var vt=(c+(r=r+Math.imul(h,Y)|0)|0)+((8191&(i=(i=i+Math.imul(h,K)|0)+Math.imul(f,Y)|0))<<13)|0;c=((o=o+Math.imul(f,K)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(_,W),i=(i=Math.imul(_,G))+Math.imul(w,W)|0,o=Math.imul(w,G),r=r+Math.imul(m,z)|0,i=(i=i+Math.imul(m,H)|0)+Math.imul(v,z)|0,o=o+Math.imul(v,H)|0,r=r+Math.imul(d,Y)|0,i=(i=i+Math.imul(d,K)|0)+Math.imul(g,Y)|0,o=o+Math.imul(g,K)|0;var bt=(c+(r=r+Math.imul(h,J)|0)|0)+((8191&(i=(i=i+Math.imul(h,$)|0)+Math.imul(f,J)|0))<<13)|0;c=((o=o+Math.imul(f,$)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(T,W),i=(i=Math.imul(T,G))+Math.imul(S,W)|0,o=Math.imul(S,G),r=r+Math.imul(_,z)|0,i=(i=i+Math.imul(_,H)|0)+Math.imul(w,z)|0,o=o+Math.imul(w,H)|0,r=r+Math.imul(m,Y)|0,i=(i=i+Math.imul(m,K)|0)+Math.imul(v,Y)|0,o=o+Math.imul(v,K)|0,r=r+Math.imul(d,J)|0,i=(i=i+Math.imul(d,$)|0)+Math.imul(g,J)|0,o=o+Math.imul(g,$)|0;var _t=(c+(r=r+Math.imul(h,Q)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(f,Q)|0))<<13)|0;c=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(O,W),i=(i=Math.imul(O,G))+Math.imul(E,W)|0,o=Math.imul(E,G),r=r+Math.imul(T,z)|0,i=(i=i+Math.imul(T,H)|0)+Math.imul(S,z)|0,o=o+Math.imul(S,H)|0,r=r+Math.imul(_,Y)|0,i=(i=i+Math.imul(_,K)|0)+Math.imul(w,Y)|0,o=o+Math.imul(w,K)|0,r=r+Math.imul(m,J)|0,i=(i=i+Math.imul(m,$)|0)+Math.imul(v,J)|0,o=o+Math.imul(v,$)|0,r=r+Math.imul(d,Q)|0,i=(i=i+Math.imul(d,tt)|0)+Math.imul(g,Q)|0,o=o+Math.imul(g,tt)|0;var wt=(c+(r=r+Math.imul(h,nt)|0)|0)+((8191&(i=(i=i+Math.imul(h,rt)|0)+Math.imul(f,nt)|0))<<13)|0;c=((o=o+Math.imul(f,rt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(I,W),i=(i=Math.imul(I,G))+Math.imul(P,W)|0,o=Math.imul(P,G),r=r+Math.imul(O,z)|0,i=(i=i+Math.imul(O,H)|0)+Math.imul(E,z)|0,o=o+Math.imul(E,H)|0,r=r+Math.imul(T,Y)|0,i=(i=i+Math.imul(T,K)|0)+Math.imul(S,Y)|0,o=o+Math.imul(S,K)|0,r=r+Math.imul(_,J)|0,i=(i=i+Math.imul(_,$)|0)+Math.imul(w,J)|0,o=o+Math.imul(w,$)|0,r=r+Math.imul(m,Q)|0,i=(i=i+Math.imul(m,tt)|0)+Math.imul(v,Q)|0,o=o+Math.imul(v,tt)|0,r=r+Math.imul(d,nt)|0,i=(i=i+Math.imul(d,rt)|0)+Math.imul(g,nt)|0,o=o+Math.imul(g,rt)|0;var At=(c+(r=r+Math.imul(h,ot)|0)|0)+((8191&(i=(i=i+Math.imul(h,st)|0)+Math.imul(f,ot)|0))<<13)|0;c=((o=o+Math.imul(f,st)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(N,W),i=(i=Math.imul(N,G))+Math.imul(C,W)|0,o=Math.imul(C,G),r=r+Math.imul(I,z)|0,i=(i=i+Math.imul(I,H)|0)+Math.imul(P,z)|0,o=o+Math.imul(P,H)|0,r=r+Math.imul(O,Y)|0,i=(i=i+Math.imul(O,K)|0)+Math.imul(E,Y)|0,o=o+Math.imul(E,K)|0,r=r+Math.imul(T,J)|0,i=(i=i+Math.imul(T,$)|0)+Math.imul(S,J)|0,o=o+Math.imul(S,$)|0,r=r+Math.imul(_,Q)|0,i=(i=i+Math.imul(_,tt)|0)+Math.imul(w,Q)|0,o=o+Math.imul(w,tt)|0,r=r+Math.imul(m,nt)|0,i=(i=i+Math.imul(m,rt)|0)+Math.imul(v,nt)|0,o=o+Math.imul(v,rt)|0,r=r+Math.imul(d,ot)|0,i=(i=i+Math.imul(d,st)|0)+Math.imul(g,ot)|0,o=o+Math.imul(g,st)|0;var Tt=(c+(r=r+Math.imul(h,at)|0)|0)+((8191&(i=(i=i+Math.imul(h,ct)|0)+Math.imul(f,at)|0))<<13)|0;c=((o=o+Math.imul(f,ct)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(L,W),i=(i=Math.imul(L,G))+Math.imul(k,W)|0,o=Math.imul(k,G),r=r+Math.imul(N,z)|0,i=(i=i+Math.imul(N,H)|0)+Math.imul(C,z)|0,o=o+Math.imul(C,H)|0,r=r+Math.imul(I,Y)|0,i=(i=i+Math.imul(I,K)|0)+Math.imul(P,Y)|0,o=o+Math.imul(P,K)|0,r=r+Math.imul(O,J)|0,i=(i=i+Math.imul(O,$)|0)+Math.imul(E,J)|0,o=o+Math.imul(E,$)|0,r=r+Math.imul(T,Q)|0,i=(i=i+Math.imul(T,tt)|0)+Math.imul(S,Q)|0,o=o+Math.imul(S,tt)|0,r=r+Math.imul(_,nt)|0,i=(i=i+Math.imul(_,rt)|0)+Math.imul(w,nt)|0,o=o+Math.imul(w,rt)|0,r=r+Math.imul(m,ot)|0,i=(i=i+Math.imul(m,st)|0)+Math.imul(v,ot)|0,o=o+Math.imul(v,st)|0,r=r+Math.imul(d,at)|0,i=(i=i+Math.imul(d,ct)|0)+Math.imul(g,at)|0,o=o+Math.imul(g,ct)|0;var St=(c+(r=r+Math.imul(h,ht)|0)|0)+((8191&(i=(i=i+Math.imul(h,ft)|0)+Math.imul(f,ht)|0))<<13)|0;c=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(B,W),i=(i=Math.imul(B,G))+Math.imul(U,W)|0,o=Math.imul(U,G),r=r+Math.imul(L,z)|0,i=(i=i+Math.imul(L,H)|0)+Math.imul(k,z)|0,o=o+Math.imul(k,H)|0,r=r+Math.imul(N,Y)|0,i=(i=i+Math.imul(N,K)|0)+Math.imul(C,Y)|0,o=o+Math.imul(C,K)|0,r=r+Math.imul(I,J)|0,i=(i=i+Math.imul(I,$)|0)+Math.imul(P,J)|0,o=o+Math.imul(P,$)|0,r=r+Math.imul(O,Q)|0,i=(i=i+Math.imul(O,tt)|0)+Math.imul(E,Q)|0,o=o+Math.imul(E,tt)|0,r=r+Math.imul(T,nt)|0,i=(i=i+Math.imul(T,rt)|0)+Math.imul(S,nt)|0,o=o+Math.imul(S,rt)|0,r=r+Math.imul(_,ot)|0,i=(i=i+Math.imul(_,st)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,st)|0,r=r+Math.imul(m,at)|0,i=(i=i+Math.imul(m,ct)|0)+Math.imul(v,at)|0,o=o+Math.imul(v,ct)|0,r=r+Math.imul(d,ht)|0,i=(i=i+Math.imul(d,ft)|0)+Math.imul(g,ht)|0,o=o+Math.imul(g,ft)|0;var Mt=(c+(r=r+Math.imul(h,dt)|0)|0)+((8191&(i=(i=i+Math.imul(h,gt)|0)+Math.imul(f,dt)|0))<<13)|0;c=((o=o+Math.imul(f,gt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(B,z),i=(i=Math.imul(B,H))+Math.imul(U,z)|0,o=Math.imul(U,H),r=r+Math.imul(L,Y)|0,i=(i=i+Math.imul(L,K)|0)+Math.imul(k,Y)|0,o=o+Math.imul(k,K)|0,r=r+Math.imul(N,J)|0,i=(i=i+Math.imul(N,$)|0)+Math.imul(C,J)|0,o=o+Math.imul(C,$)|0,r=r+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(P,Q)|0,o=o+Math.imul(P,tt)|0,r=r+Math.imul(O,nt)|0,i=(i=i+Math.imul(O,rt)|0)+Math.imul(E,nt)|0,o=o+Math.imul(E,rt)|0,r=r+Math.imul(T,ot)|0,i=(i=i+Math.imul(T,st)|0)+Math.imul(S,ot)|0,o=o+Math.imul(S,st)|0,r=r+Math.imul(_,at)|0,i=(i=i+Math.imul(_,ct)|0)+Math.imul(w,at)|0,o=o+Math.imul(w,ct)|0,r=r+Math.imul(m,ht)|0,i=(i=i+Math.imul(m,ft)|0)+Math.imul(v,ht)|0,o=o+Math.imul(v,ft)|0;var Ot=(c+(r=r+Math.imul(d,dt)|0)|0)+((8191&(i=(i=i+Math.imul(d,gt)|0)+Math.imul(g,dt)|0))<<13)|0;c=((o=o+Math.imul(g,gt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,r=Math.imul(B,Y),i=(i=Math.imul(B,K))+Math.imul(U,Y)|0,o=Math.imul(U,K),r=r+Math.imul(L,J)|0,i=(i=i+Math.imul(L,$)|0)+Math.imul(k,J)|0,o=o+Math.imul(k,$)|0,r=r+Math.imul(N,Q)|0,i=(i=i+Math.imul(N,tt)|0)+Math.imul(C,Q)|0,o=o+Math.imul(C,tt)|0,r=r+Math.imul(I,nt)|0,i=(i=i+Math.imul(I,rt)|0)+Math.imul(P,nt)|0,o=o+Math.imul(P,rt)|0,r=r+Math.imul(O,ot)|0,i=(i=i+Math.imul(O,st)|0)+Math.imul(E,ot)|0,o=o+Math.imul(E,st)|0,r=r+Math.imul(T,at)|0,i=(i=i+Math.imul(T,ct)|0)+Math.imul(S,at)|0,o=o+Math.imul(S,ct)|0,r=r+Math.imul(_,ht)|0,i=(i=i+Math.imul(_,ft)|0)+Math.imul(w,ht)|0,o=o+Math.imul(w,ft)|0;var Et=(c+(r=r+Math.imul(m,dt)|0)|0)+((8191&(i=(i=i+Math.imul(m,gt)|0)+Math.imul(v,dt)|0))<<13)|0;c=((o=o+Math.imul(v,gt)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(B,J),i=(i=Math.imul(B,$))+Math.imul(U,J)|0,o=Math.imul(U,$),r=r+Math.imul(L,Q)|0,i=(i=i+Math.imul(L,tt)|0)+Math.imul(k,Q)|0,o=o+Math.imul(k,tt)|0,r=r+Math.imul(N,nt)|0,i=(i=i+Math.imul(N,rt)|0)+Math.imul(C,nt)|0,o=o+Math.imul(C,rt)|0,r=r+Math.imul(I,ot)|0,i=(i=i+Math.imul(I,st)|0)+Math.imul(P,ot)|0,o=o+Math.imul(P,st)|0,r=r+Math.imul(O,at)|0,i=(i=i+Math.imul(O,ct)|0)+Math.imul(E,at)|0,o=o+Math.imul(E,ct)|0,r=r+Math.imul(T,ht)|0,i=(i=i+Math.imul(T,ft)|0)+Math.imul(S,ht)|0,o=o+Math.imul(S,ft)|0;var xt=(c+(r=r+Math.imul(_,dt)|0)|0)+((8191&(i=(i=i+Math.imul(_,gt)|0)+Math.imul(w,dt)|0))<<13)|0;c=((o=o+Math.imul(w,gt)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(B,Q),i=(i=Math.imul(B,tt))+Math.imul(U,Q)|0,o=Math.imul(U,tt),r=r+Math.imul(L,nt)|0,i=(i=i+Math.imul(L,rt)|0)+Math.imul(k,nt)|0,o=o+Math.imul(k,rt)|0,r=r+Math.imul(N,ot)|0,i=(i=i+Math.imul(N,st)|0)+Math.imul(C,ot)|0,o=o+Math.imul(C,st)|0,r=r+Math.imul(I,at)|0,i=(i=i+Math.imul(I,ct)|0)+Math.imul(P,at)|0,o=o+Math.imul(P,ct)|0,r=r+Math.imul(O,ht)|0,i=(i=i+Math.imul(O,ft)|0)+Math.imul(E,ht)|0,o=o+Math.imul(E,ft)|0;var It=(c+(r=r+Math.imul(T,dt)|0)|0)+((8191&(i=(i=i+Math.imul(T,gt)|0)+Math.imul(S,dt)|0))<<13)|0;c=((o=o+Math.imul(S,gt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(B,nt),i=(i=Math.imul(B,rt))+Math.imul(U,nt)|0,o=Math.imul(U,rt),r=r+Math.imul(L,ot)|0,i=(i=i+Math.imul(L,st)|0)+Math.imul(k,ot)|0,o=o+Math.imul(k,st)|0,r=r+Math.imul(N,at)|0,i=(i=i+Math.imul(N,ct)|0)+Math.imul(C,at)|0,o=o+Math.imul(C,ct)|0,r=r+Math.imul(I,ht)|0,i=(i=i+Math.imul(I,ft)|0)+Math.imul(P,ht)|0,o=o+Math.imul(P,ft)|0;var Pt=(c+(r=r+Math.imul(O,dt)|0)|0)+((8191&(i=(i=i+Math.imul(O,gt)|0)+Math.imul(E,dt)|0))<<13)|0;c=((o=o+Math.imul(E,gt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,r=Math.imul(B,ot),i=(i=Math.imul(B,st))+Math.imul(U,ot)|0,o=Math.imul(U,st),r=r+Math.imul(L,at)|0,i=(i=i+Math.imul(L,ct)|0)+Math.imul(k,at)|0,o=o+Math.imul(k,ct)|0,r=r+Math.imul(N,ht)|0,i=(i=i+Math.imul(N,ft)|0)+Math.imul(C,ht)|0,o=o+Math.imul(C,ft)|0;var Rt=(c+(r=r+Math.imul(I,dt)|0)|0)+((8191&(i=(i=i+Math.imul(I,gt)|0)+Math.imul(P,dt)|0))<<13)|0;c=((o=o+Math.imul(P,gt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,r=Math.imul(B,at),i=(i=Math.imul(B,ct))+Math.imul(U,at)|0,o=Math.imul(U,ct),r=r+Math.imul(L,ht)|0,i=(i=i+Math.imul(L,ft)|0)+Math.imul(k,ht)|0,o=o+Math.imul(k,ft)|0;var Nt=(c+(r=r+Math.imul(N,dt)|0)|0)+((8191&(i=(i=i+Math.imul(N,gt)|0)+Math.imul(C,dt)|0))<<13)|0;c=((o=o+Math.imul(C,gt)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,r=Math.imul(B,ht),i=(i=Math.imul(B,ft))+Math.imul(U,ht)|0,o=Math.imul(U,ft);var Ct=(c+(r=r+Math.imul(L,dt)|0)|0)+((8191&(i=(i=i+Math.imul(L,gt)|0)+Math.imul(k,dt)|0))<<13)|0;c=((o=o+Math.imul(k,gt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863;var jt=(c+(r=Math.imul(B,dt))|0)+((8191&(i=(i=Math.imul(B,gt))+Math.imul(U,dt)|0))<<13)|0;return c=((o=Math.imul(U,gt))+(i>>>13)|0)+(jt>>>26)|0,jt&=67108863,a[0]=yt,a[1]=mt,a[2]=vt,a[3]=bt,a[4]=_t,a[5]=wt,a[6]=At,a[7]=Tt,a[8]=St,a[9]=Mt,a[10]=Ot,a[11]=Et,a[12]=xt,a[13]=It,a[14]=Pt,a[15]=Rt,a[16]=Nt,a[17]=Ct,a[18]=jt,0!==c&&(a[19]=c,n.length++),n};function d(t,e,n){return(new g).mulp(t,e,n)}function g(t,e){this.x=t,this.y=e}Math.imul||(p=f),o.prototype.mulTo=function(t,e){var n=this.length+t.length;return 10===this.length&&10===t.length?p(this,t,e):n<63?f(this,t,e):n<1024?function(t,e,n){n.negative=e.negative^t.negative,n.length=t.length+e.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var s=i;i=0;for(var u=67108863&r,a=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=a;c++){var l=o-c,h=(0|t.words[l])*(0|e.words[c]),f=67108863&h;u=67108863&(f=f+u|0),i+=(s=(s=s+(h/67108864|0)|0)+(f>>>26)|0)>>>26,s&=67108863}n.words[o]=u,r=s,s=i}return 0!==r?n.words[o]=r:n.length--,n.strip()}(this,t,e):d(this,t,e)},g.prototype.makeRBT=function(t){for(var e=new Array(t),n=o.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,n,t);return e},g.prototype.revBin=function(t,e,n){if(0===t||t===n-1)return t;for(var r=0,i=0;i<e;i++)r|=(1&t)<<e-i-1,t>>=1;return r},g.prototype.permute=function(t,e,n,r,i,o){for(var s=0;s<o;s++)r[s]=e[t[s]],i[s]=n[t[s]]},g.prototype.transform=function(t,e,n,r,i,o){this.permute(o,t,e,n,r,i);for(var s=1;s<i;s<<=1)for(var u=s<<1,a=Math.cos(2*Math.PI/u),c=Math.sin(2*Math.PI/u),l=0;l<i;l+=u)for(var h=a,f=c,p=0;p<s;p++){var d=n[l+p],g=r[l+p],y=n[l+p+s],m=r[l+p+s],v=h*y-f*m;m=h*m+f*y,y=v,n[l+p]=d+y,r[l+p]=g+m,n[l+p+s]=d-y,r[l+p+s]=g-m,p!==u&&(v=a*h-c*f,f=a*f+c*h,h=v)}},g.prototype.guessLen13b=function(t,e){var n=1|Math.max(e,t),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},g.prototype.conjugate=function(t,e,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=t[r];t[r]=t[n-r-1],t[n-r-1]=i,i=e[r],e[r]=-e[n-r-1],e[n-r-1]=-i}},g.prototype.normalize13b=function(t,e){for(var n=0,r=0;r<e/2;r++){var i=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+n;t[r]=67108863&i,n=i<67108864?0:i/67108864|0}return t},g.prototype.convert13b=function(t,e,n,i){for(var o=0,s=0;s<e;s++)o+=0|t[s],n[2*s]=8191&o,o>>>=13,n[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<i;++s)n[s]=0;r(0===o),r(0==(-8192&o))},g.prototype.stub=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=0;return e},g.prototype.mulp=function(t,e,n){var r=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(r),o=this.stub(r),s=new Array(r),u=new Array(r),a=new Array(r),c=new Array(r),l=new Array(r),h=new Array(r),f=n.words;f.length=r,this.convert13b(t.words,t.length,s,r),this.convert13b(e.words,e.length,c,r),this.transform(s,o,u,a,r,i),this.transform(c,o,l,h,r,i);for(var p=0;p<r;p++){var d=u[p]*l[p]-a[p]*h[p];a[p]=u[p]*h[p]+a[p]*l[p],u[p]=d}return this.conjugate(u,a,r),this.transform(u,a,f,o,r,i),this.conjugate(f,o,r),this.normalize13b(f,r),n.negative=t.negative^e.negative,n.length=t.length+e.length,n.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),d(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){r("number"==typeof t),r(t<67108864);for(var e=0,n=0;n<this.length;n++){var i=(0|this.words[n])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[n]=67108863&o}return 0!==e&&(this.words[n]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),n=0;n<e.length;n++){var r=n/26|0,i=n%26;e[n]=(t.words[r]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var n=this,r=0;r<e.length&&0===e[r];r++,n=n.sqr());if(++r<e.length)for(var i=n.sqr();r<e.length;r++,i=i.sqr())0!==e[r]&&(n=n.mul(i));return n},o.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,n=t%26,i=(t-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(e=0;e<this.length;e++){var u=this.words[e]&o,a=(0|this.words[e])-u<<n;this.words[e]=a|s,s=u>>>26-n}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,n){var i;r("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),u=67108863^67108863>>>o<<o,a=n;if(i-=s,i=Math.max(0,i),a){for(var c=0;c<s;c++)a.words[c]=this.words[c];a.length=s}if(0===s);else if(this.length>s)for(this.length-=s,c=0;c<this.length;c++)this.words[c]=this.words[c+s];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var h=0|this.words[c];this.words[c]=l<<26-o|h>>>o,l=h&u}return a&&0!==l&&(a.words[a.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,n){return r(0===this.negative),this.iushrn(t,e,n)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26,i=1<<e;return!(this.length<=n)&&!!(this.words[n]&i)},o.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==e&&n++,this.length=Math.min(n,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,n){var i,o,s=t.length+n;this._expand(s);var u=0;for(i=0;i<t.length;i++){o=(0|this.words[i+n])+u;var a=(0|t.words[i])*e;u=((o-=67108863&a)>>26)-(a/67108864|0),this.words[i+n]=67108863&o}for(;i<this.length-n;i++)u=(o=(0|this.words[i+n])+u)>>26,this.words[i+n]=67108863&o;if(0===u)return this.strip();for(r(-1===u),u=0,i=0;i<this.length;i++)u=(o=-(0|this.words[i])+u)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var n=(this.length,t.length),r=this.clone(),i=t,s=0|i.words[i.length-1];0!==(n=26-this._countBits(s))&&(i=i.ushln(n),r.iushln(n),s=0|i.words[i.length-1]);var u,a=r.length-i.length;if("mod"!==e){(u=new o(null)).length=a+1,u.words=new Array(u.length);for(var c=0;c<u.length;c++)u.words[c]=0}var l=r.clone()._ishlnsubmul(i,1,a);0===l.negative&&(r=l,u&&(u.words[a]=1));for(var h=a-1;h>=0;h--){var f=67108864*(0|r.words[i.length+h])+(0|r.words[i.length+h-1]);for(f=Math.min(f/s|0,67108863),r._ishlnsubmul(i,f,h);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(i,1,h),r.isZero()||(r.negative^=1);u&&(u.words[h]=f)}return u&&u.strip(),r.strip(),"div"!==e&&0!==n&&r.iushrn(n),{div:u||null,mod:r}},o.prototype.divmod=function(t,e,n){return r(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(u=this.neg().divmod(t,e),"mod"!==e&&(i=u.div.neg()),"div"!==e&&(s=u.mod.neg(),n&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(u=this.divmod(t.neg(),e),"mod"!==e&&(i=u.div.neg()),{div:i,mod:u.mod}):0!=(this.negative&t.negative)?(u=this.neg().divmod(t.neg(),e),"div"!==e&&(s=u.mod.neg(),n&&0!==s.negative&&s.isub(t)),{div:u.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,s,u},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var n=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),i=t.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){r(t<=67108863);for(var e=(1<<26)%t,n=0,i=this.length-1;i>=0;i--)n=(e*n+(0|this.words[i]))%t;return n},o.prototype.idivn=function(t){r(t<=67108863);for(var e=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*e;this.words[n]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),s=new o(0),u=new o(0),a=new o(1),c=0;e.isEven()&&n.isEven();)e.iushrn(1),n.iushrn(1),++c;for(var l=n.clone(),h=e.clone();!e.isZero();){for(var f=0,p=1;0==(e.words[0]&p)&&f<26;++f,p<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(l),s.isub(h)),i.iushrn(1),s.iushrn(1);for(var d=0,g=1;0==(n.words[0]&g)&&d<26;++d,g<<=1);if(d>0)for(n.iushrn(d);d-- >0;)(u.isOdd()||a.isOdd())&&(u.iadd(l),a.isub(h)),u.iushrn(1),a.iushrn(1);e.cmp(n)>=0?(e.isub(n),i.isub(u),s.isub(a)):(n.isub(e),u.isub(i),a.isub(s))}return{a:u,b:a,gcd:n.iushln(c)}},o.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,s=new o(1),u=new o(0),a=n.clone();e.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,l=1;0==(e.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(e.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(a),s.iushrn(1);for(var h=0,f=1;0==(n.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(n.iushrn(h);h-- >0;)u.isOdd()&&u.iadd(a),u.iushrn(1);e.cmp(n)>=0?(e.isub(n),s.isub(u)):(n.isub(e),u.isub(s))}return(i=0===e.cmpn(1)?s:u).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),n=t.clone();e.negative=0,n.negative=0;for(var r=0;e.isEven()&&n.isEven();r++)e.iushrn(1),n.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=e.cmp(n);if(i<0){var o=e;e=n,n=o}else if(0===i||0===n.cmpn(1))break;e.isub(n)}return n.iushln(r)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,n=(t-e)/26,i=1<<e;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var o=i,s=n;0!==o&&s<this.length;s++){var u=0|this.words[s];o=(u+=o)>>>26,u&=67108863,this.words[s]=u}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)e=1;else{n&&(t=-t),r(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|t.words[n];if(r!==i){r<i?e=-1:r>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new A(t)},o.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var y={k256:null,p224:null,p192:null,p25519:null};function m(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){m.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){m.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){m.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function w(){m.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function A(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function T(t){A.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}m.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},m.prototype.ireduce=function(t){var e,n=t;do{this.split(n,this.tmp),e=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):n.strip(),n},m.prototype.split=function(t,e){t.iushrn(this.n,0,e)},m.prototype.imulK=function(t){return t.imul(this.k)},i(v,m),v.prototype.split=function(t,e){for(var n=Math.min(t.length,9),r=0;r<n;r++)e.words[r]=t.words[r];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var i=t.words[9];for(e.words[e.length++]=4194303&i,r=10;r<t.length;r++){var o=0|t.words[r];t.words[r-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,t.words[r-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,n=0;n<t.length;n++){var r=0|t.words[n];e+=977*r,t.words[n]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(b,m),i(_,m),i(w,m),w.prototype.imulK=function(t){for(var e=0,n=0;n<t.length;n++){var r=19*(0|t.words[n])+e,i=67108863&r;r>>>=26,t.words[n]=i,e=r}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(y[t])return y[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new b;else if("p192"===t)e=new _;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new w}return y[t]=e,e},A.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},A.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},A.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},A.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},A.prototype.add=function(t,e){this._verify2(t,e);var n=t.add(e);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},A.prototype.iadd=function(t,e){this._verify2(t,e);var n=t.iadd(e);return n.cmp(this.m)>=0&&n.isub(this.m),n},A.prototype.sub=function(t,e){this._verify2(t,e);var n=t.sub(e);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},A.prototype.isub=function(t,e){this._verify2(t,e);var n=t.isub(e);return n.cmpn(0)<0&&n.iadd(this.m),n},A.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},A.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},A.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},A.prototype.isqr=function(t){return this.imul(t,t.clone())},A.prototype.sqr=function(t){return this.mul(t,t)},A.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var n=this.m.add(new o(1)).iushrn(2);return this.pow(t,n)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);r(!i.isZero());var u=new o(1).toRed(this),a=u.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,c).cmp(a);)l.redIAdd(a);for(var h=this.pow(l,i),f=this.pow(t,i.addn(1).iushrn(1)),p=this.pow(t,i),d=s;0!==p.cmp(u);){for(var g=p,y=0;0!==g.cmp(u);y++)g=g.redSqr();r(y<d);var m=this.pow(h,new o(1).iushln(d-y-1));f=f.redMul(m),h=m.redSqr(),p=p.redMul(h),d=y}return f},A.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},A.prototype.pow=function(t,e){if(e.isZero())return new o(1);if(0===e.cmpn(1))return t.clone();var n=new Array(16);n[0]=new o(1).toRed(this),n[1]=t;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],t);var i=n[0],s=0,u=0,a=e.bitLength()%26;for(0===a&&(a=26),r=e.length-1;r>=0;r--){for(var c=e.words[r],l=a-1;l>=0;l--){var h=c>>l&1;i!==n[0]&&(i=this.sqr(i)),0!==h||0!==s?(s<<=1,s|=h,(4===++u||0===r&&0===l)&&(i=this.mul(i,n[s]),u=0,s=0)):u=0}a=26}return i},A.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},A.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new T(t)},i(T,A),T.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},T.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},T.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},T.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var n=t.mul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},T.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===t||t,this)}).call(this,n(47)(t))},function(t,e,n){"use strict";var r=n(286),i=n(118),o=new r(0),s=new r(-1),u={noether:"0",wei:"1",kwei:"1000",Kwei:"1000",babbage:"1000",femtoether:"1000",mwei:"1000000",Mwei:"1000000",lovelace:"1000000",picoether:"1000000",gwei:"1000000000",Gwei:"1000000000",shannon:"1000000000",nanoether:"1000000000",nano:"1000000000",szabo:"1000000000000",microether:"1000000000000",micro:"1000000000000",finney:"1000000000000000",milliether:"1000000000000000",milli:"1000000000000000",ether:"1000000000000000000",kether:"1000000000000000000000",grand:"1000000000000000000000",mether:"1000000000000000000000000",gether:"1000000000000000000000000000",tether:"1000000000000000000000000000000"};function a(t){var e=t?t.toLowerCase():"ether",n=u[e];if("string"!=typeof n)throw new Error("[ethjs-unit] the unit provided "+t+" doesn't exists, please use the one of the following units "+JSON.stringify(u,null,2));return new r(n,10)}function c(t){if("string"==typeof t){if(!t.match(/^-?[0-9.]+$/))throw new Error("while converting number to string, invalid number value '"+t+"', should be a number matching (^-?[0-9.]+).");return t}if("number"==typeof t)return String(t);if("object"==typeof t&&t.toString&&(t.toTwos||t.dividedToIntegerBy))return t.toPrecision?String(t.toPrecision()):t.toString(10);throw new Error("while converting number to string, invalid number value '"+t+"' type "+typeof t+".")}t.exports={unitMap:u,numberToString:c,getValueOfUnit:a,fromWei:function(t,e,n){var r=i(t),c=r.lt(o),l=a(e),h=u[e].length-1||1,f=n||{};c&&(r=r.mul(s));for(var p=r.mod(l).toString(10);p.length<h;)p="0"+p;f.pad||(p=p.match(/^([0-9]*[1-9]|0)(0*)/)[1]);var d=r.div(l).toString(10);f.commify&&(d=d.replace(/\B(?=(\d{3})+(?!\d))/g,","));var g=d+("0"==p?"":"."+p);return c&&(g="-"+g),g},toWei:function(t,e){var n=c(t),i=a(e),o=u[e].length-1||1,l="-"===n.substring(0,1);if(l&&(n=n.substring(1)),"."===n)throw new Error("[ethjs-unit] while converting number "+t+" to wei, invalid value");var h=n.split(".");if(h.length>2)throw new Error("[ethjs-unit] while converting number "+t+" to wei,  too many decimal points");var f=h[0],p=h[1];if(f||(f="0"),p||(p="0"),p.length>o)throw new Error("[ethjs-unit] while converting number "+t+" to wei, too many decimal places");for(;p.length<o;)p+="0";f=new r(f),p=new r(p);var d=f.mul(i).add(p);return l&&(d=d.mul(s)),new r(d.toString(10),10)}}},function(t,e,n){var r=n(72),i=n(287),o=n(117),s=n(277),u=n(276),a=function(t){if(!o.isHexStrict(t))throw new Error("The parameter must be a valid HEX string.");var e="",n=0,r=t.length;for("0x"===t.substring(0,2)&&(n=2);n<r;n+=2){var i=parseInt(t.substr(n,2),16);e+=String.fromCharCode(i)}return e},c=function(t){if(!t)return"0x00";for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n).toString(16);e+=r.length<2?"0"+r:r}return"0x"+e},l=function(t){if(t=t?t.toLowerCase():"ether",!i.unitMap[t])throw new Error('This unit "'+t+"\" doesn't exist, please use the one of the following units"+JSON.stringify(i.unitMap,null,2));return t};t.exports={_fireError:function(t,e,n,i){return!r.isObject(t)||t instanceof Error||!t.data||((r.isObject(t.data)||r.isArray(t.data))&&(t.data=JSON.stringify(t.data,null,2)),t=t.message+"\n"+t.data),r.isString(t)&&(t=new Error(t)),r.isFunction(i)&&i(t),r.isFunction(n)&&((e&&r.isFunction(e.listeners)&&e.listeners("error").length||r.isFunction(i))&&e.catch(function(){}),setTimeout(function(){n(t)},1)),e&&r.isFunction(e.emit)&&setTimeout(function(){e.emit("error",t),e.removeAllListeners()},1),e},_jsonInterfaceMethodToString:function(t){if(r.isObject(t)&&t.name&&-1!==t.name.indexOf("("))return t.name;var e=t.inputs.map(function(t){return t.type}).join(",");return t.name+"("+e+")"},randomHex:u,_:r,BN:o.BN,isBN:o.isBN,isBigNumber:o.isBigNumber,isHex:o.isHex,isHexStrict:o.isHexStrict,sha3:o.sha3,keccak256:o.sha3,soliditySha3:s,isAddress:o.isAddress,checkAddressChecksum:o.checkAddressChecksum,toChecksumAddress:function(t){if(void 0===t)return"";if(!/^(0x)?[0-9a-f]{40}$/i.test(t))throw new Error('Given address "'+t+'" is not a valid Ethereum address.');t=t.toLowerCase().replace(/^0x/i,"");for(var e=o.sha3(t).replace(/^0x/i,""),n="0x",r=0;r<t.length;r++)parseInt(e[r],16)>7?n+=t[r].toUpperCase():n+=t[r];return n},toHex:o.toHex,toBN:o.toBN,bytesToHex:o.bytesToHex,hexToBytes:o.hexToBytes,hexToNumberString:o.hexToNumberString,hexToNumber:o.hexToNumber,toDecimal:o.hexToNumber,numberToHex:o.numberToHex,fromDecimal:o.numberToHex,hexToUtf8:o.hexToUtf8,hexToString:o.hexToUtf8,toUtf8:o.hexToUtf8,utf8ToHex:o.utf8ToHex,stringToHex:o.utf8ToHex,fromUtf8:o.utf8ToHex,hexToAscii:a,toAscii:a,asciiToHex:c,fromAscii:c,unitMap:i.unitMap,toWei:function(t,e){if(e=l(e),!o.isBN(t)&&!r.isString(t))throw new Error("Please pass numbers as strings or BigNumber objects to avoid precision errors.");return o.isBN(t)?i.toWei(t,e):i.toWei(t,e).toString(10)},fromWei:function(t,e){if(e=l(e),!o.isBN(t)&&!r.isString(t))throw new Error("Please pass numbers as strings or BigNumber objects to avoid precision errors.");return o.isBN(t)?i.fromWei(t,e):i.fromWei(t,e).toString(10)},padLeft:o.leftPad,leftPad:o.leftPad,padRight:o.rightPad,rightPad:o.rightPad,toTwosComplement:o.toTwosComplement}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(39);e.Hashable=r.Hashable;var i=n(119);e.MerkleTree=i.MerkleTree;var o=n(38);e.ProofOfStake=o.ProofOfStake;var s=n(27);e.Signature=s.Signature;var u=n(26);e.Aggregate=u.Aggregate;var a=n(45);e.BalanceMarker=a.BalanceMarker;var c=n(69);e.Deposit=c.Deposit;var l=n(46);e.Transfer=l.Transfer;var h=n(270);e.Balance=h.Balance;var f=n(30);e.Round=f.Round;var p=n(68);e.Wallet=p.Wallet;var d=n(267);e.RoundState=d.RoundState;var g=n(114);e.HubState=g.HubState;var y=n(266);e.ChainConnectivity=y.ChainConnectivity;var m=n(265);e.Web3Connectivity=m.Web3Connectivity;var v=n(113);e.ContractState=v.ContractState;var b=n(112);e.WalletState=b.WalletState;var _=n(15);e.TYPES=_.TYPES;var w=n(264);e.WalletClassesContainerFactory=w.WalletClassesContainerFactory;var A=n(235);e.LQDClient=A.LQDClient;var T=n(73);e.DisputeService=T.DisputeService;var S=n(104);e.PAYMENT_HUB_ABI=S.PAYMENT_HUB_ABI;var M=n(6);e.Web3Utils=M.Web3Utils;var O=n(6);e.JSONbig=O.JSONbig}])});