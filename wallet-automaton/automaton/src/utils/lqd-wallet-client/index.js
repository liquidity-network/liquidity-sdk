!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("lqd-wallet-client",[],e):"object"==typeof exports?exports["lqd-wallet-client"]=e():t["lqd-wallet-client"]=e()}(global,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n.w={},n(n.s=118)}([function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(60),o=n(98),u=n(5),s=n(57),a=n(59),c=n(58),h=function(t){function e(e,n,r){var i=t.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=o.empty;break;case 1:if(!e){i.destination=o.empty;break}if("object"==typeof e){if(f(e)){var u=e[s.rxSubscriber]();i.syncErrorThrowable=u.syncErrorThrowable,i.destination=u,u.add(i)}else i.syncErrorThrowable=!0,i.destination=new l(i,e);break}default:i.syncErrorThrowable=!0,i.destination=new l(i,e,n,r)}return i}return r(e,t),e.prototype[s.rxSubscriber]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(u.Subscription);e.Subscriber=h;var l=function(t){function e(e,n,r,u){var s,a=t.call(this)||this;a._parentSubscriber=e;var c=a;return i.isFunction(n)?s=n:n&&(s=n.next,r=n.error,u=n.complete,n!==o.empty&&(c=Object.create(n),i.isFunction(c.unsubscribe)&&a.add(c.unsubscribe.bind(c)),c.unsubscribe=a.unsubscribe.bind(a))),a._context=c,a._next=s,a._error=r,a._complete=u,a}return r(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;a.config.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=a.config.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):c.hostReportError(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;c.hostReportError(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};a.config.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),a.config.useDeprecatedSynchronousErrorHandling)throw t;c.hostReportError(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!a.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return a.config.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(c.hostReportError(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(h);function f(t){return t instanceof h||"syncErrorThrowable"in t&&t[s.rxSubscriber]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(228),i=n(96);e.subscribeToResult=function(t,e,n,o){var u=new r.InnerSubscriber(t,n,o);return i.subscribeTo(e)(u)}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(n(0).Subscriber);e.OuterSubscriber=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NAMED_TAG="named",e.NAME_TAG="name",e.UNMANAGED_TAG="unmanaged",e.OPTIONAL_TAG="optional",e.INJECT_TAG="inject",e.MULTI_INJECT_TAG="multi_inject",e.TAGGED="inversify:tagged",e.TAGGED_PROP="inversify:tagged_props",e.PARAM_TYPES="inversify:paramtypes",e.DESIGN_PARAM_TYPES="design:paramtypes",e.POST_CONSTRUCT="post_construct"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(227),i=n(34),o=n(95),u=n(59),s=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var i=this.operator,o=r.toSubscriber(t,e,n);if(i?i.call(o,this.source):o.add(this.source||u.config.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),u.config.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){u.config.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=a(e))(function(e,r){var i;i=n.subscribe(function(e){try{t(e)}catch(t){r(t),i&&i.unsubscribe()}},r,e)})},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[i.observable]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:o.pipeFromArray(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=a(t))(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})},t.create=function(e){return new t(e)},t}();function a(t){if(t||(t=u.config.Promise||Promise),!t)throw new Error("no Promise impl found");return t}e.Observable=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(18),i=n(97),o=n(60),u=n(12),s=n(11),a=n(229),c=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,c=this._parents,l=this._unsubscribe,f=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var p=-1,d=c?c.length:0;n;)n.remove(this),n=++p<d&&c[p]||null;if(o.isFunction(l))u.tryCatch(l).call(this)===s.errorObject&&(e=!0,t=t||(s.errorObject.e instanceof a.UnsubscriptionError?h(s.errorObject.e.errors):[s.errorObject.e]));if(r.isArray(f))for(p=-1,d=f.length;++p<d;){var y=f[p];if(i.isObject(y))if(u.tryCatch(y.unsubscribe).call(y)===s.errorObject){e=!0,t=t||[];var v=s.errorObject.e;v instanceof a.UnsubscriptionError?t=t.concat(h(v.errors)):t.push(v)}}if(e)throw new a.UnsubscriptionError(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;e&&e!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function h(t){return t.reduce(function(t,e){return t.concat(e instanceof a.UnsubscriptionError?e.errors:e)},[])}e.Subscription=c},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(4),o=n(0),u=n(5),s=n(49),a=n(76),c=n(57),h=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return r(e,t),e}(o.Subscriber);e.SubjectSubscriber=h;var l=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return r(e,t),e.prototype[c.rxSubscriber]=function(){return new h(this)},e.prototype.lift=function(t){var e=new f(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new s.ObjectUnsubscribedError;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new s.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new s.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new s.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),u.Subscription.EMPTY):this.isStopped?(t.complete(),u.Subscription.EMPTY):(this.observers.push(t),new a.SubjectSubscription(this,t))},e.prototype.asObservable=function(){var t=new i.Observable;return t.source=this,t},e.create=function(t,e){return new f(t,e)},e}(i.Observable);e.Subject=l;var f=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return r(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):u.Subscription.EMPTY},e}(l);e.AnonymousSubject=f},function(t,e,n){"use strict";function r(t){return 0===t.indexOf("0x")?t.substring(2):t}Object.defineProperty(e,"__esModule",{value:!0}),e.remove0xPrefix=r,e.add0xPrefix=function(t){return 0===t.indexOf("0x")?t:"0x"+t},e.isSameHexValue=function(t,e){return r(t).toLowerCase()==r(e).toLowerCase()},e.Web3Utils=n(282),e.JSONbig=n(270),e.EMPTY_HASH="0x0000000000000000000000000000000000000000000000000000000000000000"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",e.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",e.NULL_ARGUMENT="NULL argument",e.KEY_NOT_FOUND="Key Not Found",e.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",e.CANNOT_UNBIND="Could not unbind serviceIdentifier:",e.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",e.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",e.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",e.UNDEFINED_INJECT_ANNOTATION=function(t){return"@inject called with undefined this could mean that the class "+t+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},e.CIRCULAR_DEPENDENCY="Circular dependency found:",e.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",e.INVALID_BINDING_TYPE="Invalid binding type:",e.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",e.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",e.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",e.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",e.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",e.ARGUMENTS_LENGTH_MISMATCH_1="The number of constructor arguments in the derived class ",e.ARGUMENTS_LENGTH_MISMATCH_2=" must be >= than the number of constructor arguments of its base class.",e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",e.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",e.POST_CONSTRUCT_ERROR=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"@postConstruct error in class "+t[0]+": "+t[1]},e.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"It looks like there is a circular dependency in one of the '"+t[0]+"' bindings. Please investigate bindings withservice identifier '"+t[1]+"'."},e.STACK_OVERFLOW="Maximum call stack size exceeded"},function(t,e,n){"use strict";n.r(e),n.d(e,"BigNumber",function(){return M});var r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,o=Math.floor,u="[BigNumber Error] ",s=u+"Number primitive has more than 15 significant digits: ",a=1e14,c=14,h=9007199254740991,l=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],f=1e7,p=1e9;function d(t){var e=0|t;return t>0||t===e?e:e-1}function y(t){for(var e,n,r=1,i=t.length,o=t[0]+"";r<i;){for(e=t[r++]+"",n=c-e.length;n--;e="0"+e);o+=e}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function v(t,e){var n,r,i=t.c,o=e.c,u=t.s,s=e.s,a=t.e,c=e.e;if(!u||!s)return null;if(n=i&&!i[0],r=o&&!o[0],n||r)return n?r?0:-s:u;if(u!=s)return u;if(n=u<0,r=a==c,!i||!o)return r?0:!i^n?1:-1;if(!r)return a>c^n?1:-1;for(s=(a=i.length)<(c=o.length)?a:c,u=0;u<s;u++)if(i[u]!=o[u])return i[u]>o[u]^n?1:-1;return a==c?0:a>c^n?1:-1}function m(t,e,n,r){if(t<e||t>n||t!==(t<0?i(t):o(t)))throw Error(u+(r||"Argument")+("number"==typeof t?t<e||t>n?" out of range: ":" not an integer: ":" not a primitive number: ")+t)}function g(t){return"[object Array]"==Object.prototype.toString.call(t)}function b(t){var e=t.c.length-1;return d(t.e/c)==e&&t.c[e]%2!=0}function _(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function w(t,e,n){var r,i;if(e<0){for(i=n+".";++e;i+=n);t=i+t}else if(++e>(r=t.length)){for(i=n,e-=r;--e;i+=n);t+=i}else e<r&&(t=t.slice(0,e)+"."+t.slice(e));return t}var M=function t(e){var n,M,O,S=D.prototype={constructor:D,toString:null,valueOf:null},A=new D(1),E=20,T=4,x=-7,P=21,I=-1e7,R=1e7,N=!1,j=1,C=0,k={decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:"Â ",fractionGroupSize:0},L="0123456789abcdefghijklmnopqrstuvwxyz";function D(t,e){var n,i,u,a,l,f,p,d,y=this;if(!(y instanceof D))return new D(t,e);if(null==e){if(t instanceof D)return y.s=t.s,y.e=t.e,void(y.c=(t=t.c)?t.slice():t);if((f="number"==typeof t)&&0*t==0){if(y.s=1/t<0?(t=-t,-1):1,t===~~t){for(a=0,l=t;l>=10;l/=10,a++);return y.e=a,void(y.c=[t])}d=t+""}else{if(!r.test(d=t+""))return O(y,d,f);y.s=45==d.charCodeAt(0)?(d=d.slice(1),-1):1}(a=d.indexOf("."))>-1&&(d=d.replace(".","")),(l=d.search(/e/i))>0?(a<0&&(a=l),a+=+d.slice(l+1),d=d.substring(0,l)):a<0&&(a=d.length)}else{if(m(e,2,L.length,"Base"),d=t+"",10==e)return F(y=new D(t instanceof D?t:d),E+y.e+1,T);if(f="number"==typeof t){if(0*t!=0)return O(y,d,f,e);if(y.s=1/t<0?(d=d.slice(1),-1):1,D.DEBUG&&d.replace(/^0\.0*|\./,"").length>15)throw Error(s+t);f=!1}else y.s=45===d.charCodeAt(0)?(d=d.slice(1),-1):1;for(n=L.slice(0,e),a=l=0,p=d.length;l<p;l++)if(n.indexOf(i=d.charAt(l))<0){if("."==i){if(l>a){a=p;continue}}else if(!u&&(d==d.toUpperCase()&&(d=d.toLowerCase())||d==d.toLowerCase()&&(d=d.toUpperCase()))){u=!0,l=-1,a=0;continue}return O(y,t+"",f,e)}(a=(d=M(d,e,10,y.s)).indexOf("."))>-1?d=d.replace(".",""):a=d.length}for(l=0;48===d.charCodeAt(l);l++);for(p=d.length;48===d.charCodeAt(--p););if(d=d.slice(l,++p)){if(p-=l,f&&D.DEBUG&&p>15&&(t>h||t!==o(t)))throw Error(s+y.s*t);if((a=a-l-1)>R)y.c=y.e=null;else if(a<I)y.c=[y.e=0];else{if(y.e=a,y.c=[],l=(a+1)%c,a<0&&(l+=c),l<p){for(l&&y.c.push(+d.slice(0,l)),p-=c;l<p;)y.c.push(+d.slice(l,l+=c));d=d.slice(l),l=c-d.length}else l-=p;for(;l--;d+="0");y.c.push(+d)}}else y.c=[y.e=0]}function B(t,e,n,r){var i,o,u,s,a;if(null==n?n=T:m(n,0,8),!t.c)return t.toString();if(i=t.c[0],u=t.e,null==e)a=y(t.c),a=1==r||2==r&&u<=x?_(a,u):w(a,u,"0");else if(o=(t=F(new D(t),e,n)).e,s=(a=y(t.c)).length,1==r||2==r&&(e<=o||o<=x)){for(;s<e;a+="0",s++);a=_(a,o)}else if(e-=u,a=w(a,o,"0"),o+1>s){if(--e>0)for(a+=".";e--;a+="0");}else if((e+=o-s)>0)for(o+1==s&&(a+=".");e--;a+="0");return t.s<0&&i?"-"+a:a}function U(t,e){var n,r,i=0;for(g(t[0])&&(t=t[0]),n=new D(t[0]);++i<t.length;){if(!(r=new D(t[i])).s){n=r;break}e.call(n,r)&&(n=r)}return n}function W(t,e,n){for(var r=1,i=e.length;!e[--i];e.pop());for(i=e[0];i>=10;i/=10,r++);return(n=r+n*c-1)>R?t.c=t.e=null:n<I?t.c=[t.e=0]:(t.e=n,t.c=e),t}function F(t,e,n,r){var u,s,h,f,p,d,y,v=t.c,m=l;if(v){t:{for(u=1,f=v[0];f>=10;f/=10,u++);if((s=e-u)<0)s+=c,h=e,y=(p=v[d=0])/m[u-h-1]%10|0;else if((d=i((s+1)/c))>=v.length){if(!r)break t;for(;v.length<=d;v.push(0));p=y=0,u=1,h=(s%=c)-c+1}else{for(p=f=v[d],u=1;f>=10;f/=10,u++);y=(h=(s%=c)-c+u)<0?0:p/m[u-h-1]%10|0}if(r=r||e<0||null!=v[d+1]||(h<0?p:p%m[u-h-1]),r=n<4?(y||r)&&(0==n||n==(t.s<0?3:2)):y>5||5==y&&(4==n||r||6==n&&(s>0?h>0?p/m[u-h]:0:v[d-1])%10&1||n==(t.s<0?8:7)),e<1||!v[0])return v.length=0,r?(e-=t.e+1,v[0]=m[(c-e%c)%c],t.e=-e||0):v[0]=t.e=0,t;if(0==s?(v.length=d,f=1,d--):(v.length=d+1,f=m[c-s],v[d]=h>0?o(p/m[u-h]%m[h])*f:0),r)for(;;){if(0==d){for(s=1,h=v[0];h>=10;h/=10,s++);for(h=v[0]+=f,f=1;h>=10;h/=10,f++);s!=f&&(t.e++,v[0]==a&&(v[0]=1));break}if(v[d]+=f,v[d]!=a)break;v[d--]=0,f=1}for(s=v.length;0===v[--s];v.pop());}t.e>R?t.c=t.e=null:t.e<I&&(t.c=[t.e=0])}return t}return D.clone=t,D.ROUND_UP=0,D.ROUND_DOWN=1,D.ROUND_CEIL=2,D.ROUND_FLOOR=3,D.ROUND_HALF_UP=4,D.ROUND_HALF_DOWN=5,D.ROUND_HALF_EVEN=6,D.ROUND_HALF_CEIL=7,D.ROUND_HALF_FLOOR=8,D.EUCLID=9,D.config=D.set=function(t){var e,n;if(null!=t){if("object"!=typeof t)throw Error(u+"Object expected: "+t);if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(m(n=t[e],0,p,e),E=n),t.hasOwnProperty(e="ROUNDING_MODE")&&(m(n=t[e],0,8,e),T=n),t.hasOwnProperty(e="EXPONENTIAL_AT")&&(g(n=t[e])?(m(n[0],-p,0,e),m(n[1],0,p,e),x=n[0],P=n[1]):(m(n,-p,p,e),x=-(P=n<0?-n:n))),t.hasOwnProperty(e="RANGE"))if(g(n=t[e]))m(n[0],-p,-1,e),m(n[1],1,p,e),I=n[0],R=n[1];else{if(m(n,-p,p,e),!n)throw Error(u+e+" cannot be zero: "+n);I=-(R=n<0?-n:n)}if(t.hasOwnProperty(e="CRYPTO")){if((n=t[e])!==!!n)throw Error(u+e+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw N=!n,Error(u+"crypto unavailable");N=n}else N=n}if(t.hasOwnProperty(e="MODULO_MODE")&&(m(n=t[e],0,9,e),j=n),t.hasOwnProperty(e="POW_PRECISION")&&(m(n=t[e],0,p,e),C=n),t.hasOwnProperty(e="FORMAT")){if("object"!=typeof(n=t[e]))throw Error(u+e+" not an object: "+n);k=n}if(t.hasOwnProperty(e="ALPHABET")){if("string"!=typeof(n=t[e])||/^.$|\.|(.).*\1/.test(n))throw Error(u+e+" invalid: "+n);L=n}}return{DECIMAL_PLACES:E,ROUNDING_MODE:T,EXPONENTIAL_AT:[x,P],RANGE:[I,R],CRYPTO:N,MODULO_MODE:j,POW_PRECISION:C,FORMAT:k,ALPHABET:L}},D.isBigNumber=function(t){return t instanceof D||t&&!0===t._isBigNumber||!1},D.maximum=D.max=function(){return U(arguments,S.lt)},D.minimum=D.min=function(){return U(arguments,S.gt)},D.random=function(){var t=9007199254740992*Math.random()&2097151?function(){return o(9007199254740992*Math.random())}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)};return function(e){var n,r,s,a,h,f=0,d=[],y=new D(A);if(null==e?e=E:m(e,0,p),a=i(e/c),N)if(crypto.getRandomValues){for(n=crypto.getRandomValues(new Uint32Array(a*=2));f<a;)(h=131072*n[f]+(n[f+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),n[f]=r[0],n[f+1]=r[1]):(d.push(h%1e14),f+=2);f=a/2}else{if(!crypto.randomBytes)throw N=!1,Error(u+"crypto unavailable");for(n=crypto.randomBytes(a*=7);f<a;)(h=281474976710656*(31&n[f])+1099511627776*n[f+1]+4294967296*n[f+2]+16777216*n[f+3]+(n[f+4]<<16)+(n[f+5]<<8)+n[f+6])>=9e15?crypto.randomBytes(7).copy(n,f):(d.push(h%1e14),f+=7);f=a/7}if(!N)for(;f<a;)(h=t())<9e15&&(d[f++]=h%1e14);for(a=d[--f],e%=c,a&&e&&(h=l[c-e],d[f]=o(a/h)*h);0===d[f];d.pop(),f--);if(f<0)d=[s=0];else{for(s=-1;0===d[0];d.splice(0,1),s-=c);for(f=1,h=d[0];h>=10;h/=10,f++);f<c&&(s-=c-f)}return y.e=s,y.c=d,y}}(),M=function(){function t(t,e,n,r){for(var i,o,u=[0],s=0,a=t.length;s<a;){for(o=u.length;o--;u[o]*=e);for(u[0]+=r.indexOf(t.charAt(s++)),i=0;i<u.length;i++)u[i]>n-1&&(null==u[i+1]&&(u[i+1]=0),u[i+1]+=u[i]/n|0,u[i]%=n)}return u.reverse()}return function(e,r,i,o,u){var s,a,c,h,l,f,p,d,v=e.indexOf("."),m=E,g=T;for(v>=0&&(h=C,C=0,e=e.replace(".",""),f=(d=new D(r)).pow(e.length-v),C=h,d.c=t(w(y(f.c),f.e,"0"),10,i,"0123456789"),d.e=d.c.length),c=h=(p=t(e,r,i,u?(s=L,"0123456789"):(s="0123456789",L))).length;0==p[--h];p.pop());if(!p[0])return s.charAt(0);if(v<0?--c:(f.c=p,f.e=c,f.s=o,p=(f=n(f,d,m,g,i)).c,l=f.r,c=f.e),v=p[a=c+m+1],h=i/2,l=l||a<0||null!=p[a+1],l=g<4?(null!=v||l)&&(0==g||g==(f.s<0?3:2)):v>h||v==h&&(4==g||l||6==g&&1&p[a-1]||g==(f.s<0?8:7)),a<1||!p[0])e=l?w(s.charAt(1),-m,s.charAt(0)):s.charAt(0);else{if(p.length=a,l)for(--i;++p[--a]>i;)p[a]=0,a||(++c,p=[1].concat(p));for(h=p.length;!p[--h];);for(v=0,e="";v<=h;e+=s.charAt(p[v++]));e=w(e,c,s.charAt(0))}return e}}(),n=function(){function t(t,e,n){var r,i,o,u,s=0,a=t.length,c=e%f,h=e/f|0;for(t=t.slice();a--;)s=((i=c*(o=t[a]%f)+(r=h*o+(u=t[a]/f|0)*c)%f*f+s)/n|0)+(r/f|0)+h*u,t[a]=i%n;return s&&(t=[s].concat(t)),t}function e(t,e,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(t[i]!=e[i]){o=t[i]>e[i]?1:-1;break}return o}function n(t,e,n,r){for(var i=0;n--;)t[n]-=i,i=t[n]<e[n]?1:0,t[n]=i*r+t[n]-e[n];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(r,i,u,s,h){var l,f,p,y,v,m,g,b,_,w,M,O,S,A,E,T,x,P=r.s==i.s?1:-1,I=r.c,R=i.c;if(!(I&&I[0]&&R&&R[0]))return new D(r.s&&i.s&&(I?!R||I[0]!=R[0]:R)?I&&0==I[0]||!R?0*P:P/0:NaN);for(_=(b=new D(P)).c=[],P=u+(f=r.e-i.e)+1,h||(h=a,f=d(r.e/c)-d(i.e/c),P=P/c|0),p=0;R[p]==(I[p]||0);p++);if(R[p]>(I[p]||0)&&f--,P<0)_.push(1),y=!0;else{for(A=I.length,T=R.length,p=0,P+=2,(v=o(h/(R[0]+1)))>1&&(R=t(R,v,h),I=t(I,v,h),T=R.length,A=I.length),S=T,M=(w=I.slice(0,T)).length;M<T;w[M++]=0);x=R.slice(),x=[0].concat(x),E=R[0],R[1]>=h/2&&E++;do{if(v=0,(l=e(R,w,T,M))<0){if(O=w[0],T!=M&&(O=O*h+(w[1]||0)),(v=o(O/E))>1)for(v>=h&&(v=h-1),g=(m=t(R,v,h)).length,M=w.length;1==e(m,w,g,M);)v--,n(m,T<g?x:R,g,h),g=m.length,l=1;else 0==v&&(l=v=1),g=(m=R.slice()).length;if(g<M&&(m=[0].concat(m)),n(w,m,M,h),M=w.length,-1==l)for(;e(R,w,T,M)<1;)v++,n(w,T<M?x:R,M,h),M=w.length}else 0===l&&(v++,w=[0]);_[p++]=v,w[0]?w[M++]=I[S]||0:(w=[I[S]],M=1)}while((S++<A||null!=w[0])&&P--);y=null!=w[0],_[0]||_.splice(0,1)}if(h==a){for(p=1,P=_[0];P>=10;P/=10,p++);F(b,u+(b.e=p+f*c-1)+1,s,y)}else b.e=f,b.r=+y;return b}}(),O=function(){var t=/^(-?)0([xbo])(?=\w[\w.]*$)/i,e=/^([^.]+)\.$/,n=/^\.([^.]+)$/,r=/^-?(Infinity|NaN)$/,i=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(o,s,a,c){var h,l=a?s:s.replace(i,"");if(r.test(l))o.s=isNaN(l)?null:l<0?-1:1,o.c=o.e=null;else{if(!a&&(l=l.replace(t,function(t,e,n){return h="x"==(n=n.toLowerCase())?16:"b"==n?2:8,c&&c!=h?t:e}),c&&(h=c,l=l.replace(e,"$1").replace(n,"0.$1")),s!=l))return new D(l,h);if(D.DEBUG)throw Error(u+"Not a"+(c?" base "+c:"")+" number: "+s);o.c=o.e=o.s=null}}}(),S.absoluteValue=S.abs=function(){var t=new D(this);return t.s<0&&(t.s=1),t},S.comparedTo=function(t,e){return v(this,new D(t,e))},S.decimalPlaces=S.dp=function(t,e){var n,r,i,o=this;if(null!=t)return m(t,0,p),null==e?e=T:m(e,0,8),F(new D(o),t+o.e+1,e);if(!(n=o.c))return null;if(r=((i=n.length-1)-d(this.e/c))*c,i=n[i])for(;i%10==0;i/=10,r--);return r<0&&(r=0),r},S.dividedBy=S.div=function(t,e){return n(this,new D(t,e),E,T)},S.dividedToIntegerBy=S.idiv=function(t,e){return n(this,new D(t,e),0,1)},S.exponentiatedBy=S.pow=function(t,e){var n,r,s,a,h,l,f,p=this;if((t=new D(t)).c&&!t.isInteger())throw Error(u+"Exponent not an integer: "+t);if(null!=e&&(e=new D(e)),a=t.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!t.c||!t.c[0])return f=new D(Math.pow(+p.valueOf(),a?2-b(t):+t)),e?f.mod(e):f;if(h=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new D(NaN);(r=!h&&p.isInteger()&&e.isInteger())&&(p=p.mod(e))}else{if(t.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||a&&p.c[1]>=24e7:p.c[0]<8e13||a&&p.c[0]<=9999975e7)))return s=p.s<0&&b(t)?-0:0,p.e>-1&&(s=1/s),new D(h?1/s:s);C&&(s=i(C/c+2))}for(a?(n=new D(.5),l=b(t)):l=t%2,h&&(t.s=1),f=new D(A);;){if(l){if(!(f=f.times(p)).c)break;s?f.c.length>s&&(f.c.length=s):r&&(f=f.mod(e))}if(a){if(F(t=t.times(n),t.e+1,1),!t.c[0])break;a=t.e>14,l=b(t)}else{if(!(t=o(t/2)))break;l=t%2}p=p.times(p),s?p.c&&p.c.length>s&&(p.c.length=s):r&&(p=p.mod(e))}return r?f:(h&&(f=A.div(f)),e?f.mod(e):s?F(f,C,T,void 0):f)},S.integerValue=function(t){var e=new D(this);return null==t?t=T:m(t,0,8),F(e,e.e+1,t)},S.isEqualTo=S.eq=function(t,e){return 0===v(this,new D(t,e))},S.isFinite=function(){return!!this.c},S.isGreaterThan=S.gt=function(t,e){return v(this,new D(t,e))>0},S.isGreaterThanOrEqualTo=S.gte=function(t,e){return 1===(e=v(this,new D(t,e)))||0===e},S.isInteger=function(){return!!this.c&&d(this.e/c)>this.c.length-2},S.isLessThan=S.lt=function(t,e){return v(this,new D(t,e))<0},S.isLessThanOrEqualTo=S.lte=function(t,e){return-1===(e=v(this,new D(t,e)))||0===e},S.isNaN=function(){return!this.s},S.isNegative=function(){return this.s<0},S.isPositive=function(){return this.s>0},S.isZero=function(){return!!this.c&&0==this.c[0]},S.minus=function(t,e){var n,r,i,o,u=this,s=u.s;if(e=(t=new D(t,e)).s,!s||!e)return new D(NaN);if(s!=e)return t.s=-e,u.plus(t);var h=u.e/c,l=t.e/c,f=u.c,p=t.c;if(!h||!l){if(!f||!p)return f?(t.s=-e,t):new D(p?u:NaN);if(!f[0]||!p[0])return p[0]?(t.s=-e,t):new D(f[0]?u:3==T?-0:0)}if(h=d(h),l=d(l),f=f.slice(),s=h-l){for((o=s<0)?(s=-s,i=f):(l=h,i=p),i.reverse(),e=s;e--;i.push(0));i.reverse()}else for(r=(o=(s=f.length)<(e=p.length))?s:e,s=e=0;e<r;e++)if(f[e]!=p[e]){o=f[e]<p[e];break}if(o&&(i=f,f=p,p=i,t.s=-t.s),(e=(r=p.length)-(n=f.length))>0)for(;e--;f[n++]=0);for(e=a-1;r>s;){if(f[--r]<p[r]){for(n=r;n&&!f[--n];f[n]=e);--f[n],f[r]+=a}f[r]-=p[r]}for(;0==f[0];f.splice(0,1),--l);return f[0]?W(t,f,l):(t.s=3==T?-1:1,t.c=[t.e=0],t)},S.modulo=S.mod=function(t,e){var r,i,o=this;return t=new D(t,e),!o.c||!t.s||t.c&&!t.c[0]?new D(NaN):!t.c||o.c&&!o.c[0]?new D(o):(9==j?(i=t.s,t.s=1,r=n(o,t,0,3),t.s=i,r.s*=i):r=n(o,t,0,j),(t=o.minus(r.times(t))).c[0]||1!=j||(t.s=o.s),t)},S.multipliedBy=S.times=function(t,e){var n,r,i,o,u,s,h,l,p,y,v,m,g,b,_,w=this,M=w.c,O=(t=new D(t,e)).c;if(!(M&&O&&M[0]&&O[0]))return!w.s||!t.s||M&&!M[0]&&!O||O&&!O[0]&&!M?t.c=t.e=t.s=null:(t.s*=w.s,M&&O?(t.c=[0],t.e=0):t.c=t.e=null),t;for(r=d(w.e/c)+d(t.e/c),t.s*=w.s,(h=M.length)<(y=O.length)&&(g=M,M=O,O=g,i=h,h=y,y=i),i=h+y,g=[];i--;g.push(0));for(b=a,_=f,i=y;--i>=0;){for(n=0,v=O[i]%_,m=O[i]/_|0,o=i+(u=h);o>i;)n=((l=v*(l=M[--u]%_)+(s=m*l+(p=M[u]/_|0)*v)%_*_+g[o]+n)/b|0)+(s/_|0)+m*p,g[o--]=l%b;g[o]=n}return n?++r:g.splice(0,1),W(t,g,r)},S.negated=function(){var t=new D(this);return t.s=-t.s||null,t},S.plus=function(t,e){var n,r=this,i=r.s;if(e=(t=new D(t,e)).s,!i||!e)return new D(NaN);if(i!=e)return t.s=-e,r.minus(t);var o=r.e/c,u=t.e/c,s=r.c,h=t.c;if(!o||!u){if(!s||!h)return new D(i/0);if(!s[0]||!h[0])return h[0]?t:new D(s[0]?r:0*i)}if(o=d(o),u=d(u),s=s.slice(),i=o-u){for(i>0?(u=o,n=h):(i=-i,n=s),n.reverse();i--;n.push(0));n.reverse()}for((i=s.length)-(e=h.length)<0&&(n=h,h=s,s=n,e=i),i=0;e;)i=(s[--e]=s[e]+h[e]+i)/a|0,s[e]=a===s[e]?0:s[e]%a;return i&&(s=[i].concat(s),++u),W(t,s,u)},S.precision=S.sd=function(t,e){var n,r,i,o=this;if(null!=t&&t!==!!t)return m(t,1,p),null==e?e=T:m(e,0,8),F(new D(o),t,e);if(!(n=o.c))return null;if(r=(i=n.length-1)*c+1,i=n[i]){for(;i%10==0;i/=10,r--);for(i=n[0];i>=10;i/=10,r++);}return t&&o.e+1>r&&(r=o.e+1),r},S.shiftedBy=function(t){return m(t,-h,h),this.times("1e"+t)},S.squareRoot=S.sqrt=function(){var t,e,r,i,o,u=this,s=u.c,a=u.s,c=u.e,h=E+4,l=new D("0.5");if(1!==a||!s||!s[0])return new D(!a||a<0&&(!s||s[0])?NaN:s?u:1/0);if(0==(a=Math.sqrt(+u))||a==1/0?(((e=y(s)).length+c)%2==0&&(e+="0"),a=Math.sqrt(e),c=d((c+1)/2)-(c<0||c%2),r=new D(e=a==1/0?"1e"+c:(e=a.toExponential()).slice(0,e.indexOf("e")+1)+c)):r=new D(a+""),r.c[0])for((a=(c=r.e)+h)<3&&(a=0);;)if(o=r,r=l.times(o.plus(n(u,o,h,1))),y(o.c).slice(0,a)===(e=y(r.c)).slice(0,a)){if(r.e<c&&--a,"9999"!=(e=e.slice(a-3,a+1))&&(i||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(F(r,r.e+E+2,1),t=!r.times(r).eq(u));break}if(!i&&(F(o,o.e+E+2,0),o.times(o).eq(u))){r=o;break}h+=4,a+=4,i=1}return F(r,r.e+E+1,T,t)},S.toExponential=function(t,e){return null!=t&&(m(t,0,p),t++),B(this,t,e,1)},S.toFixed=function(t,e){return null!=t&&(m(t,0,p),t=t+this.e+1),B(this,t,e)},S.toFormat=function(t,e){var n=this.toFixed(t,e);if(this.c){var r,i=n.split("."),o=+k.groupSize,u=+k.secondaryGroupSize,s=k.groupSeparator,a=i[0],c=i[1],h=this.s<0,l=h?a.slice(1):a,f=l.length;if(u&&(r=o,o=u,u=r,f-=r),o>0&&f>0){for(r=f%o||o,a=l.substr(0,r);r<f;r+=o)a+=s+l.substr(r,o);u>0&&(a+=s+l.slice(r)),h&&(a="-"+a)}n=c?a+k.decimalSeparator+((u=+k.fractionGroupSize)?c.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+k.fractionGroupSeparator):c):a}return n},S.toFraction=function(t){var e,r,i,o,s,a,h,f,p,d,v,m,g=this,b=g.c;if(null!=t&&(!(f=new D(t)).isInteger()&&(f.c||1!==f.s)||f.lt(A)))throw Error(u+"Argument "+(f.isInteger()?"out of range: ":"not an integer: ")+t);if(!b)return g.toString();for(r=new D(A),d=i=new D(A),o=p=new D(A),m=y(b),a=r.e=m.length-g.e-1,r.c[0]=l[(h=a%c)<0?c+h:h],t=!t||f.comparedTo(r)>0?a>0?r:d:f,h=R,R=1/0,f=new D(m),p.c[0]=0;v=n(f,r,0,1),1!=(s=i.plus(v.times(o))).comparedTo(t);)i=o,o=s,d=p.plus(v.times(s=d)),p=s,r=f.minus(v.times(s=r)),f=s;return s=n(t.minus(i),o,0,1),p=p.plus(s.times(d)),i=i.plus(s.times(o)),p.s=d.s=g.s,e=n(d,o,a*=2,T).minus(g).abs().comparedTo(n(p,i,a,T).minus(g).abs())<1?[d.toString(),o.toString()]:[p.toString(),i.toString()],R=h,e},S.toNumber=function(){return+this},S.toPrecision=function(t,e){return null!=t&&m(t,1,p),B(this,t,e,2)},S.toString=function(t){var e,n=this,r=n.s,i=n.e;return null===i?r?(e="Infinity",r<0&&(e="-"+e)):e="NaN":(e=y(n.c),null==t?e=i<=x||i>=P?_(e,i):w(e,i,"0"):(m(t,2,L.length,"Base"),e=M(w(e,i,"0"),10,t,r,!0)),r<0&&n.c[0]&&(e="-"+e)),e},S.valueOf=S.toJSON=function(){var t,e=this,n=e.e;return null===n?e.toString():(t=y(e.c),t=n<=x||n>=P?_(t,n):w(t,n,"0"),e.s<0?"-"+t:t)},S._isBigNumber=!0,null!=e&&D.set(e),D}();e.default=M},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(56),i=n(55);e.async=new i.AsyncScheduler(r.AsyncAction)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.errorObject={e:{}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(11);function o(){try{return r.apply(this,arguments)}catch(t){return i.errorObject.e=t,i.errorObject}}e.tryCatch=function(t){return r=t,o}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=function(){function t(t,e){this.key=t,this.value=e}return t.prototype.toString=function(){return this.key===r.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},t}();e.Metadata=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3);e.METADATA_KEY=r;var i=n(259);e.Container=i.Container;var o=n(16);e.BindingScopeEnum=o.BindingScopeEnum,e.BindingTypeEnum=o.BindingTypeEnum,e.TargetTypeEnum=o.TargetTypeEnum;var u=n(243);e.AsyncContainerModule=u.AsyncContainerModule,e.ContainerModule=u.ContainerModule;var s=n(242);e.injectable=s.injectable;var a=n(241);e.tagged=a.tagged;var c=n(240);e.named=c.named;var h=n(105);e.inject=h.inject,e.LazyServiceIdentifer=h.LazyServiceIdentifer;var l=n(239);e.optional=l.optional;var f=n(238);e.unmanaged=f.unmanaged;var p=n(237);e.multiInject=p.multiInject;var d=n(236);e.targetName=d.targetName;var y=n(235);e.postConstruct=y.postConstruct;var v=n(107);e.MetadataReader=v.MetadataReader;var m=n(25);e.guid=m.guid;var g=n(19);e.decorate=g.decorate;var b=n(102);e.traverseAncerstors=b.traverseAncerstors,e.taggedConstraint=b.taggedConstraint,e.namedConstraint=b.namedConstraint,e.typeConstraint=b.typeConstraint;var _=n(35);e.getServiceIdentifierAsString=_.getServiceIdentifierAsString;var w=n(234);e.multiBindToService=w.multiBindToService},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TYPES={SUBJECT:{WEB3_CONNECTIVITY:Symbol("WEB3_CONNECTIVITY"),HUB_STATE_FETCH:Symbol("HUB_STATE_FETCH"),CONTRACT_STATE_FETCH:Symbol("CONTRACT_STATE_FETCH"),CONTRACT_API_AVAILABILITY:Symbol("CONTRACT_API_AVAILABILITY"),WALLET_STATE_SYNC:Symbol("WALLET_STATE_SYNC"),WALLET_STATE_POLL:Symbol("WALLET_STATE_POLL")},EXTERNAL:{REST_API_INTERFACE:Symbol("REST_API_INTERFACE"),WEB3_SERVICE_INTERFACE:Symbol("WEB3_SERVICE_INTERFACE"),STORAGE_MANAGER_INTERFACE:Symbol("STORAGE_MANAGER_INTERFACE"),LOGGING_INTERFACE:Symbol("LOGGING_INTERFACE")}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"};e.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};e.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isScheduler=function(t){return t&&"function"==typeof t.schedule}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=n(3);function o(t,e,n,i,o){var u={},s="number"==typeof o,a=void 0!==o&&s?o.toString():n;if(s&&void 0!==n)throw new Error(r.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(t,e)&&(u=Reflect.getMetadata(t,e));var c=u[a];if(Array.isArray(c))for(var h=0,l=c;h<l.length;h++){var f=l[h];if(f.key===i.key)throw new Error(r.DUPLICATED_METADATA+" "+f.key)}else c=[];c.push(i),u[a]=c,Reflect.defineMetadata(t,u,e)}function u(t,e){Reflect.decorate(t,e)}e.tagParameter=function(t,e,n,r){o(i.TAGGED,t,e,r,n)},e.tagProperty=function(t,e,n){o(i.TAGGED_PROP,t.constructor,e,n)},e.decorate=function(t,e,n){"number"==typeof n?u([function(t,e){return function(n,r){e(n,r,t)}}(n,t)],e):"string"==typeof n?Reflect.decorate([t],e,n):u([t],e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.debug=function(e){t.loggingInterface.debug(e)},t.error=function(e){t.loggingInterface.error(e)},t.info=function(e){t.loggingInterface.info(e)},t.log=function(e){t.loggingInterface.log(e)},t.warning=function(e){t.loggingInterface.warning(e)},t}();e.Logging=r},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.map=function(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}};var o=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.project,this.thisArg))},t}();e.MapOperator=o;var u=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return r(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(i.Subscriber)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4);function i(t){return new r.Observable(function(e){return t.schedule(function(){return e.complete()})})}e.EMPTY=new r.Observable(function(t){return t.complete()}),e.empty=function(t){return t?i(t):e.EMPTY},e.emptyScheduled=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),i=n(88),o=n(89),u=n(214),s=n(213),a=n(24),c=n(212),h=n(211),l=n(210),f=n(96);e.from=function(t,e){if(!e)return t instanceof r.Observable?t:new r.Observable(f.subscribeTo(t));if(null!=t){if(u.isInteropObservable(t))return l.fromObservable(t,e);if(i.isPromise(t))return c.fromPromise(t,e);if(o.isArrayLike(t))return a.fromArray(t,e);if(s.isIterable(t)||"string"==typeof t)return h.fromIterable(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),i=n(5),o=n(93);e.fromArray=function(t,e){return e?new r.Observable(function(n){var r=new i.Subscription,o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r}):new r.Observable(o.subscribeToArray(t))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.guid=function(){function t(){return Math.floor(65536*(Math.random()+1)).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}},function(t,e,n){"use strict";n.r(e);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}Object.assign;function o(t){return"function"==typeof t}var u=!1,s={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;u=t},get useDeprecatedSynchronousErrorHandling(){return u}};function a(t){setTimeout(function(){throw t})}var c={closed:!0,next:function(t){},error:function(t){if(s.useDeprecatedSynchronousErrorHandling)throw t;a(t)},complete:function(){}},h=Array.isArray||function(t){return t&&"number"==typeof t.length};function l(t){return null!=t&&"object"==typeof t}var f,p={e:{}};function d(){try{return f.apply(this,arguments)}catch(t){return p.e=t,p}}function y(t){return f=t,d}var v=function(t){function e(n){var r=t.call(this,n?n.length+" errors occurred during unsubscription:\n  "+n.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"")||this;return r.errors=n,r.name="UnsubscriptionError",Object.setPrototypeOf(r,e.prototype),r}return i(e,t),e}(Error),m=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,r=this._parents,i=this._unsubscribe,u=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var s=-1,a=r?r.length:0;n;)n.remove(this),n=++s<a&&r[s]||null;if(o(i))y(i).call(this)===p&&(e=!0,t=t||(p.e instanceof v?g(p.e.errors):[p.e]));if(h(u))for(s=-1,a=u.length;++s<a;){var c=u[s];if(l(c))if(y(c.unsubscribe).call(c)===p){e=!0,t=t||[];var f=p.e;f instanceof v?t=t.concat(g(f.errors)):t.push(f)}}if(e)throw new v(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;e&&e!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function g(t){return t.reduce(function(t,e){return t.concat(e instanceof v?e.errors:e)},[])}var b="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("rxSubscriber"):"@@rxSubscriber",_=function(t){function e(e,n,r){var i=t.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=c;break;case 1:if(!e){i.destination=c;break}if("object"==typeof e){if(function(t){return t instanceof _||"syncErrorThrowable"in t&&t[b]}(e)){var o=e[b]();i.syncErrorThrowable=o.syncErrorThrowable,i.destination=o,o.add(i)}else i.syncErrorThrowable=!0,i.destination=new w(i,e);break}default:i.syncErrorThrowable=!0,i.destination=new w(i,e,n,r)}return i}return i(e,t),e.prototype[b]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(m),w=function(t){function e(e,n,r,i){var u,s=t.call(this)||this;s._parentSubscriber=e;var a=s;return o(n)?u=n:n&&(u=n.next,r=n.error,i=n.complete,n!==c&&(o((a=Object.create(n)).unsubscribe)&&s.add(a.unsubscribe.bind(a)),a.unsubscribe=s.unsubscribe.bind(s))),s._context=a,s._next=u,s._error=r,s._complete=i,s}return i(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;s.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=s.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):a(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;a(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};s.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),s.useDeprecatedSynchronousErrorHandling)throw t;a(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!s.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return s.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(a(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(_);var M="function"==typeof Symbol&&Symbol.observable||"@@observable";function O(){}function S(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return A(t)}function A(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:O}var E=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,i=function(t,e,n){if(t){if(t instanceof _)return t;if(t[b])return t[b]()}return t||e||n?new _(t,e,n):new _(c)}(t,e,n);if(r?r.call(i,this.source):i.add(this.source||s.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),s.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){s.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=T(e))(function(e,r){var i;i=n.subscribe(function(e){try{t(e)}catch(t){r(t),i&&i.unsubscribe()}},r,e)})},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[M]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:A(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=T(t))(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})},t.create=function(e){return new t(e)},t}();function T(t){if(t||(t=s.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var x=function(t){function e(){var n=t.call(this,"object unsubscribed")||this;return n.name="ObjectUnsubscribedError",Object.setPrototypeOf(n,e.prototype),n}return i(e,t),e}(Error),P=function(t){function e(e,n){var r=t.call(this)||this;return r.subject=e,r.subscriber=n,r.closed=!1,r}return i(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(m),I=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return i(e,t),e}(_),R=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return i(e,t),e.prototype[b]=function(){return new I(this)},e.prototype.lift=function(t){var e=new N(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new x;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new x;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new x;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new x;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new x;return this.hasError?(t.error(this.thrownError),m.EMPTY):this.isStopped?(t.complete(),m.EMPTY):(this.observers.push(t),new P(this,t))},e.prototype.asObservable=function(){var t=new E;return t.source=this,t},e.create=function(t,e){return new N(t,e)},e}(E),N=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return i(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):m.EMPTY},e}(R);var j=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new C(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i},t}(),C=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return i(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(_),k=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return i(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new m).add(this.source.subscribe(new D(this.getSubject(),this))),t.closed?(this._connection=null,t=m.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return function(t){return t.lift(new j(t))}(this)},e}(E),L=k.prototype,D=(L._subscribe,L._isComplete,L.getSubject,L.connect,L.refCount,function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return i(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(I));var B=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.groupSubject=n,i.refCountSubscription=r,i}return i(e,t),e.prototype._subscribe=function(t){var e=new m,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&e.add(new U(n)),e.add(r.subscribe(t)),e},e}(E),U=function(t){function e(e){var n=t.call(this)||this;return n.parent=e,e.count++,n}return i(e,t),e.prototype.unsubscribe=function(){var e=this.parent;e.closed||this.closed||(t.prototype.unsubscribe.call(this),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())},e}(m),W=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return i(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new x;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(R),F=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return i(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,n){return t.call(this)||this}return i(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(m)),V=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return i(e,t),e.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?t.prototype.requestAsyncId.call(this,e,n,r):e.flush(this)},e}(F),G=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=Date.now?Date.now:function(){return+new Date},t}(),q=function(t){function e(n,r){void 0===r&&(r=G.now);var i=t.call(this,n,function(){return e.delegate&&e.delegate!==i?e.delegate.now():r()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return i(e,t),e.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,i):t.prototype.schedule.call(this,n,r,i)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(G),H=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(q))(V),z=new E(function(t){return t.complete()});function Y(t){return t?function(t){return new E(function(e){return t.schedule(function(){return e.complete()})})}(t):z}function J(t){return t&&"function"==typeof t.schedule}var K=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.closed||e.complete()}};function Z(t,e){return new E(e?function(n){var r=new m,i=0;return r.add(e.schedule(function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()})),r}:K(t))}function $(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];switch(J(n)?t.pop():n=void 0,t.length){case 0:return Y(n);case 1:return n?Z(t,n):function(t){var e=new E(function(e){e.next(t),e.complete()});return e._isScalar=!0,e.value=t,e}(t[0]);default:return Z(t,n)}}function X(t,e){return new E(e?function(n){return e.schedule(Q,0,{error:t,subscriber:n})}:function(e){return e.error(t)})}function Q(t){var e=t.error;t.subscriber.error(e)}var tt=function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){switch(this.kind){case"N":return $(this.value);case"E":return X(this.error);case"C":return Y()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();var et=function(t){function e(e,n,r){void 0===r&&(r=0);var i=t.call(this,e)||this;return i.scheduler=n,i.delay=r,i}return i(e,t),e.dispatch=function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.add(this.scheduler.schedule(e.dispatch,this.delay,new nt(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(tt.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(tt.createError(t))},e.prototype._complete=function(){this.scheduleMessage(tt.createComplete())},e}(_),nt=function(){return function(t,e){this.notification=t,this.destination=e}}(),rt=function(t){function e(e,n,r){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=t.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=e<1?1:e,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return i(e,t),e.prototype.nextInfiniteTimeWindow=function(e){var n=this._events;n.push(e),n.length>this._bufferSize&&n.shift(),t.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this._events.push(new it(this._getNow(),e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new x;if(this.isStopped||this.hasError?e=m.EMPTY:(this.observers.push(t),e=new P(this,t)),i&&t.add(t=new et(t,i)),n)for(var u=0;u<o&&!t.closed;u++)t.next(r[u]);else for(u=0;u<o&&!t.closed;u++)t.next(r[u].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||H).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r},e}(R),it=function(){return function(t,e){this.time=t,this.value=e}}(),ot=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.value=null,e.hasNext=!1,e.hasCompleted=!1,e}return i(e,t),e.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),m.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),m.EMPTY):t.prototype._subscribe.call(this,e)},e.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},e.prototype.error=function(e){this.hasCompleted||t.prototype.error.call(this,e)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&t.prototype.next.call(this,this.value),t.prototype.complete.call(this)},e}(R),ut=1,st={};var at=function(t){var e=ut++;return st[e]=t,Promise.resolve().then(function(){return function(t){var e=st[t];e&&e()}(e)}),e},ct=function(t){delete st[t]},ht=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return i(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=at(e.flush.bind(e,null))))},e.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(ct(n),e.scheduled=void 0)},e}(F),lt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}},e}(q))(ht),ft=new q(F),pt=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return i(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(function(){return e.flush(null)})))},e.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(cancelAnimationFrame(n),e.scheduled=void 0)},e}(F),dt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}},e}(q))(pt),yt=function(t){function e(e,n){void 0===e&&(e=vt),void 0===n&&(n=Number.POSITIVE_INFINITY);var r=t.call(this,e,function(){return r.frame})||this;return r.maxFrames=n,r.frame=0,r.index=-1,r}return i(e,t),e.prototype.flush=function(){for(var t,e,n=this.actions,r=this.maxFrames;(e=n.shift())&&(this.frame=e.delay)<=r&&!(t=e.execute(e.state,e.delay)););if(t){for(;e=n.shift();)e.unsubscribe();throw t}},e.frameTimeFactor=10,e}(q),vt=function(t){function e(e,n,r){void 0===r&&(r=e.index+=1);var i=t.call(this,e,n)||this;return i.scheduler=e,i.work=n,i.index=r,i.active=!0,i.index=e.index=r,i}return i(e,t),e.prototype.schedule=function(n,r){if(void 0===r&&(r=0),!this.id)return t.prototype.schedule.call(this,n,r);this.active=!1;var i=new e(this.scheduler,this.work);return this.add(i),i.schedule(n,r)},e.prototype.requestAsyncId=function(t,n,r){void 0===r&&(r=0),this.delay=t.frame+r;var i=t.actions;return i.push(this),i.sort(e.sortActions),!0},e.prototype.recycleAsyncId=function(t,e,n){void 0===n&&(n=0)},e.prototype._execute=function(e,n){if(!0===this.active)return t.prototype._execute.call(this,e,n)},e.sortActions=function(t,e){return t.delay===e.delay?t.index===e.index?0:t.index>e.index?1:-1:t.delay>e.delay?1:-1},e}(F);function mt(t){return t}function gt(t){return!!t&&(t instanceof E||"function"==typeof t.lift&&"function"==typeof t.subscribe)}var bt=function(t){function e(){var n=t.call(this,"argument out of range")||this;return n.name="ArgumentOutOfRangeError",Object.setPrototypeOf(n,e.prototype),n}return i(e,t),e}(Error),_t=function(t){function e(){var n=t.call(this,"no elements in sequence")||this;return n.name="EmptyError",Object.setPrototypeOf(n,e.prototype),n}return i(e,t),e}(Error),wt=function(t){function e(){var n=t.call(this,"Timeout has occurred")||this;return n.name="TimeoutError",Object.setPrototypeOf(n,e.prototype),n}return i(e,t),e}(Error);function Mt(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new Ot(t,e))}}var Ot=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new St(t,this.project,this.thisArg))},t}(),St=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return i(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(_);function At(t,e,n){if(e){if(!J(e))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return At(t,n).apply(void 0,r).pipe(Mt(function(t){return h(t)?e.apply(void 0,t):e(t)}))};n=e}return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i,o=this,u={context:o,subject:i,callbackFunc:t,scheduler:n};return new E(function(r){if(n){var s={args:e,subscriber:r,params:u};return n.schedule(Et,0,s)}if(!i){i=new ot;try{t.apply(o,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.next(t.length<=1?t[0]:t),i.complete()}]))}catch(t){i.error(t)}}return i.subscribe(r)})}}function Et(t){var e=this,n=t.args,r=t.subscriber,i=t.params,o=i.callbackFunc,u=i.context,s=i.scheduler,a=i.subject;if(!a){a=i.subject=new ot;try{o.apply(u,n.concat([function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.length<=1?t[0]:t;e.add(s.schedule(Tt,0,{value:r,subject:a}))}]))}catch(t){a.error(t)}}this.add(a.subscribe(r))}function Tt(t){var e=t.value,n=t.subject;n.next(e),n.complete()}function xt(t,e,n){if(e){if(!J(e))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return xt(t,n).apply(void 0,r).pipe(Mt(function(t){return h(t)?e.apply(void 0,t):e(t)}))};n=e}return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i={subject:void 0,args:e,callbackFunc:t,scheduler:n,context:this};return new E(function(r){var o=i.context,u=i.subject;if(n)return n.schedule(Pt,0,{params:i,subscriber:r,context:o});if(!u){u=i.subject=new ot;try{t.apply(o,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.shift();n?u.error(n):(u.next(t.length<=1?t[0]:t),u.complete())}]))}catch(t){u.error(t)}}return u.subscribe(r)})}}function Pt(t){var e=this,n=t.params,r=t.subscriber,i=t.context,o=n.callbackFunc,u=n.args,s=n.scheduler,a=n.subject;if(!a){a=n.subject=new ot;try{o.apply(i,u.concat([function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.shift();if(r)e.add(s.schedule(Rt,0,{err:r,subject:a}));else{var i=t.length<=1?t[0]:t;e.add(s.schedule(It,0,{value:i,subject:a}))}}]))}catch(t){this.add(s.schedule(Rt,0,{err:t,subject:a}))}}this.add(a.subscribe(r))}function It(t){var e=t.value,n=t.subject;n.next(e),n.complete()}function Rt(t){var e=t.err;t.subject.error(e)}var Nt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(_),jt=function(t){function e(e,n,r){var i=t.call(this)||this;return i.parent=e,i.outerValue=n,i.outerIndex=r,i.index=0,i}return i(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(_),Ct=function(t){return function(e){return t.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,a),e}};var kt=function(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),Lt=function(t){return function(e){for(var n=t[kt]();;){var r=n.next();if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add(function(){n.return&&n.return()}),e}},Dt=function(t){return function(e){var n=t[M]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)}},Bt=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function Ut(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var Wt=function(t){if(t instanceof E)return function(e){return t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e)};if(t&&"function"==typeof t[M])return Dt(t);if(Bt(t))return K(t);if(Ut(t))return Ct(t);if(t&&"function"==typeof t[kt])return Lt(t);var e=l(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function Ft(t,e,n,r){var i=new jt(t,n,r);return Wt(e)(i)}var Vt={};function Gt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null,r=null;return J(t[t.length-1])&&(r=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&h(t[0])&&(t=t[0]),Z(t,r).lift(new qt(n))}var qt=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new Ht(t,this.resultSelector))},t}(),Ht=function(t){function e(e,n){var r=t.call(this,e)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return i(e,t),e.prototype._next=function(t){this.values.push(Vt),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add(Ft(this,r,r,n))}}},e.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.values,u=o[n],s=this.toRespond?u===Vt?--this.toRespond:this.toRespond:0;o[n]=e,0===s&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},e.prototype._tryResultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(Nt);function zt(t,e){if(!e)return t instanceof E?t:new E(Wt(t));if(null!=t){if(function(t){return t&&"function"==typeof t[M]}(t))return function(t,e){return new E(e?function(n){var r=new m;return r.add(e.schedule(function(){var i=t[M]();r.add(i.subscribe({next:function(t){r.add(e.schedule(function(){return n.next(t)}))},error:function(t){r.add(e.schedule(function(){return n.error(t)}))},complete:function(){r.add(e.schedule(function(){return n.complete()}))}}))})),r}:Dt(t))}(t,e);if(Ut(t))return function(t,e){return new E(e?function(n){var r=new m;return r.add(e.schedule(function(){return t.then(function(t){r.add(e.schedule(function(){n.next(t),r.add(e.schedule(function(){return n.complete()}))}))},function(t){r.add(e.schedule(function(){return n.error(t)}))})})),r}:Ct(t))}(t,e);if(Bt(t))return Z(t,e);if(function(t){return t&&"function"==typeof t[kt]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new E(e?function(n){var r,i=new m;return i.add(function(){r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(function(){r=t[kt](),i.add(e.schedule(function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(t){return void n.error(t)}e?n.complete():(n.next(t),this.schedule())}}))})),i}:Lt(t))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}var Yt=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new Jt(t,this.project,this.concurrent))},t}(),Jt=function(t){function e(e,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=t.call(this,e)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return i(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){this.add(Ft(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(Nt);function Kt(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),function t(e,n,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"function"==typeof n?function(i){return i.pipe(t(function(t,r){return zt(e(t,r)).pipe(Mt(function(e,i){return n(t,e,r,i)}))},r))}:("number"==typeof n&&(r=n),function(t){return t.lift(new Yt(e,r))})}(mt,t)}function Zt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1===t.length||2===t.length&&J(t[1])?zt(t[0]):Kt(1)($.apply(void 0,t))}function $t(t){return new E(function(e){var n;try{n=t()}catch(t){return void e.error(t)}return(n?zt(n):Y()).subscribe(e)})}function Xt(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&h(e[0])&&(e=e[0]),0===e.length?z:t?Xt(e).pipe(Mt(function(e){return t.apply(void 0,e)})):new E(function(t){return new Qt(t,e)})}var Qt=function(t){function e(e,n){var r=t.call(this,e)||this;r.sources=n,r.completed=0,r.haveValues=0;var i=n.length;r.values=new Array(i);for(var o=0;o<i;o++){var u=Ft(r,n[o],null,o);u&&r.add(u)}return r}return i(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.values[n]=e,i._hasValue||(i._hasValue=!0,this.haveValues++)},e.prototype.notifyComplete=function(t){var e=this.destination,n=this.haveValues,r=this.values,i=r.length;t._hasValue?(this.completed++,this.completed===i&&(n===i&&e.next(r),e.complete())):e.complete()},e}(Nt);Object.prototype.toString;function te(t,e,n,r){return o(n)&&(r=n,n=void 0),r?te(t,e,n).pipe(Mt(function(t){return h(t)?r.apply(void 0,t):r(t)})):new E(function(r){!function t(e,n,r,i,o){var u;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){var s=e;e.addEventListener(n,r,o),u=function(){return s.removeEventListener(n,r,o)}}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){var a=e;e.on(n,r),u=function(){return a.off(n,r)}}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){var c=e;e.addListener(n,r),u=function(){return c.removeListener(n,r)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var h=0,l=e.length;h<l;h++)t(e[h],n,r,i,o)}i.add(u)}(t,e,function(t){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(t)},r,n)})}function ee(t,e,n){return n?ee(t,e).pipe(Mt(function(t){return h(t)?n.apply(void 0,t):n(t)})):new E(function(n){var r,i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.next(1===t.length?t[0]:t)};try{r=t(i)}catch(t){return void n.error(t)}if(o(e))return function(){return e(i,r)}})}function ne(t,e,n,r,i){var o,u;if(1==arguments.length){var s=t;u=s.initialState,e=s.condition,n=s.iterate,o=s.resultSelector||mt,i=s.scheduler}else void 0===r||J(r)?(u=t,o=mt,i=r):(u=t,o=r);return new E(function(t){var r=u;if(i)return i.schedule(re,0,{subscriber:t,iterate:n,condition:e,resultSelector:o,state:r});for(;;){if(e){var s=void 0;try{s=e(r)}catch(e){return void t.error(e)}if(!s){t.complete();break}}var a=void 0;try{a=o(r)}catch(e){return void t.error(e)}if(t.next(a),t.closed)break;try{r=n(r)}catch(e){return void t.error(e)}}})}function re(t){var e=t.subscriber,n=t.condition;if(!e.closed){if(t.needIterate)try{t.state=t.iterate(t.state)}catch(t){return void e.error(t)}else t.needIterate=!0;if(n){var r=void 0;try{r=n(t.state)}catch(t){return void e.error(t)}if(!r)return void e.complete();if(e.closed)return}var i;try{i=t.resultSelector(t.state)}catch(t){return void e.error(t)}if(!e.closed&&(e.next(i),!e.closed))return this.schedule(t)}}function ie(t,e,n){return void 0===e&&(e=z),void 0===n&&(n=z),$t(function(){return t()?e:n})}function oe(t){return!h(t)&&t-parseFloat(t)+1>=0}function ue(t,e){return void 0===t&&(t=0),void 0===e&&(e=ft),(!oe(t)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=ft),new E(function(n){return n.add(e.schedule(se,t,{subscriber:n,counter:0,period:t})),n})}function se(t){var e=t.subscriber,n=t.counter,r=t.period;e.next(n),this.schedule({subscriber:e,counter:n+1,period:r},r)}function ae(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Number.POSITIVE_INFINITY,r=null,i=t[t.length-1];return J(i)?(r=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof i&&(n=t.pop()),null===r&&1===t.length&&t[0]instanceof E?t[0]:Kt(n)(Z(t,r))}var ce=new E(O);function he(){return ce}function le(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return z;var n=t[0],r=t.slice(1);return 1===t.length&&h(n)?le.apply(void 0,n):new E(function(t){var e=function(){return t.add(le.apply(void 0,r).subscribe(t))};return zt(n).subscribe({next:function(e){t.next(e)},error:e,complete:e})})}function fe(t,e){return new E(e?function(n){var r=Object.keys(t),i=new m;return i.add(e.schedule(pe,0,{keys:r,index:0,subscriber:n,subscription:i,obj:t})),i}:function(e){for(var n=Object.keys(t),r=0;r<n.length&&!e.closed;r++){var i=n[r];t.hasOwnProperty(i)&&e.next([i,t[i]])}e.complete()})}function pe(t){var e=t.keys,n=t.index,r=t.subscriber,i=t.subscription,o=t.obj;if(!r.closed)if(n<e.length){var u=e[n];r.next([u,o[u]]),i.add(this.schedule({keys:e,index:n+1,subscriber:r,subscription:i,obj:o}))}else r.complete()}function de(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){if(!h(t[0]))return t[0];t=t[0]}return Z(t,void 0).lift(new ye)}var ye=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new ve(t))},t}(),ve=function(t){function e(e){var n=t.call(this,e)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return i(e,t),e.prototype._next=function(t){this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var n=0;n<e&&!this.hasFirst;n++){var r=t[n],i=Ft(this,r,r,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},e.prototype.notifyNext=function(t,e,n,r,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==n){var u=this.subscriptions[o];u.unsubscribe(),this.remove(u)}this.subscriptions=null}this.destination.next(e)},e}(Nt);function me(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=0),new E(function(r){var i=0,o=t;if(n)return n.schedule(ge,0,{index:i,count:e,start:t,subscriber:r});for(;;){if(i++>=e){r.complete();break}if(r.next(o++),r.closed)break}})}function ge(t){var e=t.start,n=t.index,r=t.count,i=t.subscriber;n>=r?i.complete():(i.next(e),i.closed||(t.index=n+1,t.start=e+1,this.schedule(t)))}function be(t,e,n){void 0===t&&(t=0);var r=-1;return oe(e)?r=Number(e)<1?1:Number(e):J(e)&&(n=e),J(n)||(n=ft),new E(function(e){var i=oe(t)?t:+t-n.now();return n.schedule(_e,i,{index:0,period:r,subscriber:e})})}function _e(t){var e=t.index,n=t.period,r=t.subscriber;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}function we(t,e){return new E(function(n){var r,i;try{r=t()}catch(t){return void n.error(t)}try{i=e(r)}catch(t){return void n.error(t)}var o=(i?zt(i):z).subscribe(n);return function(){o.unsubscribe(),r&&r.unsubscribe()}})}function Me(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return"function"==typeof n&&t.pop(),Z(t,void 0).lift(new Oe(n))}var Oe=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new Se(t,this.resultSelector))},t}(),Se=function(t){function e(e,n,r){void 0===r&&(r=Object.create(null));var i=t.call(this,e)||this;return i.iterators=[],i.active=0,i.resultSelector="function"==typeof n?n:null,i.values=r,i}return i(e,t),e.prototype._next=function(t){var e=this.iterators;h(t)?e.push(new Ee(t)):"function"==typeof t[kt]?e.push(new Ae(t[kt]())):e.push(new Te(this.destination,this,t))},e.prototype._complete=function(){var t=this.iterators,e=t.length;if(0!==e){this.active=e;for(var n=0;n<e;n++){var r=t[n];r.stillUnsubscribed?this.add(r.subscribe(r,n)):this.active--}}else this.destination.complete()},e.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},e.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,n=this.destination,r=0;r<e;r++){if("function"==typeof(u=t[r]).hasValue&&!u.hasValue())return}var i=!1,o=[];for(r=0;r<e;r++){var u,s=(u=t[r]).next();if(u.hasCompleted()&&(i=!0),s.done)return void n.complete();o.push(s.value)}this.resultSelector?this._tryresultSelector(o):n.next(o),i&&n.complete()},e.prototype._tryresultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(_),Ae=function(){function t(t){this.iterator=t,this.nextResult=t.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},t.prototype.hasCompleted=function(){var t=this.nextResult;return t&&t.done},t}(),Ee=function(){function t(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return t.prototype[kt]=function(){return this},t.prototype.next=function(t){var e=this.index++,n=this.array;return e<this.length?{value:n[e],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.array.length>this.index},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),Te=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.parent=n,i.observable=r,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return i(e,t),e.prototype[kt]=function(){return this},e.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},e.prototype.hasValue=function(){return this.buffer.length>0},e.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},e.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this.buffer.push(e),this.parent.checkIterators()},e.prototype.subscribe=function(t,e){return Ft(this,this.observable,this,e)},e}(Nt);n.d(e,"Observable",function(){return E}),n.d(e,"ConnectableObservable",function(){return k}),n.d(e,"GroupedObservable",function(){return B}),n.d(e,"observable",function(){return M}),n.d(e,"Subject",function(){return R}),n.d(e,"BehaviorSubject",function(){return W}),n.d(e,"ReplaySubject",function(){return rt}),n.d(e,"AsyncSubject",function(){return ot}),n.d(e,"asapScheduler",function(){return lt}),n.d(e,"asyncScheduler",function(){return ft}),n.d(e,"queueScheduler",function(){return H}),n.d(e,"animationFrameScheduler",function(){return dt}),n.d(e,"VirtualTimeScheduler",function(){return yt}),n.d(e,"VirtualAction",function(){return vt}),n.d(e,"Scheduler",function(){return G}),n.d(e,"Subscription",function(){return m}),n.d(e,"Subscriber",function(){return _}),n.d(e,"Notification",function(){return tt}),n.d(e,"pipe",function(){return S}),n.d(e,"noop",function(){return O}),n.d(e,"identity",function(){return mt}),n.d(e,"isObservable",function(){return gt}),n.d(e,"ArgumentOutOfRangeError",function(){return bt}),n.d(e,"EmptyError",function(){return _t}),n.d(e,"ObjectUnsubscribedError",function(){return x}),n.d(e,"UnsubscriptionError",function(){return v}),n.d(e,"TimeoutError",function(){return wt}),n.d(e,"bindCallback",function(){return At}),n.d(e,"bindNodeCallback",function(){return xt}),n.d(e,"combineLatest",function(){return Gt}),n.d(e,"concat",function(){return Zt}),n.d(e,"defer",function(){return $t}),n.d(e,"empty",function(){return Y}),n.d(e,"forkJoin",function(){return Xt}),n.d(e,"from",function(){return zt}),n.d(e,"fromEvent",function(){return te}),n.d(e,"fromEventPattern",function(){return ee}),n.d(e,"generate",function(){return ne}),n.d(e,"iif",function(){return ie}),n.d(e,"interval",function(){return ue}),n.d(e,"merge",function(){return ae}),n.d(e,"never",function(){return he}),n.d(e,"of",function(){return $}),n.d(e,"onErrorResumeNext",function(){return le}),n.d(e,"pairs",function(){return fe}),n.d(e,"race",function(){return de}),n.d(e,"range",function(){return me}),n.d(e,"throwError",function(){return X}),n.d(e,"timer",function(){return be}),n.d(e,"using",function(){return we}),n.d(e,"zip",function(){return Me}),n.d(e,"EMPTY",function(){return z}),n.d(e,"NEVER",function(){return ce}),n.d(e,"config",function(){return s})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(179);e.multicast=function(t,e){return function(n){var o;if(o="function"==typeof t?t:function(){return t},"function"==typeof e)return n.lift(new i(o,e));var u=Object.create(n,r.connectableObservableDescriptor);return u.source=n,u.subjectFactory=o,u}};var i=function(){function t(t,e){this.subjectFactory=t,this.selector=e}return t.prototype.call=function(t,e){var n=this.selector,r=this.subjectFactory(),i=n(r).subscribe(t);return i.add(e.subscribe(r)),i},t}();e.MulticastOperator=i},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(36),o=n(37),u=n(66),s=n(112),a=r(n(9)),c=function(){function t(t,e,n,r){this._contractAddress=t,this._walletAddress=e,this._trailIdentifier=n,this._round=r,this._withdrawalAmount=new a.default("0"),this._withdrawalRound=0,this._isWithdrawalReady=!1,this._withdrawalConfirmed=!1,this._deposits=[],this._deposited=new a.default("0"),this._depositedOnChain=new a.default("0"),this._pendingIncomingTransfers=[],this._cancelledTransfers=[],this._aggregate=new i.Aggregate(t,e,n,r)}return t.fromJSON=function(e){var n=new t(e.contractAddress,e.walletAddress,e.trailIdentifier,e.round);return null!=e.aggregate&&(n._aggregate=i.Aggregate.fromJSON(e.aggregate)),null!=e.proofOfStake&&(n._proofOfStake=o.ProofOfStake.fromJSON(e.proofOfStake)),null!=e.proposedProofOfStake&&(n.proposedProofOfStake=o.ProofOfStake.fromJSON(e.proposedProofOfStake)),n._withdrawalAmount=new a.default(e.withdrawalAmount),n._withdrawalRound=e.withdrawalRound,n._withdrawalConfirmed=e.withdrawalConfirmed,n._isWithdrawalReady=e.isWithdrawalReady,n._deposits=e.deposits.map(function(t){return u.Deposit.fromJSON(t)}),n._deposited=new a.default(e.deposited),n._depositedOnChain=new a.default(e.depositedOnChain),null!=e.minimumAuthorizedBalance&&(n._minimumAuthorizedBalance=s.BalanceMarker.fromJSON(e.minimumAuthorizedBalance)),n._pendingIncomingTransfers=e.pendingIncomingTransfers,n._cancelledTransfers=e.cancelledTransfers,n},Object.defineProperty(t.prototype,"json",{get:function(){return{contractAddress:this._contractAddress,walletAddress:this._walletAddress,trailIdentifier:this._trailIdentifier,round:this._round,aggregate:null==this._aggregate?null:this._aggregate.json,proofOfStake:null==this._proofOfStake?null:this._proofOfStake.json,proposedProofOfStake:null==this.proposedProofOfStake?null:this.proposedProofOfStake.json,withdrawalAmount:this._withdrawalAmount,withdrawalRound:this._withdrawalRound,withdrawalConfirmed:this._withdrawalConfirmed,isWithdrawalReady:this._isWithdrawalReady,deposits:this._deposits.map(function(t){return t.json}),deposited:this._deposited,depositedOnChain:this._depositedOnChain,minimumAuthorizedBalance:this._minimumAuthorizedBalance,pendingIncomingTransfers:this._pendingIncomingTransfers,cancelledTransfers:this._cancelledTransfers}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"roundNumber",{get:function(){return this._round},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"proofOfStake",{get:function(){return this._proofOfStake},enumerable:!0,configurable:!0}),t.prototype.setProofOfStake=function(t){return this._proofOfStake=t,!0},Object.defineProperty(t.prototype,"chainBalance",{get:function(){return this._proofOfStake?this._proofOfStake.amount:new a.default("0")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"proposedChainBalance",{get:function(){return this.proposedProofOfStake?this.proposedProofOfStake.amount:new a.default("0")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"aggregate",{get:function(){return this._aggregate},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isWithdrawalStarted",{get:function(){return this._withdrawalRound==this._round},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isWithdrawalPending",{get:function(){return this._withdrawalRound>0&&!this._withdrawalConfirmed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"withdrawalRound",{get:function(){return this._withdrawalRound},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"walletAddress",{get:function(){return this._walletAddress},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trailIdentifier",{get:function(){return this._trailIdentifier},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contractAddress",{get:function(){return this._contractAddress},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"withdrawalAmount",{get:function(){return this.isWithdrawalPending?this._withdrawalAmount:new a.default(0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isWithdrawalReady",{get:function(){return this._isWithdrawalReady},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"availableBalance",{get:function(){var t=this.chainBalance.plus(this.offChainDeposited),e=this.isWithdrawalStarted?this.withdrawalAmount:new a.default("0");return t.plus(this.aggregate.amount).minus(e).minus(this.aggregate.pendingReceipt)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"expectedBalance",{get:function(){var t=this.chainBalance.plus(this.onChainDeposit),e=this.isWithdrawalStarted?this.withdrawalAmount:new a.default("0");return t.plus(this.aggregate.amount).minus(e).minus(this.aggregate.pendingReceipt)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minimumAuthorizedBalance",{get:function(){return this._minimumAuthorizedBalance},set:function(t){this._minimumAuthorizedBalance=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"availableBalanceMarker",{get:function(){return new s.BalanceMarker(this._contractAddress,this._walletAddress,this._round,this.availableBalance)},enumerable:!0,configurable:!0}),t.prototype.markWithdrawalReady=function(){return!(!this.isWithdrawalPending||this.isWithdrawalReady)&&(this._isWithdrawalReady=!0,!0)},t.prototype.confirmWithdrawal=function(){return!!this.isWithdrawalReady&&(this._withdrawalConfirmed=!0,!0)},t.prototype.setWithdrawalPending=function(t,e){return!this.isWithdrawalPending&&(this._withdrawalAmount=t,this._withdrawalRound=e,this._withdrawalConfirmed=!1,!0)},Object.defineProperty(t.prototype,"deposits",{get:function(){return this._deposits},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offChainDeposited",{get:function(){return this._deposited},enumerable:!0,configurable:!0}),t.prototype.addDeposit=function(t){return!this._deposits.find(function(e){return e.txId==t.txId})&&(this._deposits.push(t),this._deposited=this._deposited.plus(t.amount),!0)},Object.defineProperty(t.prototype,"onChainDeposit",{get:function(){return this._depositedOnChain},set:function(t){this._depositedOnChain=t},enumerable:!0,configurable:!0}),t.prototype.isCancelledTransfer=function(t){return void 0!=this.cancelledTransfers.find(function(e){return e.id==t.id})},t.prototype.addCancelledTransfer=function(t){this.isCancelledTransfer(t)||this._cancelledTransfers.push(t)},Object.defineProperty(t.prototype,"cancelledTransfers",{get:function(){return this._cancelledTransfers},enumerable:!0,configurable:!0}),t.prototype.isPendingIncomingTransfer=function(t){return void 0!=this.pendingIncomingTransfers.find(function(e){return e.id==t.id})},t.prototype.addPendingIncomingTransfer=function(t){this.isPendingIncomingTransfer(t)||this._pendingIncomingTransfers.push(t)},t.prototype.removePendingIncomingTransfer=function(t){var e=this.pendingIncomingTransfers.findIndex(function(e){return e.id==t.id});-1!=e&&this.pendingIncomingTransfers.splice(e,1)},Object.defineProperty(t.prototype,"pendingIncomingTransfers",{get:function(){return this._pendingIncomingTransfers},enumerable:!0,configurable:!0}),t}();e.Round=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(7),i=function(){function t(t,e,n,r,i){this._address=t,this._checksum=e,this._r=n,this._s=r,this._v=i}return t.fromJSON=function(e){return new t(e.address,e.checksum,e.r,e.s,e.v)},t.fromRSV=function(e,n,i){var o=r.remove0xPrefix(i),u=parseInt(o.slice(128,130),16);return u<27&&(u+=27),new t(e,n,o.slice(0,64),o.slice(64,128),u.toString(16))},Object.defineProperty(t.prototype,"json",{get:function(){return{address:this._address,checksum:this._checksum,r:this._r,s:this._s,v:this._v}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"address",{get:function(){return r.remove0xPrefix(this._address)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checksum",{get:function(){return this._checksum},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rsv",{get:function(){return""+this.r+this.s+this.v},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"r",{get:function(){return this._r},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"s",{get:function(){return this._s},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"v",{get:function(){return this._v},enumerable:!0,configurable:!0}),t.EMPTY=new t("0x0000000000000000000000000000000000000000",r.EMPTY_HASH,r.EMPTY_HASH,r.EMPTY_HASH,"00"),t}();e.Signature=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.filter=function(t,e){return function(n){return n.lift(new o(t,e))}};var o=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.predicate,this.thisArg))},t}(),u=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return r(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},e}(i.Subscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.defaultIfEmpty=function(t){return void 0===t&&(t=null),function(e){return e.lift(new o(t))}};var o=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.defaultValue))},t}(),u=function(t){function e(e,n){var r=t.call(this,e)||this;return r.defaultValue=n,r.isEmpty=!0,r}return r(e,t),e.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(i.Subscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=n(2),u=n(21),s=n(23);e.mergeMap=function t(e,n,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"function"==typeof n?function(i){return i.pipe(t(function(t,r){return s.from(e(t,r)).pipe(u.map(function(e,i){return n(t,e,r,i)}))},r))}:("number"==typeof n&&(r=n),function(t){return t.lift(new a(e,r))})};var a=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.project,this.concurrent))},t}();e.MergeMapOperator=a;var c=function(t){function e(e,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=t.call(this,e)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return r(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){this.add(i.subscribeToResult(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(o.OuterSubscriber);e.MergeMapSubscriber=c},function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}Object.defineProperty(e,"__esModule",{value:!0}),e.getSymbolIterator=r,e.iterator=r(),e.$$iterator=e.iterator},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.observable="function"==typeof Symbol&&Symbol.observable||"@@observable"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8);function i(t){return"function"==typeof t?t.name:"symbol"==typeof t?t.toString():t}function o(t){if(t.name)return t.name;var e=t.toString(),n=e.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+e}e.getServiceIdentifierAsString=i,e.listRegisteredBindingsForServiceIdentifier=function(t,e,n){var r="",i=n(t,e);return 0!==i.length&&(r="\nRegistered bindings:",i.forEach(function(t){var e="Object";null!==t.implementationType&&(e=o(t.implementationType)),r=r+"\n "+e,t.constraint.metaData&&(r=r+" - "+t.constraint.metaData)})),r},e.circularDependencyToException=function t(e){e.childRequests.forEach(function(e){if(function t(e,n){return null!==e.parentRequest&&(e.parentRequest.serviceIdentifier===n||t(e.parentRequest,n))}(e,e.serviceIdentifier)){var n=function(t){return function t(e,n){void 0===n&&(n=[]);var r=i(e.serviceIdentifier);return n.push(r),null!==e.parentRequest?t(e.parentRequest,n):n}(t).reverse().join(" --\x3e ")}(e);throw new Error(r.CIRCULAR_DEPENDENCY+" "+n)}t(e)})},e.listMetadataForTarget=function(t,e){if(e.isTagged()||e.isNamed()){var n="",r=e.getNamedTag(),i=e.getCustomTags();return null!==r&&(n+=r.toString()+"\n"),null!==i&&i.forEach(function(t){n+=t.toString()+"\n"})," "+t+"\n "+t+" - "+n}return" "+t},e.getFunctionName=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(9)),u=n(67),s=n(117),a=n(38),c=n(7),h=function(t){function e(e,n,r,i){var u=t.call(this)||this;return u._contractAddress=e,u._walletAddress=n,u._trailIdentifier=r,u._round=i,u._transfers=[],u._pendingTransfer=null,u._spent=new o.default("0"),u._gained=new o.default("0"),u._pendingReceipt=new o.default("0"),u.recalculate(),u}return r(e,t),e.fromJSON=function(t){var n=new e(t.contractAddress,t.walletAddress,t.trailIdentifier,t.round);return n._transfers=t.transfers.map(function(t){return u.Transfer.fromJSON(t)}),n._pendingTransfer=null==t.pendingTransfer?null:u.Transfer.fromJSON(t.pendingTransfer),n._spent=new o.default(t.spent),n._gained=new o.default(t.gained),n._pendingReceipt=new o.default(t.pendingReceipt),n.recalculate(),n},e.checksum=function(t,e,n,r,i,o,u){return c.Web3Utils.soliditySha3({type:"bytes32",value:c.Web3Utils.soliditySha3({type:"address",value:t})},{type:"bytes32",value:c.Web3Utils.soliditySha3({type:"address",value:e})},{type:"uint64",value:n},{type:"uint256",value:r},{type:"bytes32",value:i},{type:"uint256",value:o.toFixed(0)},{type:"uint256",value:u.toFixed(0)}).toString()},Object.defineProperty(e.prototype,"hash",{get:function(){return e.checksum(this._contractAddress,this._walletAddress,this._trailIdentifier,this._round,this._transferTree.hash,this._spent,this._gained)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"json",{get:function(){return{contractAddress:this._contractAddress,walletAddress:this._walletAddress,trailIdentifier:this._trailIdentifier,round:this._round,transfers:this._transfers.map(function(t){return t.json}),pendingTransfer:null==this._pendingTransfer?null:this._pendingTransfer.json,spent:this._spent,gained:this._gained,pendingReceipt:this._pendingReceipt}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isTransferPending",{get:function(){return null!=this._pendingTransfer&&void 0!=this._pendingTransfer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"transfers",{get:function(){return this._transfers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pendingTransfer",{get:function(){return this._pendingTransfer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"latestTransfer",{get:function(){return this.isTransferPending?this.pendingTransfer:this.lastConfirmedTransfer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastConfirmedTransfer",{get:function(){var t=this._transfers.length;return t>0?this._transfers[t-1]:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"amount",{get:function(){return this._gained.minus(this._spent)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spent",{get:function(){return this._spent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gained",{get:function(){return this._gained},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pendingReceipt",{get:function(){return this._pendingReceipt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"walletAddress",{get:function(){return this._walletAddress},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trailIdentifier",{get:function(){return this._trailIdentifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"round",{get:function(){return this._round},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"transferTree",{get:function(){return this._transferTree},enumerable:!0,configurable:!0}),e.prototype.createIncomingTransfer=function(t,e,n,r){if(!this.isTransferPending)return this._gained=this._gained.plus(e),this._pendingReceipt=this._pendingReceipt.plus(e),this._pendingTransfer=new u.Transfer(t,this._round,e,this._walletAddress,this._trailIdentifier,t,n,r),this.recalculate(),this._pendingTransfer},e.prototype.confirmPendingIncomingTransfer=function(){if(this.isTransferPending&&c.isSameHexValue(this.pendingTransfer.recipient,this.walletAddress))return this.confirmPendingTransfer()},e.prototype.confirmPendingOutgoingTransfer=function(){return!(!this.isTransferPending||!c.isSameHexValue(this.pendingTransfer.sender,this.walletAddress))&&this.confirmPendingTransfer()},e.prototype.confirmPendingTransfer=function(){return!(!this.isTransferPending||!this.pendingTransfer)&&(![this.pendingTransfer.debitAuthorization,this.pendingTransfer.creditAuthorization,this.pendingTransfer.debitConfirmation,this.pendingTransfer.creditConfirmation].some(function(t){return!t})&&(this._pendingReceipt=new o.default("0"),this._transfers.push(this._pendingTransfer),this._pendingTransfer=null,this.recalculate(),!0))},e.prototype.cancelPendingTransfer=function(){this.isTransferPending&&(this.pendingTransfer.sender==this.walletAddress?this._spent=this._spent.minus(this._pendingTransfer.amount):(this._pendingReceipt=this._pendingReceipt.minus(this._pendingTransfer.amount),this._gained=this._gained.minus(this._pendingTransfer.amount)),this._pendingTransfer=null,this.recalculate())},e.prototype.createOutgoingTransfer=function(t,e,n,r,i){if(!this.isTransferPending)return this._spent=this._spent.plus(n),this._pendingTransfer=new u.Transfer(this._walletAddress,this._round,n,t,e,t,r,i),this.recalculate(),this._pendingTransfer},e.prototype.recalculate=function(){this._transferLeaves=new Map;var t=this._transfers;if(this.isTransferPending&&(t=this._transfers.concat(this._pendingTransfer)),t.length>0){for(var e=1;e<t.length;)e*=2;for(;t.length<e;)t=t.concat(new u.Transfer("0x0000000000000000000000000000000000000000",0,new o.default(0),"0x0000000000000000000000000000000000000000",0,"0x0000000000000000000000000000000000000000",0))}this._transferTree=new s.MerkleTree(t,this._transferLeaves,0)},e}(a.Hashable);e.Aggregate=h},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(9)),o=n(7),u=function(){function t(t,e,n,r,o,u,s,a,c){this._contractAddress=t,this._walletAddress=e,this._paint=n,this._trail=r,this._round=o,this._hashes=u,this._values=s,this._left=a,this._right=c,this._values=s.map(function(t){return new i.default(t)}),this._left=new i.default(a),this._right=new i.default(c)}return t.fromJSON=function(e){return new t(e.contractAddress,e.walletAddress,e.paint,e.trail,e.round,e.hashes,e.values.map(function(t){return new i.default(t)}),new i.default(e.left),new i.default(e.right))},t.checksumPaint=function(t,e){return o.Web3Utils.soliditySha3({type:"bytes32",value:o.Web3Utils.soliditySha3({type:"address",value:e})},{type:"bytes32",value:t}).toString()},Object.defineProperty(t.prototype,"json",{get:function(){return{contractAddress:this._contractAddress,walletAddress:this._walletAddress,paint:this._paint,trail:this._trail,round:this._round,hashes:this._hashes,values:this._values,left:this._left,right:this._right}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paint",{get:function(){return this._paint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"round",{get:function(){return this._round},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"amount",{get:function(){return this._right.minus(this._left)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"walletAddress",{get:function(){return this._walletAddress},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contractAddress",{get:function(){return this._contractAddress},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trail",{get:function(){return this._trail},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hashes",{get:function(){return this._hashes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"values",{get:function(){return this._values},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this._left},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this._right},enumerable:!0,configurable:!0}),t}();e.ProofOfStake=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return Object.defineProperty(t.prototype,"id",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hash",{get:function(){return""},enumerable:!0,configurable:!0}),t}();e.Hashable=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(47),i=n(48),o=n(31),u=n(95);e.reduce=function(t,e){return arguments.length>=2?function(n){return u.pipe(r.scan(t,e),i.takeLast(1),o.defaultIfEmpty(e))(n)}:function(e){return u.pipe(r.scan(function(e,n,r){return t(e,n,r+1)}),i.takeLast(1))(e)}}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){var n=t.call(this,"no elements in sequence")||this;return n.name="EmptyError",Object.setPrototypeOf(n,e.prototype),n}return r(e,t),e}(Error);e.EmptyError=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){var n=t.call(this,"argument out of range")||this;return n.name="ArgumentOutOfRangeError",Object.setPrototypeOf(n,e.prototype),n}return r(e,t),e}(Error);e.ArgumentOutOfRangeError=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.identity=function(t){return t}},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,u=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(u=(o<3?i(u):o>3?i(e,n,u):i(e,n))||u);return o>3&&u&&Object.defineProperty(e,n,u),u},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=this&&this.__param||function(t,e){return function(n,r){e(n,r,t)}},u=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function u(t){try{a(r.next(t))}catch(t){o(t)}}function s(t){try{a(r.throw(t))}catch(t){o(t)}}function a(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(u,s)}a((r=r.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,r=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!(i=(i=u.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1],i=o;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(o);break}i[2]&&u.ops.pop(),u.trys.pop();continue}o=e.call(t,u)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var c=n(14),h=n(15),l=n(37),f=n(101),p=n(7),d=n(28),y=n(29),v=a(n(9)),m=n(36),g=n(67),b=n(20),_=function(){function t(t){this.web3=t,this.contracts=new Map}return e=t,t.promiseExecutor=function(t,e){return function(n,r){n?e(n):t(r)}},t.bigNumberValueOfResult=function(t){return new v.default(t.valueOf())},t.intValueOfResult=function(t){return parseInt(t.valueOf(),10)},t.valueOfResult=function(t,e){return e?t[e].valueOf():t.valueOf()},t.indexedValueOfResult=function(t){return function(n){return e.valueOfResult(n,t)}},t.prototype.getABI=function(t){return this.contracts.has(t)||this.contracts.set(t,this.web3.rpc.eth.contract(f.PAYMENT_HUB_ABI).at(t)),this.contracts.get(t)},Object.defineProperty(t.prototype,"available",{get:function(){return this.web3&&this.web3.isConnected},enumerable:!0,configurable:!0}),t.prototype.networkId=function(){var t=this;return new Promise(function(n,r){t.web3.rpc.version.getNetwork(e.promiseExecutor(n,r))}).then(e.intValueOfResult)},t.prototype.latestBlock=function(){var t=this;return new Promise(function(n,r){t.web3.rpc.eth.getBlock("latest",!1,e.promiseExecutor(n,r))})},t.prototype.latestBlockWithTransactions=function(){var t=this;return new Promise(function(n,r){t.web3.rpc.eth.getBlock("latest",!0,e.promiseExecutor(n,r))})},t.prototype.genesis=function(t){var n=this;return new Promise(function(r,i){n.getABI(t).genesis.call(e.promiseExecutor(r,i))}).then(e.intValueOfResult)},t.prototype.getLiveChallenges=function(t,n){var r=this;return new Promise(function(i,o){r.getABI(n).getLiveChallenges.call(t,e.promiseExecutor(i,o))}).then(e.intValueOfResult)},t.prototype.currentRound=function(t){var e=this;return new Promise(function(n,r){e.latestBlock().then(function(r){return e.genesis(t).then(function(i){return e.getBlocksPerRound(t).then(function(t){return n(parseInt(((r.number-i)/t).toString(),10)+1)})})}).catch(r)})},t.prototype.nextBlockRound=function(t){var n=this;return new Promise(function(r,i){n.getABI(t).currentRound.call(e.promiseExecutor(r,i))}).then(e.intValueOfResult)},t.prototype.currentSubBlock=function(t){var e=this;return new Promise(function(n,r){e.latestBlock().then(function(r){return e.genesis(t).then(function(i){return e.getBlocksPerRound(t).then(function(t){return n((r.number-i)%t)})})}).catch(r)})},t.prototype.nextBlockSubBlock=function(t){var n=this;return new Promise(function(r,i){n.getABI(t).currentSubBlock.call(e.promiseExecutor(r,i))}).then(e.intValueOfResult)},t.prototype.lastSubmissionRound=function(t){var n=this;return new Promise(function(r,i){n.getABI(t).lastSubmissionRound.call(e.promiseExecutor(r,i))}).then(e.intValueOfResult)},t.prototype.balance=function(t){var n=this;return new Promise(function(r,i){n.web3.rpc.eth.getBalance(t,e.promiseExecutor(r,i))}).then(e.bigNumberValueOfResult)},t.prototype.pendingWithdrawals=function(t,n){var r=this;return new Promise(function(i,o){r.getABI(n).getPendingWithdrawals.call(t,e.promiseExecutor(i,o))}).then(e.bigNumberValueOfResult)},t.prototype.getBlocksPerRound=function(t){var n=this;return new Promise(function(r,i){n.getABI(t).BLOCKS_PER_ROUND.call(e.promiseExecutor(r,i))}).then(e.intValueOfResult)},t.prototype.getSlackPeriod=function(t){var n=this;return new Promise(function(r,i){n.getABI(t).SLACK_PERIOD.call(e.promiseExecutor(r,i))}).then(e.intValueOfResult)},t.prototype.getExtendedSlackPeriod=function(t){var n=this;return new Promise(function(r,i){n.getABI(t).EXTENDED_SLACK_PERIOD.call(e.promiseExecutor(r,i))}).then(e.intValueOfResult)},t.prototype.getRoundsKept=function(t){var n=this;return new Promise(function(r,i){n.getABI(t).ROUNDS_KEPT.call(e.promiseExecutor(r,i))}).then(e.intValueOfResult)},t.prototype.getChallengeCost=function(t){var n=this;return new Promise(function(r,i){n.getABI(t).COST_POS.call(e.promiseExecutor(r,i))}).then(e.bigNumberValueOfResult)},t.prototype.recordBook=function(t,n){var r=this;return new Promise(function(i,o){r.getABI(n).recordBook.call(t,e.promiseExecutor(i,o))})},t.prototype.checkpoint=function(t,n){var r=this;return new Promise(function(i,o){r.getABI(n).checkpoints.call(t%30,e.promiseExecutor(i,o))}).then(e.valueOfResult)},t.prototype.metamaskHashFix=function(t){return this.web3.rpc.currentProvider.isMetaMask?p.Web3Utils.soliditySha3("Ethereum Signed Message:\n32",t):t},t.prototype.vrs=function(t){var e=p.remove0xPrefix(t),n=parseInt(e.slice(128,130),16);return n<27&&(n+=27),e.slice(0,128)+this.web3.rpc.toHex(n).slice(2)},t.prototype.signPersonalInternal=function(t,n){var r=this;return new Promise(function(i,o){r.web3.rpc.personal.sign(t,n,e.promiseExecutor(i,o))})},t.prototype.signPersonal=function(t,e){return this.signPersonalInternal(t,e).then(function(n){return y.Signature.fromRSV(e,t,n)})},t.prototype.signRawInternal=function(t,n){var r=this;return new Promise(function(i,o){r.web3.rpc.eth.sign(n,r.metamaskHashFix(t),e.promiseExecutor(i,o))})},t.prototype.signRaw=function(t,e){return this.signRawInternal(t,e).then(function(n){return y.Signature.fromRSV(e,t,n)})},Object.defineProperty(t.prototype,"canSignPersonal",{get:function(){return this.web3.rpc.personal&&this.web3.rpc.personal.sign},enumerable:!0,configurable:!0}),t.prototype.sign=function(t,e){return this.canSignPersonal?this.signPersonal(e,t):this.signRaw(e,t)},t.prototype.recoverSigningAddress=function(t,n){var r=this;return new Promise(function(i,o){r.getABI(n).signedMessageECRECOVER.call(t.checksum,p.add0xPrefix(t.r),p.add0xPrefix(t.s),p.add0xPrefix(t.v),e.promiseExecutor(i,o))})},t.prototype.validateAggregateSignature=function(t,e,n){var r=p.isSameHexValue(e.address,n);return this.verifyProofOfTransitionAgreement(t.walletAddress,t.trailIdentifier,t.round,t.transferTree.hash,t.spent,t.gained,r,e,n).then(function(e){return e&&p.isSameHexValue(e.toString(),t.hash)}).catch(function(t){return b.Logging.error("Transition Agreement Check Rejected: "+t),!1})},t.prototype.validateTransferDebit=function(t,e,n){var r=this;return b.Logging.debug("validateTransferDebit"),new Promise(function(i,o){var u=m.Aggregate.checksum(n,t.wallet,t.wallet_trail_identifier,t.round,t.sender_aggregate.tx_set_hash,new v.default(t.sender_aggregate.updated_spendings),new v.default(t.sender_aggregate.updated_gains)),s=e?y.Signature.fromRSV(n,u,t.sender_aggregate.hub_signature):y.Signature.fromRSV(t.wallet,u,t.sender_aggregate.wallet_signature);r.verifyProofOfTransitionAgreement(t.wallet,t.wallet_trail_identifier,t.round,t.sender_aggregate.tx_set_hash,new v.default(t.sender_aggregate.updated_spendings),new v.default(t.sender_aggregate.updated_gains),e,s,n).then(function(e){if(!p.isSameHexValue(e,u))return i(!1);b.Logging.debug(e),r.verifyProofOfTransferAggregationRaw(t.sender_aggregate.tx_set_index,t.sender_aggregate.tx_set_proof,t.recipient,new v.default(t.amount),t.recipient_trail_identifier,t.nonce,t.sender_aggregate.tx_set_hash,n).then(i)}).catch(o)})},t.prototype.validateTransferCredit=function(t,e,n){var r=this;return b.Logging.debug("validateTransferCredit"),new Promise(function(i,o){var u=m.Aggregate.checksum(n,t.recipient,t.recipient_trail_identifier,t.round,t.recipient_aggregate.tx_set_hash,new v.default(t.recipient_aggregate.updated_spendings),new v.default(t.recipient_aggregate.updated_gains)),s=e?y.Signature.fromRSV(n,u,t.recipient_aggregate.hub_signature):y.Signature.fromRSV(t.wallet,u,t.recipient_aggregate.wallet_signature);r.verifyProofOfTransitionAgreement(t.recipient,t.recipient_trail_identifier,t.round,t.recipient_aggregate.tx_set_hash,new v.default(t.recipient_aggregate.updated_spendings),new v.default(t.recipient_aggregate.updated_gains),e,s,n).then(function(e){if(!p.isSameHexValue(e,u))return i(!1);b.Logging.debug(e),r.verifyProofOfTransferAggregationRaw(t.recipient_aggregate.tx_set_index,t.recipient_aggregate.tx_set_proof,t.wallet,new v.default(t.amount),t.recipient_trail_identifier,t.nonce,t.recipient_aggregate.tx_set_hash,n).then(i)}).catch(o)})},t.prototype.validateDeliveryProof=function(t,e,n){var r=this;return b.Logging.debug("validateDeliveryProof"),new Promise(function(i,o){var u=new d.Round(n,t.recipient,t.recipientTrailIdentifier,t.round+1),s=e.delivery_proof,a=s.merkle_proof,c=new l.ProofOfStake(n,t.recipient,a.paint,t.recipientTrailIdentifier,t.round+1,a.hashes,a.values,a.left,a.right);r.verifyProof(u,c).then(function(e){if(!e)return b.Logging.error("Invalid recipient proof of stake"),i(!1);var u=s.final_aggregate,c=m.Aggregate.checksum(n,t.recipient,t.recipientTrailIdentifier,t.round,u.tx_set_hash,new v.default(u.updated_spendings),new v.default(u.updated_gains)),h=l.ProofOfStake.checksumPaint(c,t.recipient);if(!p.isSameHexValue(c,a.paint))return b.Logging.error(c),b.Logging.error(h),b.Logging.error(a.paint),b.Logging.error("Mismatching paint."),i(!1);var f=y.Signature.fromRSV(n,c,u.hub_signature);r.verifyProofOfTransitionAgreement(t.recipient,t.recipientTrailIdentifier,t.round,u.tx_set_hash,new v.default(u.updated_spendings),new v.default(u.updated_gains),!0,f,n).then(function(e){if(!p.isSameHexValue(e,c))return b.Logging.error("Mismatching aggregate checksum by hub"),b.Logging.error(e),b.Logging.error(c),i(!1);var a=y.Signature.fromRSV(n,c,u.wallet_signature);r.verifyProofOfTransitionAgreement(t.recipient,t.recipientTrailIdentifier,t.round,u.tx_set_hash,new v.default(u.updated_spendings),new v.default(u.updated_gains),!1,a,n).then(function(e){if(!p.isSameHexValue(e,c))return b.Logging.error("Mismatching aggregate checksum by wallet"),b.Logging.error(e),b.Logging.error(c),i(!1);r.verifyProofOfTransferAggregationRaw(s.transfer_membership_trail,s.transfer_membership_chain,t.sender,t.amount,t.recipientTrailIdentifier,t.nonce,u.tx_set_hash,n).then(i)}).catch(o)}).catch(o)}).catch(o)})},t.prototype.recoverPersonal=function(t,n){var r=this;return new Promise(function(t,i){r.web3.rpc.personal.ecRecover(n.checksum,p.add0xPrefix(n.rsv),e.promiseExecutor(t,i))})},t.prototype.validateSignature=function(t,e){return this.recoverSigningAddress(t,e).then(function(e){return p.isSameHexValue(e,t.address)}).catch(function(){return!1})},t.prototype.getHubOwnerAddress=function(t){var n=this;return new Promise(function(r,i){n.getABI(t).owner.call(e.promiseExecutor(r,i))})},t.prototype.validateHubSignature=function(t,e){var n=this;return this.getHubOwnerAddress(e).then(function(r){return n.recoverSigningAddress(t,e).then(function(n){return p.isSameHexValue(n,r)&&p.isSameHexValue(t.address,e)})}).catch(function(){return!1})},t.prototype.doNothingOnce=function(t,n){var r=this;return new Promise(function(i,o){r.getABI(n).doNothing.sendTransaction({from:t},e.promiseExecutor(i,o))})},t.prototype.doNothing=function(t,e,n){var r=this;return new Promise(function(i,o){return u(r,void 0,void 0,function(){var r;return s(this,function(o){switch(o.label){case 0:r=0,o.label=1;case 1:return r<t?[4,this.doNothingOnce(e,n)]:[3,4];case 2:o.sent(),o.label=3;case 3:return r++,[3,1];case 4:return i(!0),[2]}})})})},t.prototype.getDeposits=function(t,n,r){var i=this;return new Promise(function(o,u){if(n<1)return o(void 0);i.getABI(r).getDepositAggregate.call(t,n,e.promiseExecutor(o,u))}).then(function(t){return t&&t[0].valueOf()==n?new v.default(t[1].valueOf()):new v.default(0)})},t.prototype.deposit=function(t,n,r){var i=this;return new Promise(function(o,u){i.getABI(r).deposit.sendTransaction(n,{value:t.toFixed(0),from:n},e.promiseExecutor(o,u))})},t.prototype.requestWithdrawal=function(t,n,r,i){var o=this;return new Promise(function(u,s){o.getABI(i).requestWithdrawal.sendTransaction(r.paint,r.trail,r.hashes.map(function(t){return p.add0xPrefix(t)}),r.values.map(function(t){return t.toFixed(0)}),[r.left.toFixed(0),r.right.toFixed(0)],t.toFixed(0),{from:n},e.promiseExecutor(u,s))})},t.prototype.confirmWithdrawal=function(t,n){var r=this;return new Promise(function(i,o){r.getABI(n).confirmWithdrawal.sendTransaction({from:t},e.promiseExecutor(i,o))})},t.prototype.hasOutstandingChallenges=function(t){var n=this;return new Promise(function(r,i){n.getABI(t).hasOutstandingChallenges.call(e.promiseExecutor(r,i))})},t.prototype.hasMissedCheckpointSubmission=function(t){var n=this;return new Promise(function(r,i){n.getABI(t).hasMissedCheckpointSubmission.call(e.promiseExecutor(r,i))})},t.prototype.isPunished=function(t){var e=this;return new Promise(function(n,r){e.hasOutstandingChallenges(t).then(function(i){return i?n(!0):e.hasMissedCheckpointSubmission(t).then(n).catch(r)}).catch(r)})},t.prototype.submitChallengeInitialEmptyState=function(t,n,r,i,o,u,s,a){var c=this;return new Promise(function(h,l){c.getABI(a).submitInitialEmptyState.sendTransaction(r,n,[i.toFixed(0),o.toFixed(0)],p.add0xPrefix(u.r),p.add0xPrefix(u.s),p.add0xPrefix(u.v),{from:t,value:s.toFixed(0)},e.promiseExecutor(h,l))})},t.prototype.submitChallengeInitialMerkleState=function(t,n,r,i,o,u,s,a){var c=this;return new Promise(function(h,l){c.getABI(a).submitInitialMerkleState.sendTransaction(n.paint,n.trail,n.hashes.map(function(t){return p.add0xPrefix(t)}),n.values.map(function(t){return t.toFixed(0)}),n.left.toFixed(0),n.right.toFixed(0),r,[i.toFixed(0),o.toFixed(0)],p.add0xPrefix(u.r),p.add0xPrefix(u.s),p.add0xPrefix(u.v),{from:t,value:s.toFixed(0)},e.promiseExecutor(h,l))})},t.prototype.submitDeliveryCommitment=function(t,n,r,i,o,u,s,a,c,h,l,f,d,y){var v=this;return new Promise(function(m,g){b.Logging.debug([[p.add0xPrefix(t),p.add0xPrefix(n)],r,[i,o,u],s,p.add0xPrefix(a),[c.toFixed(0),h.toFixed(0)],l.toFixed(0),p.add0xPrefix(f.r),p.add0xPrefix(f.s),p.add0xPrefix(f.v),{value:d.toFixed(0)}]),v.getABI(y).submitDeliveryCommitment.sendTransaction([p.add0xPrefix(t),p.add0xPrefix(n)],r,[i,o,u],s.map(function(t){return p.add0xPrefix(t)}),p.add0xPrefix(a),[c.toFixed(0),h.toFixed(0)],l.toFixed(0),p.add0xPrefix(f.r),p.add0xPrefix(f.s),p.add0xPrefix(f.v),{value:d.toFixed(0)},e.promiseExecutor(m,g))})},t.prototype.getChallengeBook=function(t,n,r){var i=this;return new Promise(function(o,u){i.getABI(r).challengeBook.call(t,n,e.promiseExecutor(o,u))})},t.prototype.verifyProofOfTransferAggregationRaw=function(t,n,r,i,o,u,s,a){var c=this;return b.Logging.debug("verifyProofOfTransferAggregationRaw"),new Promise(function(h,l){var f=g.Transfer.checksum(r,i,o,u);c.getABI(a).verifyProofOfMembershipInternal.call(t,n.map(function(t){return p.add0xPrefix(t)}),p.add0xPrefix(f),p.add0xPrefix(s),e.promiseExecutor(h,l))})},t.prototype.verifyProofOfTransitionAgreement=function(t,n,r,i,o,u,s,a,c){var h=this;return b.Logging.debug("verifyProofOfTransitionAgreement"),b.Logging.debug([p.add0xPrefix(t),n,r,p.add0xPrefix(i),[o.toFixed(0),u.toFixed(0)],s,p.add0xPrefix(a.r),p.add0xPrefix(a.s),p.add0xPrefix(a.v)]),new Promise(function(l,f){h.getABI(c).verifyProofOfTransitionAgreement.call(p.add0xPrefix(t),n,r,p.add0xPrefix(i),[o.toFixed(0),u.toFixed(0)],s,p.add0xPrefix(a.r),p.add0xPrefix(a.s),p.add0xPrefix(a.v),e.promiseExecutor(l,f))}).then(e.valueOfResult)},t.prototype.verifyProof=function(t,e){return b.Logging.debug("verifyProof"),this.verifyProofRaw(t.walletAddress,e.paint,e.trail,t.roundNumber,e.hashes,e.values.map(function(t){return t.toFixed(0)}),e.left.toFixed(0),e.right.toFixed(0),t.contractAddress)},t.prototype.verifyProofRaw=function(t,n,r,i,o,u,s,a,c){var h=this;return b.Logging.debug("verifyProofRaw"),new Promise(function(l,f){h.getABI(c).verifyProofOfStake.call(t,n,r,i,o,u,s,a,e.promiseExecutor(l,f))})},t.prototype.getStateUpdateEvents=function(t,n){var r=this;return new Promise(function(i,o){r.getABI(n).StateUpdate({account:t},{fromBlock:0,toBlock:"latest"}).get(e.promiseExecutor(i,o))})},t.prototype.getStateUpdateEventAtRound=function(t,n,r){var i=this;return new Promise(function(o,u){i.getABI(r).StateUpdate({account:t,round:n},{fromBlock:0,toBlock:"latest"}).get(e.promiseExecutor(o,u))})},t.prototype.recoverOnlyOnChainFunds=function(t,n){var r=this;return new Promise(function(i,o){r.getABI(n).recoverOnlyOnChainFunds.sendTransaction({from:t},e.promiseExecutor(i,o))})},t.prototype.getReclaimableOnChainFunds=function(t,n){var r=this;return new Promise(function(i,o){r.getABI(n).recoverOnlyOnChainFunds.call({from:t},e.promiseExecutor(i,o))}).then(e.bigNumberValueOfResult)},t.prototype.recoverAllFunds=function(t){var n=this;return new Promise(function(r,i){n.getABI(t.contractAddress).recoverAllFunds.sendTransaction(t.paint,t.trail,t.hashes,t.values.map(function(t){return t.toFixed(0)}),[t.left.toFixed(0),t.right.toFixed(0)],{from:t.walletAddress},e.promiseExecutor(r,i))})},t.prototype.getAllReclaimableFunds=function(t){var n=this;return new Promise(function(r,i){n.getABI(t.contractAddress).recoverAllFunds.call(t.paint,t.trail,t.hashes,t.values.map(function(t){return t.toFixed(0)}),[t.left.toFixed(0),t.right.toFixed(0)],{from:t.walletAddress},e.promiseExecutor(r,i))}).then(e.bigNumberValueOfResult)},t.prototype.testrpcMineBlock=function(){var t=this;return new Promise(function(n,r){t.web3.rpc.currentProvider.sendAsync({jsonrpc:"2.0",method:"evm_mine",id:12345,params:[]},e.promiseExecutor(n,r))})},t=e=r([c.injectable(),o(0,c.inject(h.TYPES.EXTERNAL.WEB3_SERVICE_INTERFACE)),i("design:paramtypes",[Object])],t);var e}();e.ContractApiService=_},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=n(1),u=n(21),s=n(23);e.switchMap=function t(e,n){return"function"==typeof n?function(r){return r.pipe(t(function(t,r){return s.from(e(t,r)).pipe(u.map(function(e,i){return n(t,e,r,i)}))}))}:function(t){return t.lift(new a(e))}};var a=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.project))},t}(),c=function(t){function e(e,n){var r=t.call(this,e)||this;return r.project=n,r.index=0,r}return r(e,t),e.prototype._next=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=this.innerSubscription;r&&r.unsubscribe(),this.add(this.innerSubscription=o.subscribeToResult(this,t,e,n))},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e}(i.OuterSubscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.refCount=function(){return function(t){return t.lift(new o(t))}};var o=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new u(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i},t}(),u=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return r(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(i.Subscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.scan=function(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new o(t,e,n))}};var o=function(){function t(t,e,n){void 0===n&&(n=!1),this.accumulator=t,this.seed=e,this.hasSeed=n}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.accumulator,this.seed,this.hasSeed))},t}(),u=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.accumulator=n,o._seed=r,o.hasSeed=i,o.index=0,o}return r(e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(t){this.destination.error(t)}this.seed=e,this.destination.next(e)},e}(i.Subscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(41),u=n(22);e.takeLast=function(t){return function(e){return 0===t?u.empty():e.lift(new s(t))}};var s=function(){function t(t){if(this.total=t,this.total<0)throw new o.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.total))},t}(),a=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.ring=new Array,r.count=0,r}return r(e,t),e.prototype._next=function(t){var e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t},e.prototype._complete=function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=e++%n;t.next(r[o])}t.complete()},e}(i.Subscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){var n=t.call(this,"object unsubscribed")||this;return n.name="ObjectUnsubscribedError",Object.setPrototypeOf(n,e.prototype),n}return r(e,t),e}(Error);e.ObjectUnsubscribedError=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(41),u=n(22);e.take=function(t){return function(e){return 0===t?u.empty():e.lift(new s(t))}};var s=function(){function t(t){if(this.total=t,this.total<0)throw new o.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.total))},t}(),a=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return r(e,t),e.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},e}(i.Subscriber)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(78),i=n(40);function o(){return new i.EmptyError}e.throwIfEmpty=function(t){return void 0===t&&(t=o),r.tap({hasValue:!1,next:function(){this.hasValue=!0},complete:function(){if(!this.hasValue)throw t()}})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(22),i=n(85),o=n(80),u=function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){switch(this.kind){case"N":return i.of(this.value);case"E":return o.throwError(this.error);case"C":return r.empty()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();e.Notification=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(32),i=n(42);e.mergeAll=function(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),r.mergeMap(i.identity,t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(18);e.isNumeric=function(t){return!r.isArray(t)&&t-parseFloat(t)+1>=0}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(224),o=function(t){function e(n,r){void 0===r&&(r=i.Scheduler.now);var o=t.call(this,n,function(){return e.delegate&&e.delegate!==o?e.delegate.now():r()})||this;return o.actions=[],o.active=!1,o.scheduled=void 0,o}return r(e,t),e.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,i):t.prototype.schedule.call(this,n,r,i)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(i.Scheduler);e.AsyncScheduler=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return r(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(n(225).Action);e.AsyncAction=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.rxSubscriber="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("rxSubscriber"):"@@rxSubscriber",e.$$rxSubscriber=e.rxSubscriber},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hostReportError=function(t){setTimeout(function(){throw t})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=!1;e.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isFunction=function(t){return"function"==typeof t}},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,u=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(u=(o<3?i(u):o>3?i(e,n,u):i(e,n))||u);return o>3&&u&&Object.defineProperty(e,n,u),u},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=this&&this.__param||function(t,e){return function(n,r){e(n,r,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(7),s=n(14),a=n(15),c=function(){function t(t){this.api=t}return t.prototype.getStatusData=function(t){return this.api.get(t.webAddress,"audit/")},t.prototype.getWalletData=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0);var r=u.remove0xPrefix(t.address);return this.api.get(t.webAddress,"audit/"+r+"/","round_number="+e+"&transfer_id="+n)},t.prototype.whoisWallet=function(t,e){return t=u.remove0xPrefix(t),this.api.get(e,"audit/"+t+"/whois")},t.prototype.getRoundTransfers=function(t,e,n){var r=u.remove0xPrefix(t.address);return e=u.remove0xPrefix(e),this.api.get(t.webAddress,"transfer/","wallet__address="+r+"&recipient__address="+e+"&round="+n+"&ordering=id")},t.prototype.getTransfers=function(t,e){var n=u.remove0xPrefix(t.address);return e=u.remove0xPrefix(e),this.api.get(t.webAddress,"transfer/","wallet__address="+n+"&recipient__address="+e+"&ordering=id")},t.prototype.register=function(t,e){return this.api.post(t.webAddress,"admission/",{authorization:e.rsv,address:u.remove0xPrefix(t.address)})},t.prototype.sendTransfer=function(t,e,n,r){return this.api.post(t.webAddress,"transfer/",{wallet_signature:{value:n.rsv},wallet_balance_signature:{value:r.rsv},round:e.round,amount:e.amount,nonce:e.nonce,wallet:u.remove0xPrefix(e.sender),recipient:u.remove0xPrefix(e.recipient)})},t.prototype.sendReceipt=function(t,e,n){return this.api.put(t.webAddress,"transfer/"+e+"/",{wallet_signature:{value:n.rsv}})},t=r([s.injectable(),o(0,s.inject(a.TYPES.EXTERNAL.REST_API_INTERFACE)),i("design:paramtypes",[Object])],t)}();e.HubApiService=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(63),i=n(102),o=function(){function t(t){this._binding=t}return t.prototype.when=function(t){return this._binding.constraint=t,new r.BindingOnSyntax(this._binding)},t.prototype.whenTargetNamed=function(t){return this._binding.constraint=i.namedConstraint(t),new r.BindingOnSyntax(this._binding)},t.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){return null!==t.target&&!t.target.isNamed()&&!t.target.isTagged()},new r.BindingOnSyntax(this._binding)},t.prototype.whenTargetTagged=function(t,e){return this._binding.constraint=i.taggedConstraint(t)(e),new r.BindingOnSyntax(this._binding)},t.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(e){return i.typeConstraint(t)(e.parentRequest)},new r.BindingOnSyntax(this._binding)},t.prototype.whenParentNamed=function(t){return this._binding.constraint=function(e){return i.namedConstraint(t)(e.parentRequest)},new r.BindingOnSyntax(this._binding)},t.prototype.whenParentTagged=function(t,e){return this._binding.constraint=function(n){return i.taggedConstraint(t)(e)(n.parentRequest)},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(e){return i.traverseAncerstors(e,i.typeConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(e){return!i.traverseAncerstors(e,i.typeConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(e){return i.traverseAncerstors(e,i.namedConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(e){return!i.traverseAncerstors(e,i.namedConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._binding.constraint=function(n){return i.traverseAncerstors(n,i.taggedConstraint(t)(e))},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorTagged=function(t,e){return this._binding.constraint=function(n){return!i.traverseAncerstors(n,i.taggedConstraint(t)(e))},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(e){return i.traverseAncerstors(e,t)},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(e){return!i.traverseAncerstors(e,t)},new r.BindingOnSyntax(this._binding)},t}();e.BindingWhenSyntax=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(62),i=function(){function t(t){this._binding=t}return t.prototype.onActivation=function(t){return this._binding.onActivation=t,new r.BindingWhenSyntax(this._binding)},t}();e.BindingOnSyntax=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e){var n=t.call(this,e)||this;return n._reason=e,n}return r(e,t),Object.defineProperty(e.prototype,"reason",{get:function(){return this._reason},enumerable:!0,configurable:!0}),e.NO_WALLET_SPECIFIED=new e("No wallet specified for update."),e.NO_CONTRACT_STATE_SPECIFIED=new e("No contract state provided for update."),e.INCORRECT_NETWORK_ID=new e("Incorrect Blockchain Network Identifier."),e.UNREGISTERED=new e("Unregistered wallet."),e.UNREGISTERED_NO_REQUEST=new e("Unregistered wallet with no registration request provided."),e.UNREGISTERED_BAD_REQUEST=new e("Unregistered wallet with invalid registration request provided."),e.UNREGISTERED_APPROVAL_NOT_PENDING=new e("Unregistered wallet with no approval pending."),e.UNREGISTERED_APPROVAL_NOT_PROVIDED=new e("Unregistered wallet with no registration approval provided."),e.UNREGISTERED_APPROVAL_INVALID=new e("Unregistered wallet with invalid registration approval provided."),e.LOGIC_PROOF_ALREADY_UPDATED=new e("Proof of stake already updated."),e.LOGIC_OLD_ROUNDS_NOT_UPDATED=new e("Older rounds not updated."),e.LOGIC_PREVIOUS_ROUND_NOT_UPDATED=new e("Previous round not updated."),e.LOGIC_AGGREGATION_FORK=new e("Fork in transfer aggregation."),e.LOGIC_TRANSFER_CONFIRM_ERROR_OUTGOING=new e("Could not confirm outgoing transfer."),e.LOGIC_TRANSFER_CONFIRM_ERROR_INCOMING=new e("Could not confirm incoming transfer."),e.LOGIC_TRANSFER_CONFIRM_ERROR=new e("Could not confirm transfer."),e.LOGIC_RECEIPT_VALIDATION_ERROR_MISSING_CONFIRMATION=new e("Could not confirm receipt due to missing confirmation signatures."),e.LOGIC_PREMATURE_ROUND_ADVANCEMENT=new e("Cannot advance latest local round ahead of on-chain round."),e.LOGIC_UNKNOWN=new e("Unknown Logic Error"),e.LOCAL_DATA_MISSING_LATEST_ROUND=new e("Missing local data of latest round."),e.LOCAL_DATA_MISSING_PREVIOUS_ROUND=new e("Missing local data of previous round."),e.LOCAL_DATA_MISSING_MERKLE_PROOF=new e("Missing required merkle proof."),e.REMOTE_DATA_NO_MERKLE_PROOFS=new e("No merkle proof data available in update."),e.REMOTE_DATA_MISSING_MERKLE_PROOF=new e("Missing required merkle proof in update."),e.REMOTE_DATA_MISSING_DELIVERY_RECEIPT=new e("Missing required delivery receipt in update."),e.REMOTE_DATA_INVALID_DELIVERY_RECEIPT=new e("Invalid delivery receipt in update."),e.PROOF_OF_STAKE_INSUFFICIENT_BALANCE=new e("Granted balance in proof of stake is less than expected."),e.PROOF_OF_STAKE_INVALID=new e("Unverifiable proof of stake."),e.PROOF_OF_STAKE_INVALID_TRAIL=new e("Incorrect proof of stake trail."),e.PROOF_OF_STAKE_UNEXPECTED_PAINT=new e("Unexpected paint used in provided proof of stake."),e.AGGREGATE_DEBIT_WALLET_SIGNATURE_INVALID=new e("Invalid aggregate signature provided by sender on debit of transfer."),e.AGGREGATE_CREDIT_WALLET_SIGNATURE_INVALID=new e("Invalid aggregate signature provided by recipient on credit of transfer."),e.AGGREGATE_DEBIT_HUB_SIGNATURE_INVALID=new e("Invalid aggregate signature provided by hub on debit of transfer."),e.AGGREGATE_CREDIT_HUB_SIGNATURE_INVALID=new e("Invalid aggregate signature provided by hub on credit of transfer."),e.AGGREGATE_TX_SET_ROOT_INVALID_INCOMING=new e("Invalid aggregate transfer set root provided for next incoming transfer."),e.AGGREGATE_TX_SET_ROOT_INVALID_OUTGOING=new e("Invalid aggregate transfer set root provided for next outgoing transfer."),e.PROVIDER_PUNISHED=new e("This provider is not longer operational."),e.PROVIDER_NOT_AUDITABLE=new e("This provider has not synchronized with the parent chain."),e}(Error);e.WalletUpdateError=i},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(28),o=n(266),u=n(118),s=r(n(9)),a=function(){function t(t,e,n,r){this._address=t,this._networkId=e,this._contractAddress=n,this._webAddress=r,this._registered=!1,this._pendingRegistrationApproval=!1,this._rounds=new Map,this._latestRoundNumber=0,this._onChainBalance=new s.default(0),this._lock=new o.Mutex,this._rounds.set(0,new i.Round(n,t,0,0))}return t.fromJSON=function(e){var n=new t(e.address,e.networkId,e.contractAddress,e.webAddress);for(var r in n._trailIdentifier=e.trailIdentifier,n._registered=e.registered,n._registrationRound=e.registrationRound,n._pendingRegistrationApproval=e.pendingRegistrationApproval,n._registrationApproval=e.registrationApproval?u.Signature.fromJSON(e.registrationApproval):void 0,e.rounds)if(e.rounds.hasOwnProperty(r)){var o=e.rounds[r];n._rounds.set(parseInt(r,10),i.Round.fromJSON(o))}return n._onChainBalance=new s.default(e.onChainBalance),n._latestRoundNumber=parseInt(e.latestRoundNumber,10),n},Object.defineProperty(t.prototype,"json",{get:function(){var t={};return this._rounds.forEach(function(e,n,r){t[n]=e.json}),{address:this._address,networkId:this._networkId,contractAddress:this._contractAddress,webAddress:this._webAddress,trailIdentifier:this._trailIdentifier,registered:this._registered,registrationRound:this._registrationRound,pendingRegistrationApproval:this._pendingRegistrationApproval,registrationApproval:this.registrationApproval?this.registrationApproval.json:void 0,rounds:t,latestRoundNumber:this._latestRoundNumber,onChainBalance:this._onChainBalance}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isRegistered",{get:function(){return this._registered},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPendingRegistrationApproval",{get:function(){return this._pendingRegistrationApproval},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"address",{get:function(){return this._address},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contractAddress",{get:function(){return this._contractAddress},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"networkId",{get:function(){return this._networkId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trailIdentifier",{get:function(){return this._trailIdentifier},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"webAddress",{get:function(){return this._webAddress},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"latestRound",{get:function(){return this.getRound(this._latestRoundNumber)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"previousRound",{get:function(){return this.getRound(this._latestRoundNumber-1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"secondPreviousRound",{get:function(){return this.getRound(this._latestRoundNumber-2)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lock",{get:function(){return this._lock},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"registrationRound",{get:function(){return this._registrationRound},enumerable:!0,configurable:!0}),t.prototype.getAdmissionAggregate=function(t,e){return void 0===e&&(e=0),new u.Aggregate(this.contractAddress,this.address,e,t)},t.prototype.markRegistered=function(t,e){if(!this.isRegistered){this._registrationApproval=t,this._registered=!0,this.unmarkPendingRegistrationApproval(),this._latestRoundNumber=this.registrationRound,this._trailIdentifier=e;var n=new i.Round(this.contractAddress,this.address,this.trailIdentifier,this.registrationRound);this._rounds.set(n.roundNumber,n)}},Object.defineProperty(t.prototype,"registrationApproval",{get:function(){return this._registrationApproval},enumerable:!0,configurable:!0}),t.prototype.markPendingRegistrationApproval=function(t){this._registrationRound=t,this._pendingRegistrationApproval=!0},t.prototype.unmarkPendingRegistrationApproval=function(){this._pendingRegistrationApproval=!1},t.prototype.getRound=function(t){return this._rounds.get(t)},t.prototype.addRound=function(t){if(t.roundNumber!=this._latestRoundNumber+1)return!1;this._rounds.set(t.roundNumber,t),this._latestRoundNumber=t.roundNumber},Object.defineProperty(t.prototype,"withdrawableAmount",{get:function(){if(!this.previousRound||!this.previousRound.proofOfStake)return new s.default(0);var t=this.previousRound.minimumAuthorizedBalance?this.previousRound.minimumAuthorizedBalance.amount:this.previousRound.availableBalance,e=s.default.min(this.previousRound.chainBalance,t),n=this.latestRound.minimumAuthorizedBalance?this.latestRound.minimumAuthorizedBalance.amount:this.offChainBalance;return s.default.min(e,n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onChainBalance",{get:function(){return this._onChainBalance},set:function(t){this._onChainBalance=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offChainBalance",{get:function(){var t=new s.default(0);if(!this.latestRound)return t;var e=this.latestRound.availableBalance;return!this.latestRound.proofOfStake&&this.previousRound&&(e=e.plus(this.previousRound.availableBalance)),e},enumerable:!0,configurable:!0}),t}();e.Wallet=a},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(9)),o=function(){function t(t,e,n,r){this._txId=t,this._block=e,this._roundNumber=n,this._amount=r}return t.fromJSON=function(e){return new t(e.txId,e.block,e.roundNumber,new i.default(e.amount))},Object.defineProperty(t.prototype,"json",{get:function(){return{txId:this._txId,block:this._block,roundNumber:this._roundNumber,amount:this._amount}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"txId",{get:function(){return this._txId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"block",{get:function(){return this._block},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"roundNumber",{get:function(){return this._roundNumber},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"amount",{get:function(){return this._amount},enumerable:!0,configurable:!0}),t}();e.Deposit=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(9)),u=n(38),s=n(29),a=n(7),c=n(20),h=function(t){function e(e,n,r,i,u,s,a,c){var h=t.call(this)||this;return h._address=e,h._round=n,h._amount=r,h._recipient=i,h._recipientTrailIdentifier=u,h._target=s,h._nonce=a,h._txId=c,h._amount=new o.default(r),void 0===a&&(h._nonce=Math.floor(1e8+899999999*Math.random())),h}return r(e,t),e.fromJSON=function(t){var n=new e(t.address,t.round,new o.default(t.amount),t.recipient,t.recipientTrailIdentifier,t.target,t.nonce,t.txId);return n._debitAuthorization=t.debitAuthorization,n._debitConfirmation=t.debitConfirmation?s.Signature.fromJSON(t.debitConfirmation):void 0,n._creditAuthorization=t.creditAuthorization,n._creditConfirmation=t.creditConfirmation?s.Signature.fromJSON(t.creditConfirmation):void 0,n._deliveryProof=t.deliveryProof,n},e.checksum=function(t,e,n,r){return a.Web3Utils.soliditySha3({type:"bytes32",value:a.Web3Utils.soliditySha3({type:"address",value:t})},{type:"uint256",value:e.toFixed(0)},{type:"uint64",value:n},{type:"uint32",value:r}).toString()},Object.defineProperty(e.prototype,"json",{get:function(){return{address:this._address,round:this._round,amount:this._amount,recipient:this._recipient,recipientTrailIdentifier:this._recipientTrailIdentifier,target:this._target,nonce:this._nonce,txId:this._txId,debitAuthorization:this._debitAuthorization,debitConfirmation:this._debitConfirmation?this._debitConfirmation.json:void 0,creditAuthorization:this._creditAuthorization,creditConfirmation:this._creditConfirmation?this._creditConfirmation.json:void 0,deliveryProof:this._deliveryProof}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.nonce},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"txId",{get:function(){return this._txId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hash",{get:function(){return e.checksum(this._target,this._amount,this._recipientTrailIdentifier,this._nonce)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sender",{get:function(){return this._address},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"round",{get:function(){return this._round},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"amount",{get:function(){return this._amount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recipient",{get:function(){return this._recipient},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recipientTrailIdentifier",{get:function(){return this._recipientTrailIdentifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonce",{get:function(){return this._nonce},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"debitAuthorization",{get:function(){return this._debitAuthorization},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"creditAuthorization",{get:function(){return this._creditAuthorization},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"debitConfirmation",{get:function(){return this._debitConfirmation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"creditConfirmation",{get:function(){return this._creditConfirmation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deliveryProof",{get:function(){return this._deliveryProof},enumerable:!0,configurable:!0}),e.prototype.getConfirmationFor=function(t){return a.isSameHexValue(t.address,this.sender)?this.debitConfirmation:this.creditConfirmation},e.prototype.saveDebitAuthorization=function(t){return this._debitAuthorization?c.Logging.error("saveDebitAuthorization repetition"):this._debitAuthorization=t,this},e.prototype.saveDebitConfirmation=function(t){return this._debitConfirmation?c.Logging.error("saveDebitConfirmation repetition"):this._debitConfirmation=t,this},e.prototype.saveCreditAuthorization=function(t){return this._creditAuthorization?c.Logging.error("saveCreditAuthorization repetition"):this._creditAuthorization=t,this},e.prototype.saveCreditConfirmation=function(t){return this._creditConfirmation?c.Logging.error("saveCreditConfirmation repetition"):this._creditConfirmation=t,this},e.prototype.saveDeliveryProof=function(t){return this._deliveryProof?c.Logging.error("saveDeliveryProof repetition"):this._deliveryProof=t,this},e}(u.Hashable);e.Transfer=h},function(t,e){t.exports=require("buffer")},function(t,e,n){var r;(function(){var n=this,i=n._,o=Array.prototype,u=Object.prototype,s=Function.prototype,a=o.push,c=o.slice,h=u.toString,l=u.hasOwnProperty,f=Array.isArray,p=Object.keys,d=s.bind,y=Object.create,v=function(){},m=function(t){return t instanceof m?t:this instanceof m?void(this._wrapped=t):new m(t)};void 0!==t&&t.exports&&(e=t.exports=m),e._=m,m.VERSION="1.8.3";var g=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}},b=function(t,e,n){return null==t?m.identity:m.isFunction(t)?g(t,e,n):m.isObject(t)?m.matcher(t):m.property(t)};m.iteratee=function(t,e){return b(t,e,1/0)};var _=function(t,e){return function(n){var r=arguments.length;if(r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],u=t(o),s=u.length,a=0;a<s;a++){var c=u[a];e&&void 0!==n[c]||(n[c]=o[c])}return n}},w=function(t){if(!m.isObject(t))return{};if(y)return y(t);v.prototype=t;var e=new v;return v.prototype=null,e},M=function(t){return function(e){return null==e?void 0:e[t]}},O=Math.pow(2,53)-1,S=M("length"),A=function(t){var e=S(t);return"number"==typeof e&&e>=0&&e<=O};function E(t){return function(e,n,r,i){n=g(n,i,4);var o=!A(e)&&m.keys(e),u=(o||e).length,s=t>0?0:u-1;return arguments.length<3&&(r=e[o?o[s]:s],s+=t),function(e,n,r,i,o,u){for(;o>=0&&o<u;o+=t){var s=i?i[o]:o;r=n(r,e[s],s,e)}return r}(e,n,r,o,s,u)}}m.each=m.forEach=function(t,e,n){var r,i;if(e=g(e,n),A(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var o=m.keys(t);for(r=0,i=o.length;r<i;r++)e(t[o[r]],o[r],t)}return t},m.map=m.collect=function(t,e,n){e=b(e,n);for(var r=!A(t)&&m.keys(t),i=(r||t).length,o=Array(i),u=0;u<i;u++){var s=r?r[u]:u;o[u]=e(t[s],s,t)}return o},m.reduce=m.foldl=m.inject=E(1),m.reduceRight=m.foldr=E(-1),m.find=m.detect=function(t,e,n){var r;if(void 0!==(r=A(t)?m.findIndex(t,e,n):m.findKey(t,e,n))&&-1!==r)return t[r]},m.filter=m.select=function(t,e,n){var r=[];return e=b(e,n),m.each(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r},m.reject=function(t,e,n){return m.filter(t,m.negate(b(e)),n)},m.every=m.all=function(t,e,n){e=b(e,n);for(var r=!A(t)&&m.keys(t),i=(r||t).length,o=0;o<i;o++){var u=r?r[o]:o;if(!e(t[u],u,t))return!1}return!0},m.some=m.any=function(t,e,n){e=b(e,n);for(var r=!A(t)&&m.keys(t),i=(r||t).length,o=0;o<i;o++){var u=r?r[o]:o;if(e(t[u],u,t))return!0}return!1},m.contains=m.includes=m.include=function(t,e,n,r){return A(t)||(t=m.values(t)),("number"!=typeof n||r)&&(n=0),m.indexOf(t,e,n)>=0},m.invoke=function(t,e){var n=c.call(arguments,2),r=m.isFunction(e);return m.map(t,function(t){var i=r?e:t[e];return null==i?i:i.apply(t,n)})},m.pluck=function(t,e){return m.map(t,m.property(e))},m.where=function(t,e){return m.filter(t,m.matcher(e))},m.findWhere=function(t,e){return m.find(t,m.matcher(e))},m.max=function(t,e,n){var r,i,o=-1/0,u=-1/0;if(null==e&&null!=t)for(var s=0,a=(t=A(t)?t:m.values(t)).length;s<a;s++)(r=t[s])>o&&(o=r);else e=b(e,n),m.each(t,function(t,n,r){((i=e(t,n,r))>u||i===-1/0&&o===-1/0)&&(o=t,u=i)});return o},m.min=function(t,e,n){var r,i,o=1/0,u=1/0;if(null==e&&null!=t)for(var s=0,a=(t=A(t)?t:m.values(t)).length;s<a;s++)(r=t[s])<o&&(o=r);else e=b(e,n),m.each(t,function(t,n,r){((i=e(t,n,r))<u||i===1/0&&o===1/0)&&(o=t,u=i)});return o},m.shuffle=function(t){for(var e,n=A(t)?t:m.values(t),r=n.length,i=Array(r),o=0;o<r;o++)(e=m.random(0,o))!==o&&(i[o]=i[e]),i[e]=n[o];return i},m.sample=function(t,e,n){return null==e||n?(A(t)||(t=m.values(t)),t[m.random(t.length-1)]):m.shuffle(t).slice(0,Math.max(0,e))},m.sortBy=function(t,e,n){return e=b(e,n),m.pluck(m.map(t,function(t,n,r){return{value:t,index:n,criteria:e(t,n,r)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index}),"value")};var T=function(t){return function(e,n,r){var i={};return n=b(n,r),m.each(e,function(r,o){var u=n(r,o,e);t(i,r,u)}),i}};m.groupBy=T(function(t,e,n){m.has(t,n)?t[n].push(e):t[n]=[e]}),m.indexBy=T(function(t,e,n){t[n]=e}),m.countBy=T(function(t,e,n){m.has(t,n)?t[n]++:t[n]=1}),m.toArray=function(t){return t?m.isArray(t)?c.call(t):A(t)?m.map(t,m.identity):m.values(t):[]},m.size=function(t){return null==t?0:A(t)?t.length:m.keys(t).length},m.partition=function(t,e,n){e=b(e,n);var r=[],i=[];return m.each(t,function(t,n,o){(e(t,n,o)?r:i).push(t)}),[r,i]},m.first=m.head=m.take=function(t,e,n){if(null!=t)return null==e||n?t[0]:m.initial(t,t.length-e)},m.initial=function(t,e,n){return c.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},m.last=function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:m.rest(t,Math.max(0,t.length-e))},m.rest=m.tail=m.drop=function(t,e,n){return c.call(t,null==e||n?1:e)},m.compact=function(t){return m.filter(t,m.identity)};var x=function(t,e,n,r){for(var i=[],o=0,u=r||0,s=S(t);u<s;u++){var a=t[u];if(A(a)&&(m.isArray(a)||m.isArguments(a))){e||(a=x(a,e,n));var c=0,h=a.length;for(i.length+=h;c<h;)i[o++]=a[c++]}else n||(i[o++]=a)}return i};function P(t){return function(e,n,r){n=b(n,r);for(var i=S(e),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(n(e[o],o,e))return o;return-1}}function I(t,e,n){return function(r,i,o){var u=0,s=S(r);if("number"==typeof o)t>0?u=o>=0?o:Math.max(o+s,u):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return r[o=n(r,i)]===i?o:-1;if(i!=i)return(o=e(c.call(r,u,s),m.isNaN))>=0?o+u:-1;for(o=t>0?u:s-1;o>=0&&o<s;o+=t)if(r[o]===i)return o;return-1}}m.flatten=function(t,e){return x(t,e,!1)},m.without=function(t){return m.difference(t,c.call(arguments,1))},m.uniq=m.unique=function(t,e,n,r){m.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=b(n,r));for(var i=[],o=[],u=0,s=S(t);u<s;u++){var a=t[u],c=n?n(a,u,t):a;e?(u&&o===c||i.push(a),o=c):n?m.contains(o,c)||(o.push(c),i.push(a)):m.contains(i,a)||i.push(a)}return i},m.union=function(){return m.uniq(x(arguments,!0,!0))},m.intersection=function(t){for(var e=[],n=arguments.length,r=0,i=S(t);r<i;r++){var o=t[r];if(!m.contains(e,o)){for(var u=1;u<n&&m.contains(arguments[u],o);u++);u===n&&e.push(o)}}return e},m.difference=function(t){var e=x(arguments,!0,!0,1);return m.filter(t,function(t){return!m.contains(e,t)})},m.zip=function(){return m.unzip(arguments)},m.unzip=function(t){for(var e=t&&m.max(t,S).length||0,n=Array(e),r=0;r<e;r++)n[r]=m.pluck(t,r);return n},m.object=function(t,e){for(var n={},r=0,i=S(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},m.findIndex=P(1),m.findLastIndex=P(-1),m.sortedIndex=function(t,e,n,r){for(var i=(n=b(n,r,1))(e),o=0,u=S(t);o<u;){var s=Math.floor((o+u)/2);n(t[s])<i?o=s+1:u=s}return o},m.indexOf=I(1,m.findIndex,m.sortedIndex),m.lastIndexOf=I(-1,m.findLastIndex),m.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n)i[o]=t;return i};var R=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=w(t.prototype),u=t.apply(o,i);return m.isObject(u)?u:o};m.bind=function(t,e){if(d&&t.bind===d)return d.apply(t,c.call(arguments,1));if(!m.isFunction(t))throw new TypeError("Bind must be called on a function");var n=c.call(arguments,2),r=function(){return R(t,r,e,this,n.concat(c.call(arguments)))};return r},m.partial=function(t){var e=c.call(arguments,1),n=function(){for(var r=0,i=e.length,o=Array(i),u=0;u<i;u++)o[u]=e[u]===m?arguments[r++]:e[u];for(;r<arguments.length;)o.push(arguments[r++]);return R(t,n,this,this,o)};return n},m.bindAll=function(t){var e,n,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(e=1;e<r;e++)t[n=arguments[e]]=m.bind(t[n],t);return t},m.memoize=function(t,e){var n=function(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return m.has(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n},m.delay=function(t,e){var n=c.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},m.defer=m.partial(m.delay,m,1),m.throttle=function(t,e,n){var r,i,o,u=null,s=0;n||(n={});var a=function(){s=!1===n.leading?0:m.now(),u=null,o=t.apply(r,i),u||(r=i=null)};return function(){var c=m.now();s||!1!==n.leading||(s=c);var h=e-(c-s);return r=this,i=arguments,h<=0||h>e?(u&&(clearTimeout(u),u=null),s=c,o=t.apply(r,i),u||(r=i=null)):u||!1===n.trailing||(u=setTimeout(a,h)),o}},m.debounce=function(t,e,n){var r,i,o,u,s,a=function(){var c=m.now()-u;c<e&&c>=0?r=setTimeout(a,e-c):(r=null,n||(s=t.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,u=m.now();var c=n&&!r;return r||(r=setTimeout(a,e)),c&&(s=t.apply(o,i),o=i=null),s}},m.wrap=function(t,e){return m.partial(e,t)},m.negate=function(t){return function(){return!t.apply(this,arguments)}},m.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},m.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},m.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},m.once=m.partial(m.before,2);var N=!{toString:null}.propertyIsEnumerable("toString"),j=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function C(t,e){var n=j.length,r=t.constructor,i=m.isFunction(r)&&r.prototype||u,o="constructor";for(m.has(t,o)&&!m.contains(e,o)&&e.push(o);n--;)(o=j[n])in t&&t[o]!==i[o]&&!m.contains(e,o)&&e.push(o)}m.keys=function(t){if(!m.isObject(t))return[];if(p)return p(t);var e=[];for(var n in t)m.has(t,n)&&e.push(n);return N&&C(t,e),e},m.allKeys=function(t){if(!m.isObject(t))return[];var e=[];for(var n in t)e.push(n);return N&&C(t,e),e},m.values=function(t){for(var e=m.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r},m.mapObject=function(t,e,n){e=b(e,n);for(var r,i=m.keys(t),o=i.length,u={},s=0;s<o;s++)u[r=i[s]]=e(t[r],r,t);return u},m.pairs=function(t){for(var e=m.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r},m.invert=function(t){for(var e={},n=m.keys(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e},m.functions=m.methods=function(t){var e=[];for(var n in t)m.isFunction(t[n])&&e.push(n);return e.sort()},m.extend=_(m.allKeys),m.extendOwn=m.assign=_(m.keys),m.findKey=function(t,e,n){e=b(e,n);for(var r,i=m.keys(t),o=0,u=i.length;o<u;o++)if(e(t[r=i[o]],r,t))return r},m.pick=function(t,e,n){var r,i,o={},u=t;if(null==u)return o;m.isFunction(e)?(i=m.allKeys(u),r=g(e,n)):(i=x(arguments,!1,!1,1),r=function(t,e,n){return e in n},u=Object(u));for(var s=0,a=i.length;s<a;s++){var c=i[s],h=u[c];r(h,c,u)&&(o[c]=h)}return o},m.omit=function(t,e,n){if(m.isFunction(e))e=m.negate(e);else{var r=m.map(x(arguments,!1,!1,1),String);e=function(t,e){return!m.contains(r,e)}}return m.pick(t,e,n)},m.defaults=_(m.allKeys,!0),m.create=function(t,e){var n=w(t);return e&&m.extendOwn(n,e),n},m.clone=function(t){return m.isObject(t)?m.isArray(t)?t.slice():m.extend({},t):t},m.tap=function(t,e){return e(t),t},m.isMatch=function(t,e){var n=m.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;o<r;o++){var u=n[o];if(e[u]!==i[u]||!(u in i))return!1}return!0};var k=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof m&&(t=t._wrapped),e instanceof m&&(e=e._wrapped);var i=h.call(t);if(i!==h.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e}var o="[object Array]"===i;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var u=t.constructor,s=e.constructor;if(u!==s&&!(m.isFunction(u)&&u instanceof u&&m.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],r=r||[];for(var a=n.length;a--;)if(n[a]===t)return r[a]===e;if(n.push(t),r.push(e),o){if((a=t.length)!==e.length)return!1;for(;a--;)if(!k(t[a],e[a],n,r))return!1}else{var c,l=m.keys(t);if(a=l.length,m.keys(e).length!==a)return!1;for(;a--;)if(c=l[a],!m.has(e,c)||!k(t[c],e[c],n,r))return!1}return n.pop(),r.pop(),!0};m.isEqual=function(t,e){return k(t,e)},m.isEmpty=function(t){return null==t||(A(t)&&(m.isArray(t)||m.isString(t)||m.isArguments(t))?0===t.length:0===m.keys(t).length)},m.isElement=function(t){return!(!t||1!==t.nodeType)},m.isArray=f||function(t){return"[object Array]"===h.call(t)},m.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},m.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){m["is"+t]=function(e){return h.call(e)==="[object "+t+"]"}}),m.isArguments(arguments)||(m.isArguments=function(t){return m.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(m.isFunction=function(t){return"function"==typeof t||!1}),m.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},m.isNaN=function(t){return m.isNumber(t)&&t!==+t},m.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===h.call(t)},m.isNull=function(t){return null===t},m.isUndefined=function(t){return void 0===t},m.has=function(t,e){return null!=t&&l.call(t,e)},m.noConflict=function(){return n._=i,this},m.identity=function(t){return t},m.constant=function(t){return function(){return t}},m.noop=function(){},m.property=M,m.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},m.matcher=m.matches=function(t){return t=m.extendOwn({},t),function(e){return m.isMatch(e,t)}},m.times=function(t,e,n){var r=Array(Math.max(0,t));e=g(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r},m.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},m.now=Date.now||function(){return(new Date).getTime()};var L={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},D=m.invert(L),B=function(t){var e=function(e){return t[e]},n="(?:"+m.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}};m.escape=B(L),m.unescape=B(D),m.result=function(t,e,n){var r=null==t?void 0:t[e];return void 0===r&&(r=n),m.isFunction(r)?r.call(t):r};var U=0;m.uniqueId=function(t){var e=++U+"";return t?t+e:e},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var W=/(.)^/,F={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},V=/\\|'|\r|\n|\u2028|\u2029/g,G=function(t){return"\\"+F[t]};m.template=function(t,e,n){!e&&n&&(e=n),e=m.defaults({},e,m.templateSettings);var r=RegExp([(e.escape||W).source,(e.interpolate||W).source,(e.evaluate||W).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(r,function(e,n,r,u,s){return o+=t.slice(i,s).replace(V,G),i=s+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":u&&(o+="';\n"+u+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var u=new Function(e.variable||"obj","_",o)}catch(t){throw t.source=o,t}var s=function(t){return u.call(this,t,m)},a=e.variable||"obj";return s.source="function("+a+"){\n"+o+"}",s},m.chain=function(t){var e=m(t);return e._chain=!0,e};var q=function(t,e){return t._chain?m(e).chain():e};m.mixin=function(t){m.each(m.functions(t),function(e){var n=m[e]=t[e];m.prototype[e]=function(){var t=[this._wrapped];return a.apply(t,arguments),q(this,n.apply(m,t))}})},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=o[t];m.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],q(this,n)}}),m.each(["concat","join","slice"],function(t){var e=o[t];m.prototype[t]=function(){return q(this,e.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return""+this._wrapped},void 0===(r=function(){return m}.apply(e,[]))||(t.exports=r)}).call(this)},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,u=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(u=(o<3?i(u):o>3?i(e,n,u):i(e,n))||u);return o>3&&u&&Object.defineProperty(e,n,u),u},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=this&&this.__param||function(t,e){return function(n,r){e(n,r,t)}},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(14),a=n(43),c=n(28),h=n(29),l=n(37),f=n(64),p=n(7),d=u(n(9)),y=n(36),v=n(20),m=function(){function t(t){this.contractApi=t}return e=t,t.prototype.canIssueStateUpdateChallenge=function(t,e){var n=this;return t.lock.runExclusive(function(){return n.canIssueStateUpdateChallengeInternal(t,e)})},t.prototype.canIssueStateUpdateChallengeInternal=function(t,e){return new Promise(function(n,r){return!t.isRegistered||t.isPendingRegistrationApproval?(v.Logging.error("reason 1"),n(!1)):t.registrationRound>=e.currentRound?(v.Logging.error("reason 2"),n(!1)):!t.previousRound||t.previousRound.roundNumber<e.currentRound-1?(v.Logging.error("reason 3"),n(!1)):t.registrationRound<t.previousRound.roundNumber&&!t.previousRound.proofOfStake?(v.Logging.error("reason 4"),n(!1)):t.previousRound.aggregate.lastConfirmedTransfer&&!t.previousRound.aggregate.lastConfirmedTransfer.getConfirmationFor(t)?(v.Logging.error("reason 5"),n(!1)):e.stateUpdateChallengeIssued||e.stateUpdateChallengeRound>=e.currentRound-1?(v.Logging.error("reason 6"),n(!1)):e.currentSubBlock<e.slackPeriod?(v.Logging.error("reason 7"),n(!1)):e?e.networkId!=t.networkId?(v.Logging.error("reason 9"),n(!1)):n(!e.isPunished):(v.Logging.error("reason 8"),n(!1))})},t.prototype.canRecoverAllFunds=function(t,e){var n=this;return t.lock.runExclusive(function(){return n.canRecoverAllFundsInternal(t,e)})},t.prototype.canRecoverAllFundsInternal=function(t,e){var n=this;return new Promise(function(r,i){var o=e.lastSubmissionRound-1;return!t.isRegistered||t.isPendingRegistrationApproval?(v.Logging.error("canRecoverAllFunds reason 1"),r(!1)):t.registrationRound>=o?(v.Logging.error("canRecoverAllFunds reason 2"),r(!1)):t.getRound(o)&&t.getRound(o).proofOfStake?e.recovered?(v.Logging.error("canRecoverAllFunds reason 4"),r(!1)):e.networkId!=t.networkId?(v.Logging.error("reason 9"),r(!1)):void n.contractApi.getAllReclaimableFunds(t.getRound(o).proofOfStake).then(function(t){return r(!t.isZero())}).catch(i):(v.Logging.error("canRecoverAllFunds reason 3"),r(!1))})},t.prototype.canRecoverOnChainFunds=function(t,e){var n=this;return t.lock.runExclusive(function(){return n.canRecoverOnChainFundsInternal(t,e)})},t.prototype.canRecoverOnChainFundsInternal=function(t,e){var n=this;return new Promise(function(r,i){var o=e.pendingWithdrawalRound+2;e.isWithdrawalPending&&e.lastSubmissionRound;return e.deposits?e.recovered?(v.Logging.error("canRecoverOnChainFunds reason 3"),r(!1)):e.networkId!=t.networkId?(v.Logging.error("reason 9"),r(!1)):void n.contractApi.getReclaimableOnChainFunds(t.address,t.contractAddress).then(function(t){return r(!t.isZero())}).catch(i):(v.Logging.error("canRecoverOnChainFunds reason 1"),r(!1))})},t.prototype.issueStateUpdateChallenge=function(t,e){var n=this;return t.lock.runExclusive(function(){return new Promise(function(r,i){n.canIssueStateUpdateChallengeInternal(t,e).then(function(o){if(!o)return r(!1);var u=t.previousRound.aggregate.isTransferPending,s=u?c.Round.fromJSON(t.previousRound.json):t.previousRound;u&&s.aggregate.cancelPendingTransfer();var a,l=s.aggregate.lastConfirmedTransfer,f=l?l.getConfirmationFor(t):h.Signature.EMPTY;s.roundNumber!=t.registrationRound||l||(f=t.registrationApproval),v.Logging.log(s.proofOfStake.trail),v.Logging.log(s.aggregate.trailIdentifier),v.Logging.log(s.aggregate.hash),v.Logging.log(f.checksum),v.Logging.log(f.json),n.contractApi.verifyProofOfTransitionAgreement(t.address,t.trailIdentifier,s.roundNumber,s.aggregate.transferTree.hash,s.aggregate.spent,s.aggregate.gained,!0,f,t.contractAddress).then(function(t){v.Logging.log("res"),v.Logging.log(t)}).catch(function(t){v.Logging.error("bad"),v.Logging.error(t)}),s.proofOfStake?(f===h.Signature.EMPTY&&v.Logging.error("Empty signature on aggregate."),a=n.contractApi.submitChallengeInitialMerkleState(t.address,s.proofOfStake,s.aggregate.transferTree.hash,s.aggregate.spent,s.aggregate.gained,f,e.challengeCost,t.contractAddress)):a=n.contractApi.submitChallengeInitialEmptyState(t.address,t.trailIdentifier,s.aggregate.transferTree.hash,s.aggregate.spent,s.aggregate.gained,f,e.challengeCost,t.contractAddress),a.then(r).catch(i)})})})},t.prototype.checkStateUpdateChallengeResponse=function(t,e){var n=this;return new Promise(function(e,r){var i,o,u=t.latestRound.roundNumber;n.contractApi.getStateUpdateEventAtRound(t.address,u,t.contractAddress).then(function(r){if(!r||!r.length)return e(null);var s=r.find(function(e){return p.isSameHexValue(e.args.account,t.address)&&e.args.round.toNumber()==u});if(!s||!s.args)return e(null);var a=s.args;i=new l.ProofOfStake(t.contractAddress,t.address,a.paint,a.trail.toNumber(),u,a.chain,a.values.map(function(t){return new d.default(t)}),a.LR[0],a.LR[1]);var c=a.rs.map(function(t){return p.remove0xPrefix(t)}).join(""),f=p.remove0xPrefix(a.v.toString(16));return o=h.Signature.fromRSV(t.contractAddress,a.paint,[c,f].join("")),n.contractApi.verifyProof(t.getRound(u),i)}).then(function(e){if(!e)throw f.WalletUpdateError.PROOF_OF_STAKE_INVALID;return p.isSameHexValue(o.checksum,p.EMPTY_HASH)||n.contractApi.validateHubSignature(o,t.contractAddress)}).then(function(t){if(!t)throw f.WalletUpdateError.AGGREGATE_CREDIT_HUB_SIGNATURE_INVALID;return e([i,o])}).catch(r)})},t.prototype.resolveOnChainStateUpdateDispute=function(t,e,n){var r=this;return t.lock.runExclusive(function(){return r.resolveOnChainStateUpdateDisputeInternal(t,e,n)})},t.prototype.resolveOnChainStateUpdateDisputeInternal=function(t,e,n){var r=this;return new Promise(function(i,o){if(t.latestRound.proofOfStake)return i(f.WalletUpdateError.LOGIC_PROOF_ALREADY_UPDATED);if(!e||!n)return o(f.WalletUpdateError.REMOTE_DATA_MISSING_MERKLE_PROOF);var u=t.latestRound,s=t.previousRound;r.contractApi.verifyProof(u,e).then(function(r){if(!r)return o(f.WalletUpdateError.PROOF_OF_STAKE_INVALID);if(e.amount.isLessThan(s.expectedBalance))return o(f.WalletUpdateError.PROOF_OF_STAKE_INSUFFICIENT_BALANCE);if(u.setProofOfStake(e),p.isSameHexValue(e.paint,s.aggregate.hash)){if(s.aggregate.isTransferPending)!p.isSameHexValue(s.aggregate.pendingTransfer.recipient,t.address)?(s.aggregate.pendingTransfer.saveDebitConfirmation(n),s.aggregate.confirmPendingOutgoingTransfer()):(s.aggregate.pendingTransfer.saveCreditConfirmation(n),s.aggregate.confirmPendingIncomingTransfer());return i(f.WalletUpdateError.REMOTE_DATA_MISSING_MERKLE_PROOF)}if(s.aggregate.isTransferPending){var a=y.Aggregate.fromJSON(s.aggregate.json);if(a.cancelPendingTransfer(),p.isSameHexValue(e.paint,a.hash))return s.aggregate.cancelPendingTransfer(),i(f.WalletUpdateError.LOGIC_TRANSFER_CONFIRM_ERROR)}return i(f.WalletUpdateError.LOGIC_UNKNOWN)}).catch(o)})},t.canIssueDeliveryChallenge=function(t,e,n){return!!n&&(!n.isPunished&&(!!e.debitAuthorization&&(!!e.debitConfirmation&&(!(!p.isSameHexValue(t.address,e.sender)&&!p.isSameHexValue(t.address,e.recipient))&&(e.round==n.currentRound-1&&!(n.currentSubBlock<n.slackPeriod))))))},t.prototype.issueDeliveryChallenge=function(t,n,r){var i=this;return t.lock.runExclusive(function(){return new Promise(function(o,u){if(!e.canIssueDeliveryChallenge(t,n,r))return u();var s=p.isSameHexValue(t.address,n.sender);i.contractApi.submitDeliveryCommitment(n.sender,n.recipient,n.nonce,s?t.trailIdentifier:n.recipientTrailIdentifier,n.debitAuthorization.tx_set_index,n.recipientTrailIdentifier,n.debitAuthorization.tx_set_proof,n.debitAuthorization.tx_set_hash,new d.default(n.debitAuthorization.updated_spendings),new d.default(n.debitAuthorization.updated_gains),n.amount,n.debitConfirmation,r.challengeCost,t.contractAddress).then(o).catch(u)})})},t=e=r([s.injectable(),o(0,s.inject(a.ContractApiService)),i("design:paramtypes",[a.ContractApiService])],t);var e}();e.DisputeService=m},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(24),o=n(18),u=n(0),s=n(2),a=n(1),c=n(33);e.zip=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return"function"==typeof n&&t.pop(),i.fromArray(t,void 0).lift(new h(n))};var h=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.resultSelector))},t}();e.ZipOperator=h;var l=function(t){function e(e,n,r){void 0===r&&(r=Object.create(null));var i=t.call(this,e)||this;return i.iterators=[],i.active=0,i.resultSelector="function"==typeof n?n:null,i.values=r,i}return r(e,t),e.prototype._next=function(t){var e=this.iterators;o.isArray(t)?e.push(new p(t)):"function"==typeof t[c.iterator]?e.push(new f(t[c.iterator]())):e.push(new d(this.destination,this,t))},e.prototype._complete=function(){var t=this.iterators,e=t.length;if(0!==e){this.active=e;for(var n=0;n<e;n++){var r=t[n];r.stillUnsubscribed?this.add(r.subscribe(r,n)):this.active--}}else this.destination.complete()},e.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},e.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,n=this.destination,r=0;r<e;r++){if("function"==typeof(u=t[r]).hasValue&&!u.hasValue())return}var i=!1,o=[];for(r=0;r<e;r++){var u,s=(u=t[r]).next();if(u.hasCompleted()&&(i=!0),s.done)return void n.complete();o.push(s.value)}this.resultSelector?this._tryresultSelector(o):n.next(o),i&&n.complete()},e.prototype._tryresultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(u.Subscriber);e.ZipSubscriber=l;var f=function(){function t(t){this.iterator=t,this.nextResult=t.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},t.prototype.hasCompleted=function(){var t=this.nextResult;return t&&t.done},t}(),p=function(){function t(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return t.prototype[c.iterator]=function(){return this},t.prototype.next=function(t){var e=this.index++,n=this.array;return e<this.length?{value:n[e],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.array.length>this.index},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),d=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.parent=n,i.observable=r,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return r(e,t),e.prototype[c.iterator]=function(){return this},e.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},e.prototype.hasValue=function(){return this.buffer.length>0},e.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},e.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this.buffer.push(e),this.parent.checkIterators()},e.prototype.subscribe=function(t,e){return a.subscribeToResult(this,this.observable,this,e)},e}(s.OuterSubscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(10),o=n(81),u=n(2),s=n(1);e.timeoutWith=function(t,e,n){return void 0===n&&(n=i.async),function(r){var i=o.isDate(t),u=i?+t-n.now():Math.abs(t);return r.lift(new a(u,i,e,n))}};var a=function(){function t(t,e,n,r){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=n,this.scheduler=r}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},t}(),c=function(t){function e(e,n,r,i,o){var u=t.call(this,e)||this;return u.absoluteTimeout=n,u.waitFor=r,u.withObservable=i,u.scheduler=o,u.action=null,u.scheduleTimeout(),u}return r(e,t),e.dispatchTimeout=function(t){var e=t.withObservable;t._unsubscribeAndRecycle(),t.add(s.subscribeToResult(t,e))},e.prototype.scheduleTimeout=function(){var t=this.action;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(e.dispatchTimeout,this.waitFor,this))},e.prototype._next=function(e){this.absoluteTimeout||this.scheduleTimeout(),t.prototype._next.call(this,e)},e.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null},e}(u.OuterSubscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=n(1);e.defaultThrottleConfig={leading:!0,trailing:!1},e.throttle=function(t,n){return void 0===n&&(n=e.defaultThrottleConfig),function(e){return e.lift(new u(t,n.leading,n.trailing))}};var u=function(){function t(t,e,n){this.durationSelector=t,this.leading=e,this.trailing=n}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.durationSelector,this.leading,this.trailing))},t}(),s=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.destination=e,o.durationSelector=n,o._leading=r,o._trailing=i,o._hasValue=!1,o}return r(e,t),e.prototype._next=function(t){this._hasValue=!0,this._sendValue=t,this._throttled||(this._leading?this.send():this.throttle(t))},e.prototype.send=function(){var t=this._hasValue,e=this._sendValue;t&&(this.destination.next(e),this.throttle(e)),this._hasValue=!1,this._sendValue=null},e.prototype.throttle=function(t){var e=this.tryDurationSelector(t);e&&this.add(this._throttled=o.subscribeToResult(this,e))},e.prototype.tryDurationSelector=function(t){try{return this.durationSelector(t)}catch(t){return this.destination.error(t),null}},e.prototype.throttlingDone=function(){var t=this._throttled,e=this._trailing;t&&t.unsubscribe(),this._throttled=null,e&&this.send()},e.prototype.notifyNext=function(t,e,n,r,i){this.throttlingDone()},e.prototype.notifyComplete=function(){this.throttlingDone()},e}(i.OuterSubscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=n(167),u=n(5),s=n(75),a=n(49),c=n(76),h=function(t){function e(e,n,r){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=t.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=e<1?1:e,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return r(e,t),e.prototype.nextInfiniteTimeWindow=function(e){var n=this._events;n.push(e),n.length>this._bufferSize&&n.shift(),t.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this._events.push(new l(this._getNow(),e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new a.ObjectUnsubscribedError;if(this.isStopped||this.hasError?e=u.Subscription.EMPTY:(this.observers.push(t),e=new c.SubjectSubscription(this,t)),i&&t.add(t=new s.ObserveOnSubscriber(t,i)),n)for(var h=0;h<o&&!t.closed;h++)t.next(r[h]);else for(h=0;h<o&&!t.closed;h++)t.next(r[h].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||o.queue).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r},e}(i.Subject);e.ReplaySubject=h;var l=function(){return function(t,e){this.time=t,this.value=e}}()},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(52);e.observeOn=function(t,e){return void 0===e&&(e=0),function(n){return n.lift(new u(t,e))}};var u=function(){function t(t,e){void 0===e&&(e=0),this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.scheduler,this.delay))},t}();e.ObserveOnOperator=u;var s=function(t){function e(e,n,r){void 0===r&&(r=0);var i=t.call(this,e)||this;return i.scheduler=n,i.delay=r,i}return r(e,t),e.dispatch=function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.add(this.scheduler.schedule(e.dispatch,this.delay,new a(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(o.Notification.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(o.Notification.createError(t))},e.prototype._complete=function(){this.scheduleMessage(o.Notification.createComplete())},e}(i.Subscriber);e.ObserveOnSubscriber=s;var a=function(){return function(t,e){this.notification=t,this.destination=e}}();e.ObserveOnMessage=a},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n){var r=t.call(this)||this;return r.subject=e,r.subscriber=n,r.closed=!1,r}return r(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(n(5).Subscription);e.SubjectSubscription=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.find=function(t,e){if("function"!=typeof t)throw new TypeError("predicate is not a function");return function(n){return n.lift(new o(t,n,!1,e))}};var o=function(){function t(t,e,n,r){this.predicate=t,this.source=e,this.yieldIndex=n,this.thisArg=r}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.predicate,this.source,this.yieldIndex,this.thisArg))},t}();e.FindValueOperator=o;var u=function(t){function e(e,n,r,i,o){var u=t.call(this,e)||this;return u.predicate=n,u.source=r,u.yieldIndex=i,u.thisArg=o,u.index=0,u}return r(e,t),e.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype._next=function(t){var e=this.predicate,n=this.thisArg,r=this.index++;try{e.call(n||this,t,r,this.source)&&this.notifyComplete(this.yieldIndex?r:t)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},e}(i.Subscriber);e.FindValueSubscriber=u},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(94),u=n(60);e.tap=function(t,e,n){return function(r){return r.lift(new s(t,e,n))}};var s=function(){function t(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.nextOrObserver,this.error,this.complete))},t}(),a=function(t){function e(e,n,r,i){var s=t.call(this,e)||this;return s._tapNext=o.noop,s._tapError=o.noop,s._tapComplete=o.noop,s._tapError=r||o.noop,s._tapComplete=i||o.noop,u.isFunction(n)?(s._context=s,s._tapNext=n):n&&(s._context=n,s._tapNext=n.next||o.noop,s._tapError=n.error||o.noop,s._tapComplete=n.complete||o.noop),s}return r(e,t),e.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.next(t)},e.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},e}(i.Subscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(12),u=n(11);e.distinctUntilChanged=function(t,e){return function(n){return n.lift(new s(t,e))}};var s=function(){function t(t,e){this.compare=t,this.keySelector=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.compare,this.keySelector))},t}(),a=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.keySelector=r,i.hasKey=!1,"function"==typeof n&&(i.compare=n),i}return r(e,t),e.prototype.compare=function(t,e){return t===e},e.prototype._next=function(t){var e=t;if(this.keySelector&&(e=o.tryCatch(this.keySelector)(t))===u.errorObject)return this.destination.error(u.errorObject.e);var n=!1;if(this.hasKey){if((n=o.tryCatch(this.compare)(this.key,e))===u.errorObject)return this.destination.error(u.errorObject.e)}else this.hasKey=!0;!1===Boolean(n)&&(this.key=e,this.destination.next(t))},e}(i.Subscriber)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4);function i(t){var e=t.error;t.subscriber.error(e)}e.throwError=function(t,e){return e?new r.Observable(function(n){return e.schedule(i,0,{error:t,subscriber:n})}):new r.Observable(function(e){return e.error(t)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isDate=function(t){return t instanceof Date&&!isNaN(+t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(32);e.concatMap=function(t,e){return r.mergeMap(t,e,1)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(53);e.concatAll=function(){return r.mergeAll(1)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4);e.scalar=function(t){var e=new r.Observable(function(e){e.next(t),e.complete()});return e._isScalar=!0,e.value=t,e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(17),i=n(24),o=n(22),u=n(84);e.of=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];switch(r.isScheduler(n)?t.pop():n=void 0,t.length){case 0:return o.empty(n);case 1:return n?i.fromArray(t,n):u.scalar(t[0]);default:return i.fromArray(t,n)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(17),i=n(85),o=n(23),u=n(83);e.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1===t.length||2===t.length&&r.isScheduler(t[1])?o.from(t[0]):u.concatAll()(i.of.apply(void 0,t))}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(17),o=n(18),u=n(2),s=n(1),a=n(24),c={};e.combineLatest=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null,r=null;return i.isScheduler(t[t.length-1])&&(r=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&o.isArray(t[0])&&(t=t[0]),a.fromArray(t,r).lift(new h(n))};var h=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.resultSelector))},t}();e.CombineLatestOperator=h;var l=function(t){function e(e,n){var r=t.call(this,e)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return r(e,t),e.prototype._next=function(t){this.values.push(c),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add(s.subscribeToResult(this,r,r,n))}}},e.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.values,u=o[n],s=this.toRespond?u===c?--this.toRespond:this.toRespond:0;o[n]=e,0===s&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},e.prototype._tryResultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(u.OuterSubscriber);e.CombineLatestSubscriber=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isPromise=function(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isArrayLike=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(34);e.subscribeToObservable=function(t){return function(e){var n=t[r.observable]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(33);e.subscribeToIterable=function(t){return function(e){for(var n=t[r.iterator]();;){var i=n.next();if(i.done){e.complete();break}if(e.next(i.value),e.closed)break}return"function"==typeof n.return&&e.add(function(){n.return&&n.return()}),e}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(58);e.subscribeToPromise=function(t){return function(e){return t.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,r.hostReportError),e}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.subscribeToArray=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.closed||e.complete()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.noop=function(){}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(94);function i(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:r.noop}e.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i(t)},e.pipeFromArray=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),i=n(93),o=n(92),u=n(91),s=n(90),a=n(89),c=n(88),h=n(97),l=n(33),f=n(34);e.subscribeTo=function(t){if(t instanceof r.Observable)return function(e){return t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e)};if(t&&"function"==typeof t[f.observable])return s.subscribeToObservable(t);if(a.isArrayLike(t))return i.subscribeToArray(t);if(c.isPromise(t))return o.subscribeToPromise(t);if(t&&"function"==typeof t[l.iterator])return u.subscribeToIterable(t);var e=h.isObject(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isObject=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(59),i=n(58);e.empty={closed:!0,next:function(t){},error:function(t){if(r.config.useDeprecatedSynchronousErrorHandling)throw t;i.hostReportError(t)},complete:function(){}}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(12),o=n(11),u=n(2),s=n(1);e.audit=function(t){return function(e){return e.lift(new a(t))}};var a=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.durationSelector))},t}(),c=function(t){function e(e,n){var r=t.call(this,e)||this;return r.durationSelector=n,r.hasValue=!1,r}return r(e,t),e.prototype._next=function(t){if(this.value=t,this.hasValue=!0,!this.throttled){var e=i.tryCatch(this.durationSelector)(t);if(e===o.errorObject)this.destination.error(o.errorObject.e);else{var n=s.subscribeToResult(this,e);!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}}},e.prototype.clearThrottle=function(){var t=this.value,e=this.hasValue,n=this.throttled;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),e&&(this.value=null,this.hasValue=!1,this.destination.next(t))},e.prototype.notifyNext=function(t,e,n,r){this.clearThrottle()},e.prototype.notifyComplete=function(){this.clearThrottle()},e}(u.OuterSubscriber)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(99);e.audit=r.audit;var i=n(226);e.auditTime=i.auditTime;var o=n(222);e.buffer=o.buffer;var u=n(221);e.bufferCount=u.bufferCount;var s=n(220);e.bufferTime=s.bufferTime;var a=n(219);e.bufferToggle=a.bufferToggle;var c=n(218);e.bufferWhen=c.bufferWhen;var h=n(217);e.catchError=h.catchError;var l=n(216);e.combineAll=l.combineAll;var f=n(215);e.combineLatest=f.combineLatest;var p=n(209);e.concat=p.concat;var d=n(83);e.concatAll=d.concatAll;var y=n(82);e.concatMap=y.concatMap;var v=n(208);e.concatMapTo=v.concatMapTo;var m=n(207);e.count=m.count;var g=n(206);e.debounce=g.debounce;var b=n(205);e.debounceTime=b.debounceTime;var _=n(31);e.defaultIfEmpty=_.defaultIfEmpty;var w=n(204);e.delay=w.delay;var M=n(203);e.delayWhen=M.delayWhen;var O=n(202);e.dematerialize=O.dematerialize;var S=n(201);e.distinct=S.distinct;var A=n(79);e.distinctUntilChanged=A.distinctUntilChanged;var E=n(200);e.distinctUntilKeyChanged=E.distinctUntilKeyChanged;var T=n(199);e.elementAt=T.elementAt;var x=n(198);e.every=x.every;var P=n(197);e.exhaust=P.exhaust;var I=n(196);e.exhaustMap=I.exhaustMap;var R=n(195);e.expand=R.expand;var N=n(30);e.filter=N.filter;var j=n(194);e.finalize=j.finalize;var C=n(77);e.find=C.find;var k=n(193);e.findIndex=k.findIndex;var L=n(192);e.first=L.first;var D=n(191);e.groupBy=D.groupBy;var B=n(190);e.ignoreElements=B.ignoreElements;var U=n(189);e.isEmpty=U.isEmpty;var W=n(188);e.last=W.last;var F=n(21);e.map=F.map;var V=n(187);e.mapTo=V.mapTo;var G=n(186);e.materialize=G.materialize;var q=n(185);e.max=q.max;var H=n(184);e.merge=H.merge;var z=n(53);e.mergeAll=z.mergeAll;var Y=n(32);e.mergeMap=Y.mergeMap;var J=n(32);e.flatMap=J.mergeMap;var K=n(182);e.mergeMapTo=K.mergeMapTo;var Z=n(181);e.mergeScan=Z.mergeScan;var $=n(180);e.min=$.min;var X=n(27);e.multicast=X.multicast;var Q=n(75);e.observeOn=Q.observeOn;var tt=n(178);e.onErrorResumeNext=tt.onErrorResumeNext;var et=n(177);e.pairwise=et.pairwise;var nt=n(176);e.partition=nt.partition;var rt=n(174);e.pluck=rt.pluck;var it=n(173);e.publish=it.publish;var ot=n(172);e.publishBehavior=ot.publishBehavior;var ut=n(170);e.publishLast=ut.publishLast;var st=n(168);e.publishReplay=st.publishReplay;var at=n(164);e.race=at.race;var ct=n(39);e.reduce=ct.reduce;var ht=n(162);e.repeat=ht.repeat;var lt=n(161);e.repeatWhen=lt.repeatWhen;var ft=n(160);e.retry=ft.retry;var pt=n(159);e.retryWhen=pt.retryWhen;var dt=n(46);e.refCount=dt.refCount;var yt=n(158);e.sample=yt.sample;var vt=n(157);e.sampleTime=vt.sampleTime;var mt=n(47);e.scan=mt.scan;var gt=n(156);e.sequenceEqual=gt.sequenceEqual;var bt=n(155);e.share=bt.share;var _t=n(154);e.shareReplay=_t.shareReplay;var wt=n(153);e.single=wt.single;var Mt=n(152);e.skip=Mt.skip;var Ot=n(151);e.skipLast=Ot.skipLast;var St=n(150);e.skipUntil=St.skipUntil;var At=n(149);e.skipWhile=At.skipWhile;var Et=n(148);e.startWith=Et.startWith;var Tt=n(147);e.subscribeOn=Tt.subscribeOn;var xt=n(141);e.switchAll=xt.switchAll;var Pt=n(45);e.switchMap=Pt.switchMap;var It=n(140);e.switchMapTo=It.switchMapTo;var Rt=n(50);e.take=Rt.take;var Nt=n(48);e.takeLast=Nt.takeLast;var jt=n(139);e.takeUntil=jt.takeUntil;var Ct=n(138);e.takeWhile=Ct.takeWhile;var kt=n(78);e.tap=kt.tap;var Lt=n(73);e.throttle=Lt.throttle;var Dt=n(137);e.throttleTime=Dt.throttleTime;var Bt=n(136);e.timeInterval=Bt.timeInterval;var Ut=n(134);e.timeout=Ut.timeout;var Wt=n(72);e.timeoutWith=Wt.timeoutWith;var Ft=n(132);e.timestamp=Ft.timestamp;var Vt=n(131);e.toArray=Vt.toArray;var Gt=n(130);e.window=Gt.window;var qt=n(129);e.windowCount=qt.windowCount;var Ht=n(128);e.windowTime=Ht.windowTime;var zt=n(127);e.windowToggle=zt.windowToggle;var Yt=n(126);e.windowWhen=Yt.windowWhen;var Jt=n(125);e.withLatestFrom=Jt.withLatestFrom;var Kt=n(124);e.zip=Kt.zip;var Zt=n(123);e.zipAll=Zt.zipAll},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PAYMENT_HUB_ABI=[{constant:!0,inputs:[],name:"ROUNDS_KEPT",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"paint",type:"bytes32"},{name:"trail",type:"uint64"},{name:"chain",type:"bytes32[]"},{name:"values",type:"uint256[]"},{name:"LR",type:"uint256[2]"}],name:"recoverAllFunds",outputs:[{name:"recovered",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"BLOCKS_PER_ROUND",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"addr",type:"address"},{name:"targetRound",type:"uint256"}],name:"getDepositAggregate",outputs:[{name:"",type:"uint256"},{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"hasMissedCheckpointSubmission",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"DEPOSITS_KEPT",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"doNothing",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[],name:"confirmWithdrawal",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"EXTENDED_SLACK_PERIOD",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"round",type:"uint256"}],name:"getPendingWithdrawals",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"paint",type:"bytes32"},{name:"trail",type:"uint64"},{name:"chain",type:"bytes32[]"},{name:"value",type:"uint256[]"},{name:"left",type:"uint256"},{name:"right",type:"uint256"},{name:"txSetRoot",type:"bytes32"},{name:"deltas",type:"uint256[2]"},{name:"r",type:"bytes32"},{name:"s",type:"bytes32"},{name:"v",type:"uint8"}],name:"submitInitialMerkleState",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!0,inputs:[{name:"",type:"address"},{name:"",type:"address"}],name:"challengeBook",outputs:[{name:"challengeStage",type:"uint8"},{name:"block",type:"uint256"},{name:"initialStateRound",type:"uint256"},{name:"initialStateBalance",type:"uint256"},{name:"deltaHighestSpendings",type:"uint256"},{name:"deltaHighestGains",type:"uint256"},{name:"finalStateBalance",type:"uint256"},{name:"deliveredTxNonce",type:"uint32"},{name:"trailIdentifier",type:"uint64"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"SLACK_PERIOD",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"recoverOnlyOnChainFunds",outputs:[{name:"reclaimed",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"holder",type:"address"},{name:"paint",type:"bytes32"},{name:"trail",type:"uint64"},{name:"round",type:"uint256"},{name:"chain",type:"bytes32[]"},{name:"values",type:"uint256[]"},{name:"left",type:"uint256"},{name:"right",type:"uint256"}],name:"verifyProofOfStake",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"paint",type:"bytes32"},{name:"trail",type:"uint64"},{name:"chain",type:"bytes32[]"},{name:"values",type:"uint256[]"},{name:"hubProofOfStakeInterval",type:"uint256[2]"},{name:"withdrawalAmount",type:"uint256"}],name:"requestWithdrawal",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"txSetRoot",type:"bytes32"},{name:"trail",type:"uint64"},{name:"deltas",type:"uint256[2]"},{name:"r",type:"bytes32"},{name:"s",type:"bytes32"},{name:"v",type:"uint8"}],name:"submitInitialEmptyState",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!0,inputs:[],name:"currentRound",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"trail",type:"uint256"},{name:"node",type:"bytes32"},{name:"merkleRoot",type:"bytes32"},{name:"upperBound",type:"uint256"},{name:"chain",type:"bytes32[]"},{name:"value",type:"uint256[]"},{name:"left",type:"uint256"},{name:"right",type:"uint256"}],name:"verifyProofOfStakeInternal",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"message",type:"bytes32"},{name:"r",type:"bytes32"},{name:"s",type:"bytes32"},{name:"v",type:"uint8"}],name:"signedMessageECRECOVER",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"recordBook",outputs:[{name:"isWithdrawalRequested",type:"bool"},{name:"pendingWithdrawalRound",type:"uint256"},{name:"pendingWithdrawal",type:"uint256"},{name:"recovered",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"hasOutstandingChallenges",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"trail",type:"uint256"},{name:"chain",type:"bytes32[]"},{name:"node",type:"bytes32"},{name:"merkleRoot",type:"bytes32"}],name:"verifyProofOfMembershipInternal",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!0,inputs:[],name:"genesis",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"SR",type:"address[2]"},{name:"transferMembershipTrail",type:"uint64"},{name:"chain",type:"bytes32[]"},{name:"values",type:"uint256[]"},{name:"LR",type:"uint256[2]"},{name:"deltas",type:"uint256[2]"},{name:"amount",type:"uint256"},{name:"rsTxSetRoot",type:"bytes32[3]"},{name:"v",type:"uint8"},{name:"txChain",type:"bytes32[]"}],name:"answerDeliveryChallenge",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"SR",type:"address[2]"},{name:"nonce",type:"uint32"},{name:"trails",type:"uint64[3]"},{name:"chain",type:"bytes32[]"},{name:"txSetRoot",type:"bytes32"},{name:"deltas",type:"uint256[2]"},{name:"amount",type:"uint256"},{name:"r",type:"bytes32"},{name:"s",type:"bytes32"},{name:"v",type:"uint8"}],name:"submitDeliveryCommitment",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"deposits",outputs:[{name:"round",type:"uint256"},{name:"amount",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"round",type:"uint256"}],name:"getLiveChallenges",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"checkpoints",outputs:[{name:"roundNumber",type:"uint256"},{name:"merkleRoot",type:"bytes32"},{name:"upperBound",type:"uint256"},{name:"liveChallenges",type:"uint24"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"holder",type:"address"},{name:"trail",type:"uint64"},{name:"round",type:"uint256"},{name:"txSetRoot",type:"bytes32"},{name:"deltas",type:"uint256[2]"},{name:"hubAgrees",type:"bool"},{name:"r",type:"bytes32"},{name:"s",type:"bytes32"},{name:"v",type:"uint8"}],name:"verifyProofOfTransitionAgreement",outputs:[{name:"checksum",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"lastSubmissionRound",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"COST_POS",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"pendingWithdrawals",outputs:[{name:"round",type:"uint256"},{name:"amount",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"currentSubBlock",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"to",type:"address"}],name:"deposit",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{inputs:[{name:"blocksPerRound",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"round",type:"uint256"},{indexed:!1,name:"merkleRoot",type:"bytes32"},{indexed:!1,name:"upperBound",type:"uint256"}],name:"CheckpointSubmission",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"recipient",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"requestor",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"WithdrawalRequest",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"requestor",type:"address"}],name:"WithdrawalConfirmation",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"recipient",type:"address"},{indexed:!0,name:"sender",type:"address"}],name:"ChallengeIssued",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!0,name:"round",type:"uint256"},{indexed:!1,name:"trail",type:"uint64"},{indexed:!1,name:"chain",type:"bytes32[]"},{indexed:!1,name:"values",type:"uint256[]"},{indexed:!1,name:"LR",type:"uint256[2]"},{indexed:!1,name:"paint",type:"bytes32"},{indexed:!1,name:"rs",type:"bytes32[2]"},{indexed:!1,name:"v",type:"uint8"}],name:"StateUpdate",type:"event"}]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(13),o=function(t,e){var n=t.parentRequest;return null!==n&&(!!e(n)||o(n,e))};e.traverseAncerstors=o;var u=function(t){return function(e){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(t)(e)};return n.metaData=new i.Metadata(t,e),n}};e.taggedConstraint=u;var s=u(r.NAMED_TAG);e.namedConstraint=s;e.typeConstraint=function(t){return function(e){var n=null;if(null!==e){if(n=e.bindings[0],"string"==typeof t)return n.serviceIdentifier===t;var r=e.bindings[0].implementationType;return t===r}return!1}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(63),i=n(62),o=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new i.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new r.BindingOnSyntax(this._binding)}return t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingWhenOnSyntax=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(25),o=n(13),u=n(252),s=function(){function t(t,e,n,s){this.guid=i.guid(),this.type=t,this.serviceIdentifier=n,this.name=new u.QueryableString(e||""),this.metadata=new Array;var a=null;"string"==typeof s?a=new o.Metadata(r.NAMED_TAG,s):s instanceof o.Metadata&&(a=s),null!==a&&this.metadata.push(a)}return t.prototype.hasTag=function(t){for(var e=0,n=this.metadata;e<n.length;e++){if(n[e].key===t)return!0}return!1},t.prototype.isArray=function(){return this.hasTag(r.MULTI_INJECT_TAG)},t.prototype.matchesArray=function(t){return this.matchesTag(r.MULTI_INJECT_TAG)(t)},t.prototype.isNamed=function(){return this.hasTag(r.NAMED_TAG)},t.prototype.isTagged=function(){return this.metadata.some(function(t){return t.key!==r.INJECT_TAG&&t.key!==r.MULTI_INJECT_TAG&&t.key!==r.NAME_TAG&&t.key!==r.UNMANAGED_TAG&&t.key!==r.NAMED_TAG})},t.prototype.isOptional=function(){return this.matchesTag(r.OPTIONAL_TAG)(!0)},t.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(t){return t.key===r.NAMED_TAG})[0]:null},t.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(t){return t.key!==r.INJECT_TAG&&t.key!==r.MULTI_INJECT_TAG&&t.key!==r.NAME_TAG&&t.key!==r.UNMANAGED_TAG&&t.key!==r.NAMED_TAG}):null},t.prototype.matchesNamedTag=function(t){return this.matchesTag(r.NAMED_TAG)(t)},t.prototype.matchesTag=function(t){var e=this;return function(n){for(var r=0,i=e.metadata;r<i.length;r++){var o=i[r];if(o.key===t&&o.value===n)return!0}return!1}},t}();e.Target=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=n(3),o=n(13),u=n(19),s=function(){function t(t){this._cb=t}return t.prototype.unwrap=function(){return this._cb()},t}();e.LazyServiceIdentifer=s,e.inject=function(t){return function(e,n,s){if(void 0===t)throw new Error(r.UNDEFINED_INJECT_ANNOTATION(e.name));var a=new o.Metadata(i.INJECT_TAG,t);"number"==typeof s?u.tagParameter(e,n,s,a):u.tagProperty(e,n,a)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8);e.isStackOverflowExeption=function(t){return t instanceof RangeError||t.message===r.STACK_OVERFLOW}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=function(){function t(){}return t.prototype.getConstructorMetadata=function(t){return{compilerGeneratedMetadata:Reflect.getMetadata(r.PARAM_TYPES,t),userGeneratedMetadata:Reflect.getMetadata(r.TAGGED,t)||{}}},t.prototype.getPropertiesMetadata=function(t){return Reflect.getMetadata(r.TAGGED_PROP,t)||[]},t}();e.MetadataReader=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this._desc=t}return Object.defineProperty(t.prototype,"desc",{get:function(){return this._desc},enumerable:!0,configurable:!0}),t.SYNCHRONIZED=new t("Synchronized."),t.WAITING=new t("Waiting for additional data from server."),t.UNSAFE=new t("UNSAFE TO USE."),t}();e.WalletSyncState=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(108),i=n(64),o=function(){function t(t,e,n,r,i){this.wallet=t,this.syncState=e,this.updateError=n,this.contractState=r,this.hubState=i}return t.EMPTY_STATE=new t(null,r.WalletSyncState.WAITING,i.WalletUpdateError.NO_WALLET_SPECIFIED),t}();e.WalletState=o},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(9)),o=function(){function t(t,e,n,r,o,u,s,a,c,h,l,f,p,d,y,v,m,g,b,_,w,M,O,S,A,E,T,x){void 0===E&&(E=[new i.default(0),new i.default(0),new i.default(0)]),void 0===x&&(x=0),this.networkId=t,this.genesis=e,this.block=n,this.currentRound=r,this.currentSubBlock=o,this.blocksPerRound=u,this.slackPeriod=s,this.extendedSlackPeriod=a,this.roundsKept=c,this.lastSubmissionRound=h,this.contractBalance=l,this.lastCheckpointSubmitted=f,this.lastCheckpointSubmittedUpperBound=p,this.hasMissedCheckpointSubmission=d,this.hasOutstandingChallenges=y,this.liveChallenges=v,this.slackingChallenges=m,this.challengeCost=g,this.onChainBalance=b,this.stateUpdateChallengeIssued=_,this.stateUpdateChallengeBlock=w,this.stateUpdateChallengeRound=M,this.isWithdrawalPending=O,this.pendingWithdrawalAmount=S,this.pendingWithdrawalRound=A,this.deposits=E,this.recovered=T,this.timestamp=x,this.syncPeriod=2e4}return Object.defineProperty(t.prototype,"isCheckpointSubmitted",{get:function(){return this.lastSubmissionRound===this.currentRound},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isStateSynced",{get:function(){return(new Date).getTime()-this.timestamp<=this.syncPeriod},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPunished",{get:function(){return this.hasMissedCheckpointSubmission||this.hasOutstandingChallenges},enumerable:!0,configurable:!0}),t.EMPTY_STATE=new t(0,0,0,0,0,0,0,0,0,0,new i.default(0),"0x0000000000000000000000000000000000000000",new i.default(0),!1,!1,0,0,new i.default(0),new i.default(0),!1,0,0,!1,new i.default(0),0,[new i.default(0),new i.default(0),new i.default(0)],!1,0),t}();e.ContractState=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,n){this.statusData=t,this.walletData=e,this.timestamp=n,this.syncPeriod=2e4}return Object.defineProperty(t.prototype,"isStateSynced",{get:function(){return(new Date).getTime()-this.timestamp<=this.syncPeriod},enumerable:!0,configurable:!0}),t.prototype.getMerkleProofData=function(t){return!this.walletData||!this.walletData.merkle_proofs||this.walletData.merkle_proofs.length<=t?null:this.walletData.merkle_proofs[t]},t.EMPTY_STATE=new t,t}();e.HubState=r},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(38),u=i(n(9)),s=n(7),a=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o._contractAddress=e,o._address=n,o._round=r,o._amount=i,o}return r(e,t),e.fromJSON=function(t){return new e(t.contractAddress,t.address,t.round,new u.default(t.amount))},Object.defineProperty(e.prototype,"json",{get:function(){return{contractAddress:this._contractAddress,address:this._address,round:this._round,amount:this._amount}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"address",{get:function(){return this._address},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"round",{get:function(){return this._round},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"amount",{get:function(){return this._amount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hash",{get:function(){return s.Web3Utils.soliditySha3({type:"bytes32",value:s.Web3Utils.soliditySha3({type:"address",value:this._contractAddress})},{type:"bytes32",value:s.Web3Utils.soliditySha3({type:"address",value:this._address})},{type:"uint256",value:this._round},{type:"uint256",value:this._amount.toFixed(0)}).toString()},enumerable:!0,configurable:!0}),e}(o.Hashable);e.BalanceMarker=a},function(t,e,n){var r;/*! bignumber.js v4.1.0 https://github.com/MikeMcl/bignumber.js/LICENCE */!function(i){"use strict";var o,u=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,s=Math.ceil,a=Math.floor,c=" not a boolean or binary digit",h="rounding mode",l="number type has more than 15 significant digits",f="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_",p=1e14,d=14,y=9007199254740991,v=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],m=1e7,g=1e9;function b(t){var e=0|t;return t>0||t===e?e:e-1}function _(t){for(var e,n,r=1,i=t.length,o=t[0]+"";r<i;){for(e=t[r++]+"",n=d-e.length;n--;e="0"+e);o+=e}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function w(t,e){var n,r,i=t.c,o=e.c,u=t.s,s=e.s,a=t.e,c=e.e;if(!u||!s)return null;if(n=i&&!i[0],r=o&&!o[0],n||r)return n?r?0:-s:u;if(u!=s)return u;if(n=u<0,r=a==c,!i||!o)return r?0:!i^n?1:-1;if(!r)return a>c^n?1:-1;for(s=(a=i.length)<(c=o.length)?a:c,u=0;u<s;u++)if(i[u]!=o[u])return i[u]>o[u]^n?1:-1;return a==c?0:a>c^n?1:-1}function M(t,e,n){return(t=T(t))>=e&&t<=n}function O(t){return"[object Array]"==Object.prototype.toString.call(t)}function S(t,e,n){for(var r,i,o=[0],u=0,s=t.length;u<s;){for(i=o.length;i--;o[i]*=e);for(o[r=0]+=f.indexOf(t.charAt(u++));r<o.length;r++)o[r]>n-1&&(null==o[r+1]&&(o[r+1]=0),o[r+1]+=o[r]/n|0,o[r]%=n)}return o.reverse()}function A(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function E(t,e){var n,r;if(e<0){for(r="0.";++e;r+="0");t=r+t}else if(++e>(n=t.length)){for(r="0",e-=n;--e;r+="0");t+=r}else e<n&&(t=t.slice(0,e)+"."+t.slice(e));return t}function T(t){return(t=parseFloat(t))<0?s(t):a(t)}(o=function t(e){var n,r,i=0,o=F.prototype,x=new F(1),P=20,I=4,R=-7,N=21,j=-1e7,C=1e7,k=!0,L=H,D=!1,B=1,U=0,W={decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:"Â ",fractionGroupSize:0};function F(t,e){var n,o,s,c,h,p,v=this;if(!(v instanceof F))return k&&Y(26,"constructor call without new",t),new F(t,e);if(null!=e&&L(e,2,64,i,"base")){if(p=t+"",10==(e|=0))return J(v=new F(t instanceof F?t:p),P+v.e+1,I);if((c="number"==typeof t)&&0*t!=0||!new RegExp("^-?"+(n="["+f.slice(0,e)+"]+")+"(?:\\."+n+")?$",e<37?"i":"").test(p))return r(v,p,c,e);c?(v.s=1/t<0?(p=p.slice(1),-1):1,k&&p.replace(/^0\.0*|\./,"").length>15&&Y(i,l,t),c=!1):v.s=45===p.charCodeAt(0)?(p=p.slice(1),-1):1,p=V(p,10,e,v.s)}else{if(t instanceof F)return v.s=t.s,v.e=t.e,v.c=(t=t.c)?t.slice():t,void(i=0);if((c="number"==typeof t)&&0*t==0){if(v.s=1/t<0?(t=-t,-1):1,t===~~t){for(o=0,s=t;s>=10;s/=10,o++);return v.e=o,v.c=[t],void(i=0)}p=t+""}else{if(!u.test(p=t+""))return r(v,p,c);v.s=45===p.charCodeAt(0)?(p=p.slice(1),-1):1}}for((o=p.indexOf("."))>-1&&(p=p.replace(".","")),(s=p.search(/e/i))>0?(o<0&&(o=s),o+=+p.slice(s+1),p=p.substring(0,s)):o<0&&(o=p.length),s=0;48===p.charCodeAt(s);s++);for(h=p.length;48===p.charCodeAt(--h););if(p=p.slice(s,h+1))if(h=p.length,c&&k&&h>15&&(t>y||t!==a(t))&&Y(i,l,v.s*t),(o=o-s-1)>C)v.c=v.e=null;else if(o<j)v.c=[v.e=0];else{if(v.e=o,v.c=[],s=(o+1)%d,o<0&&(s+=d),s<h){for(s&&v.c.push(+p.slice(0,s)),h-=d;s<h;)v.c.push(+p.slice(s,s+=d));p=p.slice(s),s=d-p.length}else s-=h;for(;s--;p+="0");v.c.push(+p)}else v.c=[v.e=0];i=0}function V(t,e,r,i){var o,u,s,a,c,h,l,p=t.indexOf("."),d=P,y=I;for(r<37&&(t=t.toLowerCase()),p>=0&&(s=U,U=0,t=t.replace(".",""),c=(l=new F(r)).pow(t.length-p),U=s,l.c=S(E(_(c.c),c.e),10,e),l.e=l.c.length),u=s=(h=S(t,r,e)).length;0==h[--s];h.pop());if(!h[0])return"0";if(p<0?--u:(c.c=h,c.e=u,c.s=i,h=(c=n(c,l,d,y,e)).c,a=c.r,u=c.e),p=h[o=u+d+1],s=e/2,a=a||o<0||null!=h[o+1],a=y<4?(null!=p||a)&&(0==y||y==(c.s<0?3:2)):p>s||p==s&&(4==y||a||6==y&&1&h[o-1]||y==(c.s<0?8:7)),o<1||!h[0])t=a?E("1",-d):"0";else{if(h.length=o,a)for(--e;++h[--o]>e;)h[o]=0,o||(++u,h=[1].concat(h));for(s=h.length;!h[--s];);for(p=0,t="";p<=s;t+=f.charAt(h[p++]));t=E(t,u)}return t}function G(t,e,n,r){var i,o,u,s,a;if(n=null!=n&&L(n,0,8,r,h)?0|n:I,!t.c)return t.toString();if(i=t.c[0],u=t.e,null==e)a=_(t.c),a=19==r||24==r&&u<=R?A(a,u):E(a,u);else if(o=(t=J(new F(t),e,n)).e,s=(a=_(t.c)).length,19==r||24==r&&(e<=o||o<=R)){for(;s<e;a+="0",s++);a=A(a,o)}else if(e-=u,a=E(a,o),o+1>s){if(--e>0)for(a+=".";e--;a+="0");}else if((e+=o-s)>0)for(o+1==s&&(a+=".");e--;a+="0");return t.s<0&&i?"-"+a:a}function q(t,e){var n,r,i=0;for(O(t[0])&&(t=t[0]),n=new F(t[0]);++i<t.length;){if(!(r=new F(t[i])).s){n=r;break}e.call(n,r)&&(n=r)}return n}function H(t,e,n,r,i){return(t<e||t>n||t!=T(t))&&Y(r,(i||"decimal places")+(t<e||t>n?" out of range":" not an integer"),t),!0}function z(t,e,n){for(var r=1,i=e.length;!e[--i];e.pop());for(i=e[0];i>=10;i/=10,r++);return(n=r+n*d-1)>C?t.c=t.e=null:n<j?t.c=[t.e=0]:(t.e=n,t.c=e),t}function Y(t,e,n){var r=new Error(["new BigNumber","cmp","config","div","divToInt","eq","gt","gte","lt","lte","minus","mod","plus","precision","random","round","shift","times","toDigits","toExponential","toFixed","toFormat","toFraction","pow","toPrecision","toString","BigNumber"][t]+"() "+e+": "+n);throw r.name="BigNumber Error",i=0,r}function J(t,e,n,r){var i,o,u,c,h,l,f,y=t.c,m=v;if(y){t:{for(i=1,c=y[0];c>=10;c/=10,i++);if((o=e-i)<0)o+=d,u=e,f=(h=y[l=0])/m[i-u-1]%10|0;else if((l=s((o+1)/d))>=y.length){if(!r)break t;for(;y.length<=l;y.push(0));h=f=0,i=1,u=(o%=d)-d+1}else{for(h=c=y[l],i=1;c>=10;c/=10,i++);f=(u=(o%=d)-d+i)<0?0:h/m[i-u-1]%10|0}if(r=r||e<0||null!=y[l+1]||(u<0?h:h%m[i-u-1]),r=n<4?(f||r)&&(0==n||n==(t.s<0?3:2)):f>5||5==f&&(4==n||r||6==n&&(o>0?u>0?h/m[i-u]:0:y[l-1])%10&1||n==(t.s<0?8:7)),e<1||!y[0])return y.length=0,r?(e-=t.e+1,y[0]=m[(d-e%d)%d],t.e=-e||0):y[0]=t.e=0,t;if(0==o?(y.length=l,c=1,l--):(y.length=l+1,c=m[d-o],y[l]=u>0?a(h/m[i-u]%m[u])*c:0),r)for(;;){if(0==l){for(o=1,u=y[0];u>=10;u/=10,o++);for(u=y[0]+=c,c=1;u>=10;u/=10,c++);o!=c&&(t.e++,y[0]==p&&(y[0]=1));break}if(y[l]+=c,y[l]!=p)break;y[l--]=0,c=1}for(o=y.length;0===y[--o];y.pop());}t.e>C?t.c=t.e=null:t.e<j&&(t.c=[t.e=0])}return t}return F.another=t,F.ROUND_UP=0,F.ROUND_DOWN=1,F.ROUND_CEIL=2,F.ROUND_FLOOR=3,F.ROUND_HALF_UP=4,F.ROUND_HALF_DOWN=5,F.ROUND_HALF_EVEN=6,F.ROUND_HALF_CEIL=7,F.ROUND_HALF_FLOOR=8,F.EUCLID=9,F.config=F.set=function(){var t,e,n=0,r={},o=arguments,u=o[0],s=u&&"object"==typeof u?function(){if(u.hasOwnProperty(e))return null!=(t=u[e])}:function(){if(o.length>n)return null!=(t=o[n++])};return s(e="DECIMAL_PLACES")&&L(t,0,g,2,e)&&(P=0|t),r[e]=P,s(e="ROUNDING_MODE")&&L(t,0,8,2,e)&&(I=0|t),r[e]=I,s(e="EXPONENTIAL_AT")&&(O(t)?L(t[0],-g,0,2,e)&&L(t[1],0,g,2,e)&&(R=0|t[0],N=0|t[1]):L(t,-g,g,2,e)&&(R=-(N=0|(t<0?-t:t)))),r[e]=[R,N],s(e="RANGE")&&(O(t)?L(t[0],-g,-1,2,e)&&L(t[1],1,g,2,e)&&(j=0|t[0],C=0|t[1]):L(t,-g,g,2,e)&&(0|t?j=-(C=0|(t<0?-t:t)):k&&Y(2,e+" cannot be zero",t))),r[e]=[j,C],s(e="ERRORS")&&(t===!!t||1===t||0===t?(i=0,L=(k=!!t)?H:M):k&&Y(2,e+c,t)),r[e]=k,s(e="CRYPTO")&&(!0===t||!1===t||1===t||0===t?t?!(t="undefined"==typeof crypto)&&crypto&&(crypto.getRandomValues||crypto.randomBytes)?D=!0:k?Y(2,"crypto unavailable",t?void 0:crypto):D=!1:D=!1:k&&Y(2,e+c,t)),r[e]=D,s(e="MODULO_MODE")&&L(t,0,9,2,e)&&(B=0|t),r[e]=B,s(e="POW_PRECISION")&&L(t,0,g,2,e)&&(U=0|t),r[e]=U,s(e="FORMAT")&&("object"==typeof t?W=t:k&&Y(2,e+" not an object",t)),r[e]=W,r},F.max=function(){return q(arguments,o.lt)},F.min=function(){return q(arguments,o.gt)},F.random=function(){var t=9007199254740992*Math.random()&2097151?function(){return a(9007199254740992*Math.random())}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)};return function(e){var n,r,i,o,u,c=0,h=[],l=new F(x);if(e=null!=e&&L(e,0,g,14)?0|e:P,o=s(e/d),D)if(crypto.getRandomValues){for(n=crypto.getRandomValues(new Uint32Array(o*=2));c<o;)(u=131072*n[c]+(n[c+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),n[c]=r[0],n[c+1]=r[1]):(h.push(u%1e14),c+=2);c=o/2}else if(crypto.randomBytes){for(n=crypto.randomBytes(o*=7);c<o;)(u=281474976710656*(31&n[c])+1099511627776*n[c+1]+4294967296*n[c+2]+16777216*n[c+3]+(n[c+4]<<16)+(n[c+5]<<8)+n[c+6])>=9e15?crypto.randomBytes(7).copy(n,c):(h.push(u%1e14),c+=7);c=o/7}else D=!1,k&&Y(14,"crypto unavailable",crypto);if(!D)for(;c<o;)(u=t())<9e15&&(h[c++]=u%1e14);for(o=h[--c],e%=d,o&&e&&(u=v[d-e],h[c]=a(o/u)*u);0===h[c];h.pop(),c--);if(c<0)h=[i=0];else{for(i=-1;0===h[0];h.splice(0,1),i-=d);for(c=1,u=h[0];u>=10;u/=10,c++);c<d&&(i-=d-c)}return l.e=i,l.c=h,l}}(),n=function(){function t(t,e,n){var r,i,o,u,s=0,a=t.length,c=e%m,h=e/m|0;for(t=t.slice();a--;)s=((i=c*(o=t[a]%m)+(r=h*o+(u=t[a]/m|0)*c)%m*m+s)/n|0)+(r/m|0)+h*u,t[a]=i%n;return s&&(t=[s].concat(t)),t}function e(t,e,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(t[i]!=e[i]){o=t[i]>e[i]?1:-1;break}return o}function n(t,e,n,r){for(var i=0;n--;)t[n]-=i,i=t[n]<e[n]?1:0,t[n]=i*r+t[n]-e[n];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(r,i,o,u,s){var c,h,l,f,y,v,m,g,_,w,M,O,S,A,E,T,x,P=r.s==i.s?1:-1,I=r.c,R=i.c;if(!(I&&I[0]&&R&&R[0]))return new F(r.s&&i.s&&(I?!R||I[0]!=R[0]:R)?I&&0==I[0]||!R?0*P:P/0:NaN);for(_=(g=new F(P)).c=[],P=o+(h=r.e-i.e)+1,s||(s=p,h=b(r.e/d)-b(i.e/d),P=P/d|0),l=0;R[l]==(I[l]||0);l++);if(R[l]>(I[l]||0)&&h--,P<0)_.push(1),f=!0;else{for(A=I.length,T=R.length,l=0,P+=2,(y=a(s/(R[0]+1)))>1&&(R=t(R,y,s),I=t(I,y,s),T=R.length,A=I.length),S=T,M=(w=I.slice(0,T)).length;M<T;w[M++]=0);x=R.slice(),x=[0].concat(x),E=R[0],R[1]>=s/2&&E++;do{if(y=0,(c=e(R,w,T,M))<0){if(O=w[0],T!=M&&(O=O*s+(w[1]||0)),(y=a(O/E))>1)for(y>=s&&(y=s-1),m=(v=t(R,y,s)).length,M=w.length;1==e(v,w,m,M);)y--,n(v,T<m?x:R,m,s),m=v.length,c=1;else 0==y&&(c=y=1),m=(v=R.slice()).length;if(m<M&&(v=[0].concat(v)),n(w,v,M,s),M=w.length,-1==c)for(;e(R,w,T,M)<1;)y++,n(w,T<M?x:R,M,s),M=w.length}else 0===c&&(y++,w=[0]);_[l++]=y,w[0]?w[M++]=I[S]||0:(w=[I[S]],M=1)}while((S++<A||null!=w[0])&&P--);f=null!=w[0],_[0]||_.splice(0,1)}if(s==p){for(l=1,P=_[0];P>=10;P/=10,l++);J(g,o+(g.e=l+h*d-1)+1,u,f)}else g.e=h,g.r=+f;return g}}(),r=function(){var t=/^(-?)0([xbo])(?=\w[\w.]*$)/i,e=/^([^.]+)\.$/,n=/^\.([^.]+)$/,r=/^-?(Infinity|NaN)$/,o=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(u,s,a,c){var h,l=a?s:s.replace(o,"");if(r.test(l))u.s=isNaN(l)?null:l<0?-1:1;else{if(!a&&(l=l.replace(t,function(t,e,n){return h="x"==(n=n.toLowerCase())?16:"b"==n?2:8,c&&c!=h?t:e}),c&&(h=c,l=l.replace(e,"$1").replace(n,"0.$1")),s!=l))return new F(l,h);k&&Y(i,"not a"+(c?" base "+c:"")+" number",s),u.s=null}u.c=u.e=null,i=0}}(),o.absoluteValue=o.abs=function(){var t=new F(this);return t.s<0&&(t.s=1),t},o.ceil=function(){return J(new F(this),this.e+1,2)},o.comparedTo=o.cmp=function(t,e){return i=1,w(this,new F(t,e))},o.decimalPlaces=o.dp=function(){var t,e,n=this.c;if(!n)return null;if(t=((e=n.length-1)-b(this.e/d))*d,e=n[e])for(;e%10==0;e/=10,t--);return t<0&&(t=0),t},o.dividedBy=o.div=function(t,e){return i=3,n(this,new F(t,e),P,I)},o.dividedToIntegerBy=o.divToInt=function(t,e){return i=4,n(this,new F(t,e),0,1)},o.equals=o.eq=function(t,e){return i=5,0===w(this,new F(t,e))},o.floor=function(){return J(new F(this),this.e+1,3)},o.greaterThan=o.gt=function(t,e){return i=6,w(this,new F(t,e))>0},o.greaterThanOrEqualTo=o.gte=function(t,e){return i=7,1===(e=w(this,new F(t,e)))||0===e},o.isFinite=function(){return!!this.c},o.isInteger=o.isInt=function(){return!!this.c&&b(this.e/d)>this.c.length-2},o.isNaN=function(){return!this.s},o.isNegative=o.isNeg=function(){return this.s<0},o.isZero=function(){return!!this.c&&0==this.c[0]},o.lessThan=o.lt=function(t,e){return i=8,w(this,new F(t,e))<0},o.lessThanOrEqualTo=o.lte=function(t,e){return i=9,-1===(e=w(this,new F(t,e)))||0===e},o.minus=o.sub=function(t,e){var n,r,o,u,s=this,a=s.s;if(i=10,e=(t=new F(t,e)).s,!a||!e)return new F(NaN);if(a!=e)return t.s=-e,s.plus(t);var c=s.e/d,h=t.e/d,l=s.c,f=t.c;if(!c||!h){if(!l||!f)return l?(t.s=-e,t):new F(f?s:NaN);if(!l[0]||!f[0])return f[0]?(t.s=-e,t):new F(l[0]?s:3==I?-0:0)}if(c=b(c),h=b(h),l=l.slice(),a=c-h){for((u=a<0)?(a=-a,o=l):(h=c,o=f),o.reverse(),e=a;e--;o.push(0));o.reverse()}else for(r=(u=(a=l.length)<(e=f.length))?a:e,a=e=0;e<r;e++)if(l[e]!=f[e]){u=l[e]<f[e];break}if(u&&(o=l,l=f,f=o,t.s=-t.s),(e=(r=f.length)-(n=l.length))>0)for(;e--;l[n++]=0);for(e=p-1;r>a;){if(l[--r]<f[r]){for(n=r;n&&!l[--n];l[n]=e);--l[n],l[r]+=p}l[r]-=f[r]}for(;0==l[0];l.splice(0,1),--h);return l[0]?z(t,l,h):(t.s=3==I?-1:1,t.c=[t.e=0],t)},o.modulo=o.mod=function(t,e){var r,o,u=this;return i=11,t=new F(t,e),!u.c||!t.s||t.c&&!t.c[0]?new F(NaN):!t.c||u.c&&!u.c[0]?new F(u):(9==B?(o=t.s,t.s=1,r=n(u,t,0,3),t.s=o,r.s*=o):r=n(u,t,0,B),u.minus(r.times(t)))},o.negated=o.neg=function(){var t=new F(this);return t.s=-t.s||null,t},o.plus=o.add=function(t,e){var n,r=this,o=r.s;if(i=12,e=(t=new F(t,e)).s,!o||!e)return new F(NaN);if(o!=e)return t.s=-e,r.minus(t);var u=r.e/d,s=t.e/d,a=r.c,c=t.c;if(!u||!s){if(!a||!c)return new F(o/0);if(!a[0]||!c[0])return c[0]?t:new F(a[0]?r:0*o)}if(u=b(u),s=b(s),a=a.slice(),o=u-s){for(o>0?(s=u,n=c):(o=-o,n=a),n.reverse();o--;n.push(0));n.reverse()}for((o=a.length)-(e=c.length)<0&&(n=c,c=a,a=n,e=o),o=0;e;)o=(a[--e]=a[e]+c[e]+o)/p|0,a[e]=p===a[e]?0:a[e]%p;return o&&(a=[o].concat(a),++s),z(t,a,s)},o.precision=o.sd=function(t){var e,n,r=this,i=r.c;if(null!=t&&t!==!!t&&1!==t&&0!==t&&(k&&Y(13,"argument"+c,t),t!=!!t&&(t=null)),!i)return null;if(e=(n=i.length-1)*d+1,n=i[n]){for(;n%10==0;n/=10,e--);for(n=i[0];n>=10;n/=10,e++);}return t&&r.e+1>e&&(e=r.e+1),e},o.round=function(t,e){var n=new F(this);return(null==t||L(t,0,g,15))&&J(n,~~t+this.e+1,null!=e&&L(e,0,8,15,h)?0|e:I),n},o.shift=function(t){var e=this;return L(t,-y,y,16,"argument")?e.times("1e"+T(t)):new F(e.c&&e.c[0]&&(t<-y||t>y)?e.s*(t<0?0:1/0):e)},o.squareRoot=o.sqrt=function(){var t,e,r,i,o,u=this,s=u.c,a=u.s,c=u.e,h=P+4,l=new F("0.5");if(1!==a||!s||!s[0])return new F(!a||a<0&&(!s||s[0])?NaN:s?u:1/0);if(0==(a=Math.sqrt(+u))||a==1/0?(((e=_(s)).length+c)%2==0&&(e+="0"),a=Math.sqrt(e),c=b((c+1)/2)-(c<0||c%2),r=new F(e=a==1/0?"1e"+c:(e=a.toExponential()).slice(0,e.indexOf("e")+1)+c)):r=new F(a+""),r.c[0])for((a=(c=r.e)+h)<3&&(a=0);;)if(o=r,r=l.times(o.plus(n(u,o,h,1))),_(o.c).slice(0,a)===(e=_(r.c)).slice(0,a)){if(r.e<c&&--a,"9999"!=(e=e.slice(a-3,a+1))&&(i||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(J(r,r.e+P+2,1),t=!r.times(r).eq(u));break}if(!i&&(J(o,o.e+P+2,0),o.times(o).eq(u))){r=o;break}h+=4,a+=4,i=1}return J(r,r.e+P+1,I,t)},o.times=o.mul=function(t,e){var n,r,o,u,s,a,c,h,l,f,y,v,g,_,w,M=this,O=M.c,S=(i=17,t=new F(t,e)).c;if(!(O&&S&&O[0]&&S[0]))return!M.s||!t.s||O&&!O[0]&&!S||S&&!S[0]&&!O?t.c=t.e=t.s=null:(t.s*=M.s,O&&S?(t.c=[0],t.e=0):t.c=t.e=null),t;for(r=b(M.e/d)+b(t.e/d),t.s*=M.s,(c=O.length)<(f=S.length)&&(g=O,O=S,S=g,o=c,c=f,f=o),o=c+f,g=[];o--;g.push(0));for(_=p,w=m,o=f;--o>=0;){for(n=0,y=S[o]%w,v=S[o]/w|0,u=o+(s=c);u>o;)n=((h=y*(h=O[--s]%w)+(a=v*h+(l=O[s]/w|0)*y)%w*w+g[u]+n)/_|0)+(a/w|0)+v*l,g[u--]=h%_;g[u]=n}return n?++r:g.splice(0,1),z(t,g,r)},o.toDigits=function(t,e){var n=new F(this);return t=null!=t&&L(t,1,g,18,"precision")?0|t:null,e=null!=e&&L(e,0,8,18,h)?0|e:I,t?J(n,t,e):n},o.toExponential=function(t,e){return G(this,null!=t&&L(t,0,g,19)?1+~~t:null,e,19)},o.toFixed=function(t,e){return G(this,null!=t&&L(t,0,g,20)?~~t+this.e+1:null,e,20)},o.toFormat=function(t,e){var n=G(this,null!=t&&L(t,0,g,21)?~~t+this.e+1:null,e,21);if(this.c){var r,i=n.split("."),o=+W.groupSize,u=+W.secondaryGroupSize,s=W.groupSeparator,a=i[0],c=i[1],h=this.s<0,l=h?a.slice(1):a,f=l.length;if(u&&(r=o,o=u,u=r,f-=r),o>0&&f>0){for(r=f%o||o,a=l.substr(0,r);r<f;r+=o)a+=s+l.substr(r,o);u>0&&(a+=s+l.slice(r)),h&&(a="-"+a)}n=c?a+W.decimalSeparator+((u=+W.fractionGroupSize)?c.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+W.fractionGroupSeparator):c):a}return n},o.toFraction=function(t){var e,r,i,o,u,s,a,c,h,l=k,f=this,p=f.c,y=new F(x),m=r=new F(x),g=a=new F(x);if(null!=t&&(k=!1,s=new F(t),k=l,(l=s.isInt())&&!s.lt(x)||(k&&Y(22,"max denominator "+(l?"out of range":"not an integer"),t),t=!l&&s.c&&J(s,s.e+1,1).gte(x)?s:null)),!p)return f.toString();for(h=_(p),o=y.e=h.length-f.e-1,y.c[0]=v[(u=o%d)<0?d+u:u],t=!t||s.cmp(y)>0?o>0?y:m:s,u=C,C=1/0,s=new F(h),a.c[0]=0;c=n(s,y,0,1),1!=(i=r.plus(c.times(g))).cmp(t);)r=g,g=i,m=a.plus(c.times(i=m)),a=i,y=s.minus(c.times(i=y)),s=i;return i=n(t.minus(r),g,0,1),a=a.plus(i.times(m)),r=r.plus(i.times(g)),a.s=m.s=f.s,e=n(m,g,o*=2,I).minus(f).abs().cmp(n(a,r,o,I).minus(f).abs())<1?[m.toString(),g.toString()]:[a.toString(),r.toString()],C=u,e},o.toNumber=function(){return+this},o.toPower=o.pow=function(t,e){var n,r,o,u=a(t<0?-t:+t),c=this;if(null!=e&&(i=23,e=new F(e)),!L(t,-y,y,23,"exponent")&&(!isFinite(t)||u>y&&(t/=0)||parseFloat(t)!=t&&!(t=NaN))||0==t)return n=Math.pow(+c,t),new F(e?n%e:n);for(e?t>1&&c.gt(x)&&c.isInt()&&e.gt(x)&&e.isInt()?c=c.mod(e):(o=e,e=null):U&&(n=s(U/d+2)),r=new F(x);;){if(u%2){if(!(r=r.times(c)).c)break;n?r.c.length>n&&(r.c.length=n):e&&(r=r.mod(e))}if(!(u=a(u/2)))break;c=c.times(c),n?c.c&&c.c.length>n&&(c.c.length=n):e&&(c=c.mod(e))}return e?r:(t<0&&(r=x.div(r)),o?r.mod(o):n?J(r,U,I):r)},o.toPrecision=function(t,e){return G(this,null!=t&&L(t,1,g,24,"precision")?0|t:null,e,24)},o.toString=function(t){var e,n=this,r=n.s,i=n.e;return null===i?r?(e="Infinity",r<0&&(e="-"+e)):e="NaN":(e=_(n.c),e=null!=t&&L(t,2,64,25,"base")?V(E(e,i),0|t,10,r):i<=R||i>=N?A(e,i):E(e,i),r<0&&n.c[0]&&(e="-"+e)),e},o.truncated=o.trunc=function(){return J(new F(this),this.e+1,1)},o.valueOf=o.toJSON=function(){var t,e=this,n=e.e;return null===n?e.toString():(t=_(e.c),t=n<=R||n>=N?A(t,n):E(t,n),e.s<0?"-"+t:t)},o.isBigNumber=!0,null!=e&&F.config(e),F}()).default=o.BigNumber=o,void 0===(r=function(){return o}.call(e,n,e,t))||(t.exports=r)}()},function(t,e,n){(function(t){!function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}function o(t,e,n){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(n=e,e=10),this._init(t||0,e||10,n||"be"))}var u;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{u=n(68).Buffer}catch(t){}function s(t,e,n){for(var r=0,i=Math.min(t.length,n),o=e;o<i;o++){var u=t.charCodeAt(o)-48;r<<=4,r|=u>=49&&u<=54?u-49+10:u>=17&&u<=22?u-17+10:15&u}return r}function a(t,e,n,r){for(var i=0,o=Math.min(t.length,n),u=e;u<o;u++){var s=t.charCodeAt(u)-48;i*=r,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,n){if("number"==typeof t)return this._initNumber(t,e,n);if("object"==typeof t)return this._initArray(t,e,n);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&i++,16===e?this._parseHex(t,i):this._parseBase(t,e,i),"-"===t[0]&&(this.negative=1),this.strip(),"le"===n&&this._initArray(this.toArray(),e,n)},o.prototype._initNumber=function(t,e,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),e,n)},o.prototype._initArray=function(t,e,n){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,u,s=0;if("be"===n)for(i=t.length-1,o=0;i>=0;i-=3)u=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=u<<s&67108863,this.words[o+1]=u>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===n)for(i=0,o=0;i<t.length;i+=3)u=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=u<<s&67108863,this.words[o+1]=u>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var r,i,o=0;for(n=t.length-6,r=0;n>=e;n-=6)i=s(t,n,n+6),this.words[r]|=i<<o&67108863,this.words[r+1]|=i>>>26-o&4194303,(o+=24)>=26&&(o-=26,r++);n+6!==e&&(i=s(t,e,n+6),this.words[r]|=i<<o&67108863,this.words[r+1]|=i>>>26-o&4194303),this.strip()},o.prototype._parseBase=function(t,e,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=e)r++;r--,i=i/e|0;for(var o=t.length-n,u=o%r,s=Math.min(o,o-u)+n,c=0,h=n;h<s;h+=r)c=a(t,h,h+r,e),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==u){var l=1;for(c=a(t,h,t.length,e),h=0;h<u;h++)l*=e;this.imuln(l),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],l=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,e,n){n.negative=e.negative^t.negative;var r=t.length+e.length|0;n.length=r,r=r-1|0;var i=0|t.words[0],o=0|e.words[0],u=i*o,s=67108863&u,a=u/67108864|0;n.words[0]=s;for(var c=1;c<r;c++){for(var h=a>>>26,l=67108863&a,f=Math.min(c,e.length-1),p=Math.max(0,c-t.length+1);p<=f;p++){var d=c-p|0;h+=(u=(i=0|t.words[d])*(o=0|e.words[p])+l)/67108864|0,l=67108863&u}n.words[c]=0|l,a=0|h}return 0!==a?n.words[c]=0|a:n.length--,n.strip()}o.prototype.toString=function(t,e){var n;if(t=t||10,e=0|e||1,16===t||"hex"===t){n="";for(var i=0,o=0,u=0;u<this.length;u++){var s=this.words[u],a=(16777215&(s<<i|o)).toString(16);n=0!==(o=s>>>24-i&16777215)||u!==this.length-1?c[6-a.length]+a+n:a+n,(i+=2)>=26&&(i-=26,u--)}for(0!==o&&(n=o.toString(16)+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var f=h[t],p=l[t];n="";var d=this.clone();for(d.negative=0;!d.isZero();){var y=d.modn(p).toString(t);n=(d=d.idivn(p)).isZero()?y+n:c[f-y.length]+y+n}for(this.isZero()&&(n="0"+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return r(void 0!==u),this.toArrayLike(u,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,n){var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0"),this.strip();var u,s,a="le"===e,c=new t(o),h=this.clone();if(a){for(s=0;!h.isZero();s++)u=h.andln(255),h.iushrn(8),c[s]=u;for(;s<o;s++)c[s]=0}else{for(s=0;s<o-i;s++)c[s]=0;for(s=0;!h.isZero();s++)u=h.andln(255),h.iushrn(8),c[o-s-1]=u}return c},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,n=0;return e>=4096&&(n+=13,e>>>=13),e>=64&&(n+=7,e>>>=7),e>=8&&(n+=4,e>>>=4),e>=2&&(n+=2,e>>>=2),n+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,n=0;return 0==(8191&e)&&(n+=13,e>>>=13),0==(127&e)&&(n+=7,e>>>=7),0==(15&e)&&(n+=4,e>>>=4),0==(3&e)&&(n+=2,e>>>=2),0==(1&e)&&n++,n},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var n=this._zeroBits(this.words[e]);if(t+=n,26!==n)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var n=0;n<e.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,n;this.length>t.length?(e=this,n=t):(e=t,n=this);for(var r=0;r<n.length;r++)this.words[r]=e.words[r]^n.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),n=t%26;this._expand(e),n>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var n=t/26|0,i=t%26;return this._expand(n+1),this.words[n]=e?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,n,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(n=this,r=t):(n=t,r=this);for(var i=0,o=0;o<r.length;o++)e=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<n.length;o++)e=(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n,r,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=t):(n=t,r=this);for(var o=0,u=0;u<r.length;u++)o=(e=(0|n.words[u])-(0|r.words[u])+o)>>26,this.words[u]=67108863&e;for(;0!==o&&u<n.length;u++)o=(e=(0|n.words[u])+o)>>26,this.words[u]=67108863&e;if(0===o&&u<n.length&&n!==this)for(;u<n.length;u++)this.words[u]=n.words[u];return this.length=Math.max(this.length,u),n!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,n){var r,i,o,u=t.words,s=e.words,a=n.words,c=0,h=0|u[0],l=8191&h,f=h>>>13,p=0|u[1],d=8191&p,y=p>>>13,v=0|u[2],m=8191&v,g=v>>>13,b=0|u[3],_=8191&b,w=b>>>13,M=0|u[4],O=8191&M,S=M>>>13,A=0|u[5],E=8191&A,T=A>>>13,x=0|u[6],P=8191&x,I=x>>>13,R=0|u[7],N=8191&R,j=R>>>13,C=0|u[8],k=8191&C,L=C>>>13,D=0|u[9],B=8191&D,U=D>>>13,W=0|s[0],F=8191&W,V=W>>>13,G=0|s[1],q=8191&G,H=G>>>13,z=0|s[2],Y=8191&z,J=z>>>13,K=0|s[3],Z=8191&K,$=K>>>13,X=0|s[4],Q=8191&X,tt=X>>>13,et=0|s[5],nt=8191&et,rt=et>>>13,it=0|s[6],ot=8191&it,ut=it>>>13,st=0|s[7],at=8191&st,ct=st>>>13,ht=0|s[8],lt=8191&ht,ft=ht>>>13,pt=0|s[9],dt=8191&pt,yt=pt>>>13;n.negative=t.negative^e.negative,n.length=19;var vt=(c+(r=Math.imul(l,F))|0)+((8191&(i=(i=Math.imul(l,V))+Math.imul(f,F)|0))<<13)|0;c=((o=Math.imul(f,V))+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(d,F),i=(i=Math.imul(d,V))+Math.imul(y,F)|0,o=Math.imul(y,V);var mt=(c+(r=r+Math.imul(l,q)|0)|0)+((8191&(i=(i=i+Math.imul(l,H)|0)+Math.imul(f,q)|0))<<13)|0;c=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(mt>>>26)|0,mt&=67108863,r=Math.imul(m,F),i=(i=Math.imul(m,V))+Math.imul(g,F)|0,o=Math.imul(g,V),r=r+Math.imul(d,q)|0,i=(i=i+Math.imul(d,H)|0)+Math.imul(y,q)|0,o=o+Math.imul(y,H)|0;var gt=(c+(r=r+Math.imul(l,Y)|0)|0)+((8191&(i=(i=i+Math.imul(l,J)|0)+Math.imul(f,Y)|0))<<13)|0;c=((o=o+Math.imul(f,J)|0)+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(_,F),i=(i=Math.imul(_,V))+Math.imul(w,F)|0,o=Math.imul(w,V),r=r+Math.imul(m,q)|0,i=(i=i+Math.imul(m,H)|0)+Math.imul(g,q)|0,o=o+Math.imul(g,H)|0,r=r+Math.imul(d,Y)|0,i=(i=i+Math.imul(d,J)|0)+Math.imul(y,Y)|0,o=o+Math.imul(y,J)|0;var bt=(c+(r=r+Math.imul(l,Z)|0)|0)+((8191&(i=(i=i+Math.imul(l,$)|0)+Math.imul(f,Z)|0))<<13)|0;c=((o=o+Math.imul(f,$)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(O,F),i=(i=Math.imul(O,V))+Math.imul(S,F)|0,o=Math.imul(S,V),r=r+Math.imul(_,q)|0,i=(i=i+Math.imul(_,H)|0)+Math.imul(w,q)|0,o=o+Math.imul(w,H)|0,r=r+Math.imul(m,Y)|0,i=(i=i+Math.imul(m,J)|0)+Math.imul(g,Y)|0,o=o+Math.imul(g,J)|0,r=r+Math.imul(d,Z)|0,i=(i=i+Math.imul(d,$)|0)+Math.imul(y,Z)|0,o=o+Math.imul(y,$)|0;var _t=(c+(r=r+Math.imul(l,Q)|0)|0)+((8191&(i=(i=i+Math.imul(l,tt)|0)+Math.imul(f,Q)|0))<<13)|0;c=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(E,F),i=(i=Math.imul(E,V))+Math.imul(T,F)|0,o=Math.imul(T,V),r=r+Math.imul(O,q)|0,i=(i=i+Math.imul(O,H)|0)+Math.imul(S,q)|0,o=o+Math.imul(S,H)|0,r=r+Math.imul(_,Y)|0,i=(i=i+Math.imul(_,J)|0)+Math.imul(w,Y)|0,o=o+Math.imul(w,J)|0,r=r+Math.imul(m,Z)|0,i=(i=i+Math.imul(m,$)|0)+Math.imul(g,Z)|0,o=o+Math.imul(g,$)|0,r=r+Math.imul(d,Q)|0,i=(i=i+Math.imul(d,tt)|0)+Math.imul(y,Q)|0,o=o+Math.imul(y,tt)|0;var wt=(c+(r=r+Math.imul(l,nt)|0)|0)+((8191&(i=(i=i+Math.imul(l,rt)|0)+Math.imul(f,nt)|0))<<13)|0;c=((o=o+Math.imul(f,rt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(P,F),i=(i=Math.imul(P,V))+Math.imul(I,F)|0,o=Math.imul(I,V),r=r+Math.imul(E,q)|0,i=(i=i+Math.imul(E,H)|0)+Math.imul(T,q)|0,o=o+Math.imul(T,H)|0,r=r+Math.imul(O,Y)|0,i=(i=i+Math.imul(O,J)|0)+Math.imul(S,Y)|0,o=o+Math.imul(S,J)|0,r=r+Math.imul(_,Z)|0,i=(i=i+Math.imul(_,$)|0)+Math.imul(w,Z)|0,o=o+Math.imul(w,$)|0,r=r+Math.imul(m,Q)|0,i=(i=i+Math.imul(m,tt)|0)+Math.imul(g,Q)|0,o=o+Math.imul(g,tt)|0,r=r+Math.imul(d,nt)|0,i=(i=i+Math.imul(d,rt)|0)+Math.imul(y,nt)|0,o=o+Math.imul(y,rt)|0;var Mt=(c+(r=r+Math.imul(l,ot)|0)|0)+((8191&(i=(i=i+Math.imul(l,ut)|0)+Math.imul(f,ot)|0))<<13)|0;c=((o=o+Math.imul(f,ut)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(N,F),i=(i=Math.imul(N,V))+Math.imul(j,F)|0,o=Math.imul(j,V),r=r+Math.imul(P,q)|0,i=(i=i+Math.imul(P,H)|0)+Math.imul(I,q)|0,o=o+Math.imul(I,H)|0,r=r+Math.imul(E,Y)|0,i=(i=i+Math.imul(E,J)|0)+Math.imul(T,Y)|0,o=o+Math.imul(T,J)|0,r=r+Math.imul(O,Z)|0,i=(i=i+Math.imul(O,$)|0)+Math.imul(S,Z)|0,o=o+Math.imul(S,$)|0,r=r+Math.imul(_,Q)|0,i=(i=i+Math.imul(_,tt)|0)+Math.imul(w,Q)|0,o=o+Math.imul(w,tt)|0,r=r+Math.imul(m,nt)|0,i=(i=i+Math.imul(m,rt)|0)+Math.imul(g,nt)|0,o=o+Math.imul(g,rt)|0,r=r+Math.imul(d,ot)|0,i=(i=i+Math.imul(d,ut)|0)+Math.imul(y,ot)|0,o=o+Math.imul(y,ut)|0;var Ot=(c+(r=r+Math.imul(l,at)|0)|0)+((8191&(i=(i=i+Math.imul(l,ct)|0)+Math.imul(f,at)|0))<<13)|0;c=((o=o+Math.imul(f,ct)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,r=Math.imul(k,F),i=(i=Math.imul(k,V))+Math.imul(L,F)|0,o=Math.imul(L,V),r=r+Math.imul(N,q)|0,i=(i=i+Math.imul(N,H)|0)+Math.imul(j,q)|0,o=o+Math.imul(j,H)|0,r=r+Math.imul(P,Y)|0,i=(i=i+Math.imul(P,J)|0)+Math.imul(I,Y)|0,o=o+Math.imul(I,J)|0,r=r+Math.imul(E,Z)|0,i=(i=i+Math.imul(E,$)|0)+Math.imul(T,Z)|0,o=o+Math.imul(T,$)|0,r=r+Math.imul(O,Q)|0,i=(i=i+Math.imul(O,tt)|0)+Math.imul(S,Q)|0,o=o+Math.imul(S,tt)|0,r=r+Math.imul(_,nt)|0,i=(i=i+Math.imul(_,rt)|0)+Math.imul(w,nt)|0,o=o+Math.imul(w,rt)|0,r=r+Math.imul(m,ot)|0,i=(i=i+Math.imul(m,ut)|0)+Math.imul(g,ot)|0,o=o+Math.imul(g,ut)|0,r=r+Math.imul(d,at)|0,i=(i=i+Math.imul(d,ct)|0)+Math.imul(y,at)|0,o=o+Math.imul(y,ct)|0;var St=(c+(r=r+Math.imul(l,lt)|0)|0)+((8191&(i=(i=i+Math.imul(l,ft)|0)+Math.imul(f,lt)|0))<<13)|0;c=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(B,F),i=(i=Math.imul(B,V))+Math.imul(U,F)|0,o=Math.imul(U,V),r=r+Math.imul(k,q)|0,i=(i=i+Math.imul(k,H)|0)+Math.imul(L,q)|0,o=o+Math.imul(L,H)|0,r=r+Math.imul(N,Y)|0,i=(i=i+Math.imul(N,J)|0)+Math.imul(j,Y)|0,o=o+Math.imul(j,J)|0,r=r+Math.imul(P,Z)|0,i=(i=i+Math.imul(P,$)|0)+Math.imul(I,Z)|0,o=o+Math.imul(I,$)|0,r=r+Math.imul(E,Q)|0,i=(i=i+Math.imul(E,tt)|0)+Math.imul(T,Q)|0,o=o+Math.imul(T,tt)|0,r=r+Math.imul(O,nt)|0,i=(i=i+Math.imul(O,rt)|0)+Math.imul(S,nt)|0,o=o+Math.imul(S,rt)|0,r=r+Math.imul(_,ot)|0,i=(i=i+Math.imul(_,ut)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,ut)|0,r=r+Math.imul(m,at)|0,i=(i=i+Math.imul(m,ct)|0)+Math.imul(g,at)|0,o=o+Math.imul(g,ct)|0,r=r+Math.imul(d,lt)|0,i=(i=i+Math.imul(d,ft)|0)+Math.imul(y,lt)|0,o=o+Math.imul(y,ft)|0;var At=(c+(r=r+Math.imul(l,dt)|0)|0)+((8191&(i=(i=i+Math.imul(l,yt)|0)+Math.imul(f,dt)|0))<<13)|0;c=((o=o+Math.imul(f,yt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(B,q),i=(i=Math.imul(B,H))+Math.imul(U,q)|0,o=Math.imul(U,H),r=r+Math.imul(k,Y)|0,i=(i=i+Math.imul(k,J)|0)+Math.imul(L,Y)|0,o=o+Math.imul(L,J)|0,r=r+Math.imul(N,Z)|0,i=(i=i+Math.imul(N,$)|0)+Math.imul(j,Z)|0,o=o+Math.imul(j,$)|0,r=r+Math.imul(P,Q)|0,i=(i=i+Math.imul(P,tt)|0)+Math.imul(I,Q)|0,o=o+Math.imul(I,tt)|0,r=r+Math.imul(E,nt)|0,i=(i=i+Math.imul(E,rt)|0)+Math.imul(T,nt)|0,o=o+Math.imul(T,rt)|0,r=r+Math.imul(O,ot)|0,i=(i=i+Math.imul(O,ut)|0)+Math.imul(S,ot)|0,o=o+Math.imul(S,ut)|0,r=r+Math.imul(_,at)|0,i=(i=i+Math.imul(_,ct)|0)+Math.imul(w,at)|0,o=o+Math.imul(w,ct)|0,r=r+Math.imul(m,lt)|0,i=(i=i+Math.imul(m,ft)|0)+Math.imul(g,lt)|0,o=o+Math.imul(g,ft)|0;var Et=(c+(r=r+Math.imul(d,dt)|0)|0)+((8191&(i=(i=i+Math.imul(d,yt)|0)+Math.imul(y,dt)|0))<<13)|0;c=((o=o+Math.imul(y,yt)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(B,Y),i=(i=Math.imul(B,J))+Math.imul(U,Y)|0,o=Math.imul(U,J),r=r+Math.imul(k,Z)|0,i=(i=i+Math.imul(k,$)|0)+Math.imul(L,Z)|0,o=o+Math.imul(L,$)|0,r=r+Math.imul(N,Q)|0,i=(i=i+Math.imul(N,tt)|0)+Math.imul(j,Q)|0,o=o+Math.imul(j,tt)|0,r=r+Math.imul(P,nt)|0,i=(i=i+Math.imul(P,rt)|0)+Math.imul(I,nt)|0,o=o+Math.imul(I,rt)|0,r=r+Math.imul(E,ot)|0,i=(i=i+Math.imul(E,ut)|0)+Math.imul(T,ot)|0,o=o+Math.imul(T,ut)|0,r=r+Math.imul(O,at)|0,i=(i=i+Math.imul(O,ct)|0)+Math.imul(S,at)|0,o=o+Math.imul(S,ct)|0,r=r+Math.imul(_,lt)|0,i=(i=i+Math.imul(_,ft)|0)+Math.imul(w,lt)|0,o=o+Math.imul(w,ft)|0;var Tt=(c+(r=r+Math.imul(m,dt)|0)|0)+((8191&(i=(i=i+Math.imul(m,yt)|0)+Math.imul(g,dt)|0))<<13)|0;c=((o=o+Math.imul(g,yt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(B,Z),i=(i=Math.imul(B,$))+Math.imul(U,Z)|0,o=Math.imul(U,$),r=r+Math.imul(k,Q)|0,i=(i=i+Math.imul(k,tt)|0)+Math.imul(L,Q)|0,o=o+Math.imul(L,tt)|0,r=r+Math.imul(N,nt)|0,i=(i=i+Math.imul(N,rt)|0)+Math.imul(j,nt)|0,o=o+Math.imul(j,rt)|0,r=r+Math.imul(P,ot)|0,i=(i=i+Math.imul(P,ut)|0)+Math.imul(I,ot)|0,o=o+Math.imul(I,ut)|0,r=r+Math.imul(E,at)|0,i=(i=i+Math.imul(E,ct)|0)+Math.imul(T,at)|0,o=o+Math.imul(T,ct)|0,r=r+Math.imul(O,lt)|0,i=(i=i+Math.imul(O,ft)|0)+Math.imul(S,lt)|0,o=o+Math.imul(S,ft)|0;var xt=(c+(r=r+Math.imul(_,dt)|0)|0)+((8191&(i=(i=i+Math.imul(_,yt)|0)+Math.imul(w,dt)|0))<<13)|0;c=((o=o+Math.imul(w,yt)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(B,Q),i=(i=Math.imul(B,tt))+Math.imul(U,Q)|0,o=Math.imul(U,tt),r=r+Math.imul(k,nt)|0,i=(i=i+Math.imul(k,rt)|0)+Math.imul(L,nt)|0,o=o+Math.imul(L,rt)|0,r=r+Math.imul(N,ot)|0,i=(i=i+Math.imul(N,ut)|0)+Math.imul(j,ot)|0,o=o+Math.imul(j,ut)|0,r=r+Math.imul(P,at)|0,i=(i=i+Math.imul(P,ct)|0)+Math.imul(I,at)|0,o=o+Math.imul(I,ct)|0,r=r+Math.imul(E,lt)|0,i=(i=i+Math.imul(E,ft)|0)+Math.imul(T,lt)|0,o=o+Math.imul(T,ft)|0;var Pt=(c+(r=r+Math.imul(O,dt)|0)|0)+((8191&(i=(i=i+Math.imul(O,yt)|0)+Math.imul(S,dt)|0))<<13)|0;c=((o=o+Math.imul(S,yt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,r=Math.imul(B,nt),i=(i=Math.imul(B,rt))+Math.imul(U,nt)|0,o=Math.imul(U,rt),r=r+Math.imul(k,ot)|0,i=(i=i+Math.imul(k,ut)|0)+Math.imul(L,ot)|0,o=o+Math.imul(L,ut)|0,r=r+Math.imul(N,at)|0,i=(i=i+Math.imul(N,ct)|0)+Math.imul(j,at)|0,o=o+Math.imul(j,ct)|0,r=r+Math.imul(P,lt)|0,i=(i=i+Math.imul(P,ft)|0)+Math.imul(I,lt)|0,o=o+Math.imul(I,ft)|0;var It=(c+(r=r+Math.imul(E,dt)|0)|0)+((8191&(i=(i=i+Math.imul(E,yt)|0)+Math.imul(T,dt)|0))<<13)|0;c=((o=o+Math.imul(T,yt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(B,ot),i=(i=Math.imul(B,ut))+Math.imul(U,ot)|0,o=Math.imul(U,ut),r=r+Math.imul(k,at)|0,i=(i=i+Math.imul(k,ct)|0)+Math.imul(L,at)|0,o=o+Math.imul(L,ct)|0,r=r+Math.imul(N,lt)|0,i=(i=i+Math.imul(N,ft)|0)+Math.imul(j,lt)|0,o=o+Math.imul(j,ft)|0;var Rt=(c+(r=r+Math.imul(P,dt)|0)|0)+((8191&(i=(i=i+Math.imul(P,yt)|0)+Math.imul(I,dt)|0))<<13)|0;c=((o=o+Math.imul(I,yt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,r=Math.imul(B,at),i=(i=Math.imul(B,ct))+Math.imul(U,at)|0,o=Math.imul(U,ct),r=r+Math.imul(k,lt)|0,i=(i=i+Math.imul(k,ft)|0)+Math.imul(L,lt)|0,o=o+Math.imul(L,ft)|0;var Nt=(c+(r=r+Math.imul(N,dt)|0)|0)+((8191&(i=(i=i+Math.imul(N,yt)|0)+Math.imul(j,dt)|0))<<13)|0;c=((o=o+Math.imul(j,yt)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,r=Math.imul(B,lt),i=(i=Math.imul(B,ft))+Math.imul(U,lt)|0,o=Math.imul(U,ft);var jt=(c+(r=r+Math.imul(k,dt)|0)|0)+((8191&(i=(i=i+Math.imul(k,yt)|0)+Math.imul(L,dt)|0))<<13)|0;c=((o=o+Math.imul(L,yt)|0)+(i>>>13)|0)+(jt>>>26)|0,jt&=67108863;var Ct=(c+(r=Math.imul(B,dt))|0)+((8191&(i=(i=Math.imul(B,yt))+Math.imul(U,dt)|0))<<13)|0;return c=((o=Math.imul(U,yt))+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,a[0]=vt,a[1]=mt,a[2]=gt,a[3]=bt,a[4]=_t,a[5]=wt,a[6]=Mt,a[7]=Ot,a[8]=St,a[9]=At,a[10]=Et,a[11]=Tt,a[12]=xt,a[13]=Pt,a[14]=It,a[15]=Rt,a[16]=Nt,a[17]=jt,a[18]=Ct,0!==c&&(a[19]=c,n.length++),n};function d(t,e,n){return(new y).mulp(t,e,n)}function y(t,e){this.x=t,this.y=e}Math.imul||(p=f),o.prototype.mulTo=function(t,e){var n=this.length+t.length;return 10===this.length&&10===t.length?p(this,t,e):n<63?f(this,t,e):n<1024?function(t,e,n){n.negative=e.negative^t.negative,n.length=t.length+e.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var u=i;i=0;for(var s=67108863&r,a=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=a;c++){var h=o-c,l=(0|t.words[h])*(0|e.words[c]),f=67108863&l;s=67108863&(f=f+s|0),i+=(u=(u=u+(l/67108864|0)|0)+(f>>>26)|0)>>>26,u&=67108863}n.words[o]=s,r=u,u=i}return 0!==r?n.words[o]=r:n.length--,n.strip()}(this,t,e):d(this,t,e)},y.prototype.makeRBT=function(t){for(var e=new Array(t),n=o.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,n,t);return e},y.prototype.revBin=function(t,e,n){if(0===t||t===n-1)return t;for(var r=0,i=0;i<e;i++)r|=(1&t)<<e-i-1,t>>=1;return r},y.prototype.permute=function(t,e,n,r,i,o){for(var u=0;u<o;u++)r[u]=e[t[u]],i[u]=n[t[u]]},y.prototype.transform=function(t,e,n,r,i,o){this.permute(o,t,e,n,r,i);for(var u=1;u<i;u<<=1)for(var s=u<<1,a=Math.cos(2*Math.PI/s),c=Math.sin(2*Math.PI/s),h=0;h<i;h+=s)for(var l=a,f=c,p=0;p<u;p++){var d=n[h+p],y=r[h+p],v=n[h+p+u],m=r[h+p+u],g=l*v-f*m;m=l*m+f*v,v=g,n[h+p]=d+v,r[h+p]=y+m,n[h+p+u]=d-v,r[h+p+u]=y-m,p!==s&&(g=a*l-c*f,f=a*f+c*l,l=g)}},y.prototype.guessLen13b=function(t,e){var n=1|Math.max(e,t),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},y.prototype.conjugate=function(t,e,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=t[r];t[r]=t[n-r-1],t[n-r-1]=i,i=e[r],e[r]=-e[n-r-1],e[n-r-1]=-i}},y.prototype.normalize13b=function(t,e){for(var n=0,r=0;r<e/2;r++){var i=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+n;t[r]=67108863&i,n=i<67108864?0:i/67108864|0}return t},y.prototype.convert13b=function(t,e,n,i){for(var o=0,u=0;u<e;u++)o+=0|t[u],n[2*u]=8191&o,o>>>=13,n[2*u+1]=8191&o,o>>>=13;for(u=2*e;u<i;++u)n[u]=0;r(0===o),r(0==(-8192&o))},y.prototype.stub=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=0;return e},y.prototype.mulp=function(t,e,n){var r=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(r),o=this.stub(r),u=new Array(r),s=new Array(r),a=new Array(r),c=new Array(r),h=new Array(r),l=new Array(r),f=n.words;f.length=r,this.convert13b(t.words,t.length,u,r),this.convert13b(e.words,e.length,c,r),this.transform(u,o,s,a,r,i),this.transform(c,o,h,l,r,i);for(var p=0;p<r;p++){var d=s[p]*h[p]-a[p]*l[p];a[p]=s[p]*l[p]+a[p]*h[p],s[p]=d}return this.conjugate(s,a,r),this.transform(s,a,f,o,r,i),this.conjugate(f,o,r),this.normalize13b(f,r),n.negative=t.negative^e.negative,n.length=t.length+e.length,n.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),d(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){r("number"==typeof t),r(t<67108864);for(var e=0,n=0;n<this.length;n++){var i=(0|this.words[n])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[n]=67108863&o}return 0!==e&&(this.words[n]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),n=0;n<e.length;n++){var r=n/26|0,i=n%26;e[n]=(t.words[r]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var n=this,r=0;r<e.length&&0===e[r];r++,n=n.sqr());if(++r<e.length)for(var i=n.sqr();r<e.length;r++,i=i.sqr())0!==e[r]&&(n=n.mul(i));return n},o.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,n=t%26,i=(t-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var u=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,a=(0|this.words[e])-s<<n;this.words[e]=a|u,u=s>>>26-n}u&&(this.words[e]=u,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,n){var i;r("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,u=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,a=n;if(i-=u,i=Math.max(0,i),a){for(var c=0;c<u;c++)a.words[c]=this.words[c];a.length=u}if(0===u);else if(this.length>u)for(this.length-=u,c=0;c<this.length;c++)this.words[c]=this.words[c+u];else this.words[0]=0,this.length=1;var h=0;for(c=this.length-1;c>=0&&(0!==h||c>=i);c--){var l=0|this.words[c];this.words[c]=h<<26-o|l>>>o,h=l&s}return a&&0!==h&&(a.words[a.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,n){return r(0===this.negative),this.iushrn(t,e,n)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26,i=1<<e;return!(this.length<=n)&&!!(this.words[n]&i)},o.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==e&&n++,this.length=Math.min(n,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,n){var i,o,u=t.length+n;this._expand(u);var s=0;for(i=0;i<t.length;i++){o=(0|this.words[i+n])+s;var a=(0|t.words[i])*e;s=((o-=67108863&a)>>26)-(a/67108864|0),this.words[i+n]=67108863&o}for(;i<this.length-n;i++)s=(o=(0|this.words[i+n])+s)>>26,this.words[i+n]=67108863&o;if(0===s)return this.strip();for(r(-1===s),s=0,i=0;i<this.length;i++)s=(o=-(0|this.words[i])+s)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var n=(this.length,t.length),r=this.clone(),i=t,u=0|i.words[i.length-1];0!==(n=26-this._countBits(u))&&(i=i.ushln(n),r.iushln(n),u=0|i.words[i.length-1]);var s,a=r.length-i.length;if("mod"!==e){(s=new o(null)).length=a+1,s.words=new Array(s.length);for(var c=0;c<s.length;c++)s.words[c]=0}var h=r.clone()._ishlnsubmul(i,1,a);0===h.negative&&(r=h,s&&(s.words[a]=1));for(var l=a-1;l>=0;l--){var f=67108864*(0|r.words[i.length+l])+(0|r.words[i.length+l-1]);for(f=Math.min(f/u|0,67108863),r._ishlnsubmul(i,f,l);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(i,1,l),r.isZero()||(r.negative^=1);s&&(s.words[l]=f)}return s&&s.strip(),r.strip(),"div"!==e&&0!==n&&r.iushrn(n),{div:s||null,mod:r}},o.prototype.divmod=function(t,e,n){return r(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(i=s.div.neg()),"div"!==e&&(u=s.mod.neg(),n&&0!==u.negative&&u.iadd(t)),{div:i,mod:u}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(i=s.div.neg()),{div:i,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(u=s.mod.neg(),n&&0!==u.negative&&u.isub(t)),{div:s.div,mod:u}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,u,s},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var n=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),i=t.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){r(t<=67108863);for(var e=(1<<26)%t,n=0,i=this.length-1;i>=0;i--)n=(e*n+(0|this.words[i]))%t;return n},o.prototype.idivn=function(t){r(t<=67108863);for(var e=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*e;this.words[n]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),u=new o(0),s=new o(0),a=new o(1),c=0;e.isEven()&&n.isEven();)e.iushrn(1),n.iushrn(1),++c;for(var h=n.clone(),l=e.clone();!e.isZero();){for(var f=0,p=1;0==(e.words[0]&p)&&f<26;++f,p<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||u.isOdd())&&(i.iadd(h),u.isub(l)),i.iushrn(1),u.iushrn(1);for(var d=0,y=1;0==(n.words[0]&y)&&d<26;++d,y<<=1);if(d>0)for(n.iushrn(d);d-- >0;)(s.isOdd()||a.isOdd())&&(s.iadd(h),a.isub(l)),s.iushrn(1),a.iushrn(1);e.cmp(n)>=0?(e.isub(n),i.isub(s),u.isub(a)):(n.isub(e),s.isub(i),a.isub(u))}return{a:s,b:a,gcd:n.iushln(c)}},o.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,u=new o(1),s=new o(0),a=n.clone();e.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,h=1;0==(e.words[0]&h)&&c<26;++c,h<<=1);if(c>0)for(e.iushrn(c);c-- >0;)u.isOdd()&&u.iadd(a),u.iushrn(1);for(var l=0,f=1;0==(n.words[0]&f)&&l<26;++l,f<<=1);if(l>0)for(n.iushrn(l);l-- >0;)s.isOdd()&&s.iadd(a),s.iushrn(1);e.cmp(n)>=0?(e.isub(n),u.isub(s)):(n.isub(e),s.isub(u))}return(i=0===e.cmpn(1)?u:s).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),n=t.clone();e.negative=0,n.negative=0;for(var r=0;e.isEven()&&n.isEven();r++)e.iushrn(1),n.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=e.cmp(n);if(i<0){var o=e;e=n,n=o}else if(0===i||0===n.cmpn(1))break;e.isub(n)}return n.iushln(r)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,n=(t-e)/26,i=1<<e;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var o=i,u=n;0!==o&&u<this.length;u++){var s=0|this.words[u];o=(s+=o)>>>26,s&=67108863,this.words[u]=s}return 0!==o&&(this.words[u]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)e=1;else{n&&(t=-t),r(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|t.words[n];if(r!==i){r<i?e=-1:r>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new M(t)},o.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var v={k256:null,p224:null,p192:null,p25519:null};function m(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function g(){m.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){m.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){m.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function w(){m.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function O(t){M.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}m.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},m.prototype.ireduce=function(t){var e,n=t;do{this.split(n,this.tmp),e=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):n.strip(),n},m.prototype.split=function(t,e){t.iushrn(this.n,0,e)},m.prototype.imulK=function(t){return t.imul(this.k)},i(g,m),g.prototype.split=function(t,e){for(var n=Math.min(t.length,9),r=0;r<n;r++)e.words[r]=t.words[r];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var i=t.words[9];for(e.words[e.length++]=4194303&i,r=10;r<t.length;r++){var o=0|t.words[r];t.words[r-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,t.words[r-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},g.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,n=0;n<t.length;n++){var r=0|t.words[n];e+=977*r,t.words[n]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(b,m),i(_,m),i(w,m),w.prototype.imulK=function(t){for(var e=0,n=0;n<t.length;n++){var r=19*(0|t.words[n])+e,i=67108863&r;r>>>=26,t.words[n]=i,e=r}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(v[t])return v[t];var e;if("k256"===t)e=new g;else if("p224"===t)e=new b;else if("p192"===t)e=new _;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new w}return v[t]=e,e},M.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},M.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},M.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},M.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},M.prototype.add=function(t,e){this._verify2(t,e);var n=t.add(e);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},M.prototype.iadd=function(t,e){this._verify2(t,e);var n=t.iadd(e);return n.cmp(this.m)>=0&&n.isub(this.m),n},M.prototype.sub=function(t,e){this._verify2(t,e);var n=t.sub(e);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},M.prototype.isub=function(t,e){this._verify2(t,e);var n=t.isub(e);return n.cmpn(0)<0&&n.iadd(this.m),n},M.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},M.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},M.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},M.prototype.isqr=function(t){return this.imul(t,t.clone())},M.prototype.sqr=function(t){return this.mul(t,t)},M.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var n=this.m.add(new o(1)).iushrn(2);return this.pow(t,n)}for(var i=this.m.subn(1),u=0;!i.isZero()&&0===i.andln(1);)u++,i.iushrn(1);r(!i.isZero());var s=new o(1).toRed(this),a=s.redNeg(),c=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new o(2*h*h).toRed(this);0!==this.pow(h,c).cmp(a);)h.redIAdd(a);for(var l=this.pow(h,i),f=this.pow(t,i.addn(1).iushrn(1)),p=this.pow(t,i),d=u;0!==p.cmp(s);){for(var y=p,v=0;0!==y.cmp(s);v++)y=y.redSqr();r(v<d);var m=this.pow(l,new o(1).iushln(d-v-1));f=f.redMul(m),l=m.redSqr(),p=p.redMul(l),d=v}return f},M.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},M.prototype.pow=function(t,e){if(e.isZero())return new o(1);if(0===e.cmpn(1))return t.clone();var n=new Array(16);n[0]=new o(1).toRed(this),n[1]=t;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],t);var i=n[0],u=0,s=0,a=e.bitLength()%26;for(0===a&&(a=26),r=e.length-1;r>=0;r--){for(var c=e.words[r],h=a-1;h>=0;h--){var l=c>>h&1;i!==n[0]&&(i=this.sqr(i)),0!==l||0!==u?(u<<=1,u|=l,(4===++s||0===r&&0===h)&&(i=this.mul(i,n[u]),s=0,u=0)):s=0}a=26}return i},M.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},M.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new O(t)},i(O,M),O.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},O.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},O.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},O.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var n=t.mul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),u=i;return i.cmp(this.m)>=0?u=i.isub(this.m):i.cmpn(0)<0&&(u=i.iadd(this.m)),u._forceRed(this)},O.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===t||t,this)}).call(this,n(44)(t))},function(t,e,n){var r=n(69),i=n(114),o=n(116),u=n(276),s=n(275),a=function(t){return t instanceof i||t&&t.constructor&&"BN"===t.constructor.name},c=function(t){return t&&t.constructor&&"BigNumber"===t.constructor.name},h=function(t){try{return o.apply(null,arguments)}catch(e){throw new Error(e+' Given value: "'+t+'"')}},l=function(t){return!!/^(0x)?[0-9a-f]{40}$/i.test(t)&&(!(!/^(0x|0X)?[0-9a-f]{40}$/.test(t)&&!/^(0x|0X)?[0-9A-F]{40}$/.test(t))||f(t))},f=function(t){t=t.replace(/^0x/i,"");for(var e=m(t.toLowerCase()).replace(/^0x/i,""),n=0;n<40;n++)if(parseInt(e[n],16)>7&&t[n].toUpperCase()!==t[n]||parseInt(e[n],16)<=7&&t[n].toLowerCase()!==t[n])return!1;return!0},p=function(t){var e="";t=(t=(t=(t=(t=u.encode(t)).replace(/^(?:\u0000)*/,"")).split("").reverse().join("")).replace(/^(?:\u0000)*/,"")).split("").reverse().join("");for(var n=0;n<t.length;n++){var r=t.charCodeAt(n).toString(16);e+=r.length<2?"0"+r:r}return"0x"+e},d=function(t){if(r.isNull(t)||r.isUndefined(t))return t;if(!isFinite(t)&&!v(t))throw new Error('Given input "'+t+'" is not a number.');var e=h(t),n=e.toString(16);return e.lt(new i(0))?"-0x"+n.substr(1):"0x"+n},y=function(t){if(t=t.toString(16),!v(t))throw new Error('Given value "'+t+'" is not a valid hex string.');t=t.replace(/^0x/i,"");for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},v=function(t){return(r.isString(t)||r.isNumber(t))&&/^(-)?0x[0-9a-f]*$/i.test(t)},m=function(t){v(t)&&/^0x/i.test(t.toString())&&(t=y(t));var e=s.keccak256(t);return"0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470"===e?null:e};m._Hash=s,t.exports={BN:i,isBN:a,isBigNumber:c,toBN:h,isAddress:l,isBloom:function(t){return!(!/^(0x)?[0-9a-f]{512}$/i.test(t)||!/^(0x)?[0-9a-f]{512}$/.test(t)&&!/^(0x)?[0-9A-F]{512}$/.test(t))},isTopic:function(t){return!(!/^(0x)?[0-9a-f]{64}$/i.test(t)||!/^(0x)?[0-9a-f]{64}$/.test(t)&&!/^(0x)?[0-9A-F]{64}$/.test(t))},checkAddressChecksum:f,utf8ToHex:p,hexToUtf8:function(t){if(!v(t))throw new Error('The parameter "'+t+'" must be a valid HEX string.');for(var e="",n=0,r=(t=(t=(t=(t=(t=t.replace(/^0x/i,"")).replace(/^(?:00)*/,"")).split("").reverse().join("")).replace(/^(?:00)*/,"")).split("").reverse().join("")).length,i=0;i<r;i+=2)n=parseInt(t.substr(i,2),16),e+=String.fromCharCode(n);return u.decode(e)},hexToNumber:function(t){return t?h(t).toNumber():t},hexToNumberString:function(t){return t?h(t).toString(10):t},numberToHex:d,toHex:function(t,e){if(l(t))return e?"address":"0x"+t.toLowerCase().replace(/^0x/i,"");if(r.isBoolean(t))return e?"bool":t?"0x01":"0x00";if(r.isObject(t)&&!c(t)&&!a(t))return e?"string":p(JSON.stringify(t));if(r.isString(t)){if(0===t.indexOf("-0x")||0===t.indexOf("-0X"))return e?"int256":d(t);if(0===t.indexOf("0x")||0===t.indexOf("0X"))return e?"bytes":t;if(!isFinite(t))return e?"string":p(t)}return e?t<0?"int256":"uint256":d(t)},hexToBytes:y,bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return"0x"+e.join("")},isHex:function(t){return(r.isString(t)||r.isNumber(t))&&/^(-0x|0x)?[0-9a-f]*$/i.test(t)},isHexStrict:v,leftPad:function(t,e,n){var r=/^0x/i.test(t)||"number"==typeof t,i=e-(t=t.toString(16).replace(/^0x/i,"")).length+1>=0?e-t.length+1:0;return(r?"0x":"")+new Array(i).join(n||"0")+t},rightPad:function(t,e,n){var r=/^0x/i.test(t)||"number"==typeof t,i=e-(t=t.toString(16).replace(/^0x/i,"")).length+1>=0?e-t.length+1:0;return(r?"0x":"")+t+new Array(i).join(n||"0")},toTwosComplement:function(t){return"0x"+h(t).toTwos(256).toString(16,64)},sha3:m}},function(t,e,n){var r=n(279),i=n(278);t.exports=function(t){if("string"==typeof t||"number"==typeof t){var e=new r(1),n=String(t).toLowerCase().trim(),o="0x"===n.substr(0,2)||"-0x"===n.substr(0,3),u=i(n);if("-"===u.substr(0,1)&&(u=i(u.slice(1)),e=new r(-1,10)),!(u=""===u?"0":u).match(/^-?[0-9]+$/)&&u.match(/^[0-9A-Fa-f]+$/)||u.match(/^[a-fA-F]+$/)||!0===o&&u.match(/^[0-9A-Fa-f]+$/))return new r(u,16).mul(e);if((u.match(/^-?[0-9]+$/)||""===u)&&!1===o)return new r(u,10).mul(e)}else if("object"==typeof t&&t.toString&&!t.pop&&!t.push&&t.toString(10).match(/^-?[0-9]+$/)&&(t.mul||t.dividedToIntegerBy))return new r(t.toString(10),10);throw new Error("[number-to-bn] while converting number "+JSON.stringify(t)+" to BN.js instance, error: invalid number value. Value must be an integer, hex string, BN or BigNumber instance. Note, decimals are not supported.")}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(38),o=n(7),u=function(t){function e(n,r,i){var u=t.call(this)||this;u.leaves=n,u.index=i;var s=n.length;if(0===s)u._hash=o.EMPTY_HASH;else if(1===s)u._hash=n[0].hash,r[n[0].id]=u;else{var a=Math.floor(s/2),c=n.slice(0,a),h=n.slice(a,s);u.leftChild=new e(c,r,2*i),u.rightChild=new e(h,r,2*i+1),u.leftChild.parent=u,u.rightChild.parent=u,u._hash=o.Web3Utils.soliditySha3({type:"bytes32",value:u.leftChild._hash},{type:"bytes32",value:u.rightChild._hash})}return u}return r(e,t),e.proofChain=function(t){return t.map(function(t){return t.hash})},Object.defineProperty(e.prototype,"hash",{get:function(){return this._hash},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0==this.leaves.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"proof",{get:function(){return this.getProof([])},enumerable:!0,configurable:!0}),e.prototype.getProof=function(t){var e=this.parent;return void 0===e?t:(t.push(e.leftChild===this?e.rightChild._hash:e.leftChild._hash),e.getProof(t))},e}(i.Hashable);e.MerkleTree=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(38);e.Hashable=r.Hashable;var i=n(117);e.MerkleTree=i.MerkleTree;var o=n(37);e.ProofOfStake=o.ProofOfStake;var u=n(29);e.Signature=u.Signature;var s=n(36);e.Aggregate=s.Aggregate;var a=n(112);e.BalanceMarker=a.BalanceMarker;var c=n(66);e.Deposit=c.Deposit;var h=n(67);e.Transfer=h.Transfer;var l=n(267);e.Balance=l.Balance;var f=n(28);e.Round=f.Round;var p=n(65);e.Wallet=p.Wallet;var d=n(264);e.RoundState=d.RoundState;var y=n(111);e.HubState=y.HubState;var v=n(263);e.ChainConnectivity=v.ChainConnectivity;var m=n(262);e.Web3Connectivity=m.Web3Connectivity;var g=n(110);e.ContractState=g.ContractState;var b=n(109);e.WalletState=b.WalletState;var _=n(15);e.TYPES=_.TYPES;var w=n(261);e.WalletClassesContainerFactory=w.WalletClassesContainerFactory;var M=n(233);e.LQDClient=M.LQDClient;var O=n(70);e.DisputeService=O.DisputeService;var S=n(101);e.PAYMENT_HUB_ABI=S.PAYMENT_HUB_ABI;var A=n(7);e.Web3Utils=A.Web3Utils;var E=n(7);e.JSONbig=E.JSONbig},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.description=t}return Object.defineProperty(t.prototype,"desc",{get:function(){return this.description},enumerable:!0,configurable:!0}),t.PENDING_RECIPIENT_APPROVAL=new t(""),t.PENDING_PROVIDER_APPROVAL=new t(""),t.MISSING_CREDIT_CONFIRMATION=new t(""),t.MISSING_RECEIPT=new t(""),t.DELIVERY_RATIFIED=new t(""),t.DELIVERY_CONFIRMED=new t(""),t.CANCELLED=new t(""),t}();e.TransferState=r},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,u=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(u=(o<3?i(u):o>3?i(e,n,u):i(e,n))||u);return o>3&&u&&Object.defineProperty(e,n,u),u},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=this&&this.__param||function(t,e){return function(n,r){e(n,r,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(14),s=n(15),a=n(65),c=n(7),h=n(20),l=function(){function t(t){this.storage=t}return e=t,t.prototype.saveWallet=function(t){try{var n=e.walletKey(t.address,t.networkId,t.contractAddress),r=this.storage.set(n,c.JSONbig.stringify(t.json));return this.addToIndex(t),r}catch(t){return h.Logging.error(t),!1}},t.prototype.loadWallet=function(t,n,r){try{var i=e.walletKey(t,n,r),o=this.storage.get(i);if(!o)return this.removeFromIndex(new a.Wallet(t,n,r,null)),null;var u=a.Wallet.fromJSON(c.JSONbig.parse(o));return this.addToIndex(u),u}catch(t){return h.Logging.error(t),null}},t.prototype.wallets=function(){var t=this.storage.get(e.INDEX_KEY);return t?new Map(c.JSONbig.parse(t)):new Map},t.prototype.addToIndex=function(t){var n=this.wallets();n.set(e.walletKey(t.address,t.networkId,t.contractAddress),{address:t.address,networkId:t.networkId,contractAddress:t.contractAddress,webAddress:t.webAddress}),this.storage.set(e.INDEX_KEY,c.JSONbig.stringify(Array.from(n.entries())))},t.prototype.removeFromIndex=function(t){var n=this.wallets();n.delete(e.walletKey(t.address,t.networkId,t.contractAddress)),this.storage.set(e.INDEX_KEY,c.JSONbig.stringify(Array.from(n.entries())))},t.walletKey=function(t,e,n){return c.Web3Utils.soliditySha3({type:"address",value:t},{type:"uint256",value:e},{type:"address",value:n})},t.INDEX_KEY="lqd-wallet-client-index",t=e=r([u.injectable(),o(0,u.inject(s.TYPES.EXTERNAL.STORAGE_MANAGER_INTERFACE)),i("design:paramtypes",[Object])],t);var e}();e.WalletStorageService=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t){this.wallet=t}}();e.StatePoll=r},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,u=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(u=(o<3?i(u):o>3?i(e,n,u):i(e,n))||u);return o>3&&u&&Object.defineProperty(e,n,u),u},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=this&&this.__param||function(t,e){return function(n,r){e(n,r,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(14),s=n(26),a=n(121),c=n(15),h=n(100),l=function(){function t(t){this.walletStatePollObserver=t,this.pollTimer=new s.Subject;var e=s.from(this.pollTimer);this.pollTrigger=e.pipe(h.switchAll())}return t.prototype.startSynchronization=function(t,e,n){this.subscribeToPollTrigger(t),this.pollTimer.next(s.timer(e,n))},t.prototype.stopSynchronization=function(){this.pollSubscription&&this.pollSubscription.unsubscribe()},t.prototype.triggerSynchronization=function(t){this.walletStatePollObserver.next(new a.StatePoll(t))},t.prototype.subscribeToPollTrigger=function(t){var e=this;this.pollSubscription&&!this.pollSubscription.closed||(this.pollSubscription=this.pollTrigger.subscribe(function(){e.triggerSynchronization(t)}))},t=r([u.injectable(),o(0,u.inject(c.TYPES.SUBJECT.WALLET_STATE_POLL)),i("design:paramtypes",[Object])],t)}();e.PollService=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(71);e.zipAll=function(t){return function(e){return e.lift(new r.ZipOperator(t))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(71);e.zip=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(r.zip.apply(void 0,[e].concat(t)))}}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=n(1);e.withLatestFrom=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){var n;"function"==typeof t[t.length-1]&&(n=t.pop());var r=t;return e.lift(new u(r,n))}};var u=function(){function t(t,e){this.observables=t,this.project=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.observables,this.project))},t}(),s=function(t){function e(e,n,r){var i=t.call(this,e)||this;i.observables=n,i.project=r,i.toRespond=[];var u=n.length;i.values=new Array(u);for(var s=0;s<u;s++)i.toRespond.push(s);for(s=0;s<u;s++){var a=n[s];i.add(o.subscribeToResult(i,a,a,s))}return i}return r(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.values[n]=e;var o=this.toRespond;if(o.length>0){var u=o.indexOf(n);-1!==u&&o.splice(u,1)}},e.prototype.notifyComplete=function(){},e.prototype._next=function(t){if(0===this.toRespond.length){var e=[t].concat(this.values);this.project?this._tryProject(e):this.destination.next(e)}},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(i.OuterSubscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=n(12),u=n(11),s=n(2),a=n(1);e.windowWhen=function(t){return function(e){return e.lift(new c(t))}};var c=function(){function t(t){this.closingSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.closingSelector))},t}(),h=function(t){function e(e,n){var r=t.call(this,e)||this;return r.destination=e,r.closingSelector=n,r.openWindow(),r}return r(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.openWindow(i)},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){this.openWindow(t)},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t),this.unsubscribeClosingNotification()},e.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},e.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},e.prototype.openWindow=function(t){void 0===t&&(t=null),t&&(this.remove(t),t.unsubscribe());var e=this.window;e&&e.complete();var n=this.window=new i.Subject;this.destination.next(n);var r=o.tryCatch(this.closingSelector)();if(r===u.errorObject){var s=u.errorObject.e;this.destination.error(s),this.window.error(s)}else this.add(this.closingNotification=a.subscribeToResult(this,r))},e}(s.OuterSubscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=n(5),u=n(12),s=n(11),a=n(2),c=n(1);e.windowToggle=function(t,e){return function(n){return n.lift(new h(t,e))}};var h=function(){function t(t,e){this.openings=t,this.closingSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.openings,this.closingSelector))},t}(),l=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.openings=n,i.closingSelector=r,i.contexts=[],i.add(i.openSubscription=c.subscribeToResult(i,n,n)),i}return r(e,t),e.prototype._next=function(t){var e=this.contexts;if(e)for(var n=e.length,r=0;r<n;r++)e[r].window.next(t)},e.prototype._error=function(e){var n=this.contexts;if(this.contexts=null,n)for(var r=n.length,i=-1;++i<r;){var o=n[i];o.window.error(e),o.subscription.unsubscribe()}t.prototype._error.call(this,e)},e.prototype._complete=function(){var e=this.contexts;if(this.contexts=null,e)for(var n=e.length,r=-1;++r<n;){var i=e[r];i.window.complete(),i.subscription.unsubscribe()}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.contexts;if(this.contexts=null,t)for(var e=t.length,n=-1;++n<e;){var r=t[n];r.window.unsubscribe(),r.subscription.unsubscribe()}},e.prototype.notifyNext=function(t,e,n,r,a){if(t===this.openings){var h=this.closingSelector,l=u.tryCatch(h)(e);if(l===s.errorObject)return this.error(s.errorObject.e);var f=new i.Subject,p=new o.Subscription,d={window:f,subscription:p};this.contexts.push(d);var y=c.subscribeToResult(this,l,d);y.closed?this.closeWindow(this.contexts.length-1):(y.context=d,p.add(y)),this.destination.next(f)}else this.closeWindow(this.contexts.indexOf(t))},e.prototype.notifyError=function(t){this.error(t)},e.prototype.notifyComplete=function(t){t!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(t.context))},e.prototype.closeWindow=function(t){if(-1!==t){var e=this.contexts,n=e[t],r=n.window,i=n.subscription;e.splice(t,1),r.complete(),i.unsubscribe()}},e}(a.OuterSubscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=n(10),u=n(0),s=n(54),a=n(17);e.windowTime=function(t){var e=o.async,n=null,r=Number.POSITIVE_INFINITY;return a.isScheduler(arguments[3])&&(e=arguments[3]),a.isScheduler(arguments[2])?e=arguments[2]:s.isNumeric(arguments[2])&&(r=arguments[2]),a.isScheduler(arguments[1])?e=arguments[1]:s.isNumeric(arguments[1])&&(n=arguments[1]),function(i){return i.lift(new c(t,n,r,e))}};var c=function(){function t(t,e,n,r){this.windowTimeSpan=t,this.windowCreationInterval=e,this.maxWindowSize=n,this.scheduler=r}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},t}(),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._numberOfNextedValues=0,e}return r(e,t),e.prototype.next=function(e){this._numberOfNextedValues++,t.prototype.next.call(this,e)},Object.defineProperty(e.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),e}(i.Subject),l=function(t){function e(e,n,r,i,o){var u=t.call(this,e)||this;u.destination=e,u.windowTimeSpan=n,u.windowCreationInterval=r,u.maxWindowSize=i,u.scheduler=o,u.windows=[];var s=u.openWindow();if(null!==r&&r>=0){var a={subscriber:u,window:s,context:null},c={windowTimeSpan:n,windowCreationInterval:r,subscriber:u,scheduler:o};u.add(o.schedule(d,n,a)),u.add(o.schedule(p,r,c))}else{var h={subscriber:u,window:s,windowTimeSpan:n};u.add(o.schedule(f,n,h))}return u}return r(e,t),e.prototype._next=function(t){for(var e=this.windows,n=e.length,r=0;r<n;r++){var i=e[r];i.closed||(i.next(t),i.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(i))}},e.prototype._error=function(t){for(var e=this.windows;e.length>0;)e.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){for(var t=this.windows;t.length>0;){var e=t.shift();e.closed||e.complete()}this.destination.complete()},e.prototype.openWindow=function(){var t=new h;return this.windows.push(t),this.destination.next(t),t},e.prototype.closeWindow=function(t){t.complete();var e=this.windows;e.splice(e.indexOf(t),1)},e}(u.Subscriber);function f(t){var e=t.subscriber,n=t.windowTimeSpan,r=t.window;r&&e.closeWindow(r),t.window=e.openWindow(),this.schedule(t,n)}function p(t){var e=t.windowTimeSpan,n=t.subscriber,r=t.scheduler,i=t.windowCreationInterval,o={action:this,subscription:null},u={subscriber:n,window:n.openWindow(),context:o};o.subscription=r.schedule(d,e,u),this.add(o.subscription),this.schedule(t,i)}function d(t){var e=t.subscriber,n=t.window,r=t.context;r&&r.action&&r.subscription&&r.action.remove(r.subscription),e.closeWindow(n)}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(6);e.windowCount=function(t,e){return void 0===e&&(e=0),function(n){return n.lift(new u(t,e))}};var u=function(){function t(t,e){this.windowSize=t,this.startWindowEvery=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.windowSize,this.startWindowEvery))},t}(),s=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.destination=e,i.windowSize=n,i.startWindowEvery=r,i.windows=[new o.Subject],i.count=0,e.next(i.windows[0]),i}return r(e,t),e.prototype._next=function(t){for(var e=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,n=this.destination,r=this.windowSize,i=this.windows,u=i.length,s=0;s<u&&!this.closed;s++)i[s].next(t);var a=this.count-r+1;if(a>=0&&a%e==0&&!this.closed&&i.shift().complete(),++this.count%e==0&&!this.closed){var c=new o.Subject;i.push(c),n.next(c)}},e.prototype._error=function(t){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().complete();this.destination.complete()},e.prototype._unsubscribe=function(){this.count=0,this.windows=null},e}(i.Subscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=n(2),u=n(1);e.window=function(t){return function(e){return e.lift(new s(t))}};var s=function(){function t(t){this.windowBoundaries=t}return t.prototype.call=function(t,e){var n=new a(t),r=e.subscribe(n);return r.closed||n.add(u.subscribeToResult(n,this.windowBoundaries)),r},t}(),a=function(t){function e(e){var n=t.call(this,e)||this;return n.window=new i.Subject,e.next(n.window),n}return r(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.openWindow()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){this._complete()},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t)},e.prototype._complete=function(){this.window.complete(),this.destination.complete()},e.prototype._unsubscribe=function(){this.window=null},e.prototype.openWindow=function(){var t=this.window;t&&t.complete();var e=this.destination,n=this.window=new i.Subject;e.next(n)},e}(o.OuterSubscriber)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(39);function i(t,e,n){return 0===n?[e]:(t.push(e),t)}e.toArray=function(){return r.reduce(i,[])}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(10),i=n(21);e.timestamp=function(t){return void 0===t&&(t=r.async),i.map(function(e){return new o(e,t.now())})};var o=function(){return function(t,e){this.value=t,this.timestamp=e}}();e.Timestamp=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){var n=t.call(this,"Timeout has occurred")||this;return n.name="TimeoutError",Object.setPrototypeOf(n,e.prototype),n}return r(e,t),e}(Error);e.TimeoutError=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(10),i=n(133),o=n(72),u=n(80);e.timeout=function(t,e){return void 0===e&&(e=r.async),o.timeoutWith(t,u.throwError(new i.TimeoutError),e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),i=n(23),o=n(22);e.defer=function(t){return new r.Observable(function(e){var n;try{n=t()}catch(t){return void e.error(t)}return(n?i.from(n):o.empty()).subscribe(e)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(10),i=n(47),o=n(135),u=n(21);e.timeInterval=function(t){return void 0===t&&(t=r.async),function(e){return o.defer(function(){return e.pipe(i.scan(function(e,n){var r=e.current;return{value:n,current:t.now(),last:r}},{current:t.now(),value:void 0,last:void 0}),u.map(function(t){var e=t.current,n=t.last,r=t.value;return new s(r,e-n)}))})}};var s=function(){return function(t,e){this.value=t,this.interval=e}}();e.TimeInterval=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(10),u=n(73);e.throttleTime=function(t,e,n){return void 0===e&&(e=o.async),void 0===n&&(n=u.defaultThrottleConfig),function(r){return r.lift(new s(t,e,n.leading,n.trailing))}};var s=function(){function t(t,e,n,r){this.duration=t,this.scheduler=e,this.leading=n,this.trailing=r}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.duration,this.scheduler,this.leading,this.trailing))},t}(),a=function(t){function e(e,n,r,i,o){var u=t.call(this,e)||this;return u.duration=n,u.scheduler=r,u.leading=i,u.trailing=o,u._hasTrailingValue=!1,u._trailingValue=null,u}return r(e,t),e.prototype._next=function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(c,this.duration,{subscriber:this})),this.leading&&this.destination.next(t))},e.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},e.prototype.clearThrottle=function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)},e}(i.Subscriber);function c(t){t.subscriber.clearThrottle()}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.takeWhile=function(t){return function(e){return e.lift(new o(t))}};var o=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.predicate))},t}(),u=function(t){function e(e,n){var r=t.call(this,e)||this;return r.predicate=n,r.index=0,r}return r(e,t),e.prototype._next=function(t){var e,n=this.destination;try{e=this.predicate(t,this.index++)}catch(t){return void n.error(t)}this.nextOrComplete(t,e)},e.prototype.nextOrComplete=function(t,e){var n=this.destination;Boolean(e)?n.next(t):n.complete()},e}(i.Subscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=n(1);e.takeUntil=function(t){return function(e){return e.lift(new u(t))}};var u=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var n=new s(t),r=o.subscribeToResult(n,this.notifier);return r&&!r.closed?(n.add(r),e.subscribe(n)):n},t}(),s=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.complete()},e.prototype.notifyComplete=function(){},e}(i.OuterSubscriber)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(45);e.switchMapTo=function(t,e){return e?r.switchMap(function(){return t},e):r.switchMap(function(){return t})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(45),i=n(42);e.switchAll=function(){return r.switchMap(i.identity)}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}},e}(n(55).AsyncScheduler);e.AsapScheduler=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=1,i={};e.Immediate={setImmediate:function(t){var e=r++;return i[e]=t,Promise.resolve().then(function(){return function(t){var e=i[t];e&&e()}(e)}),e},clearImmediate:function(t){delete i[t]}}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(143),o=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return r(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=i.Immediate.setImmediate(e.flush.bind(e,null))))},e.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(i.Immediate.clearImmediate(n),e.scheduled=void 0)},e}(n(56).AsyncAction);e.AsapAction=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(144),i=n(142);e.asap=new i.AsapScheduler(r.AsapAction)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(4),o=n(145),u=n(54),s=function(t){function e(e,n,r){void 0===n&&(n=0),void 0===r&&(r=o.asap);var i=t.call(this)||this;return i.source=e,i.delayTime=n,i.scheduler=r,(!u.isNumeric(n)||n<0)&&(i.delayTime=0),r&&"function"==typeof r.schedule||(i.scheduler=o.asap),i}return r(e,t),e.create=function(t,n,r){return void 0===n&&(n=0),void 0===r&&(r=o.asap),new e(t,n,r)},e.dispatch=function(t){var e=t.source,n=t.subscriber;return this.add(e.subscribe(n))},e.prototype._subscribe=function(t){var n=this.delayTime,r=this.source;return this.scheduler.schedule(e.dispatch,n,{source:r,subscriber:t})},e}(i.Observable);e.SubscribeOnObservable=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(146);e.subscribeOn=function(t,e){return void 0===e&&(e=0),function(n){return n.lift(new i(t,e))}};var i=function(){function t(t,e){this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return new r.SubscribeOnObservable(e,this.delay,this.scheduler).subscribe(t)},t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(24),i=n(84),o=n(22),u=n(86),s=n(17);e.startWith=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){var n=t[t.length-1];s.isScheduler(n)?t.pop():n=null;var a=t.length;return 1!==a||n?a>0?u.concat(r.fromArray(t,n),e):u.concat(o.empty(n),e):u.concat(i.scalar(t[0]),e)}}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.skipWhile=function(t){return function(e){return e.lift(new o(t))}};var o=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.predicate))},t}(),u=function(t){function e(e,n){var r=t.call(this,e)||this;return r.predicate=n,r.skipping=!0,r.index=0,r}return r(e,t),e.prototype._next=function(t){var e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)},e.prototype.tryCallPredicate=function(t){try{var e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(t){this.destination.error(t)}},e}(i.Subscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=n(1);e.skipUntil=function(t){return function(e){return e.lift(new u(t))}};var u=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.notifier))},t}(),s=function(t){function e(e,n){var r=t.call(this,e)||this;return r.hasValue=!1,r.add(r.innerSubscription=o.subscribeToResult(r,n)),r}return r(e,t),e.prototype._next=function(e){this.hasValue&&t.prototype._next.call(this,e)},e.prototype.notifyNext=function(t,e,n,r,i){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},e.prototype.notifyComplete=function(){},e}(i.OuterSubscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(41);e.skipLast=function(t){return function(e){return e.lift(new u(t))}};var u=function(){function t(t){if(this._skipCount=t,this._skipCount<0)throw new o.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return 0===this._skipCount?e.subscribe(new i.Subscriber(t)):e.subscribe(new s(t,this._skipCount))},t}(),s=function(t){function e(e,n){var r=t.call(this,e)||this;return r._skipCount=n,r._count=0,r._ring=new Array(n),r}return r(e,t),e.prototype._next=function(t){var e=this._skipCount,n=this._count++;if(n<e)this._ring[n]=t;else{var r=n%e,i=this._ring,o=i[r];i[r]=t,this.destination.next(o)}},e}(i.Subscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.skip=function(t){return function(e){return e.lift(new o(t))}};var o=function(){function t(t){this.total=t}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.total))},t}(),u=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return r(e,t),e.prototype._next=function(t){++this.count>this.total&&this.destination.next(t)},e}(i.Subscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(40);e.single=function(t){return function(e){return e.lift(new u(t,e))}};var u=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.predicate,this.source))},t}(),s=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.source=r,i.seenValue=!1,i.index=0,i}return r(e,t),e.prototype.applySingleValue=function(t){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=t)},e.prototype._next=function(t){var e=this.index++;this.predicate?this.tryNext(t,e):this.applySingleValue(t)},e.prototype.tryNext=function(t,e){try{this.predicate(t,e,this.source)&&this.applySingleValue(t)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){var t=this.destination;this.index>0?(t.next(this.seenValue?this.singleValue:void 0),t.complete()):t.error(new o.EmptyError)},e}(i.Subscriber)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(74);e.shareReplay=function(t,e,n){return function(i){return i.lift(function(t,e,n){var i,o,u=0,s=!1,a=!1;return function(c){u++,i&&!s||(s=!1,i=new r.ReplaySubject(t,e,n),o=c.subscribe({next:function(t){i.next(t)},error:function(t){s=!0,i.error(t)},complete:function(){a=!0,i.complete()}}));var h=i.subscribe(this);return function(){u--,h.unsubscribe(),o&&0===u&&a&&o.unsubscribe()}}}(t,e,n))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(27),i=n(46),o=n(6);function u(){return new o.Subject}e.share=function(){return function(t){return i.refCount()(r.multicast(u)(t))}}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(12),u=n(11);e.sequenceEqual=function(t,e){return function(n){return n.lift(new s(t,e))}};var s=function(){function t(t,e){this.compareTo=t,this.comparor=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.compareTo,this.comparor))},t}();e.SequenceEqualOperator=s;var a=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.compareTo=n,i.comparor=r,i._a=[],i._b=[],i._oneComplete=!1,i.add(n.subscribe(new c(e,i))),i}return r(e,t),e.prototype._next=function(t){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(t),this.checkValues())},e.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},e.prototype.checkValues=function(){for(var t=this._a,e=this._b,n=this.comparor;t.length>0&&e.length>0;){var r=t.shift(),i=e.shift(),s=!1;n?(s=o.tryCatch(n)(r,i))===u.errorObject&&this.destination.error(u.errorObject.e):s=r===i,s||this.emit(!1)}},e.prototype.emit=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype.nextB=function(t){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(t),this.checkValues())},e}(i.Subscriber);e.SequenceEqualSubscriber=a;var c=function(t){function e(e,n){var r=t.call(this,e)||this;return r.parent=n,r}return r(e,t),e.prototype._next=function(t){this.parent.nextB(t)},e.prototype._error=function(t){this.parent.error(t)},e.prototype._complete=function(){this.parent._complete()},e}(i.Subscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(10);e.sampleTime=function(t,e){return void 0===e&&(e=o.async),function(n){return n.lift(new u(t,e))}};var u=function(){function t(t,e){this.period=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.period,this.scheduler))},t}(),s=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.period=n,i.scheduler=r,i.hasValue=!1,i.add(r.schedule(a,n,{subscriber:i,period:n})),i}return r(e,t),e.prototype._next=function(t){this.lastValue=t,this.hasValue=!0},e.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},e}(i.Subscriber);function a(t){var e=t.subscriber,n=t.period;e.notifyNext(),this.schedule(t,n)}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=n(1);e.sample=function(t){return function(e){return e.lift(new u(t))}};var u=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var n=new s(t),r=e.subscribe(n);return r.add(o.subscribeToResult(n,this.notifier)),r},t}(),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasValue=!1,e}return r(e,t),e.prototype._next=function(t){this.value=t,this.hasValue=!0},e.prototype.notifyNext=function(t,e,n,r,i){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},e}(i.OuterSubscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=n(12),u=n(11),s=n(2),a=n(1);e.retryWhen=function(t){return function(e){return e.lift(new c(t,e))}};var c=function(){function t(t,e){this.notifier=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.notifier,this.source))},t}(),h=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.notifier=n,i.source=r,i}return r(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=this.errors,r=this.retries,s=this.retriesSubscription;if(r)this.errors=null,this.retriesSubscription=null;else{if(n=new i.Subject,(r=o.tryCatch(this.notifier)(n))===u.errorObject)return t.prototype.error.call(this,u.errorObject.e);s=a.subscribeToResult(this,r)}this._unsubscribeAndRecycle(),this.errors=n,this.retries=r,this.retriesSubscription=s,n.next(e)}},e.prototype._unsubscribe=function(){var t=this.errors,e=this.retriesSubscription;t&&(t.unsubscribe(),this.errors=null),e&&(e.unsubscribe(),this.retriesSubscription=null),this.retries=null},e.prototype.notifyNext=function(t,e,n,r,i){var o=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=o,this.source.subscribe(this)},e}(s.OuterSubscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.retry=function(t){return void 0===t&&(t=-1),function(e){return e.lift(new o(t,e))}};var o=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.count,this.source))},t}(),u=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.count=n,i.source=r,i}return r(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=this.source,r=this.count;if(0===r)return t.prototype.error.call(this,e);r>-1&&(this.count=r-1),n.subscribe(this._unsubscribeAndRecycle())}},e}(i.Subscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=n(12),u=n(11),s=n(2),a=n(1);e.repeatWhen=function(t){return function(e){return e.lift(new c(t))}};var c=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.notifier,e))},t}(),h=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.notifier=n,i.source=r,i.sourceIsBeingSubscribedTo=!0,i}return r(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},e.prototype.notifyComplete=function(e){if(!1===this.sourceIsBeingSubscribedTo)return t.prototype.complete.call(this)},e.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return t.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next()}},e.prototype._unsubscribe=function(){var t=this.notifications,e=this.retriesSubscription;t&&(t.unsubscribe(),this.notifications=null),e&&(e.unsubscribe(),this.retriesSubscription=null),this.retries=null},e.prototype._unsubscribeAndRecycle=function(){var e=this._unsubscribe;return this._unsubscribe=null,t.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=e,this},e.prototype.subscribeToRetries=function(){this.notifications=new i.Subject;var e=o.tryCatch(this.notifier)(this.notifications);if(e===u.errorObject)return t.prototype.complete.call(this);this.retries=e,this.retriesSubscription=a.subscribeToResult(this,e)},e}(s.OuterSubscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(22);e.repeat=function(t){return void 0===t&&(t=-1),function(e){return 0===t?o.empty():t<0?e.lift(new u(-1,e)):e.lift(new u(t-1,e))}};var u=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.count,this.source))},t}(),s=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.count=n,i.source=r,i}return r(e,t),e.prototype.complete=function(){if(!this.isStopped){var e=this.source,n=this.count;if(0===n)return t.prototype.complete.call(this);n>-1&&(this.count=n-1),e.subscribe(this._unsubscribeAndRecycle())}},e}(i.Subscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(18),o=n(24),u=n(2),s=n(1);e.race=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){if(!i.isArray(t[0]))return t[0];t=t[0]}return o.fromArray(t,void 0).lift(new a)};var a=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new c(t))},t}();e.RaceOperator=a;var c=function(t){function e(e){var n=t.call(this,e)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return r(e,t),e.prototype._next=function(t){this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var n=0;n<e&&!this.hasFirst;n++){var r=t[n],i=s.subscribeToResult(this,r,r,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},e.prototype.notifyNext=function(t,e,n,r,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==n){var u=this.subscriptions[o];u.unsubscribe(),this.remove(u)}this.subscriptions=null}this.destination.next(e)},e}(u.OuterSubscriber);e.RaceSubscriber=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(18),i=n(163);e.race=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return 1===t.length&&r.isArray(t[0])&&(t=t[0]),e.lift.call(i.race.apply(void 0,[e].concat(t)))}}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(n(55).AsyncScheduler);e.QueueScheduler=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return r(e,t),e.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?t.prototype.requestAsyncId.call(this,e,n,r):e.flush(this)},e}(n(56).AsyncAction);e.QueueAction=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(166),i=n(165);e.queue=new i.QueueScheduler(r.QueueAction)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(74),i=n(27);e.publishReplay=function(t,e,n,o){n&&"function"!=typeof n&&(o=n);var u="function"==typeof n?n:void 0,s=new r.ReplaySubject(t,e,o);return function(t){return i.multicast(function(){return s},u)(t)}}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=n(5),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.value=null,e.hasNext=!1,e.hasCompleted=!1,e}return r(e,t),e.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),o.Subscription.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),o.Subscription.EMPTY):t.prototype._subscribe.call(this,e)},e.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},e.prototype.error=function(e){this.hasCompleted||t.prototype.error.call(this,e)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&t.prototype.next.call(this,this.value),t.prototype.complete.call(this)},e}(i.Subject);e.AsyncSubject=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(169),i=n(27);e.publishLast=function(){return function(t){return i.multicast(new r.AsyncSubject)(t)}}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=n(49),u=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return r(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new o.ObjectUnsubscribedError;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(i.Subject);e.BehaviorSubject=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(171),i=n(27);e.publishBehavior=function(t){return function(e){return i.multicast(new r.BehaviorSubject(t))(e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6),i=n(27);e.publish=function(t){return t?i.multicast(function(){return new r.Subject},t):i.multicast(new r.Subject)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(21);e.pluck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.length;if(0===n)throw new Error("list of properties cannot be empty.");return function(e){return r.map(function(t,e){return function(n){for(var r=n,i=0;i<e;i++){var o=r[t[i]];if(void 0===o)return;r=o}return r}}(t,n))(e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.not=function(t,e){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=t,n.thisArg=e,n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(175),i=n(30);e.partition=function(t,e){return function(n){return[i.filter(t,e)(n),i.filter(r.not(t,e))(n)]}}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.pairwise=function(){return function(t){return t.lift(new o)}};var o=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new u(t))},t}(),u=function(t){function e(e){var n=t.call(this,e)||this;return n.hasPrev=!1,n}return r(e,t),e.prototype._next=function(t){this.hasPrev?this.destination.next([this.prev,t]):this.hasPrev=!0,this.prev=t},e}(i.Subscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(23),o=n(18),u=n(2),s=n(1);e.onErrorResumeNext=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1===t.length&&o.isArray(t[0])&&(t=t[0]),function(e){return e.lift(new a(t))}},e.onErrorResumeNextStatic=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n;return 1===t.length&&o.isArray(t[0])&&(t=t[0]),n=t.shift(),i.from(n,null).lift(new a(t))};var a=function(){function t(t){this.nextSources=t}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.nextSources))},t}(),c=function(t){function e(e,n){var r=t.call(this,e)||this;return r.destination=e,r.nextSources=n,r}return r(e,t),e.prototype.notifyError=function(t,e){this.subscribeToNextSource()},e.prototype.notifyComplete=function(t){this.subscribeToNextSource()},e.prototype._error=function(t){this.subscribeToNextSource()},e.prototype._complete=function(){this.subscribeToNextSource()},e.prototype.subscribeToNextSource=function(){var t=this.nextSources.shift();t?this.add(s.subscribeToResult(this,t)):this.destination.complete()},e}(u.OuterSubscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=n(4),u=n(0),s=n(5),a=n(46),c=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return r(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new s.Subscription).add(this.source.subscribe(new l(this.getSubject(),this))),t.closed?(this._connection=null,t=s.Subscription.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return a.refCount()(this)},e}(o.Observable);e.ConnectableObservable=c;var h=c.prototype;e.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:h._subscribe},_isComplete:{value:h._isComplete,writable:!0},getSubject:{value:h.getSubject},connect:{value:h.connect},refCount:{value:h.refCount}};var l=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return r(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(i.SubjectSubscriber),f=(function(){function t(t){this.connectable=t}t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new f(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}(),function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return r(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(u.Subscriber))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(39);e.min=function(t){var e="function"==typeof t?function(e,n){return t(e,n)<0?e:n}:function(t,e){return t<e?t:e};return r.reduce(e)}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(12),o=n(11),u=n(1),s=n(2);e.mergeScan=function(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(r){return r.lift(new a(t,e,n))}};var a=function(){function t(t,e,n){this.accumulator=t,this.seed=e,this.concurrent=n}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.accumulator,this.seed,this.concurrent))},t}();e.MergeScanOperator=a;var c=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.accumulator=n,o.acc=r,o.concurrent=i,o.hasValue=!1,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return r(e,t),e.prototype._next=function(t){if(this.active<this.concurrent){var e=this.index++,n=i.tryCatch(this.accumulator)(this.acc,t),r=this.destination;n===o.errorObject?r.error(o.errorObject.e):(this.active++,this._innerSub(n,t,e))}else this.buffer.push(t)},e.prototype._innerSub=function(t,e,n){this.add(u.subscribeToResult(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.destination;this.acc=e,this.hasValue=!0,o.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},e}(s.OuterSubscriber);e.MergeScanSubscriber=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(32);e.mergeMapTo=function(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof e?r.mergeMap(function(){return t},e,n):("number"==typeof e&&(n=e),r.mergeMap(function(){return t},n))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),i=n(17),o=n(53),u=n(24);e.merge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Number.POSITIVE_INFINITY,s=null,a=t[t.length-1];return i.isScheduler(a)?(s=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof a&&(n=t.pop()),null===s&&1===t.length&&t[0]instanceof r.Observable?t[0]:o.mergeAll(n)(u.fromArray(t,s))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(183);e.merge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(r.merge.apply(void 0,[e].concat(t)))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(39);e.max=function(t){var e="function"==typeof t?function(e,n){return t(e,n)>0?e:n}:function(t,e){return t>e?t:e};return r.reduce(e)}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(52);e.materialize=function(){return function(t){return t.lift(new u)}};var u=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new s(t))},t}(),s=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype._next=function(t){this.destination.next(o.Notification.createNext(t))},e.prototype._error=function(t){var e=this.destination;e.next(o.Notification.createError(t)),e.complete()},e.prototype._complete=function(){var t=this.destination;t.next(o.Notification.createComplete()),t.complete()},e}(i.Subscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.mapTo=function(t){return function(e){return e.lift(new o(t))}};var o=function(){function t(t){this.value=t}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.value))},t}(),u=function(t){function e(e,n){var r=t.call(this,e)||this;return r.value=n,r}return r(e,t),e.prototype._next=function(t){this.destination.next(this.value)},e}(i.Subscriber)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(40),i=n(30),o=n(48),u=n(51),s=n(31),a=n(42);e.last=function(t,e){var n=arguments.length>=2;return function(c){return c.pipe(t?i.filter(function(e,n){return t(e,n,c)}):a.identity,o.takeLast(1),n?s.defaultIfEmpty(e):u.throwIfEmpty(function(){return new r.EmptyError}))}}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.isEmpty=function(){return function(t){return t.lift(new o)}};var o=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new u(t))},t}(),u=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype._next=function(t){this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(i.Subscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.ignoreElements=function(){return function(t){return t.lift(new o)}};var o=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new u(t))},t}(),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._next=function(t){},e}(i.Subscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(5),u=n(4),s=n(6);e.groupBy=function(t,e,n,r){return function(i){return i.lift(new a(t,e,n,r))}};var a=function(){function t(t,e,n,r){this.keySelector=t,this.elementSelector=e,this.durationSelector=n,this.subjectSelector=r}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},t}(),c=function(t){function e(e,n,r,i,o){var u=t.call(this,e)||this;return u.keySelector=n,u.elementSelector=r,u.durationSelector=i,u.subjectSelector=o,u.groups=null,u.attemptedToUnsubscribe=!1,u.count=0,u}return r(e,t),e.prototype._next=function(t){var e;try{e=this.keySelector(t)}catch(t){return void this.error(t)}this._group(t,e)},e.prototype._group=function(t,e){var n=this.groups;n||(n=this.groups=new Map);var r,i=n.get(e);if(this.elementSelector)try{r=this.elementSelector(t)}catch(t){this.error(t)}else r=t;if(!i){i=this.subjectSelector?this.subjectSelector():new s.Subject,n.set(e,i);var o=new l(e,i,this);if(this.destination.next(o),this.durationSelector){var u=void 0;try{u=this.durationSelector(new l(e,i))}catch(t){return void this.error(t)}this.add(u.subscribe(new h(e,i,this)))}}i.closed||i.next(r)},e.prototype._error=function(t){var e=this.groups;e&&(e.forEach(function(e,n){e.error(t)}),e.clear()),this.destination.error(t)},e.prototype._complete=function(){var t=this.groups;t&&(t.forEach(function(t,e){t.complete()}),t.clear()),this.destination.complete()},e.prototype.removeGroup=function(t){this.groups.delete(t)},e.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&t.prototype.unsubscribe.call(this))},e}(i.Subscriber),h=function(t){function e(e,n,r){var i=t.call(this,n)||this;return i.key=e,i.group=n,i.parent=r,i}return r(e,t),e.prototype._next=function(t){this.complete()},e.prototype._unsubscribe=function(){var t=this.parent,e=this.key;this.key=this.parent=null,t&&t.removeGroup(e)},e}(i.Subscriber),l=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.groupSubject=n,i.refCountSubscription=r,i}return r(e,t),e.prototype._subscribe=function(t){var e=new o.Subscription,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&e.add(new f(n)),e.add(r.subscribe(t)),e},e}(u.Observable);e.GroupedObservable=l;var f=function(t){function e(e){var n=t.call(this)||this;return n.parent=e,e.count++,n}return r(e,t),e.prototype.unsubscribe=function(){var e=this.parent;e.closed||this.closed||(t.prototype.unsubscribe.call(this),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())},e}(o.Subscription)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(40),i=n(30),o=n(50),u=n(31),s=n(51),a=n(42);e.first=function(t,e){var n=arguments.length>=2;return function(c){return c.pipe(t?i.filter(function(e,n){return t(e,n,c)}):a.identity,o.take(1),n?u.defaultIfEmpty(e):s.throwIfEmpty(function(){return new r.EmptyError}))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(77);e.findIndex=function(t,e){return function(n){return n.lift(new r.FindValueOperator(t,n,!0,e))}}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(5);e.finalize=function(t){return function(e){return e.lift(new u(t))}};var u=function(){function t(t){this.callback=t}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.callback))},t}(),s=function(t){function e(e,n){var r=t.call(this,e)||this;return r.add(new o.Subscription(n)),r}return r(e,t),e}(i.Subscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(12),o=n(11),u=n(2),s=n(1);e.expand=function(t,e,n){return void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=void 0),e=(e||0)<1?Number.POSITIVE_INFINITY:e,function(r){return r.lift(new a(t,e,n))}};var a=function(){function t(t,e,n){this.project=t,this.concurrent=e,this.scheduler=n}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.project,this.concurrent,this.scheduler))},t}();e.ExpandOperator=a;var c=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.project=n,o.concurrent=r,o.scheduler=i,o.index=0,o.active=0,o.hasCompleted=!1,r<Number.POSITIVE_INFINITY&&(o.buffer=[]),o}return r(e,t),e.dispatch=function(t){var e=t.subscriber,n=t.result,r=t.value,i=t.index;e.subscribeToProjection(n,r,i)},e.prototype._next=function(t){var n=this.destination;if(n.closed)this._complete();else{var r=this.index++;if(this.active<this.concurrent){n.next(t);var u=i.tryCatch(this.project)(t,r);if(u===o.errorObject)n.error(o.errorObject.e);else if(this.scheduler){var s={subscriber:this,result:u,value:t,index:r};this.add(this.scheduler.schedule(e.dispatch,0,s))}else this.subscribeToProjection(u,t,r)}else this.buffer.push(t)}},e.prototype.subscribeToProjection=function(t,e,n){this.active++,this.add(s.subscribeToResult(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this._next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e&&e.length>0&&this._next(e.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},e}(u.OuterSubscriber);e.ExpandSubscriber=c},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=n(1),u=n(21),s=n(23);e.exhaustMap=function t(e,n){return n?function(r){return r.pipe(t(function(t,r){return s.from(e(t,r)).pipe(u.map(function(e,i){return n(t,e,r,i)}))}))}:function(t){return t.lift(new a(e))}};var a=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.project))},t}(),c=function(t){function e(e,n){var r=t.call(this,e)||this;return r.project=n,r.hasSubscription=!1,r.hasCompleted=!1,r.index=0,r}return r(e,t),e.prototype._next=function(t){this.hasSubscription||this.tryNext(t)},e.prototype.tryNext=function(t){var e=this.index++,n=this.destination;try{var r=this.project(t,e);this.hasSubscription=!0,this.add(o.subscribeToResult(this,r,t,e))}catch(t){n.error(t)}},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.remove(t),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(i.OuterSubscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=n(1);e.exhaust=function(){return function(t){return t.lift(new u)}};var u=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new s(t))},t}(),s=function(t){function e(e){var n=t.call(this,e)||this;return n.hasCompleted=!1,n.hasSubscription=!1,n}return r(e,t),e.prototype._next=function(t){this.hasSubscription||(this.hasSubscription=!0,this.add(o.subscribeToResult(this,t)))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},e.prototype.notifyComplete=function(t){this.remove(t),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(i.OuterSubscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.every=function(t,e){return function(n){return n.lift(new o(t,e,n))}};var o=function(){function t(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.predicate,this.thisArg,this.source))},t}(),u=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.predicate=n,o.thisArg=r,o.source=i,o.index=0,o.thisArg=r||o,o}return r(e,t),e.prototype.notifyComplete=function(t){this.destination.next(t),this.destination.complete()},e.prototype._next=function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e||this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(i.Subscriber)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(41),i=n(30),o=n(51),u=n(31),s=n(50);e.elementAt=function(t,e){if(t<0)throw new r.ArgumentOutOfRangeError;var n=arguments.length>=2;return function(a){return a.pipe(i.filter(function(e,n){return n===t}),s.take(1),n?u.defaultIfEmpty(e):o.throwIfEmpty(function(){return new r.ArgumentOutOfRangeError}))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(79);e.distinctUntilKeyChanged=function(t,e){return r.distinctUntilChanged(function(n,r){return e?e(n[t],r[t]):n[t]===r[t]})}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=n(1);e.distinct=function(t,e){return function(n){return n.lift(new u(t,e))}};var u=function(){function t(t,e){this.keySelector=t,this.flushes=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.keySelector,this.flushes))},t}(),s=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.keySelector=n,i.values=new Set,r&&i.add(o.subscribeToResult(i,r)),i}return r(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.values.clear()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype._next=function(t){this.keySelector?this._useKeySelector(t):this._finalizeNext(t,t)},e.prototype._useKeySelector=function(t){var e,n=this.destination;try{e=this.keySelector(t)}catch(t){return void n.error(t)}this._finalizeNext(e,t)},e.prototype._finalizeNext=function(t,e){var n=this.values;n.has(t)||(n.add(t),this.destination.next(e))},e}(i.OuterSubscriber);e.DistinctSubscriber=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.dematerialize=function(){return function(t){return t.lift(new o)}};var o=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new u(t))},t}(),u=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype._next=function(t){t.observe(this.destination)},e}(i.Subscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(4),u=n(2),s=n(1);e.delayWhen=function(t,e){return e?function(n){return new h(n,e).lift(new a(t))}:function(e){return e.lift(new a(t))}};var a=function(){function t(t){this.delayDurationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.delayDurationSelector))},t}(),c=function(t){function e(e,n){var r=t.call(this,e)||this;return r.delayDurationSelector=n,r.completed=!1,r.delayNotifierSubscriptions=[],r}return r(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(t),this.removeSubscription(i),this.tryComplete()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){var e=this.removeSubscription(t);e&&this.destination.next(e),this.tryComplete()},e.prototype._next=function(t){try{var e=this.delayDurationSelector(t);e&&this.tryDelay(e,t)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){this.completed=!0,this.tryComplete()},e.prototype.removeSubscription=function(t){t.unsubscribe();var e=this.delayNotifierSubscriptions.indexOf(t);return-1!==e&&this.delayNotifierSubscriptions.splice(e,1),t.outerValue},e.prototype.tryDelay=function(t,e){var n=s.subscribeToResult(this,t,e);n&&!n.closed&&(this.add(n),this.delayNotifierSubscriptions.push(n))},e.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},e}(u.OuterSubscriber),h=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subscriptionDelay=n,r}return r(e,t),e.prototype._subscribe=function(t){this.subscriptionDelay.subscribe(new l(t,this.source))},e}(o.Observable),l=function(t){function e(e,n){var r=t.call(this)||this;return r.parent=e,r.source=n,r.sourceSubscribed=!1,r}return r(e,t),e.prototype._next=function(t){this.subscribeToSource()},e.prototype._error=function(t){this.unsubscribe(),this.parent.error(t)},e.prototype._complete=function(){this.subscribeToSource()},e.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},e}(i.Subscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(10),o=n(81),u=n(0),s=n(52);e.delay=function(t,e){void 0===e&&(e=i.async);var n=o.isDate(t)?+t-e.now():Math.abs(t);return function(t){return t.lift(new a(n,e))}};var a=function(){function t(t,e){this.delay=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.delay,this.scheduler))},t}(),c=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.delay=n,i.scheduler=r,i.queue=[],i.active=!1,i.errored=!1,i}return r(e,t),e.dispatch=function(t){for(var e=t.source,n=e.queue,r=t.scheduler,i=t.destination;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){var o=Math.max(0,n[0].time-r.now());this.schedule(t,o)}else this.unsubscribe(),e.active=!1},e.prototype._schedule=function(t){this.active=!0,this.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(!0!==this.errored){var e=this.scheduler,n=new h(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}},e.prototype._next=function(t){this.scheduleNotification(s.Notification.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t)},e.prototype._complete=function(){this.scheduleNotification(s.Notification.createComplete())},e}(u.Subscriber),h=function(){return function(t,e){this.time=t,this.notification=e}}()},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(10);e.debounceTime=function(t,e){return void 0===e&&(e=o.async),function(n){return n.lift(new u(t,e))}};var u=function(){function t(t,e){this.dueTime=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.dueTime,this.scheduler))},t}(),s=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.dueTime=n,i.scheduler=r,i.debouncedSubscription=null,i.lastValue=null,i.hasValue=!1,i}return r(e,t),e.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(a,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var t=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}},e.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},e}(i.Subscriber);function a(t){t.debouncedNext()}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=n(1);e.debounce=function(t){return function(e){return e.lift(new u(t))}};var u=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.durationSelector))},t}(),s=function(t){function e(e,n){var r=t.call(this,e)||this;return r.durationSelector=n,r.hasValue=!1,r.durationSubscription=null,r}return r(e,t),e.prototype._next=function(t){try{var e=this.durationSelector.call(this,t);e&&this._tryNext(t,e)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){this.emitValue(),this.destination.complete()},e.prototype._tryNext=function(t,e){var n=this.durationSubscription;this.value=t,this.hasValue=!0,n&&(n.unsubscribe(),this.remove(n)),(n=o.subscribeToResult(this,e))&&!n.closed&&this.add(this.durationSubscription=n)},e.prototype.notifyNext=function(t,e,n,r,i){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){if(this.hasValue){var e=this.value,n=this.durationSubscription;n&&(this.durationSubscription=null,n.unsubscribe(),this.remove(n)),this.value=null,this.hasValue=!1,t.prototype._next.call(this,e)}},e}(i.OuterSubscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.count=function(t){return function(e){return e.lift(new o(t,e))}};var o=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.predicate,this.source))},t}(),u=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.source=r,i.count=0,i.index=0,i}return r(e,t),e.prototype._next=function(t){this.predicate?this._tryPredicate(t):this.count++},e.prototype._tryPredicate=function(t){var e;try{e=this.predicate(t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e&&this.count++},e.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},e}(i.Subscriber)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(82);e.concatMapTo=function(t,e){return r.concatMap(function(){return t},e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(86);e.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(r.concat.apply(void 0,[e].concat(t)))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),i=n(5),o=n(34),u=n(90);e.fromObservable=function(t,e){return e?new r.Observable(function(n){var r=new i.Subscription;return r.add(e.schedule(function(){var i=t[o.observable]();r.add(i.subscribe({next:function(t){r.add(e.schedule(function(){return n.next(t)}))},error:function(t){r.add(e.schedule(function(){return n.error(t)}))},complete:function(){r.add(e.schedule(function(){return n.complete()}))}}))})),r}):new r.Observable(u.subscribeToObservable(t))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),i=n(5),o=n(33),u=n(91);e.fromIterable=function(t,e){if(!t)throw new Error("Iterable cannot be null");return e?new r.Observable(function(n){var r,u=new i.Subscription;return u.add(function(){r&&"function"==typeof r.return&&r.return()}),u.add(e.schedule(function(){r=t[o.iterator](),u.add(e.schedule(function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(t){return void n.error(t)}e?n.complete():(n.next(t),this.schedule())}}))})),u}):new r.Observable(u.subscribeToIterable(t))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),i=n(5),o=n(92);e.fromPromise=function(t,e){return e?new r.Observable(function(n){var r=new i.Subscription;return r.add(e.schedule(function(){return t.then(function(t){r.add(e.schedule(function(){n.next(t),r.add(e.schedule(function(){return n.complete()}))}))},function(t){r.add(e.schedule(function(){return n.error(t)}))})})),r}):new r.Observable(o.subscribeToPromise(t))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(33);e.isIterable=function(t){return t&&"function"==typeof t[r.iterator]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(34);e.isInteropObservable=function(t){return t&&"function"==typeof t[r.observable]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(18),i=n(87),o=n(23);e.combineLatest=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null;return"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&r.isArray(t[0])&&(t=t[0].slice()),function(e){return e.lift.call(o.from([e].concat(t)),new i.CombineLatestOperator(n))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(87);e.combineAll=function(t){return function(e){return e.lift(new r.CombineLatestOperator(t))}}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=n(1);e.catchError=function(t){return function(e){var n=new u(t),r=e.lift(n);return n.caught=r}};var u=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.selector,this.caught))},t}(),s=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.selector=n,i.caught=r,i}return r(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=void 0;try{n=this.selector(e,this.caught)}catch(e){return void t.prototype.error.call(this,e)}this._unsubscribeAndRecycle(),this.add(o.subscribeToResult(this,n))}},e}(i.OuterSubscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),o=n(12),u=n(11),s=n(2),a=n(1);e.bufferWhen=function(t){return function(e){return e.lift(new c(t))}};var c=function(){function t(t){this.closingSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.closingSelector))},t}(),h=function(t){function e(e,n){var r=t.call(this,e)||this;return r.closingSelector=n,r.subscribing=!1,r.openBuffer(),r}return r(e,t),e.prototype._next=function(t){this.buffer.push(t)},e.prototype._complete=function(){var e=this.buffer;e&&this.destination.next(e),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.buffer=null,this.subscribing=!1},e.prototype.notifyNext=function(t,e,n,r,i){this.openBuffer()},e.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},e.prototype.openBuffer=function(){var t=this.closingSubscription;t&&(this.remove(t),t.unsubscribe());var e=this.buffer;this.buffer&&this.destination.next(e),this.buffer=[];var n=o.tryCatch(this.closingSelector)();n===u.errorObject?this.error(u.errorObject.e):(t=new i.Subscription,this.closingSubscription=t,this.add(t),this.subscribing=!0,t.add(a.subscribeToResult(this,n)),this.subscribing=!1)},e}(s.OuterSubscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),o=n(1),u=n(2);e.bufferToggle=function(t,e){return function(n){return n.lift(new s(t,e))}};var s=function(){function t(t,e){this.openings=t,this.closingSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.openings,this.closingSelector))},t}(),a=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.openings=n,i.closingSelector=r,i.contexts=[],i.add(o.subscribeToResult(i,n)),i}return r(e,t),e.prototype._next=function(t){for(var e=this.contexts,n=e.length,r=0;r<n;r++)e[r].buffer.push(t)},e.prototype._error=function(e){for(var n=this.contexts;n.length>0;){var r=n.shift();r.subscription.unsubscribe(),r.buffer=null,r.subscription=null}this.contexts=null,t.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this.contexts;e.length>0;){var n=e.shift();this.destination.next(n.buffer),n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,r,i){t?this.closeBuffer(t):this.openBuffer(e)},e.prototype.notifyComplete=function(t){this.closeBuffer(t.context)},e.prototype.openBuffer=function(t){try{var e=this.closingSelector.call(this,t);e&&this.trySubscribe(e)}catch(t){this._error(t)}},e.prototype.closeBuffer=function(t){var e=this.contexts;if(e&&t){var n=t.buffer,r=t.subscription;this.destination.next(n),e.splice(e.indexOf(t),1),this.remove(r),r.unsubscribe()}},e.prototype.trySubscribe=function(t){var e=this.contexts,n=new i.Subscription,r={buffer:[],subscription:n};e.push(r);var u=o.subscribeToResult(this,t,r);!u||u.closed?this.closeBuffer(r):(u.context=r,this.add(u),n.add(u))},e}(u.OuterSubscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(10),o=n(0),u=n(17);e.bufferTime=function(t){var e=arguments.length,n=i.async;u.isScheduler(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],e--);var r=null;e>=2&&(r=arguments[1]);var o=Number.POSITIVE_INFINITY;return e>=3&&(o=arguments[2]),function(e){return e.lift(new s(t,r,o,n))}};var s=function(){function t(t,e,n,r){this.bufferTimeSpan=t,this.bufferCreationInterval=e,this.maxBufferSize=n,this.scheduler=r}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},t}(),a=function(){return function(){this.buffer=[]}}(),c=function(t){function e(e,n,r,i,o){var u=t.call(this,e)||this;u.bufferTimeSpan=n,u.bufferCreationInterval=r,u.maxBufferSize=i,u.scheduler=o,u.contexts=[];var s=u.openContext();if(u.timespanOnly=null==r||r<0,u.timespanOnly){var a={subscriber:u,context:s,bufferTimeSpan:n};u.add(s.closeAction=o.schedule(h,n,a))}else{var c={subscriber:u,context:s},p={bufferTimeSpan:n,bufferCreationInterval:r,subscriber:u,scheduler:o};u.add(s.closeAction=o.schedule(f,n,c)),u.add(o.schedule(l,r,p))}return u}return r(e,t),e.prototype._next=function(t){for(var e,n=this.contexts,r=n.length,i=0;i<r;i++){var o=n[i],u=o.buffer;u.push(t),u.length==this.maxBufferSize&&(e=o)}e&&this.onBufferFull(e)},e.prototype._error=function(e){this.contexts.length=0,t.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this.contexts,n=this.destination;e.length>0;){var r=e.shift();n.next(r.buffer)}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.contexts=null},e.prototype.onBufferFull=function(t){this.closeContext(t);var e=t.closeAction;if(e.unsubscribe(),this.remove(e),!this.closed&&this.timespanOnly){t=this.openContext();var n=this.bufferTimeSpan,r={subscriber:this,context:t,bufferTimeSpan:n};this.add(t.closeAction=this.scheduler.schedule(h,n,r))}},e.prototype.openContext=function(){var t=new a;return this.contexts.push(t),t},e.prototype.closeContext=function(t){this.destination.next(t.buffer);var e=this.contexts;(e?e.indexOf(t):-1)>=0&&e.splice(e.indexOf(t),1)},e}(o.Subscriber);function h(t){var e=t.subscriber,n=t.context;n&&e.closeContext(n),e.closed||(t.context=e.openContext(),t.context.closeAction=this.schedule(t,t.bufferTimeSpan))}function l(t){var e=t.bufferCreationInterval,n=t.bufferTimeSpan,r=t.subscriber,i=t.scheduler,o=r.openContext();r.closed||(r.add(o.closeAction=i.schedule(f,n,{subscriber:r,context:o})),this.schedule(t,e))}function f(t){var e=t.subscriber,n=t.context;e.closeContext(n)}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.bufferCount=function(t,e){return void 0===e&&(e=null),function(n){return n.lift(new o(t,e))}};var o=function(){function t(t,e){this.bufferSize=t,this.startBufferEvery=e,this.subscriberClass=e&&t!==e?s:u}return t.prototype.call=function(t,e){return e.subscribe(new this.subscriberClass(t,this.bufferSize,this.startBufferEvery))},t}(),u=function(t){function e(e,n){var r=t.call(this,e)||this;return r.bufferSize=n,r.buffer=[],r}return r(e,t),e.prototype._next=function(t){var e=this.buffer;e.push(t),e.length==this.bufferSize&&(this.destination.next(e),this.buffer=[])},e.prototype._complete=function(){var e=this.buffer;e.length>0&&this.destination.next(e),t.prototype._complete.call(this)},e}(i.Subscriber),s=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.bufferSize=n,i.startBufferEvery=r,i.buffers=[],i.count=0,i}return r(e,t),e.prototype._next=function(t){var e=this.bufferSize,n=this.startBufferEvery,r=this.buffers,i=this.count;this.count++,i%n==0&&r.push([]);for(var o=r.length;o--;){var u=r[o];u.push(t),u.length===e&&(r.splice(o,1),this.destination.next(u))}},e.prototype._complete=function(){for(var e=this.buffers,n=this.destination;e.length>0;){var r=e.shift();r.length>0&&n.next(r)}t.prototype._complete.call(this)},e}(i.Subscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=n(1);e.buffer=function(t){return function(e){return e.lift(new u(t))}};var u=function(){function t(t){this.closingNotifier=t}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.closingNotifier))},t}(),s=function(t){function e(e,n){var r=t.call(this,e)||this;return r.buffer=[],r.add(o.subscribeToResult(r,n)),r}return r(e,t),e.prototype._next=function(t){this.buffer.push(t)},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.buffer;this.buffer=[],this.destination.next(o)},e}(i.OuterSubscriber)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),i=n(10),o=n(54),u=n(17);function s(t){var e=t.index,n=t.period,r=t.subscriber;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}e.timer=function(t,e,n){void 0===t&&(t=0);var a=-1;return o.isNumeric(e)?a=Number(e)<1?1:Number(e):u.isScheduler(e)&&(n=e),u.isScheduler(n)||(n=i.async),new r.Observable(function(e){var r=o.isNumeric(t)?t:+t-n.now();return n.schedule(s,r,{index:0,period:a,subscriber:e})})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=Date.now?Date.now:function(){return+new Date},t}();e.Scheduler=r},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n){return t.call(this)||this}return r(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(n(5).Subscription);e.Action=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(10),i=n(99),o=n(223);e.auditTime=function(t,e){return void 0===e&&(e=r.async),i.audit(function(){return o.timer(t,e)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(57),o=n(98);e.toSubscriber=function(t,e,n){if(t){if(t instanceof r.Subscriber)return t;if(t[i.rxSubscriber])return t[i.rxSubscriber]()}return t||e||n?new r.Subscriber(t,e,n):new r.Subscriber(o.empty)}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n,r){var i=t.call(this)||this;return i.parent=e,i.outerValue=n,i.outerIndex=r,i.index=0,i}return r(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(n(0).Subscriber);e.InnerSubscriber=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(n){var r=t.call(this,n?n.length+" errors occurred during unsubscription:\n  "+n.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"")||this;return r.errors=n,r.name="UnsubscriptionError",Object.setPrototypeOf(r,e.prototype),r}return r(e,t),e}(Error);e.UnsubscriptionError=i},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,u=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(u=(o<3?i(u):o>3?i(e,n,u):i(e,n))||u);return o>3&&u&&Object.defineProperty(e,n,u),u},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=this&&this.__param||function(t,e){return function(n,r){e(n,r,t)}},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(14),a=n(15),c=n(26),h=n(43),l=n(61),f=n(109),p=n(28),d=u(n(9)),y=n(108),v=n(29),m=n(36),g=n(37),b=n(7),_=n(64),w=n(100),M=n(66),O=n(20),S=function(){function t(t,e,n,r,i,o){var u=this;this.walletStatePollObservable=t,this.hubStateFetchObservable=e,this.contractStateFetchObservable=n,this.walletStateSyncObserver=r,this.contractApi=i,this.hubApi=o,t.subscribe(function(t){c.combineLatest(n,e).pipe(w.take(1)).subscribe(function(e){var n=e[0],r=e[1];u.syncWalletState(t.wallet,n,r).then(function(t){u.walletStateSyncObserver.next(t)})})})}return t.prototype.syncWalletState=function(t,e,n){var r=this;return t.lock.runExclusive(function(){return r.updateOnChainData(t,e,n).then(function(){return r.updatePendingRegistrationState(t,e,n)}).then(function(){return r.updateRegistrationState(t,e,n)}).then(function(){return r.updateOlderRoundStates(t,e,n)}).then(function(){return r.updatePreviousRoundState(t,e,n)}).then(function(){return new Promise(function(i,o){return r.updateCurrentRoundState(t,e,n).then(function(){return e.isPunished?o(_.WalletUpdateError.PROVIDER_PUNISHED):i(new f.WalletState(t,y.WalletSyncState.SYNCHRONIZED,null,e,n))}).catch(o)})}).catch(function(r){return new f.WalletState(t,y.WalletSyncState.UNSAFE,r,e,n)})})},t.prototype.updateOnChainData=function(t,e,n){return O.Logging.debug("updateOnChainData"),new Promise(function(n,r){return t?e?e.networkId!=t.networkId?r(_.WalletUpdateError.INCORRECT_NETWORK_ID):(t.onChainBalance=e.onChainBalance,n()):r(_.WalletUpdateError.NO_CONTRACT_STATE_SPECIFIED):r(_.WalletUpdateError.NO_WALLET_SPECIFIED)})},t.prototype.updatePendingRegistrationState=function(t,e,n){var r=this;O.Logging.debug("updatePendingRegistrationState");var i,o=n?n.walletData:null;return new Promise(function(n,u){if(!t)return u(_.WalletUpdateError.NO_WALLET_SPECIFIED);if(t.isRegistered)return n();if(!e)return u(_.WalletUpdateError.NO_CONTRACT_STATE_SPECIFIED);if(!(o&&o.registration&&o.registration.wallet_signature&&o.registration.round))return t.unmarkPendingRegistrationApproval(),u(_.WalletUpdateError.UNREGISTERED_NO_REQUEST);if(o.registration.round>e.currentRound)return t.unmarkPendingRegistrationApproval(),u(_.WalletUpdateError.UNREGISTERED_BAD_REQUEST);i=t.getAdmissionAggregate(o.registration.round);var s=v.Signature.fromRSV(t.address,i.hash,o.registration.wallet_signature);r.contractApi.validateAggregateSignature(i,s,t.contractAddress).then(function(e){return e?(t.markPendingRegistrationApproval(o.registration.round),n()):u(_.WalletUpdateError.UNREGISTERED_BAD_REQUEST)}).catch(u)})},t.prototype.updateRegistrationState=function(t,e,n){var r=this;O.Logging.debug("updateRegistrationState");var i,o=n?n.walletData:null;return new Promise(function(n,u){if(!t)return u(_.WalletUpdateError.NO_WALLET_SPECIFIED);if(t.isRegistered)return n();if(!t.isPendingRegistrationApproval)return u(_.WalletUpdateError.UNREGISTERED_APPROVAL_NOT_PENDING);if(!e)return u(_.WalletUpdateError.NO_CONTRACT_STATE_SPECIFIED);if(!o||!o.registration||!o.registration.hub_signature)return u(_.WalletUpdateError.UNREGISTERED_APPROVAL_NOT_PROVIDED);i=t.getAdmissionAggregate(t.registrationRound,o.registration.trail_identifier);var s=v.Signature.fromRSV(t.contractAddress,i.hash,o.registration.hub_signature);r.contractApi.validateAggregateSignature(i,s,t.contractAddress).then(function(e){return e?(t.markRegistered(s,o.registration.trail_identifier),n()):u(_.WalletUpdateError.UNREGISTERED_APPROVAL_INVALID)}).catch(u)})},t.prototype.updateOlderRoundStates=function(t,e,n){var r=this;return O.Logging.debug("updateOlderRoundStates"),new Promise(function(i,o){return t?t.isRegistered?e?t.latestRound.roundNumber>=e.currentRound-1?i():r.updateLatestLocalRoundProofStake(t,e,n).then(function(){return r.updateLatestRoundAggregate(t,e,n)}).then(function(){return r.updateLatestRoundDeposits(t,e,n)}).then(function(){return r.updateLatestRoundOnChainWithdrawal(t,e,n)}).then(function(){return r.updateLatestRoundDeliveryReceipts(t,e,n)}).then(function(){return r.progressRound(t,e,n)}).then(function(){return r.updateOlderRoundStates(t,e,n)}).then(i).catch(o):o(_.WalletUpdateError.NO_CONTRACT_STATE_SPECIFIED):o(_.WalletUpdateError.UNREGISTERED):o(_.WalletUpdateError.NO_WALLET_SPECIFIED)})},t.prototype.updatePreviousRoundState=function(t,e,n){var r=this;return O.Logging.debug("updatePreviousRoundState"),new Promise(function(i,o){return t?t.isRegistered?e?t.latestRound.roundNumber<e.currentRound-1?o(_.WalletUpdateError.LOGIC_OLD_ROUNDS_NOT_UPDATED):t.latestRound.roundNumber==e.currentRound?i():r.updateLatestLocalRoundProofStake(t,e,n).then(function(){return r.updateLatestRoundAggregate(t,e,n)}).then(function(){return r.updateLatestRoundDeposits(t,e,n)}).then(function(){return r.updateLatestRoundOnChainWithdrawal(t,e,n)}).then(function(){return r.updateLatestRoundDeliveryReceipts(t,e,n)}).then(function(){return r.progressRound(t,e,n)}).then(i).catch(o):o(_.WalletUpdateError.NO_CONTRACT_STATE_SPECIFIED):o(_.WalletUpdateError.UNREGISTERED):o(_.WalletUpdateError.NO_WALLET_SPECIFIED)})},t.prototype.updateCurrentRoundState=function(t,e,n){var r=this;return O.Logging.debug("updateCurrentRoundState"),new Promise(function(i,o){return t?t.isRegistered?e?t.latestRound.roundNumber<e.currentRound?o(_.WalletUpdateError.LOGIC_PREVIOUS_ROUND_NOT_UPDATED):r.updateCurrentRoundOnChainDeposits(t,e,n).then(function(){return r.updateLatestLocalRoundProofStake(t,e,n)}).then(function(){return r.updateLatestRoundAggregate(t,e,n)}).then(function(){return r.updateLatestRoundDeposits(t,e,n)}).then(function(){return r.updateLatestRoundOnChainWithdrawal(t,e,n)}).then(function(){return r.updateLatestRoundDeliveryReceipts(t,e,n)}).then(i).catch(o):o(_.WalletUpdateError.NO_CONTRACT_STATE_SPECIFIED):o(_.WalletUpdateError.UNREGISTERED):o(_.WalletUpdateError.NO_WALLET_SPECIFIED)})},t.prototype.updateLatestLocalRoundProofStake=function(t,e,n){var r=this;O.Logging.debug("updateLatestLocalRoundProofStake");var i=n?n.walletData:null;return new Promise(function(n,o){if(!t)return o(_.WalletUpdateError.NO_WALLET_SPECIFIED);if(!t.isRegistered)return o(_.WalletUpdateError.UNREGISTERED);if(!e)return o(_.WalletUpdateError.NO_CONTRACT_STATE_SPECIFIED);var u=t.latestRound;if(!u)return o(_.WalletUpdateError.LOCAL_DATA_MISSING_LATEST_ROUND);if(u.proofOfStake||u.roundNumber==t.registrationRound)return n();if(u.roundNumber==e.currentRound&&!e.isCheckpointSubmitted)return e.currentSubBlock>e.extendedSlackPeriod?o(_.WalletUpdateError.REMOTE_DATA_MISSING_MERKLE_PROOF):n();var s=t.getRound(u.roundNumber-1);if(!s)return o(_.WalletUpdateError.LOCAL_DATA_MISSING_PREVIOUS_ROUND);if(!i||!i.merkle_proofs||!i.merkle_proofs.length)return o(_.WalletUpdateError.REMOTE_DATA_NO_MERKLE_PROOFS);var a=i.merkle_proofs.find(function(t){return t.round_number==u.roundNumber});if(!a)return o(_.WalletUpdateError.REMOTE_DATA_MISSING_MERKLE_PROOF);if(a.trail!=t.trailIdentifier)return o(_.WalletUpdateError.PROOF_OF_STAKE_INVALID_TRAIL);var c=new g.ProofOfStake(t.contractAddress,t.address,a.paint,a.trail,a.round_number,a.hashes,a.values,a.left,a.right);return u.proposedProofOfStake=c,c.amount.isLessThan(s.expectedBalance)?o(_.WalletUpdateError.PROOF_OF_STAKE_INSUFFICIENT_BALANCE):u.roundNumber<=e.currentRound-e.roundsKept?(u.setProofOfStake(c),n()):void r.contractApi.verifyProof(u,c).then(function(t){if(!t)return o(_.WalletUpdateError.PROOF_OF_STAKE_INVALID);if(s.aggregate.transferTree.isEmpty){if(!b.isSameHexValue(c.paint,b.EMPTY_HASH)&&!b.isSameHexValue(c.paint,s.aggregate.hash))return O.Logging.error(c.paint),O.Logging.error("not empty"),o(_.WalletUpdateError.PROOF_OF_STAKE_UNEXPECTED_PAINT)}else if(!b.isSameHexValue(c.paint,s.aggregate.hash))return O.Logging.error(c.paint),O.Logging.error(s.aggregate.hash),O.Logging.log(s.aggregate),o(_.WalletUpdateError.PROOF_OF_STAKE_UNEXPECTED_PAINT);return u.setProofOfStake(c),n()}).catch(o)})},t.prototype.updateLatestRoundAggregate=function(t,e,n){var r=this;O.Logging.debug("updateLatestRoundAggregate");var i=n?n.walletData:null;return new Promise(function(o,u){if(!t)return u(_.WalletUpdateError.NO_WALLET_SPECIFIED);if(!t.isRegistered)return u(_.WalletUpdateError.UNREGISTERED);if(!i||!i.transfers)return o();var s=t.latestRound;if(!s)return u(_.WalletUpdateError.LOCAL_DATA_MISSING_LATEST_ROUND);var a=i.transfers.filter(function(t){return t.round==s.roundNumber}).sort(function(t,e){return t.id-e.id});return r.updateLatestRoundAggregateTransfers(t,a,0,e,n).then(o).catch(u)})},t.prototype.updateLatestRoundAggregateTransfers=function(t,e,n,r,i){var o=this;return O.Logging.debug("updateLatestRoundAggregateTransfers"),new Promise(function(u,s){if(!t)return s(_.WalletUpdateError.NO_WALLET_SPECIFIED);if(!t.isRegistered)return s(_.WalletUpdateError.UNREGISTERED);if(!e||n>=e.length)return u();var a=function(u,s){return o.updateLatestRoundAggregateTransfers(t,e,n+1,r,i).then(u).catch(s)},c=t.latestRound,h=e[n],l=c.aggregate.latestTransfer,f=b.isSameHexValue(h.wallet,t.address),p=function(e,n){return o.contractApi.validateTransferDebit(h,!0,t.contractAddress).then(function(r){if(!r)return n(_.WalletUpdateError.AGGREGATE_DEBIT_HUB_SIGNATURE_INVALID);var i=m.Aggregate.checksum(t.contractAddress,h.wallet,h.wallet_trail_identifier,h.round,h.sender_aggregate.tx_set_hash,new d.default(h.sender_aggregate.updated_spendings),new d.default(h.sender_aggregate.updated_gains)),u=v.Signature.fromRSV(t.contractAddress,i,h.sender_aggregate.hub_signature);return c.aggregate.latestTransfer.saveDebitConfirmation(u),o.contractApi.validateTransferCredit(h,!0,t.contractAddress).then(function(r){if(!r)return n(_.WalletUpdateError.AGGREGATE_CREDIT_HUB_SIGNATURE_INVALID);var i=m.Aggregate.checksum(t.contractAddress,h.recipient,h.recipient_trail_identifier,h.round,h.recipient_aggregate.tx_set_hash,new d.default(h.recipient_aggregate.updated_spendings),new d.default(h.recipient_aggregate.updated_gains)),o=v.Signature.fromRSV(t.contractAddress,i,h.recipient_aggregate.hub_signature);if(c.aggregate.latestTransfer.saveCreditConfirmation(o),f){if(!c.aggregate.confirmPendingOutgoingTransfer())return n(_.WalletUpdateError.LOGIC_TRANSFER_CONFIRM_ERROR_OUTGOING)}else if(!c.aggregate.confirmPendingIncomingTransfer())return n(_.WalletUpdateError.LOGIC_TRANSFER_CONFIRM_ERROR_INCOMING);return a(e,n)})})};if(l&&h.id<l.txId)return a(u,s);if(l&&h.id==l.txId){if(c.removePendingIncomingTransfer(h),!c.aggregate.isTransferPending)return a(u,s);if(h.processed&&!h.sent)return c.removePendingIncomingTransfer(h),c.addCancelledTransfer(h),c.aggregate.cancelPendingTransfer(),a(u,s);if(f){if(!b.isSameHexValue(c.aggregate.transferTree.hash,h.sender_aggregate.tx_set_hash))return s(_.WalletUpdateError.AGGREGATE_TX_SET_ROOT_INVALID_OUTGOING)}else if(h.recipient_aggregate&&!b.isSameHexValue(c.aggregate.transferTree.hash,h.recipient_aggregate.tx_set_hash))return s(_.WalletUpdateError.AGGREGATE_TX_SET_ROOT_INVALID_INCOMING);return o.contractApi.validateTransferDebit(h,!1,t.contractAddress).then(function(e){return e?h.recipient_aggregate?(l.debitAuthorization||l.saveDebitAuthorization(h.sender_aggregate),o.contractApi.validateTransferCredit(h,!1,t.contractAddress).then(function(t){return t?(l.creditAuthorization||l.saveCreditAuthorization(h.recipient_aggregate),h.processed?p(u,s):a(u,s)):s(_.WalletUpdateError.AGGREGATE_CREDIT_WALLET_SIGNATURE_INVALID)})):a(u,s):s(_.WalletUpdateError.AGGREGATE_DEBIT_WALLET_SIGNATURE_INVALID)})}var y=m.Aggregate.fromJSON(c.aggregate.json);y.isTransferPending&&y.cancelPendingTransfer();f?y.createOutgoingTransfer(h.recipient,h.recipient_trail_identifier,h.amount,h.nonce):y.createIncomingTransfer(h.wallet,h.amount,h.nonce,h.id);if(h.processed&&!h.sent)return c.removePendingIncomingTransfer(h),c.addCancelledTransfer(h),a(u,s);if(f){if(c.aggregate.isTransferPending)return s(_.WalletUpdateError.LOGIC_AGGREGATION_FORK);if(!b.isSameHexValue(y.transferTree.hash,h.sender_aggregate.tx_set_hash))return s(_.WalletUpdateError.AGGREGATE_TX_SET_ROOT_INVALID_OUTGOING)}else if(h.recipient_aggregate){if(c.aggregate.isTransferPending)return s(_.WalletUpdateError.LOGIC_AGGREGATION_FORK);if(!b.isSameHexValue(y.transferTree.hash,h.recipient_aggregate.tx_set_hash))return s(_.WalletUpdateError.AGGREGATE_TX_SET_ROOT_INVALID_INCOMING)}return o.contractApi.validateTransferDebit(h,!1,t.contractAddress).then(function(e){return e?(f?c.aggregate.createOutgoingTransfer(h.recipient,h.recipient_trail_identifier,h.amount,h.nonce,h.id).saveDebitAuthorization(h.sender_aggregate):c.addPendingIncomingTransfer(h),h.recipient_aggregate?o.contractApi.validateTransferCredit(h,!1,t.contractAddress).then(function(t){return t?(f||(c.aggregate.createIncomingTransfer(h.wallet,h.amount,h.nonce,h.id).saveDebitAuthorization(h.sender_aggregate),c.removePendingIncomingTransfer(h)),c.aggregate.latestTransfer.saveCreditAuthorization(h.recipient_aggregate),h.processed?p(u,s):a(u,s)):s(_.WalletUpdateError.AGGREGATE_CREDIT_WALLET_SIGNATURE_INVALID)}):a(u,s)):s(_.WalletUpdateError.AGGREGATE_DEBIT_WALLET_SIGNATURE_INVALID)})})},t.prototype.updateLatestRoundWithdrawalRequests=function(t,e,n){O.Logging.debug("updateLatestRoundWithdrawalRequests");var r=n?n.walletData:null;return new Promise(function(e,n){if(!t)return n(_.WalletUpdateError.NO_WALLET_SPECIFIED);if(!t.isRegistered)return n(_.WalletUpdateError.UNREGISTERED);if(!(r&&r.withdrawal_requests&&r.withdrawal_requests.length))return e();if(!t.latestRound)return n(_.WalletUpdateError.LOCAL_DATA_MISSING_LATEST_ROUND);t.latestRound;try{return e()}catch(t){return n(t)}})},t.prototype.updateLatestRoundOnChainWithdrawal=function(t,e,n){return O.Logging.debug("updateLatestRoundOnChainWithdrawal"),new Promise(function(n,r){if(!t)return r(_.WalletUpdateError.NO_WALLET_SPECIFIED);if(!t.isRegistered)return r(_.WalletUpdateError.UNREGISTERED);if(!e)return r(_.WalletUpdateError.NO_CONTRACT_STATE_SPECIFIED);if(!t.latestRound)return r(_.WalletUpdateError.LOCAL_DATA_MISSING_LATEST_ROUND);if(!e.isWithdrawalPending)return t.latestRound.isWithdrawalPending&&t.latestRound.confirmWithdrawal(),n();if(e.pendingWithdrawalRound>t.latestRound.roundNumber)return n();t.latestRound.setWithdrawalPending(e.pendingWithdrawalAmount,e.pendingWithdrawalRound);var i=t.latestRound.roundNumber-e.pendingWithdrawalRound,o=e.currentRound>t.latestRound.roundNumber?e.extendedSlackPeriod+1:e.currentSubBlock;return(i>2||2==i&&o>e.extendedSlackPeriod)&&t.latestRound.markWithdrawalReady(),n()})},t.prototype.updateLatestRoundDeposits=function(t,e,n){O.Logging.debug("updateLatestRoundDeposits");var r=n?n.walletData:null;return new Promise(function(e,n){if(!t)return n(_.WalletUpdateError.NO_WALLET_SPECIFIED);if(!t.isRegistered)return n(_.WalletUpdateError.UNREGISTERED);if(!r||!r.deposits||!r.deposits.length)return e();var i=t.latestRound;if(!i)return n(_.WalletUpdateError.LOCAL_DATA_MISSING_LATEST_ROUND);try{return r.deposits.filter(function(t){return t.round==i.roundNumber}).map(function(t){return new M.Deposit(t.txid,t.block,t.round,t.amount)}).map(function(t){return i.addDeposit(t)}),e()}catch(t){return n(t)}})},t.prototype.updateCurrentRoundOnChainDeposits=function(t,e,n){return O.Logging.debug("updateCurrentRoundOnChainDeposits"),new Promise(function(n,r){if(!t)return r(_.WalletUpdateError.NO_WALLET_SPECIFIED);if(!t.isRegistered)return r(_.WalletUpdateError.UNREGISTERED);if(!e)return r(_.WalletUpdateError.NO_CONTRACT_STATE_SPECIFIED);try{t.latestRound&&(t.latestRound.onChainDeposit=e.deposits[0]),t.previousRound&&(t.previousRound.onChainDeposit=e.deposits[1]),t.secondPreviousRound&&(t.secondPreviousRound.onChainDeposit=e.deposits[2])}catch(t){return r(t)}return n()})},t.prototype.updateLatestRoundDeliveryReceipts=function(t,e,n){var r=this;O.Logging.debug("updateLatestRoundDeliveryReceipts");var i=n?n.walletData:null;return new Promise(function(o,u){if(!t)return u(_.WalletUpdateError.NO_WALLET_SPECIFIED);if(!t.isRegistered)return u(_.WalletUpdateError.UNREGISTERED);var s=t.latestRound;if(!s)return u(_.WalletUpdateError.LOCAL_DATA_MISSING_LATEST_ROUND);if(s.roundNumber==t.registrationRound)return o();if(s.roundNumber==e.currentRound&&!e.isCheckpointSubmitted)return e.currentSubBlock>e.slackPeriod?u(_.WalletUpdateError.PROVIDER_NOT_AUDITABLE):o();var a=i?i.transfers.filter(function(t){return t.round==s.roundNumber-1}).sort(function(t,e){return t.id-e.id}):[],c=t.previousRound.aggregate.transfers;return r.updateDeliveryReceipt(t,c,a,0,e,n).then(o).catch(u)})},t.prototype.updateDeliveryReceipt=function(t,e,n,r,i,o,u){var s=this;return void 0===u&&(u=!1),O.Logging.debug("updateDeliveryReceipt"),new Promise(function(a,c){if(!t)return c(_.WalletUpdateError.NO_WALLET_SPECIFIED);if(!e||r>=e.length)return u?c(_.WalletUpdateError.REMOTE_DATA_INVALID_DELIVERY_RECEIPT):a();var h=function(a,c,h){return void 0===h&&(h=u),s.updateDeliveryReceipt(t,e,n,r+1,i,o,h).then(a).catch(c)},l=e[r];if(l.deliveryProof)return h(a,c,u);if(b.isSameHexValue(t.address,l.recipient))return h(a,c,u);if(l.round<i.currentRound-i.roundsKept)return h(a,c,u);if(!l.debitConfirmation||!l.creditConfirmation)return c(_.WalletUpdateError.LOGIC_RECEIPT_VALIDATION_ERROR_MISSING_CONFIRMATION);var f=n.find(function(t){return t.id==l.txId});if(!f||!f.delivery_proof)return O.Logging.error(l),O.Logging.error(n),h(a,c,!0);s.contractApi.validateDeliveryProof(l,f,t.contractAddress).then(function(t){return t?(l.saveDeliveryProof(f.delivery_proof),h(a,c,u)):h(a,c,!0)})})},t.prototype.progressRound=function(t,e,n){return O.Logging.debug("progressRound"),new Promise(function(n,r){if(!t)return r(_.WalletUpdateError.NO_WALLET_SPECIFIED);if(!t.isRegistered)return r(_.WalletUpdateError.UNREGISTERED);if(!e)return r(_.WalletUpdateError.NO_CONTRACT_STATE_SPECIFIED);if(t.latestRound.roundNumber===e.currentRound)return r(_.WalletUpdateError.LOGIC_PREMATURE_ROUND_ADVANCEMENT);var i=new p.Round(t.contractAddress,t.address,t.trailIdentifier,t.latestRound.roundNumber+1);return t.addRound(i),n()})},t=r([s.injectable(),o(0,s.inject(a.TYPES.SUBJECT.WALLET_STATE_POLL)),o(1,s.inject(a.TYPES.SUBJECT.HUB_STATE_FETCH)),o(2,s.inject(a.TYPES.SUBJECT.CONTRACT_STATE_FETCH)),o(3,s.inject(a.TYPES.SUBJECT.WALLET_STATE_SYNC)),o(4,s.inject(h.ContractApiService)),o(5,s.inject(l.HubApiService)),i("design:paramtypes",[c.Observable,c.Observable,c.Observable,Object,h.ContractApiService,l.HubApiService])],t)}();e.WalletStateService=S},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,u=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(u=(o<3?i(u):o>3?i(e,n,u):i(e,n))||u);return o>3&&u&&Object.defineProperty(e,n,u),u},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=this&&this.__param||function(t,e){return function(n,r){e(n,r,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(61),s=n(111),a=n(14),c=n(15),h=n(26),l=function(){function t(t,e,n){var r=this;this.walletStatePollObservable=t,this.hubStateFetchObserver=e,this.hubApi=n,t.subscribe(function(t){r.fetchHubState(t.wallet).then(function(t){r.hubStateFetchObserver.next(t)})})}return t.prototype.fetchHubState=function(t){var e=this,n=new s.HubState;return n.timestamp=(new Date).getTime(),this.hubApi.getStatusData(t).then(function(r){return n.statusData=r,e.hubApi.getWalletData(t,t.latestRound.roundNumber-1)}).then(function(t){return n.walletData=t,n}).catch(function(){return n})},t=r([a.injectable(),o(0,a.inject(c.TYPES.SUBJECT.WALLET_STATE_POLL)),o(1,a.inject(c.TYPES.SUBJECT.HUB_STATE_FETCH)),o(2,a.inject(u.HubApiService)),i("design:paramtypes",[h.Observable,Object,u.HubApiService])],t)}();e.HubStateService=l},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,u=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(u=(o<3?i(u):o>3?i(e,n,u):i(e,n))||u);return o>3&&u&&Object.defineProperty(e,n,u),u},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=this&&this.__param||function(t,e){return function(n,r){e(n,r,t)}},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(14),a=n(26),c=n(43),h=n(15),l=n(110),f=u(n(9)),p=n(20),d=function(){function t(t,e,n){var r=this;this.walletStatePollObservable=t,this.contractStateFetchObserver=e,this.contractApi=n,t.subscribe(function(t){r.fetchContractState(t.wallet).then(function(t){r.contractStateFetchObserver.next(t)})})}return t.prototype.fetchContractState=function(t){var e=this,n=new l.ContractState;return n.timestamp=(new Date).getTime(),this.contractApi.networkId().then(function(t){return n.networkId=t,e.contractApi.latestBlock()}).then(function(r){return n.block=r.number,e.contractApi.genesis(t.contractAddress)}).then(function(r){return n.genesis=r,e.contractApi.currentRound(t.contractAddress)}).then(function(r){return n.currentRound=r,e.contractApi.currentSubBlock(t.contractAddress)}).then(function(r){return n.currentSubBlock=r,e.contractApi.getBlocksPerRound(t.contractAddress)}).then(function(r){return n.blocksPerRound=r,e.contractApi.getSlackPeriod(t.contractAddress)}).then(function(r){return n.slackPeriod=r,e.contractApi.getChallengeCost(t.contractAddress)}).then(function(r){return n.challengeCost=r,e.contractApi.getLiveChallenges(n.currentRound,t.contractAddress)}).then(function(r){return n.liveChallenges=r,e.contractApi.getLiveChallenges(n.currentRound-1,t.contractAddress)}).then(function(r){return n.slackingChallenges=r,e.contractApi.getExtendedSlackPeriod(t.contractAddress)}).then(function(r){return n.extendedSlackPeriod=r,e.contractApi.getRoundsKept(t.contractAddress)}).then(function(r){return n.roundsKept=r,e.contractApi.lastSubmissionRound(t.contractAddress)}).then(function(r){return n.lastSubmissionRound=r,e.contractApi.balance(t.contractAddress)}).then(function(r){return n.contractBalance=r,e.contractApi.hasMissedCheckpointSubmission(t.contractAddress)}).then(function(r){return n.hasMissedCheckpointSubmission=r,e.contractApi.hasOutstandingChallenges(t.contractAddress)}).then(function(r){return n.hasOutstandingChallenges=r,e.contractApi.checkpoint(n.lastSubmissionRound,t.contractAddress)}).then(function(r){return n.lastCheckpointSubmitted=r[1],n.lastCheckpointSubmittedUpperBound=new f.default(r[2].valueOf()),e.contractApi.balance(t.address)}).then(function(r){return n.onChainBalance=r,e.contractApi.getDeposits(t.address,n.currentRound,t.contractAddress)}).then(function(r){return n.deposits[0]=r,e.contractApi.getDeposits(t.address,n.currentRound-1,t.contractAddress)}).then(function(r){return n.deposits[1]=r,e.contractApi.getDeposits(t.address,n.currentRound-2,t.contractAddress)}).then(function(r){return n.deposits[2]=r,e.contractApi.recordBook(t.address,t.contractAddress)}).then(function(r){return n.isWithdrawalPending=!1,n.pendingWithdrawalAmount=new f.default(0),n.pendingWithdrawalRound=0,r[0].valueOf()&&(n.isWithdrawalPending=!0,n.pendingWithdrawalAmount=new f.default(r[2].valueOf()),n.pendingWithdrawalRound=r[1].valueOf()),n.recovered=r[3].valueOf(),e.contractApi.getChallengeBook(t.address,t.address,t.contractAddress)}).then(function(t){return n.stateUpdateChallengeIssued=parseInt(t[0].valueOf(),10)>0,n.stateUpdateChallengeBlock=parseInt(t[1].valueOf(),10),n.stateUpdateChallengeRound=parseInt(t[2].valueOf(),10),n}).catch(function(t){return p.Logging.error(t),null})},t=r([s.injectable(),o(0,s.inject(h.TYPES.SUBJECT.WALLET_STATE_POLL)),o(1,s.inject(h.TYPES.SUBJECT.CONTRACT_STATE_FETCH)),o(2,s.inject(c.ContractApiService)),i("design:paramtypes",[a.Observable,Object,c.ContractApiService])],t)}();e.ContractStateService=d},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,u=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(u=(o<3?i(u):o>3?i(e,n,u):i(e,n))||u);return o>3&&u&&Object.defineProperty(e,n,u),u},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=this&&this.__param||function(t,e){return function(n,r){e(n,r,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(61),s=n(43),a=n(232),c=n(231),h=n(230),l=n(26),f=n(15),p=n(28),d=n(122),y=n(120),v=n(14),m=n(65),g=n(29),b=n(70),_=n(119),w=n(7),M=n(20),O=function(){function t(t,e,n,r,i,o,u,s,a,c,h,l,f,p){this.walletStorageService=t,this.synchronizationPollService=e,this.web3Service=n,this.hubApiService=r,this.contractApiService=i,this.contractStateFetchService=o,this.hubStateFetchService=u,this.walletStateService=s,this.disputeService=a,this.walletStatePollObserver=c,this.web3ConnectivityObservable=h,this.hubStateObservable=l,this.contractStateObservable=f,this.walletStateSyncObservable=p}return t.prototype.prepareOutgoingTransfer=function(t,e,n,r){var i=this,o=p.Round.fromJSON(t.latestRound.json);return new Promise(function(u,s){return n.gt(o.availableBalance)?(M.Logging.error("Insufficient balance."),s()):o.aggregate.isTransferPending?(M.Logging.error("Another transfer is already pending."),s()):void i.hubApiService.whoisWallet(e,t.webAddress).then(function(a){if(!a||!a.trail_identifier)return s();var c=new m.Wallet(e,t.networkId,t.contractAddress,t.webAddress),h=c.getAdmissionAggregate(a.round),l=g.Signature.fromRSV(t.address,h.hash,a.wallet_signature);i.contractApiService.validateAggregateSignature(h,l,t.contractAddress).then(function(h){if(!h)return M.Logging.error("Bad Recipient Admission Request."),s();var l=c.getAdmissionAggregate(a.round,a.trail_identifier),f=g.Signature.fromRSV(t.contractAddress,l.hash,a.hub_signature);i.contractApiService.validateAggregateSignature(l,f,t.contractAddress).then(function(t){if(!t)return M.Logging.error("Bad Recipient Admission Approval."),s();var i=o.aggregate.createOutgoingTransfer(e,a.trail_identifier,n,r),c=o.availableBalanceMarker;return null===i?(M.Logging.error("No outgoing transfer created."),s()):u({transfer:i,hashes:{aggregate:o.aggregate.hash,marker:c.hash}})})})}).catch(s)})},t.prototype.sendOutgoingTransfer=function(t,e,n,r){var i=this;return new Promise(function(o,u){i.hubApiService.sendTransfer(t,e.transfer,n,r).then(function(n){var r=t.getRound(e.transfer.round);if(!r)return o(!1);var i=r.aggregate.createOutgoingTransfer(e.transfer.recipient,e.transfer.recipientTrailIdentifier,e.transfer.amount,e.transfer.nonce,n.id);return o(!!i)}).catch(u)})},t.prepareReceipt=function(t,e){var n=p.Round.fromJSON(t.latestRound.json),r=n.aggregate.createIncomingTransfer(e.sender,e.amount,e.nonce,e.txId);return r?{transfer:r,hashes:{aggregate:n.aggregate.hash,marker:null}}:null},t.prototype.sendIncomingTransferReceipt=function(t,e,n){var r=this;return new Promise(function(i,o){r.hubApiService.sendReceipt(t,e.transfer.txId,n).then(function(n){var r=t.getRound(e.transfer.round);if(!r)return i(!1);var o=r.aggregate.createIncomingTransfer(e.transfer.sender,e.transfer.amount,e.transfer.nonce,e.transfer.txId);return i(!!o)}).catch(o)})},t.prototype.getAdmissionDigest=function(t){var e=this;return new Promise(function(n,r){e.contractApiService.currentRound(t.contractAddress).then(function(e){return n(t.getAdmissionAggregate(e).hash)}).catch(r)})},t.prototype.initiateWithdrawal=function(t,e){if(!e.gt(t.withdrawableAmount))return this.contractApiService.requestWithdrawal(e,t.address,t.previousRound.proofOfStake,t.contractAddress)},t.prototype.confirmWithdrawal=function(t){return this.contractApiService.confirmWithdrawal(t.address,t.contractAddress)},t.resolveTransferState=function(t,e){var n=w.isSameHexValue(e.address,t.sender);return t.debitAuthorization?t.creditAuthorization?t.debitConfirmation?t.creditConfirmation?t.deliveryProof?_.TransferState.DELIVERY_RATIFIED:t.round===e.latestRound.roundNumber?_.TransferState.DELIVERY_CONFIRMED:e.latestRound.proofOfStake?n?_.TransferState.MISSING_RECEIPT:_.TransferState.DELIVERY_RATIFIED:_.TransferState.DELIVERY_CONFIRMED:_.TransferState.MISSING_CREDIT_CONFIRMATION:_.TransferState.PENDING_PROVIDER_APPROVAL:_.TransferState.PENDING_RECIPIENT_APPROVAL:_.TransferState.CANCELLED},t.prototype.blocksToWithdrawalConfirmation=function(t,e){var n=t.latestRound;if(!e||!n.isWithdrawalPending)return-1;if(n.isWithdrawalReady)return 0;var r=n.withdrawalRound,i=n.roundNumber-r;return e.extendedSlackPeriod+e.blocksPerRound*(2-i)-e.currentSubBlock+1},t=r([v.injectable(),o(0,v.inject(y.WalletStorageService)),o(1,v.inject(d.PollService)),o(2,v.inject(f.TYPES.EXTERNAL.WEB3_SERVICE_INTERFACE)),o(3,v.inject(u.HubApiService)),o(4,v.inject(s.ContractApiService)),o(5,v.inject(a.ContractStateService)),o(6,v.inject(c.HubStateService)),o(7,v.inject(h.WalletStateService)),o(8,v.inject(b.DisputeService)),o(9,v.inject(f.TYPES.SUBJECT.WALLET_STATE_POLL)),o(10,v.inject(f.TYPES.SUBJECT.WEB3_CONNECTIVITY)),o(11,v.inject(f.TYPES.SUBJECT.HUB_STATE_FETCH)),o(12,v.inject(f.TYPES.SUBJECT.CONTRACT_STATE_FETCH)),o(13,v.inject(f.TYPES.SUBJECT.WALLET_STATE_SYNC)),i("design:paramtypes",[y.WalletStorageService,d.PollService,Object,u.HubApiService,s.ContractApiService,a.ContractStateService,c.HubStateService,h.WalletStateService,b.DisputeService,Object,l.Observable,l.Observable,l.Observable,l.Observable])],t)}();e.LQDClient=O},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiBindToService=function(t){return function(e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.forEach(function(n){return t.bind(n).toService(e)})}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=n(3),o=n(13);e.postConstruct=function(){return function(t,e,n){var u=new o.Metadata(i.POST_CONSTRUCT,e);if(Reflect.hasOwnMetadata(i.POST_CONSTRUCT,t.constructor))throw new Error(r.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(i.POST_CONSTRUCT,u,t.constructor)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(13),o=n(19);e.targetName=function(t){return function(e,n,u){var s=new i.Metadata(r.NAME_TAG,t);o.tagParameter(e,n,u,s)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(13),o=n(19);e.multiInject=function(t){return function(e,n,u){var s=new i.Metadata(r.MULTI_INJECT_TAG,t);"number"==typeof u?o.tagParameter(e,n,u,s):o.tagProperty(e,n,s)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(13),o=n(19);e.unmanaged=function(){return function(t,e,n){var u=new i.Metadata(r.UNMANAGED_TAG,!0);o.tagParameter(t,e,n,u)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(13),o=n(19);e.optional=function(){return function(t,e,n){var u=new i.Metadata(r.OPTIONAL_TAG,!0);"number"==typeof n?o.tagParameter(t,e,n,u):o.tagProperty(t,e,u)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(13),o=n(19);e.named=function(t){return function(e,n,u){var s=new i.Metadata(r.NAMED_TAG,t);"number"==typeof u?o.tagParameter(e,n,u,s):o.tagProperty(e,n,s)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(13),i=n(19);e.tagged=function(t,e){return function(n,o,u){var s=new r.Metadata(t,e);"number"==typeof u?i.tagParameter(n,o,u,s):i.tagProperty(n,o,s)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=n(3);e.injectable=function(){return function(t){if(Reflect.hasOwnMetadata(i.PARAM_TYPES,t))throw new Error(r.DUPLICATED_INJECTABLE_DECORATOR);var e=Reflect.getMetadata(i.DESIGN_PARAM_TYPES,t)||[];return Reflect.defineMetadata(i.PARAM_TYPES,e,t),t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(25),i=function(){return function(t){this.guid=r.guid(),this.registry=t}}();e.ContainerModule=i;var o=function(){return function(t){this.guid=r.guid(),this.registry=t}}();e.AsyncContainerModule=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=function(){function t(){this._map=new Map}return t.prototype.getMap=function(){return this._map},t.prototype.add=function(t,e){if(null===t||void 0===t)throw new Error(r.NULL_ARGUMENT);if(null===e||void 0===e)throw new Error(r.NULL_ARGUMENT);var n=this._map.get(t);void 0!==n?(n.push(e),this._map.set(t,n)):this._map.set(t,[e])},t.prototype.get=function(t){if(null===t||void 0===t)throw new Error(r.NULL_ARGUMENT);var e=this._map.get(t);if(void 0!==e)return e;throw new Error(r.KEY_NOT_FOUND)},t.prototype.remove=function(t){if(null===t||void 0===t)throw new Error(r.NULL_ARGUMENT);if(!this._map.delete(t))throw new Error(r.KEY_NOT_FOUND)},t.prototype.removeByCondition=function(t){var e=this;this._map.forEach(function(n,r){var i=n.filter(function(e){return!t(e)});i.length>0?e._map.set(r,i):e._map.delete(r)})},t.prototype.hasKey=function(t){if(null===t||void 0===t)throw new Error(r.NULL_ARGUMENT);return this._map.has(t)},t.prototype.clone=function(){var e=new t;return this._map.forEach(function(t,n){t.forEach(function(t){return e.add(n,t.clone())})}),e},t.prototype.traverse=function(t){this._map.forEach(function(e,n){t(n,e)})},t}();e.Lookup=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.of=function(e,n){var r=new t;return r.bindings=e,r.middleware=n,r},t}();e.ContainerSnapshot=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(16),i=n(103),o=function(){function t(t){this._binding=t}return t.prototype.inRequestScope=function(){return this._binding.scope=r.BindingScopeEnum.Request,new i.BindingWhenOnSyntax(this._binding)},t.prototype.inSingletonScope=function(){return this._binding.scope=r.BindingScopeEnum.Singleton,new i.BindingWhenOnSyntax(this._binding)},t.prototype.inTransientScope=function(){return this._binding.scope=r.BindingScopeEnum.Transient,new i.BindingWhenOnSyntax(this._binding)},t}();e.BindingInSyntax=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(246),i=n(63),o=n(62),u=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new o.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new i.BindingOnSyntax(this._binding),this._bindingInSyntax=new r.BindingInSyntax(t)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingInWhenOnSyntax=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=n(16),o=n(247),u=n(103),s=function(){function t(t){this._binding=t}return t.prototype.to=function(t){return this._binding.type=i.BindingTypeEnum.Instance,this._binding.implementationType=t,new o.BindingInWhenOnSyntax(this._binding)},t.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(""+r.INVALID_TO_SELF_VALUE);var t=this._binding.serviceIdentifier;return this.to(t)},t.prototype.toConstantValue=function(t){return this._binding.type=i.BindingTypeEnum.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,new u.BindingWhenOnSyntax(this._binding)},t.prototype.toDynamicValue=function(t){return this._binding.type=i.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new o.BindingInWhenOnSyntax(this._binding)},t.prototype.toConstructor=function(t){return this._binding.type=i.BindingTypeEnum.Constructor,this._binding.implementationType=t,new u.BindingWhenOnSyntax(this._binding)},t.prototype.toFactory=function(t){return this._binding.type=i.BindingTypeEnum.Factory,this._binding.factory=t,new u.BindingWhenOnSyntax(this._binding)},t.prototype.toFunction=function(t){if("function"!=typeof t)throw new Error(r.INVALID_FUNCTION_BINDING);var e=this.toConstantValue(t);return this._binding.type=i.BindingTypeEnum.Function,e},t.prototype.toAutoFactory=function(t){return this._binding.type=i.BindingTypeEnum.Factory,this._binding.factory=function(e){return function(){return e.container.get(t)}},new u.BindingWhenOnSyntax(this._binding)},t.prototype.toProvider=function(t){return this._binding.type=i.BindingTypeEnum.Provider,this._binding.provider=t,new u.BindingWhenOnSyntax(this._binding)},t.prototype.toService=function(t){this.toDynamicValue(function(e){return e.container.get(t)})},t}();e.BindingToSyntax=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=n(16),o=n(3);e.resolveInstance=function(t,e,n){var u=null;return u=e.length>0?function(t,e,n){var r=e.filter(function(t){return null!==t.target&&t.target.type===i.TargetTypeEnum.ClassProperty}),o=r.map(n);return r.forEach(function(e,n){var r;r=e.target.name.value();var i=o[n];t[r]=i}),t}(u=function(t,e){return new(t.bind.apply(t,[void 0].concat(e)))}(t,e.filter(function(t){return null!==t.target&&t.target.type===i.TargetTypeEnum.ConstructorArgument}).map(n)),e,n):new t,function(t,e){if(Reflect.hasMetadata(o.POST_CONSTRUCT,t)){var n=Reflect.getMetadata(o.POST_CONSTRUCT,t);try{e[n.value]()}catch(e){throw new Error(r.POST_CONSTRUCT_ERROR(t.name,e.message))}}}(t,u),u}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=n(16),o=n(106),u=n(35),s=n(249),a=function(t,e,n){try{return n()}catch(n){throw o.isStackOverflowExeption(n)?new Error(r.CIRCULAR_DEPENDENCY_IN_FACTORY(t,e.toString())):n}},c=function(t){return function(e){e.parentContext.setCurrentRequest(e);var n=e.bindings,o=e.childRequests,h=e.target&&e.target.isArray(),l=!(e.parentRequest&&e.parentRequest.target&&e.target&&e.parentRequest.target.matchesArray(e.target.serviceIdentifier));if(h&&l)return o.map(function(e){return c(t)(e)});var f=null;if(!e.target.isOptional()||0!==n.length){var p=n[0],d=p.scope===i.BindingScopeEnum.Singleton,y=p.scope===i.BindingScopeEnum.Request;if(d&&p.activated)return p.cache;if(y&&null!==t&&t.has(p.guid))return t.get(p.guid);if(p.type===i.BindingTypeEnum.ConstantValue)f=p.cache;else if(p.type===i.BindingTypeEnum.Function)f=p.cache;else if(p.type===i.BindingTypeEnum.Constructor)f=p.implementationType;else if(p.type===i.BindingTypeEnum.DynamicValue&&null!==p.dynamicValue)f=a("toDynamicValue",p.serviceIdentifier,function(){return p.dynamicValue(e.parentContext)});else if(p.type===i.BindingTypeEnum.Factory&&null!==p.factory)f=a("toFactory",p.serviceIdentifier,function(){return p.factory(e.parentContext)});else if(p.type===i.BindingTypeEnum.Provider&&null!==p.provider)f=a("toProvider",p.serviceIdentifier,function(){return p.provider(e.parentContext)});else{if(p.type!==i.BindingTypeEnum.Instance||null===p.implementationType){var v=u.getServiceIdentifierAsString(e.serviceIdentifier);throw new Error(r.INVALID_BINDING_TYPE+" "+v)}f=s.resolveInstance(p.implementationType,o,c(t))}return"function"==typeof p.onActivation&&(f=p.onActivation(e.parentContext,f)),d&&(p.cache=f,p.activated=!0),y&&null!==t&&!t.has(p.guid)&&t.set(p.guid,f),f}}};e.resolve=function(t){return c(t.plan.rootRequest.requestScope)(t.plan.rootRequest)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(25),i=function(){function t(t,e,n,i,o){this.guid=r.guid(),this.serviceIdentifier=t,this.parentContext=e,this.parentRequest=n,this.target=o,this.childRequests=[],this.bindings=Array.isArray(i)?i:[i],this.requestScope=null===n?new Map:null}return t.prototype.addChildRequest=function(e,n,r){var i=new t(e,this.parentContext,this,n,r);return this.childRequests.push(i),i},t}();e.Request=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.str=t}return t.prototype.startsWith=function(t){return 0===this.str.indexOf(t)},t.prototype.endsWith=function(t){var e,n=t.split("").reverse().join("");return e=this.str.split("").reverse().join(""),this.startsWith.call({str:e},n)},t.prototype.contains=function(t){return-1!==this.str.indexOf(t)},t.prototype.equals=function(t){return this.str===t},t.prototype.value=function(){return this.str},t}();e.QueryableString=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(105),i=n(8),o=n(16),u=n(3),s=n(35),a=n(104);function c(t,e,n,r){var f=t.getConstructorMetadata(n),p=f.compilerGeneratedMetadata;if(void 0===p){var d=i.MISSING_INJECTABLE_ANNOTATION+" "+e+".";throw new Error(d)}var y=f.userGeneratedMetadata,v=Object.keys(y),m=function(t,e,n,r,i){for(var o=[],u=0;u<i;u++){var s=u,a=h(s,t,e,n,r);null!==a&&o.push(a)}return o}(r,e,p,y,0===n.length&&v.length>0?v.length:n.length),g=function t(e,n){var r=e.getPropertiesMetadata(n);var i=[];var u=Object.keys(r);for(var s=0,c=u;s<c.length;s++){var h=c[s],f=r[h],p=l(r[h]),d=p.targetName||h,y=p.inject||p.multiInject,v=new a.Target(o.TargetTypeEnum.ClassProperty,d,y);v.metadata=f,i.push(v)}var m=Object.getPrototypeOf(n.prototype).constructor;if(m!==Object){var g=t(e,m);i=i.concat(g)}return i}(t,n),b=m.concat(g),_=function t(e,n){var r=Object.getPrototypeOf(n.prototype).constructor;if(r!==Object){var i=s.getFunctionName(r),o=c(e,i,r,!0),a=o.map(function(t){return t.metadata.filter(function(t){return t.key===u.UNMANAGED_TAG})}),h=[].concat.apply([],a).length,l=o.length-h;return l>0?l:t(e,r)}return 0}(t,n);if(b.length<_){var w=i.ARGUMENTS_LENGTH_MISMATCH_1+e+i.ARGUMENTS_LENGTH_MISMATCH_2;throw new Error(w)}return b}function h(t,e,n,u,s){var c=s[t.toString()]||[],h=l(c),f=!0!==h.unmanaged,p=u[t],d=h.inject||h.multiInject;if((p=d||p)instanceof r.LazyServiceIdentifer&&(p=p.unwrap()),f){var y=p===Object,v=p===Function;if(!e&&(y||v||void 0===p)){var m=i.MISSING_INJECT_ANNOTATION+" argument "+t+" in class "+n+".";throw new Error(m)}var g=new a.Target(o.TargetTypeEnum.ConstructorArgument,h.targetName,p);return g.metadata=c,g}return null}function l(t){var e={};return t.forEach(function(t){e[t.key.toString()]=t.value}),{inject:e[u.INJECT_TAG],multiInject:e[u.MULTI_INJECT_TAG],targetName:e[u.NAME_TAG],unmanaged:e[u.UNMANAGED_TAG]}}e.getDependencies=function(t,e){return c(t,s.getFunctionName(e),e,!1)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t,e){this.parentContext=t,this.rootRequest=e}}();e.Plan=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(25),i=function(){function t(t){this.guid=r.guid(),this.container=t}return t.prototype.addPlan=function(t){this.plan=t},t.prototype.setCurrentRequest=function(t){this.currentRequest=t},t}();e.Context=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(256),i=n(8),o=n(16),u=n(3),s=n(106),a=n(35),c=n(255),h=n(13),l=n(254),f=n(253),p=n(251),d=n(104);function y(t){return t._bindingDictionary}function v(t,e,n,o,u){var s=m(n.container,u.serviceIdentifier),c=[];return s.length===r.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof u.serviceIdentifier&&t.getConstructorMetadata(u.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(u.serviceIdentifier).toSelf(),s=m(n.container,u.serviceIdentifier)),c=e?s:s.filter(function(t){var e=new p.Request(t.serviceIdentifier,n,o,t,u);return t.constraint(e)}),function(t,e,n,o){switch(e.length){case r.BindingCount.NoBindingsAvailable:if(n.isOptional())return e;var u=a.getServiceIdentifierAsString(t),s=i.NOT_REGISTERED;throw s+=a.listMetadataForTarget(u,n),s+=a.listRegisteredBindingsForServiceIdentifier(o,u,m),new Error(s);case r.BindingCount.OnlyOneBindingAvailable:if(!n.isArray())return e;case r.BindingCount.MultipleBindingsAvailable:default:if(n.isArray())return e;var u=a.getServiceIdentifierAsString(t),s=i.AMBIGUOUS_MATCH+" "+u;throw s+=a.listRegisteredBindingsForServiceIdentifier(o,u,m),new Error(s)}}(u.serviceIdentifier,c,u,n.container),c}function m(t,e){var n=[],r=y(t);return r.hasKey(e)?n=r.get(e):null!==t.parent&&(n=m(t.parent,e)),n}e.getBindingDictionary=y,e.plan=function(t,e,n,r,i,y,m,g){void 0===g&&(g=!1);var b=new c.Context(e),_=function(t,e,n,r,i,o){var s=t?u.MULTI_INJECT_TAG:u.INJECT_TAG,a=new h.Metadata(s,n),c=new d.Target(e,r,n,a);if(void 0!==i){var l=new h.Metadata(i,o);c.metadata.push(l)}return c}(n,r,i,"",y,m);try{return function t(e,n,r,i,u,s){var a,c;if(null===u){a=v(e,n,i,null,s),c=new p.Request(r,i,null,a,s);var h=new l.Plan(i,c);i.addPlan(h)}else a=v(e,n,i,u,s),c=u.addChildRequest(s.serviceIdentifier,a,s);a.forEach(function(n){var r=null;if(s.isArray())r=c.addChildRequest(n.serviceIdentifier,n,s);else{if(n.cache)return;r=c}n.type===o.BindingTypeEnum.Instance&&null!==n.implementationType&&f.getDependencies(e,n.implementationType).forEach(function(n){t(e,!1,n.serviceIdentifier,i,r,n)})})}(t,g,i,b,null,_),b}catch(t){throw s.isStackOverflowExeption(t)&&b.plan&&a.circularDependencyToException(b.plan.rootRequest),t}},e.createMockRequest=function(t,e,n,r){var i=new d.Target(o.TargetTypeEnum.Variable,"",e,new h.Metadata(n,r)),u=new c.Context(t);return new p.Request(e,u,null,[],i)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(16),i=n(25),o=function(){function t(t,e){this.guid=i.guid(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=r.BindingTypeEnum.Invalid,this.constraint=function(t){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return t.prototype.clone=function(){var e=new t(this.serviceIdentifier,this.scope);return e.activated=!1,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.cache=this.cache,e},t}();e.Binding=o},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function u(t){try{a(r.next(t))}catch(t){o(t)}}function s(t){try{a(r.throw(t))}catch(t){o(t)}}function a(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(u,s)}a((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,r=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!(i=(i=u.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1],i=o;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(o);break}i[2]&&u.ops.pop(),u.trys.pop();continue}o=e.call(t,u)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(258),u=n(8),s=n(16),a=n(3),c=n(107),h=n(257),l=n(250),f=n(248),p=n(25),d=n(35),y=n(245),v=n(244),m=function(){function t(t){if(void 0!==t){if("object"!=typeof t)throw new Error(""+u.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0!==t.defaultScope&&t.defaultScope!==s.BindingScopeEnum.Singleton&&t.defaultScope!==s.BindingScopeEnum.Transient&&t.defaultScope!==s.BindingScopeEnum.Request)throw new Error(""+u.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0!==t.autoBindInjectable&&"boolean"!=typeof t.autoBindInjectable)throw new Error(""+u.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);this.options={autoBindInjectable:t.autoBindInjectable,defaultScope:t.defaultScope}}else this.options={autoBindInjectable:!1,defaultScope:s.BindingScopeEnum.Transient};this.guid=p.guid(),this._bindingDictionary=new v.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new c.MetadataReader}return t.merge=function(e,n){var r=new t,i=h.getBindingDictionary(r),o=h.getBindingDictionary(e),u=h.getBindingDictionary(n);function s(t,e){t.traverse(function(t,n){n.forEach(function(t){e.add(t.serviceIdentifier,t.clone())})})}return s(o,i),s(u,i),r},t.prototype.load=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this._getContainerModuleHelpersFactory(),r=0,i=t;r<i.length;r++){var o=i[r],u=n(o.guid);o.registry(u.bindFunction,u.unbindFunction,u.isboundFunction,u.rebindFunction)}},t.prototype.loadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r(this,void 0,void 0,function(){var e,n,r,o,u;return i(this,function(i){switch(i.label){case 0:e=this._getContainerModuleHelpersFactory(),n=0,r=t,i.label=1;case 1:return n<r.length?(o=r[n],u=e(o.guid),[4,o.registry(u.bindFunction,u.unbindFunction,u.isboundFunction,u.rebindFunction)]):[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},t.prototype.unload=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.forEach(function(e){var n=function(t){return function(e){return e.moduleId===t}}(e.guid);t._bindingDictionary.removeByCondition(n)})},t.prototype.bind=function(t){var e=this.options.defaultScope||s.BindingScopeEnum.Transient,n=new o.Binding(t,e);return this._bindingDictionary.add(t,n),new f.BindingToSyntax(n)},t.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},t.prototype.unbind=function(t){try{this._bindingDictionary.remove(t)}catch(e){throw new Error(u.CANNOT_UNBIND+" "+d.getServiceIdentifierAsString(t))}},t.prototype.unbindAll=function(){this._bindingDictionary=new v.Lookup},t.prototype.isBound=function(t){var e=this._bindingDictionary.hasKey(t);return!e&&this.parent&&(e=this.parent.isBound(t)),e},t.prototype.isBoundNamed=function(t,e){return this.isBoundTagged(t,a.NAMED_TAG,e)},t.prototype.isBoundTagged=function(t,e,n){var r=!1;if(this._bindingDictionary.hasKey(t)){var i=this._bindingDictionary.get(t),o=h.createMockRequest(this,t,e,n);r=i.some(function(t){return t.constraint(o)})}return!r&&this.parent&&(r=this.parent.isBoundTagged(t,e,n)),r},t.prototype.snapshot=function(){this._snapshots.push(y.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},t.prototype.restore=function(){var t=this._snapshots.pop();if(void 0===t)throw new Error(u.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=t.bindings,this._middleware=t.middleware},t.prototype.createChild=function(){var e=new t;return e.parent=this,e},t.prototype.applyMiddleware=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=t.reduce(function(t,e){return e(t)},n)},t.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},t.prototype.get=function(t){return this._get(!1,!1,s.TargetTypeEnum.Variable,t)},t.prototype.getTagged=function(t,e,n){return this._get(!1,!1,s.TargetTypeEnum.Variable,t,e,n)},t.prototype.getNamed=function(t,e){return this.getTagged(t,a.NAMED_TAG,e)},t.prototype.getAll=function(t){return this._get(!0,!0,s.TargetTypeEnum.Variable,t)},t.prototype.getAllTagged=function(t,e,n){return this._get(!1,!0,s.TargetTypeEnum.Variable,t,e,n)},t.prototype.getAllNamed=function(t,e){return this.getAllTagged(t,a.NAMED_TAG,e)},t.prototype.resolve=function(e){var n=new t;return n.bind(e).toSelf(),n.parent=this,n.get(e)},t.prototype._getContainerModuleHelpersFactory=function(){var t=this,e=function(t,e){t._binding.moduleId=e};return function(n){return{bindFunction:function(n){return function(r){var i=t.bind.bind(t)(r);return e(i,n),i}}(n),isboundFunction:function(e){return t.isBound.bind(t)(e)},rebindFunction:function(n){return function(r){var i=t.rebind.bind(t)(r);return e(i,n),i}}(n),unbindFunction:function(e){t.unbind.bind(t)(e)}}}},t.prototype._get=function(t,e,n,r,i,o){var s=null,a={avoidConstraints:t,contextInterceptor:function(t){return t},isMultiInject:e,key:i,serviceIdentifier:r,targetType:n,value:o};if(this._middleware){if(void 0===(s=this._middleware(a))||null===s)throw new Error(u.INVALID_MIDDLEWARE_RETURN)}else s=this._planAndResolve()(a);return s},t.prototype._planAndResolve=function(){var t=this;return function(e){var n=h.plan(t._metadataReader,t,e.isMultiInject,e.targetType,e.serviceIdentifier,e.key,e.value,e.avoidConstraints);return n=e.contextInterceptor(n),l.resolve(n)}},t}();e.Container=m},function(t,e){
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var n;!function(t){!function(e){var n="object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),r=i(t);function i(t,e){return function(n,r){"function"!=typeof t[n]&&Object.defineProperty(t,n,{configurable:!0,writable:!0,value:r}),e&&e(n,r)}}void 0===n.Reflect?n.Reflect=t:r=i(n.Reflect,r),function(t){var e=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,r=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",i=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",o="function"==typeof Object.create,u={__proto__:[]}instanceof Array,s=!o&&!u,a={create:o?function(){return j(Object.create(null))}:u?function(){return j({__proto__:null})}:function(){return j({})},has:s?function(t,n){return e.call(t,n)}:function(t,e){return e in t},get:s?function(t,n){return e.call(t,n)?t[n]:void 0}:function(t,e){return t[e]}},c=Object.getPrototypeOf(Function),h="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,l=h||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var t={},e=[],n=function(){function t(t,e,n){this._index=0,this._keys=t,this._values=e,this._selector=n}return t.prototype["@@iterator"]=function(){return this},t.prototype[i]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var n=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var n=this._find(t,!0);return this._values[n]=e,this},e.prototype.delete=function(e){var n=this._find(e,!1);if(n>=0){for(var r=this._keys.length,i=n+1;i<r;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new n(this._keys,this._values,r)},e.prototype.values=function(){return new n(this._keys,this._values,o)},e.prototype.entries=function(){return new n(this._keys,this._values,u)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[i]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function r(t,e){return t}function o(t,e){return e}function u(t,e){return[t,e]}}():Map,f=h||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function t(){this._map=new l}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[i]=function(){return this.keys()},t}():Set,p=new(h||"function"!=typeof WeakMap?function(){var t=16,n=a.create(),r=i();return function(){function t(){this._key=i()}return t.prototype.has=function(t){var e=o(t,!1);return void 0!==e&&a.has(e,this._key)},t.prototype.get=function(t){var e=o(t,!1);return void 0!==e?a.get(e,this._key):void 0},t.prototype.set=function(t,e){var n=o(t,!0);return n[this._key]=e,this},t.prototype.delete=function(t){var e=o(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=i()},t}();function i(){var t;do{t="@@WeakMap@@"+s()}while(a.has(n,t));return n[t]=!0,t}function o(t,n){if(!e.call(t,r)){if(!n)return;Object.defineProperty(t,r,{value:a.create()})}return t[r]}function u(t,e){for(var n=0;n<e;++n)t[n]=255*Math.random()|0;return t}function s(){var e=function(t){if("function"==typeof Uint8Array)return"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):u(new Uint8Array(t),t);return u(new Array(t),t)}(t);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var n="",r=0;r<t;++r){var i=e[r];4!==r&&6!==r&&8!==r||(n+="-"),i<16&&(n+="0"),n+=i.toString(16).toLowerCase()}return n}}():WeakMap);function d(t,e,n){var r=p.get(t);if(_(r)){if(!n)return;r=new l,p.set(t,r)}var i=r.get(e);if(_(i)){if(!n)return;i=new l,r.set(e,i)}return i}function y(t,e,n){var r=d(e,n,!1);return!_(r)&&function(t){return!!t}(r.has(t))}function v(t,e,n){var r=d(e,n,!1);if(!_(r))return r.get(t)}function m(t,e,n,r){var i=d(n,r,!0);i.set(t,e)}function g(t,e){var n=[],r=d(t,e,!1);if(_(r))return n;for(var o=r.keys(),u=function(t){var e=x(t,i);if(!E(e))throw new TypeError;var n=e.call(t);if(!M(n))throw new TypeError;return n}(o),s=0;;){var a=I(u);if(!a)return n.length=s,n;var c=P(a);try{n[s]=c}catch(t){try{R(u)}finally{throw t}}s++}}function b(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function _(t){return void 0===t}function w(t){return null===t}function M(t){return"object"==typeof t?null!==t:"function"==typeof t}function O(t,e){switch(b(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var n=3===e?"string":5===e?"number":"default",i=x(t,r);if(void 0!==i){var o=i.call(t,n);if(M(o))throw new TypeError;return o}return function(t,e){if("string"===e){var n=t.toString;if(E(n)){var r=n.call(t);if(!M(r))return r}var i=t.valueOf;if(E(i)){var r=i.call(t);if(!M(r))return r}}else{var i=t.valueOf;if(E(i)){var r=i.call(t);if(!M(r))return r}var o=t.toString;if(E(o)){var r=o.call(t);if(!M(r))return r}}throw new TypeError}(t,"default"===n?"number":n)}function S(t){var e=O(t,3);return function(t){return"symbol"==typeof t}(e)?e:function(t){return""+t}(e)}function A(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function E(t){return"function"==typeof t}function T(t){return"function"==typeof t}function x(t,e){var n=t[e];if(void 0!==n&&null!==n){if(!E(n))throw new TypeError;return n}}function P(t){return t.value}function I(t){var e=t.next();return!e.done&&e}function R(t){var e=t.return;e&&e.call(t)}function N(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===c)return e;if(e!==c)return e;var n=t.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return e;var i=r.constructor;return"function"!=typeof i?e:i===t?e:i}function j(t){return t.__=void 0,delete t.__,t}t("decorate",function(t,e,n,r){if(_(n)){if(!A(t))throw new TypeError;if(!T(e))throw new TypeError;return function(t,e){for(var n=t.length-1;n>=0;--n){var r=t[n],i=r(e);if(!_(i)&&!w(i)){if(!T(i))throw new TypeError;e=i}}return e}(t,e)}if(!A(t))throw new TypeError;if(!M(e))throw new TypeError;if(!M(r)&&!_(r)&&!w(r))throw new TypeError;return w(r)&&(r=void 0),n=S(n),function(t,e,n,r){for(var i=t.length-1;i>=0;--i){var o=t[i],u=o(e,n,r);if(!_(u)&&!w(u)){if(!M(u))throw new TypeError;r=u}}return r}(t,e,n,r)}),t("metadata",function(t,e){return function(n,r){if(!M(n))throw new TypeError;if(!_(r)&&!function(t){switch(b(t)){case 3:case 4:return!0;default:return!1}}(r))throw new TypeError;m(t,e,n,r)}}),t("defineMetadata",function(t,e,n,r){if(!M(n))throw new TypeError;_(r)||(r=S(r));return m(t,e,n,r)}),t("hasMetadata",function(t,e,n){if(!M(e))throw new TypeError;_(n)||(n=S(n));return function t(e,n,r){var i=y(e,n,r);if(i)return!0;var o=N(n);if(!w(o))return t(e,o,r);return!1}(t,e,n)}),t("hasOwnMetadata",function(t,e,n){if(!M(e))throw new TypeError;_(n)||(n=S(n));return y(t,e,n)}),t("getMetadata",function(t,e,n){if(!M(e))throw new TypeError;_(n)||(n=S(n));return function t(e,n,r){var i=y(e,n,r);if(i)return v(e,n,r);var o=N(n);if(!w(o))return t(e,o,r);return}(t,e,n)}),t("getOwnMetadata",function(t,e,n){if(!M(e))throw new TypeError;_(n)||(n=S(n));return v(t,e,n)}),t("getMetadataKeys",function(t,e){if(!M(t))throw new TypeError;_(e)||(e=S(e));return function t(e,n){var r=g(e,n);var i=N(e);if(null===i)return r;var o=t(i,n);if(o.length<=0)return r;if(r.length<=0)return o;var u=new f;var s=[];for(var a=0,c=r;a<c.length;a++){var h=c[a],l=u.has(h);l||(u.add(h),s.push(h))}for(var p=0,d=o;p<d.length;p++){var h=d[p],l=u.has(h);l||(u.add(h),s.push(h))}return s}(t,e)}),t("getOwnMetadataKeys",function(t,e){if(!M(t))throw new TypeError;_(e)||(e=S(e));return g(t,e)}),t("deleteMetadata",function(t,e,n){if(!M(e))throw new TypeError;_(n)||(n=S(n));var r=d(e,n,!1);if(_(r))return!1;if(!r.delete(t))return!1;if(r.size>0)return!0;var i=p.get(e);return i.delete(n),i.size>0||(p.delete(e),!0)})}(r)}()}(n||(n={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(260);var r=n(14),i=n(26),o=n(15),u=n(20),s=function(){function t(){}return t.createClassContainer=function(t,e,n,s){var a=new r.Container({defaultScope:"Singleton",autoBindInjectable:!0});return a.bind(o.TYPES.SUBJECT.WEB3_CONNECTIVITY).toConstantValue(new i.Subject),a.bind(o.TYPES.SUBJECT.HUB_STATE_FETCH).toConstantValue(new i.Subject),a.bind(o.TYPES.SUBJECT.CONTRACT_STATE_FETCH).toConstantValue(new i.Subject),a.bind(o.TYPES.SUBJECT.WALLET_STATE_SYNC).toConstantValue(new i.Subject),a.bind(o.TYPES.SUBJECT.WALLET_STATE_POLL).toConstantValue(new i.Subject),a.bind(o.TYPES.EXTERNAL.REST_API_INTERFACE).toConstantValue(t),a.bind(o.TYPES.EXTERNAL.WEB3_SERVICE_INTERFACE).to(e),a.bind(o.TYPES.EXTERNAL.STORAGE_MANAGER_INTERFACE).toConstantValue(n),a.bind(o.TYPES.EXTERNAL.LOGGING_INTERFACE).toConstantValue(s),u.Logging.loggingInterface=s,a},t}();e.WalletClassesContainerFactory=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){this.connected=t,this.accounts=e}return t.DISCONNECTED=new t(!1,[]),t}();e.Web3Connectivity=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){this.connected=t,this.accounts=e}return t.DISCONNECTED=new t(!1,[]),t}();e.ChainConnectivity=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t,e,n,r){this.checkpointSubmitted=t,this.checkpointMerkleRoot=e,this.checkpointBlock=n,this.checkpointUpperbound=r}}();e.RoundState=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this._queue=[],this._pending=!1}return t.prototype.isLocked=function(){return this._pending},t.prototype.acquire=function(){var t=this,e=new Promise(function(e){return t._queue.push(e)});return this._pending||this._dispatchNext(),e},t.prototype.runExclusive=function(t){return this.acquire().then(function(e){var n;try{n=t()}catch(t){throw e(),t}return Promise.resolve(n).then(function(t){return e(),t},function(t){throw e(),t})})},t.prototype._dispatchNext=function(){this._queue.length>0?(this._pending=!0,this._queue.shift()(this._dispatchNext.bind(this))):this._pending=!1},t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(265);e.Mutex=r.default},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(9)),o=function(){function t(t){this._value=t}return Object.defineProperty(t.prototype,"ether",{get:function(){return this._value.dividedBy(t.ether).integerValue(i.default.ROUND_FLOOR).toNumber()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"finney",{get:function(){return this._value.modulo(t.ether).dividedBy(t.finney).integerValue(i.default.ROUND_FLOOR).toNumber()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"szabo",{get:function(){return this._value.modulo(t.finney).dividedBy(t.szabo).integerValue(i.default.ROUND_FLOOR).toNumber()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wei",{get:function(){return this._value.modulo(t.szabo).integerValue(i.default.ROUND_FLOOR).toNumber()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"str",{get:function(){var t=[];return this.ether>0&&t.push(this.ether+" eth"),this.finney>0&&t.push(this.finney+" fny"),this.szabo>0&&t.push(this.szabo+" sbo"),this.wei>0&&0==t.length&&t.push(this.wei+" wei"),0==t.length&&t.push("0"),t.join(" ")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longStr",{get:function(){var t=[];return this.ether>0&&t.push(this.ether+" eth"),this.finney>0&&t.push(this.finney+" fny"),this.szabo>0&&t.push(this.szabo+" sbo"),this.wei>0&&t.push(this.wei+" wei"),0==t.length&&t.push("0 wei"),t.join(" ")},enumerable:!0,configurable:!0}),t.ether=new i.default("1000000000000000000"),t.finney=new i.default("1000000000000000"),t.szabo=new i.default("1000000000000"),t}();e.Balance=o},function(t,e,n){var r=null;t.exports=function(t){"use strict";var e={strict:!1,storeAsString:!1};void 0!==t&&null!==t&&(!0===t.strict&&(e.strict=!0),!0===t.storeAsString&&(e.storeAsString=!0));var i,o,u,s,a={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},c=function(t){throw{name:"SyntaxError",message:t,at:i,text:u}},h=function(t){return t&&t!==o&&c("Expected '"+t+"' instead of '"+o+"'"),o=u.charAt(i),i+=1,o},l=function(){var t,i="";for("-"===o&&(i="-",h("-"));o>="0"&&o<="9";)i+=o,h();if("."===o)for(i+=".";h()&&o>="0"&&o<="9";)i+=o;if("e"===o||"E"===o)for(i+=o,h(),"-"!==o&&"+"!==o||(i+=o,h());o>="0"&&o<="9";)i+=o,h();if(t=+i,isFinite(t))return null==r&&(r=n(113)),i.length>15?!0===e.storeAsString?i:new r(i):t;c("Bad number")},f=function(){var t,e,n,r="";if('"'===o)for(;h();){if('"'===o)return h(),r;if("\\"===o)if(h(),"u"===o){for(n=0,e=0;e<4&&(t=parseInt(h(),16),isFinite(t));e+=1)n=16*n+t;r+=String.fromCharCode(n)}else{if("string"!=typeof a[o])break;r+=a[o]}else r+=o}c("Bad string")},p=function(){for(;o&&o<=" ";)h()};return s=function(){switch(p(),o){case"{":return function(){var t,n={};if("{"===o){if(h("{"),p(),"}"===o)return h("}"),n;for(;o;){if(t=f(),p(),h(":"),!0===e.strict&&Object.hasOwnProperty.call(n,t)&&c('Duplicate key "'+t+'"'),n[t]=s(),p(),"}"===o)return h("}"),n;h(","),p()}}c("Bad object")}();case"[":return function(){var t=[];if("["===o){if(h("["),p(),"]"===o)return h("]"),t;for(;o;){if(t.push(s()),p(),"]"===o)return h("]"),t;h(","),p()}}c("Bad array")}();case'"':return f();case"-":return l();default:return o>="0"&&o<="9"?l():function(){switch(o){case"t":return h("t"),h("r"),h("u"),h("e"),!0;case"f":return h("f"),h("a"),h("l"),h("s"),h("e"),!1;case"n":return h("n"),h("u"),h("l"),h("l"),null}c("Unexpected '"+o+"'")}()}},function(t,e){var n;return u=t+"",i=0,o=" ",n=s(),p(),o&&c("Syntax error"),"function"==typeof e?function t(n,r){var i,o=n[r];return o&&"object"==typeof o&&Object.keys(o).forEach(function(e){void 0!==(i=t(o,e))?o[e]=i:delete o[e]}),e.call(n,r,o)}({"":n},""):n}}},function(t,e,n){var r=n(113),i=t.exports;!function(){"use strict";var t,e,n,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,u={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function s(t){return o.lastIndex=0,o.test(t)?'"'+t.replace(o,function(t){var e=u[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}"function"!=typeof i.stringify&&(i.stringify=function(i,o,u){var a;if(t="",e="","number"==typeof u)for(a=0;a<u;a+=1)e+=" ";else"string"==typeof u&&(e=u);if(n=o,o&&"function"!=typeof o&&("object"!=typeof o||"number"!=typeof o.length))throw new Error("JSON.stringify");return function i(o,u){var a,c,h,l,f,p=t,d=u[o],y=null!=d&&(d instanceof r||d.isBigNumber);switch(d&&"object"==typeof d&&"function"==typeof d.toJSON&&(d=d.toJSON(o)),"function"==typeof n&&(d=n.call(u,o,d)),typeof d){case"string":return y?d:s(d);case"number":return isFinite(d)?String(d):"null";case"boolean":case"null":return String(d);case"object":if(!d)return"null";if(t+=e,f=[],"[object Array]"===Object.prototype.toString.apply(d)){for(l=d.length,a=0;a<l;a+=1)f[a]=i(a,d)||"null";return h=0===f.length?"[]":t?"[\n"+t+f.join(",\n"+t)+"\n"+p+"]":"["+f.join(",")+"]",t=p,h}if(n&&"object"==typeof n)for(l=n.length,a=0;a<l;a+=1)"string"==typeof n[a]&&(h=i(c=n[a],d))&&f.push(s(c)+(t?": ":":")+h);else Object.keys(d).forEach(function(e){var n=i(e,d);n&&f.push(s(e)+(t?": ":":")+n)});return h=0===f.length?"{}":t?"{\n"+t+f.join(",\n"+t)+"\n"+p+"}":"{"+f.join(",")+"}",t=p,h}}("",{"":i})})}()},function(t,e,n){var r=n(269).stringify,i=n(268);t.exports=function(t){return{parse:i(t),stringify:r}},t.exports.parse=i(),t.exports.stringify=r},function(t,e){t.exports=require("crypto")},function(t,e,n){t.exports=n(271)},function(t,e,n){t.exports=function(t,e){var r=n(272),i="function"==typeof e;if(t>65536){if(!i)throw new Error("Requested too many random bytes.");e(new Error("Requested too many random bytes."))}if(void 0!==r&&r.randomBytes){if(!i)return"0x"+r.randomBytes(t).toString("hex");r.randomBytes(t,function(t,n){t?e(a):e(null,"0x"+n.toString("hex"))})}else{var o;if(void 0!==r?o=r:"undefined"!=typeof msCrypto&&(o=msCrypto),o&&o.getRandomValues){var u=o.getRandomValues(new Uint8Array(t)),s="0x"+Array.from(u).map(function(t){return t.toString(16)}).join("");if(!i)return s;e(null,s)}else{var a=new Error('No "crypto" object available. This Browser doesn\'t support generating secure random bytes.');if(!i)throw a;e(a)}}}},function(t,e,n){var r=n(69),i=n(114),o=n(115),u=function(t){var e=typeof t;if("string"===e)return o.isHexStrict(t)?new i(t.replace(/0x/i,""),16):new i(t,10);if("number"===e)return new i(t);if(o.isBigNumber(t))return new i(t.toString(10));if(o.isBN(t))return t;throw new Error(t+" is not a number")},s=function(t,e,n){var r,s;if("bytes"===(t=function(t){return t.startsWith("int[")?"int256"+t.slice(3):"int"===t?"int256":t.startsWith("uint[")?"uint256"+t.slice(4):"uint"===t?"uint256":t.startsWith("fixed[")?"fixed128x128"+t.slice(5):"fixed"===t?"fixed128x128":t.startsWith("ufixed[")?"ufixed128x128"+t.slice(6):"ufixed"===t?"ufixed128x128":t}(t))){if(e.replace(/^0x/i,"").length%2!=0)throw new Error("Invalid bytes characters "+e.length);return e}if("string"===t)return o.utf8ToHex(e);if("bool"===t)return e?"01":"00";if(t.startsWith("address")){if(r=n?64:40,!o.isAddress(e))throw new Error(e+" is not a valid address, or the checksum is invalid.");return o.leftPad(e.toLowerCase(),r)}if(r=function(t){var e=/^\D+(\d+).*$/.exec(t);return e?parseInt(e[1],10):null}(t),t.startsWith("bytes")){if(!r)throw new Error("bytes[] not yet supported in solidity");if(n&&(r=32),r<1||r>32||r<e.replace(/^0x/i,"").length/2)throw new Error("Invalid bytes"+r+" for "+e);return o.rightPad(e,2*r)}if(t.startsWith("uint")){if(r%8||r<8||r>256)throw new Error("Invalid uint"+r+" size");if((s=u(e)).bitLength()>r)throw new Error("Supplied uint exceeds width: "+r+" vs "+s.bitLength());if(s.lt(new i(0)))throw new Error("Supplied uint "+s.toString()+" is negative");return r?o.leftPad(s.toString("hex"),r/8*2):s}if(t.startsWith("int")){if(r%8||r<8||r>256)throw new Error("Invalid int"+r+" size");if((s=u(e)).bitLength()>r)throw new Error("Supplied int exceeds width: "+r+" vs "+s.bitLength());return s.lt(new i(0))?s.toTwos(r).toString("hex"):r?o.leftPad(s.toString("hex"),r/8*2):s}throw new Error("Unsupported or invalid type: "+t)},a=function(t){if(r.isArray(t))throw new Error("Autodetection of array types is not supported.");var e,n,u="";if(r.isObject(t)&&(t.hasOwnProperty("v")||t.hasOwnProperty("t")||t.hasOwnProperty("value")||t.hasOwnProperty("type"))?(e=t.t||t.type,u=t.v||t.value):(e=o.toHex(t,!0),u=o.toHex(t),e.startsWith("int")||e.startsWith("uint")||(e="bytes")),!e.startsWith("int")&&!e.startsWith("uint")||"string"!=typeof u||/^(-)?0x/i.test(u)||(u=new i(u)),r.isArray(u)){if((n=function(t){var e=/^\D+\d*\[(\d+)\]$/.exec(t);return e?parseInt(e[1],10):null}(e))&&u.length!==n)throw new Error(e+" is not matching the given array "+JSON.stringify(u));n=u.length}return r.isArray(u)?u.map(function(t){return s(e,t,n).toString("hex").replace("0x","")}).join(""):s(e,u,n).toString("hex").replace("0x","")};t.exports=function(){var t=Array.prototype.slice.call(arguments),e=r.map(t,a);return o.sha3("0x"+e.join(""))}},function(t,e){var n="0123456789abcdef".split(""),r=[1,256,65536,16777216],i=[0,8,16,24],o=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],u=function(t){var e,n,r,i,u,s,a,c,h,l,f,p,d,y,v,m,g,b,_,w,M,O,S,A,E,T,x,P,I,R,N,j,C,k,L,D,B,U,W,F,V,G,q,H,z,Y,J,K,Z,$,X,Q,tt,et,nt,rt,it,ot,ut,st,at,ct,ht;for(r=0;r<48;r+=2)i=t[0]^t[10]^t[20]^t[30]^t[40],u=t[1]^t[11]^t[21]^t[31]^t[41],s=t[2]^t[12]^t[22]^t[32]^t[42],a=t[3]^t[13]^t[23]^t[33]^t[43],c=t[4]^t[14]^t[24]^t[34]^t[44],h=t[5]^t[15]^t[25]^t[35]^t[45],l=t[6]^t[16]^t[26]^t[36]^t[46],f=t[7]^t[17]^t[27]^t[37]^t[47],e=(p=t[8]^t[18]^t[28]^t[38]^t[48])^(s<<1|a>>>31),n=(d=t[9]^t[19]^t[29]^t[39]^t[49])^(a<<1|s>>>31),t[0]^=e,t[1]^=n,t[10]^=e,t[11]^=n,t[20]^=e,t[21]^=n,t[30]^=e,t[31]^=n,t[40]^=e,t[41]^=n,e=i^(c<<1|h>>>31),n=u^(h<<1|c>>>31),t[2]^=e,t[3]^=n,t[12]^=e,t[13]^=n,t[22]^=e,t[23]^=n,t[32]^=e,t[33]^=n,t[42]^=e,t[43]^=n,e=s^(l<<1|f>>>31),n=a^(f<<1|l>>>31),t[4]^=e,t[5]^=n,t[14]^=e,t[15]^=n,t[24]^=e,t[25]^=n,t[34]^=e,t[35]^=n,t[44]^=e,t[45]^=n,e=c^(p<<1|d>>>31),n=h^(d<<1|p>>>31),t[6]^=e,t[7]^=n,t[16]^=e,t[17]^=n,t[26]^=e,t[27]^=n,t[36]^=e,t[37]^=n,t[46]^=e,t[47]^=n,e=l^(i<<1|u>>>31),n=f^(u<<1|i>>>31),t[8]^=e,t[9]^=n,t[18]^=e,t[19]^=n,t[28]^=e,t[29]^=n,t[38]^=e,t[39]^=n,t[48]^=e,t[49]^=n,y=t[0],v=t[1],Y=t[11]<<4|t[10]>>>28,J=t[10]<<4|t[11]>>>28,P=t[20]<<3|t[21]>>>29,I=t[21]<<3|t[20]>>>29,st=t[31]<<9|t[30]>>>23,at=t[30]<<9|t[31]>>>23,G=t[40]<<18|t[41]>>>14,q=t[41]<<18|t[40]>>>14,k=t[2]<<1|t[3]>>>31,L=t[3]<<1|t[2]>>>31,m=t[13]<<12|t[12]>>>20,g=t[12]<<12|t[13]>>>20,K=t[22]<<10|t[23]>>>22,Z=t[23]<<10|t[22]>>>22,R=t[33]<<13|t[32]>>>19,N=t[32]<<13|t[33]>>>19,ct=t[42]<<2|t[43]>>>30,ht=t[43]<<2|t[42]>>>30,et=t[5]<<30|t[4]>>>2,nt=t[4]<<30|t[5]>>>2,D=t[14]<<6|t[15]>>>26,B=t[15]<<6|t[14]>>>26,b=t[25]<<11|t[24]>>>21,_=t[24]<<11|t[25]>>>21,$=t[34]<<15|t[35]>>>17,X=t[35]<<15|t[34]>>>17,j=t[45]<<29|t[44]>>>3,C=t[44]<<29|t[45]>>>3,A=t[6]<<28|t[7]>>>4,E=t[7]<<28|t[6]>>>4,rt=t[17]<<23|t[16]>>>9,it=t[16]<<23|t[17]>>>9,U=t[26]<<25|t[27]>>>7,W=t[27]<<25|t[26]>>>7,w=t[36]<<21|t[37]>>>11,M=t[37]<<21|t[36]>>>11,Q=t[47]<<24|t[46]>>>8,tt=t[46]<<24|t[47]>>>8,H=t[8]<<27|t[9]>>>5,z=t[9]<<27|t[8]>>>5,T=t[18]<<20|t[19]>>>12,x=t[19]<<20|t[18]>>>12,ot=t[29]<<7|t[28]>>>25,ut=t[28]<<7|t[29]>>>25,F=t[38]<<8|t[39]>>>24,V=t[39]<<8|t[38]>>>24,O=t[48]<<14|t[49]>>>18,S=t[49]<<14|t[48]>>>18,t[0]=y^~m&b,t[1]=v^~g&_,t[10]=A^~T&P,t[11]=E^~x&I,t[20]=k^~D&U,t[21]=L^~B&W,t[30]=H^~Y&K,t[31]=z^~J&Z,t[40]=et^~rt&ot,t[41]=nt^~it&ut,t[2]=m^~b&w,t[3]=g^~_&M,t[12]=T^~P&R,t[13]=x^~I&N,t[22]=D^~U&F,t[23]=B^~W&V,t[32]=Y^~K&$,t[33]=J^~Z&X,t[42]=rt^~ot&st,t[43]=it^~ut&at,t[4]=b^~w&O,t[5]=_^~M&S,t[14]=P^~R&j,t[15]=I^~N&C,t[24]=U^~F&G,t[25]=W^~V&q,t[34]=K^~$&Q,t[35]=Z^~X&tt,t[44]=ot^~st&ct,t[45]=ut^~at&ht,t[6]=w^~O&y,t[7]=M^~S&v,t[16]=R^~j&A,t[17]=N^~C&E,t[26]=F^~G&k,t[27]=V^~q&L,t[36]=$^~Q&H,t[37]=X^~tt&z,t[46]=st^~ct&et,t[47]=at^~ht&nt,t[8]=O^~y&m,t[9]=S^~v&g,t[18]=j^~A&T,t[19]=C^~E&x,t[28]=G^~k&D,t[29]=q^~L&B,t[38]=Q^~H&Y,t[39]=tt^~z&J,t[48]=ct^~et&rt,t[49]=ht^~nt&it,t[0]^=o[r],t[1]^=o[r+1]},s=function(t){return function(e){var o;if("0x"===e.slice(0,2)){o=[];for(var s=2,a=e.length;s<a;s+=2)o.push(parseInt(e.slice(s,s+2),16))}else o=e;return function(t,e){for(var o,s=e.length,a=t.blocks,c=t.blockCount<<2,h=t.blockCount,l=t.outputBlocks,f=t.s,p=0;p<s;){if(t.reset)for(t.reset=!1,a[0]=t.block,v=1;v<h+1;++v)a[v]=0;if("string"!=typeof e)for(v=t.start;p<s&&v<c;++p)a[v>>2]|=e[p]<<i[3&v++];else for(v=t.start;p<s&&v<c;++p)(o=e.charCodeAt(p))<128?a[v>>2]|=o<<i[3&v++]:o<2048?(a[v>>2]|=(192|o>>6)<<i[3&v++],a[v>>2]|=(128|63&o)<<i[3&v++]):o<55296||o>=57344?(a[v>>2]|=(224|o>>12)<<i[3&v++],a[v>>2]|=(128|o>>6&63)<<i[3&v++],a[v>>2]|=(128|63&o)<<i[3&v++]):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++p)),a[v>>2]|=(240|o>>18)<<i[3&v++],a[v>>2]|=(128|o>>12&63)<<i[3&v++],a[v>>2]|=(128|o>>6&63)<<i[3&v++],a[v>>2]|=(128|63&o)<<i[3&v++]);if(t.lastByteIndex=v,v>=c){for(t.start=v-c,t.block=a[h],v=0;v<h;++v)f[v]^=a[v];u(f),t.reset=!0}else t.start=v}if(a[(v=t.lastByteIndex)>>2]|=r[3&v],t.lastByteIndex===c)for(a[0]=a[h],v=1;v<h+1;++v)a[v]=0;for(a[h-1]|=2147483648,v=0;v<h;++v)f[v]^=a[v];u(f);for(var d,y="",v=0,m=0;m<l;){for(v=0;v<h&&m<l;++v,++m)d=f[v],y+=n[d>>4&15]+n[15&d]+n[d>>12&15]+n[d>>8&15]+n[d>>20&15]+n[d>>16&15]+n[d>>28&15]+n[d>>24&15];m%h==0&&(u(f),v=0)}return"0x"+y}(function(t){return{blocks:[],reset:!0,block:0,start:0,blockCount:1600-(t<<1)>>5,outputBlocks:t>>5,s:function(t){return[].concat(t,t,t,t,t)}([0,0,0,0,0,0,0,0,0,0])}}(t),o)}};t.exports={keccak256:s(256),keccak512:s(512),keccak256s:s(256),keccak512s:s(512)}},function(t,e,n){(function(t){var r;/*! https://mths.be/utf8js v2.0.0 by @mathias */!function(i){var o="object"==typeof e&&e,u=("object"==typeof t&&t&&t.exports,"object"==typeof global&&global);u.global!==u&&u.window;var s,a,c,h=String.fromCharCode;function l(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function f(t){if(t>=55296&&t<=57343)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function p(t,e){return h(t>>e&63|128)}function d(t){if(0==(4294967168&t))return h(t);var e="";return 0==(4294965248&t)?e=h(t>>6&31|192):0==(4294901760&t)?(f(t),e=h(t>>12&15|224),e+=p(t,6)):0==(4292870144&t)&&(e=h(t>>18&7|240),e+=p(t,12),e+=p(t,6)),e+=h(63&t|128)}function y(){if(c>=a)throw Error("Invalid byte index");var t=255&s[c];if(c++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function v(){var t,e;if(c>a)throw Error("Invalid byte index");if(c==a)return!1;if(t=255&s[c],c++,0==(128&t))return t;if(192==(224&t)){if((e=(31&t)<<6|y())>=128)return e;throw Error("Invalid continuation byte")}if(224==(240&t)){if((e=(15&t)<<12|y()<<6|y())>=2048)return f(e),e;throw Error("Invalid continuation byte")}if(240==(248&t)&&(e=(15&t)<<18|y()<<12|y()<<6|y())>=65536&&e<=1114111)return e;throw Error("Invalid UTF-8 detected")}var m={version:"2.0.0",encode:function(t){for(var e=l(t),n=e.length,r=-1,i="";++r<n;)i+=d(e[r]);return i},decode:function(t){s=l(t),a=s.length,c=0;for(var e,n=[];!1!==(e=v());)n.push(e);return function(t){for(var e,n=t.length,r=-1,i="";++r<n;)(e=t[r])>65535&&(i+=h((e-=65536)>>>10&1023|55296),e=56320|1023&e),i+=h(e);return i}(n)}};void 0===(r=function(){return m}.call(e,n,e,t))||(t.exports=r)}()}).call(this,n(44)(t))},function(t,e){t.exports=function(t){if("string"!=typeof t)throw new Error("[is-hex-prefixed] value must be type 'string', is currently type "+typeof t+", while checking isHexPrefixed.");return"0x"===t.slice(0,2)}},function(t,e,n){var r=n(277);t.exports=function(t){return"string"!=typeof t?t:r(t)?t.slice(2):t}},function(t,e,n){(function(t){!function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}function o(t,e,n){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(n=e,e=10),this._init(t||0,e||10,n||"be"))}var u;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{u=n(68).Buffer}catch(t){}function s(t,e,n){for(var r=0,i=Math.min(t.length,n),o=e;o<i;o++){var u=t.charCodeAt(o)-48;r<<=4,r|=u>=49&&u<=54?u-49+10:u>=17&&u<=22?u-17+10:15&u}return r}function a(t,e,n,r){for(var i=0,o=Math.min(t.length,n),u=e;u<o;u++){var s=t.charCodeAt(u)-48;i*=r,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,n){if("number"==typeof t)return this._initNumber(t,e,n);if("object"==typeof t)return this._initArray(t,e,n);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&i++,16===e?this._parseHex(t,i):this._parseBase(t,e,i),"-"===t[0]&&(this.negative=1),this.strip(),"le"===n&&this._initArray(this.toArray(),e,n)},o.prototype._initNumber=function(t,e,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),e,n)},o.prototype._initArray=function(t,e,n){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,u,s=0;if("be"===n)for(i=t.length-1,o=0;i>=0;i-=3)u=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=u<<s&67108863,this.words[o+1]=u>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===n)for(i=0,o=0;i<t.length;i+=3)u=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=u<<s&67108863,this.words[o+1]=u>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var r,i,o=0;for(n=t.length-6,r=0;n>=e;n-=6)i=s(t,n,n+6),this.words[r]|=i<<o&67108863,this.words[r+1]|=i>>>26-o&4194303,(o+=24)>=26&&(o-=26,r++);n+6!==e&&(i=s(t,e,n+6),this.words[r]|=i<<o&67108863,this.words[r+1]|=i>>>26-o&4194303),this.strip()},o.prototype._parseBase=function(t,e,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=e)r++;r--,i=i/e|0;for(var o=t.length-n,u=o%r,s=Math.min(o,o-u)+n,c=0,h=n;h<s;h+=r)c=a(t,h,h+r,e),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==u){var l=1;for(c=a(t,h,t.length,e),h=0;h<u;h++)l*=e;this.imuln(l),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],l=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,e,n){n.negative=e.negative^t.negative;var r=t.length+e.length|0;n.length=r,r=r-1|0;var i=0|t.words[0],o=0|e.words[0],u=i*o,s=67108863&u,a=u/67108864|0;n.words[0]=s;for(var c=1;c<r;c++){for(var h=a>>>26,l=67108863&a,f=Math.min(c,e.length-1),p=Math.max(0,c-t.length+1);p<=f;p++){var d=c-p|0;h+=(u=(i=0|t.words[d])*(o=0|e.words[p])+l)/67108864|0,l=67108863&u}n.words[c]=0|l,a=0|h}return 0!==a?n.words[c]=0|a:n.length--,n.strip()}o.prototype.toString=function(t,e){var n;if(t=t||10,e=0|e||1,16===t||"hex"===t){n="";for(var i=0,o=0,u=0;u<this.length;u++){var s=this.words[u],a=(16777215&(s<<i|o)).toString(16);n=0!==(o=s>>>24-i&16777215)||u!==this.length-1?c[6-a.length]+a+n:a+n,(i+=2)>=26&&(i-=26,u--)}for(0!==o&&(n=o.toString(16)+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var f=h[t],p=l[t];n="";var d=this.clone();for(d.negative=0;!d.isZero();){var y=d.modn(p).toString(t);n=(d=d.idivn(p)).isZero()?y+n:c[f-y.length]+y+n}for(this.isZero()&&(n="0"+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return r(void 0!==u),this.toArrayLike(u,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,n){var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0"),this.strip();var u,s,a="le"===e,c=new t(o),h=this.clone();if(a){for(s=0;!h.isZero();s++)u=h.andln(255),h.iushrn(8),c[s]=u;for(;s<o;s++)c[s]=0}else{for(s=0;s<o-i;s++)c[s]=0;for(s=0;!h.isZero();s++)u=h.andln(255),h.iushrn(8),c[o-s-1]=u}return c},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,n=0;return e>=4096&&(n+=13,e>>>=13),e>=64&&(n+=7,e>>>=7),e>=8&&(n+=4,e>>>=4),e>=2&&(n+=2,e>>>=2),n+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,n=0;return 0==(8191&e)&&(n+=13,e>>>=13),0==(127&e)&&(n+=7,e>>>=7),0==(15&e)&&(n+=4,e>>>=4),0==(3&e)&&(n+=2,e>>>=2),0==(1&e)&&n++,n},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var n=this._zeroBits(this.words[e]);if(t+=n,26!==n)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var n=0;n<e.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,n;this.length>t.length?(e=this,n=t):(e=t,n=this);for(var r=0;r<n.length;r++)this.words[r]=e.words[r]^n.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),n=t%26;this._expand(e),n>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var n=t/26|0,i=t%26;return this._expand(n+1),this.words[n]=e?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,n,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(n=this,r=t):(n=t,r=this);for(var i=0,o=0;o<r.length;o++)e=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<n.length;o++)e=(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n,r,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=t):(n=t,r=this);for(var o=0,u=0;u<r.length;u++)o=(e=(0|n.words[u])-(0|r.words[u])+o)>>26,this.words[u]=67108863&e;for(;0!==o&&u<n.length;u++)o=(e=(0|n.words[u])+o)>>26,this.words[u]=67108863&e;if(0===o&&u<n.length&&n!==this)for(;u<n.length;u++)this.words[u]=n.words[u];return this.length=Math.max(this.length,u),n!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,n){var r,i,o,u=t.words,s=e.words,a=n.words,c=0,h=0|u[0],l=8191&h,f=h>>>13,p=0|u[1],d=8191&p,y=p>>>13,v=0|u[2],m=8191&v,g=v>>>13,b=0|u[3],_=8191&b,w=b>>>13,M=0|u[4],O=8191&M,S=M>>>13,A=0|u[5],E=8191&A,T=A>>>13,x=0|u[6],P=8191&x,I=x>>>13,R=0|u[7],N=8191&R,j=R>>>13,C=0|u[8],k=8191&C,L=C>>>13,D=0|u[9],B=8191&D,U=D>>>13,W=0|s[0],F=8191&W,V=W>>>13,G=0|s[1],q=8191&G,H=G>>>13,z=0|s[2],Y=8191&z,J=z>>>13,K=0|s[3],Z=8191&K,$=K>>>13,X=0|s[4],Q=8191&X,tt=X>>>13,et=0|s[5],nt=8191&et,rt=et>>>13,it=0|s[6],ot=8191&it,ut=it>>>13,st=0|s[7],at=8191&st,ct=st>>>13,ht=0|s[8],lt=8191&ht,ft=ht>>>13,pt=0|s[9],dt=8191&pt,yt=pt>>>13;n.negative=t.negative^e.negative,n.length=19;var vt=(c+(r=Math.imul(l,F))|0)+((8191&(i=(i=Math.imul(l,V))+Math.imul(f,F)|0))<<13)|0;c=((o=Math.imul(f,V))+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(d,F),i=(i=Math.imul(d,V))+Math.imul(y,F)|0,o=Math.imul(y,V);var mt=(c+(r=r+Math.imul(l,q)|0)|0)+((8191&(i=(i=i+Math.imul(l,H)|0)+Math.imul(f,q)|0))<<13)|0;c=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(mt>>>26)|0,mt&=67108863,r=Math.imul(m,F),i=(i=Math.imul(m,V))+Math.imul(g,F)|0,o=Math.imul(g,V),r=r+Math.imul(d,q)|0,i=(i=i+Math.imul(d,H)|0)+Math.imul(y,q)|0,o=o+Math.imul(y,H)|0;var gt=(c+(r=r+Math.imul(l,Y)|0)|0)+((8191&(i=(i=i+Math.imul(l,J)|0)+Math.imul(f,Y)|0))<<13)|0;c=((o=o+Math.imul(f,J)|0)+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(_,F),i=(i=Math.imul(_,V))+Math.imul(w,F)|0,o=Math.imul(w,V),r=r+Math.imul(m,q)|0,i=(i=i+Math.imul(m,H)|0)+Math.imul(g,q)|0,o=o+Math.imul(g,H)|0,r=r+Math.imul(d,Y)|0,i=(i=i+Math.imul(d,J)|0)+Math.imul(y,Y)|0,o=o+Math.imul(y,J)|0;var bt=(c+(r=r+Math.imul(l,Z)|0)|0)+((8191&(i=(i=i+Math.imul(l,$)|0)+Math.imul(f,Z)|0))<<13)|0;c=((o=o+Math.imul(f,$)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(O,F),i=(i=Math.imul(O,V))+Math.imul(S,F)|0,o=Math.imul(S,V),r=r+Math.imul(_,q)|0,i=(i=i+Math.imul(_,H)|0)+Math.imul(w,q)|0,o=o+Math.imul(w,H)|0,r=r+Math.imul(m,Y)|0,i=(i=i+Math.imul(m,J)|0)+Math.imul(g,Y)|0,o=o+Math.imul(g,J)|0,r=r+Math.imul(d,Z)|0,i=(i=i+Math.imul(d,$)|0)+Math.imul(y,Z)|0,o=o+Math.imul(y,$)|0;var _t=(c+(r=r+Math.imul(l,Q)|0)|0)+((8191&(i=(i=i+Math.imul(l,tt)|0)+Math.imul(f,Q)|0))<<13)|0;c=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(E,F),i=(i=Math.imul(E,V))+Math.imul(T,F)|0,o=Math.imul(T,V),r=r+Math.imul(O,q)|0,i=(i=i+Math.imul(O,H)|0)+Math.imul(S,q)|0,o=o+Math.imul(S,H)|0,r=r+Math.imul(_,Y)|0,i=(i=i+Math.imul(_,J)|0)+Math.imul(w,Y)|0,o=o+Math.imul(w,J)|0,r=r+Math.imul(m,Z)|0,i=(i=i+Math.imul(m,$)|0)+Math.imul(g,Z)|0,o=o+Math.imul(g,$)|0,r=r+Math.imul(d,Q)|0,i=(i=i+Math.imul(d,tt)|0)+Math.imul(y,Q)|0,o=o+Math.imul(y,tt)|0;var wt=(c+(r=r+Math.imul(l,nt)|0)|0)+((8191&(i=(i=i+Math.imul(l,rt)|0)+Math.imul(f,nt)|0))<<13)|0;c=((o=o+Math.imul(f,rt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(P,F),i=(i=Math.imul(P,V))+Math.imul(I,F)|0,o=Math.imul(I,V),r=r+Math.imul(E,q)|0,i=(i=i+Math.imul(E,H)|0)+Math.imul(T,q)|0,o=o+Math.imul(T,H)|0,r=r+Math.imul(O,Y)|0,i=(i=i+Math.imul(O,J)|0)+Math.imul(S,Y)|0,o=o+Math.imul(S,J)|0,r=r+Math.imul(_,Z)|0,i=(i=i+Math.imul(_,$)|0)+Math.imul(w,Z)|0,o=o+Math.imul(w,$)|0,r=r+Math.imul(m,Q)|0,i=(i=i+Math.imul(m,tt)|0)+Math.imul(g,Q)|0,o=o+Math.imul(g,tt)|0,r=r+Math.imul(d,nt)|0,i=(i=i+Math.imul(d,rt)|0)+Math.imul(y,nt)|0,o=o+Math.imul(y,rt)|0;var Mt=(c+(r=r+Math.imul(l,ot)|0)|0)+((8191&(i=(i=i+Math.imul(l,ut)|0)+Math.imul(f,ot)|0))<<13)|0;c=((o=o+Math.imul(f,ut)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(N,F),i=(i=Math.imul(N,V))+Math.imul(j,F)|0,o=Math.imul(j,V),r=r+Math.imul(P,q)|0,i=(i=i+Math.imul(P,H)|0)+Math.imul(I,q)|0,o=o+Math.imul(I,H)|0,r=r+Math.imul(E,Y)|0,i=(i=i+Math.imul(E,J)|0)+Math.imul(T,Y)|0,o=o+Math.imul(T,J)|0,r=r+Math.imul(O,Z)|0,i=(i=i+Math.imul(O,$)|0)+Math.imul(S,Z)|0,o=o+Math.imul(S,$)|0,r=r+Math.imul(_,Q)|0,i=(i=i+Math.imul(_,tt)|0)+Math.imul(w,Q)|0,o=o+Math.imul(w,tt)|0,r=r+Math.imul(m,nt)|0,i=(i=i+Math.imul(m,rt)|0)+Math.imul(g,nt)|0,o=o+Math.imul(g,rt)|0,r=r+Math.imul(d,ot)|0,i=(i=i+Math.imul(d,ut)|0)+Math.imul(y,ot)|0,o=o+Math.imul(y,ut)|0;var Ot=(c+(r=r+Math.imul(l,at)|0)|0)+((8191&(i=(i=i+Math.imul(l,ct)|0)+Math.imul(f,at)|0))<<13)|0;c=((o=o+Math.imul(f,ct)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,r=Math.imul(k,F),i=(i=Math.imul(k,V))+Math.imul(L,F)|0,o=Math.imul(L,V),r=r+Math.imul(N,q)|0,i=(i=i+Math.imul(N,H)|0)+Math.imul(j,q)|0,o=o+Math.imul(j,H)|0,r=r+Math.imul(P,Y)|0,i=(i=i+Math.imul(P,J)|0)+Math.imul(I,Y)|0,o=o+Math.imul(I,J)|0,r=r+Math.imul(E,Z)|0,i=(i=i+Math.imul(E,$)|0)+Math.imul(T,Z)|0,o=o+Math.imul(T,$)|0,r=r+Math.imul(O,Q)|0,i=(i=i+Math.imul(O,tt)|0)+Math.imul(S,Q)|0,o=o+Math.imul(S,tt)|0,r=r+Math.imul(_,nt)|0,i=(i=i+Math.imul(_,rt)|0)+Math.imul(w,nt)|0,o=o+Math.imul(w,rt)|0,r=r+Math.imul(m,ot)|0,i=(i=i+Math.imul(m,ut)|0)+Math.imul(g,ot)|0,o=o+Math.imul(g,ut)|0,r=r+Math.imul(d,at)|0,i=(i=i+Math.imul(d,ct)|0)+Math.imul(y,at)|0,o=o+Math.imul(y,ct)|0;var St=(c+(r=r+Math.imul(l,lt)|0)|0)+((8191&(i=(i=i+Math.imul(l,ft)|0)+Math.imul(f,lt)|0))<<13)|0;c=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(B,F),i=(i=Math.imul(B,V))+Math.imul(U,F)|0,o=Math.imul(U,V),r=r+Math.imul(k,q)|0,i=(i=i+Math.imul(k,H)|0)+Math.imul(L,q)|0,o=o+Math.imul(L,H)|0,r=r+Math.imul(N,Y)|0,i=(i=i+Math.imul(N,J)|0)+Math.imul(j,Y)|0,o=o+Math.imul(j,J)|0,r=r+Math.imul(P,Z)|0,i=(i=i+Math.imul(P,$)|0)+Math.imul(I,Z)|0,o=o+Math.imul(I,$)|0,r=r+Math.imul(E,Q)|0,i=(i=i+Math.imul(E,tt)|0)+Math.imul(T,Q)|0,o=o+Math.imul(T,tt)|0,r=r+Math.imul(O,nt)|0,i=(i=i+Math.imul(O,rt)|0)+Math.imul(S,nt)|0,o=o+Math.imul(S,rt)|0,r=r+Math.imul(_,ot)|0,i=(i=i+Math.imul(_,ut)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,ut)|0,r=r+Math.imul(m,at)|0,i=(i=i+Math.imul(m,ct)|0)+Math.imul(g,at)|0,o=o+Math.imul(g,ct)|0,r=r+Math.imul(d,lt)|0,i=(i=i+Math.imul(d,ft)|0)+Math.imul(y,lt)|0,o=o+Math.imul(y,ft)|0;var At=(c+(r=r+Math.imul(l,dt)|0)|0)+((8191&(i=(i=i+Math.imul(l,yt)|0)+Math.imul(f,dt)|0))<<13)|0;c=((o=o+Math.imul(f,yt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(B,q),i=(i=Math.imul(B,H))+Math.imul(U,q)|0,o=Math.imul(U,H),r=r+Math.imul(k,Y)|0,i=(i=i+Math.imul(k,J)|0)+Math.imul(L,Y)|0,o=o+Math.imul(L,J)|0,r=r+Math.imul(N,Z)|0,i=(i=i+Math.imul(N,$)|0)+Math.imul(j,Z)|0,o=o+Math.imul(j,$)|0,r=r+Math.imul(P,Q)|0,i=(i=i+Math.imul(P,tt)|0)+Math.imul(I,Q)|0,o=o+Math.imul(I,tt)|0,r=r+Math.imul(E,nt)|0,i=(i=i+Math.imul(E,rt)|0)+Math.imul(T,nt)|0,o=o+Math.imul(T,rt)|0,r=r+Math.imul(O,ot)|0,i=(i=i+Math.imul(O,ut)|0)+Math.imul(S,ot)|0,o=o+Math.imul(S,ut)|0,r=r+Math.imul(_,at)|0,i=(i=i+Math.imul(_,ct)|0)+Math.imul(w,at)|0,o=o+Math.imul(w,ct)|0,r=r+Math.imul(m,lt)|0,i=(i=i+Math.imul(m,ft)|0)+Math.imul(g,lt)|0,o=o+Math.imul(g,ft)|0;var Et=(c+(r=r+Math.imul(d,dt)|0)|0)+((8191&(i=(i=i+Math.imul(d,yt)|0)+Math.imul(y,dt)|0))<<13)|0;c=((o=o+Math.imul(y,yt)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(B,Y),i=(i=Math.imul(B,J))+Math.imul(U,Y)|0,o=Math.imul(U,J),r=r+Math.imul(k,Z)|0,i=(i=i+Math.imul(k,$)|0)+Math.imul(L,Z)|0,o=o+Math.imul(L,$)|0,r=r+Math.imul(N,Q)|0,i=(i=i+Math.imul(N,tt)|0)+Math.imul(j,Q)|0,o=o+Math.imul(j,tt)|0,r=r+Math.imul(P,nt)|0,i=(i=i+Math.imul(P,rt)|0)+Math.imul(I,nt)|0,o=o+Math.imul(I,rt)|0,r=r+Math.imul(E,ot)|0,i=(i=i+Math.imul(E,ut)|0)+Math.imul(T,ot)|0,o=o+Math.imul(T,ut)|0,r=r+Math.imul(O,at)|0,i=(i=i+Math.imul(O,ct)|0)+Math.imul(S,at)|0,o=o+Math.imul(S,ct)|0,r=r+Math.imul(_,lt)|0,i=(i=i+Math.imul(_,ft)|0)+Math.imul(w,lt)|0,o=o+Math.imul(w,ft)|0;var Tt=(c+(r=r+Math.imul(m,dt)|0)|0)+((8191&(i=(i=i+Math.imul(m,yt)|0)+Math.imul(g,dt)|0))<<13)|0;c=((o=o+Math.imul(g,yt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(B,Z),i=(i=Math.imul(B,$))+Math.imul(U,Z)|0,o=Math.imul(U,$),r=r+Math.imul(k,Q)|0,i=(i=i+Math.imul(k,tt)|0)+Math.imul(L,Q)|0,o=o+Math.imul(L,tt)|0,r=r+Math.imul(N,nt)|0,i=(i=i+Math.imul(N,rt)|0)+Math.imul(j,nt)|0,o=o+Math.imul(j,rt)|0,r=r+Math.imul(P,ot)|0,i=(i=i+Math.imul(P,ut)|0)+Math.imul(I,ot)|0,o=o+Math.imul(I,ut)|0,r=r+Math.imul(E,at)|0,i=(i=i+Math.imul(E,ct)|0)+Math.imul(T,at)|0,o=o+Math.imul(T,ct)|0,r=r+Math.imul(O,lt)|0,i=(i=i+Math.imul(O,ft)|0)+Math.imul(S,lt)|0,o=o+Math.imul(S,ft)|0;var xt=(c+(r=r+Math.imul(_,dt)|0)|0)+((8191&(i=(i=i+Math.imul(_,yt)|0)+Math.imul(w,dt)|0))<<13)|0;c=((o=o+Math.imul(w,yt)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(B,Q),i=(i=Math.imul(B,tt))+Math.imul(U,Q)|0,o=Math.imul(U,tt),r=r+Math.imul(k,nt)|0,i=(i=i+Math.imul(k,rt)|0)+Math.imul(L,nt)|0,o=o+Math.imul(L,rt)|0,r=r+Math.imul(N,ot)|0,i=(i=i+Math.imul(N,ut)|0)+Math.imul(j,ot)|0,o=o+Math.imul(j,ut)|0,r=r+Math.imul(P,at)|0,i=(i=i+Math.imul(P,ct)|0)+Math.imul(I,at)|0,o=o+Math.imul(I,ct)|0,r=r+Math.imul(E,lt)|0,i=(i=i+Math.imul(E,ft)|0)+Math.imul(T,lt)|0,o=o+Math.imul(T,ft)|0;var Pt=(c+(r=r+Math.imul(O,dt)|0)|0)+((8191&(i=(i=i+Math.imul(O,yt)|0)+Math.imul(S,dt)|0))<<13)|0;c=((o=o+Math.imul(S,yt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,r=Math.imul(B,nt),i=(i=Math.imul(B,rt))+Math.imul(U,nt)|0,o=Math.imul(U,rt),r=r+Math.imul(k,ot)|0,i=(i=i+Math.imul(k,ut)|0)+Math.imul(L,ot)|0,o=o+Math.imul(L,ut)|0,r=r+Math.imul(N,at)|0,i=(i=i+Math.imul(N,ct)|0)+Math.imul(j,at)|0,o=o+Math.imul(j,ct)|0,r=r+Math.imul(P,lt)|0,i=(i=i+Math.imul(P,ft)|0)+Math.imul(I,lt)|0,o=o+Math.imul(I,ft)|0;var It=(c+(r=r+Math.imul(E,dt)|0)|0)+((8191&(i=(i=i+Math.imul(E,yt)|0)+Math.imul(T,dt)|0))<<13)|0;c=((o=o+Math.imul(T,yt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(B,ot),i=(i=Math.imul(B,ut))+Math.imul(U,ot)|0,o=Math.imul(U,ut),r=r+Math.imul(k,at)|0,i=(i=i+Math.imul(k,ct)|0)+Math.imul(L,at)|0,o=o+Math.imul(L,ct)|0,r=r+Math.imul(N,lt)|0,i=(i=i+Math.imul(N,ft)|0)+Math.imul(j,lt)|0,o=o+Math.imul(j,ft)|0;var Rt=(c+(r=r+Math.imul(P,dt)|0)|0)+((8191&(i=(i=i+Math.imul(P,yt)|0)+Math.imul(I,dt)|0))<<13)|0;c=((o=o+Math.imul(I,yt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,r=Math.imul(B,at),i=(i=Math.imul(B,ct))+Math.imul(U,at)|0,o=Math.imul(U,ct),r=r+Math.imul(k,lt)|0,i=(i=i+Math.imul(k,ft)|0)+Math.imul(L,lt)|0,o=o+Math.imul(L,ft)|0;var Nt=(c+(r=r+Math.imul(N,dt)|0)|0)+((8191&(i=(i=i+Math.imul(N,yt)|0)+Math.imul(j,dt)|0))<<13)|0;c=((o=o+Math.imul(j,yt)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,r=Math.imul(B,lt),i=(i=Math.imul(B,ft))+Math.imul(U,lt)|0,o=Math.imul(U,ft);var jt=(c+(r=r+Math.imul(k,dt)|0)|0)+((8191&(i=(i=i+Math.imul(k,yt)|0)+Math.imul(L,dt)|0))<<13)|0;c=((o=o+Math.imul(L,yt)|0)+(i>>>13)|0)+(jt>>>26)|0,jt&=67108863;var Ct=(c+(r=Math.imul(B,dt))|0)+((8191&(i=(i=Math.imul(B,yt))+Math.imul(U,dt)|0))<<13)|0;return c=((o=Math.imul(U,yt))+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,a[0]=vt,a[1]=mt,a[2]=gt,a[3]=bt,a[4]=_t,a[5]=wt,a[6]=Mt,a[7]=Ot,a[8]=St,a[9]=At,a[10]=Et,a[11]=Tt,a[12]=xt,a[13]=Pt,a[14]=It,a[15]=Rt,a[16]=Nt,a[17]=jt,a[18]=Ct,0!==c&&(a[19]=c,n.length++),n};function d(t,e,n){return(new y).mulp(t,e,n)}function y(t,e){this.x=t,this.y=e}Math.imul||(p=f),o.prototype.mulTo=function(t,e){var n=this.length+t.length;return 10===this.length&&10===t.length?p(this,t,e):n<63?f(this,t,e):n<1024?function(t,e,n){n.negative=e.negative^t.negative,n.length=t.length+e.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var u=i;i=0;for(var s=67108863&r,a=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=a;c++){var h=o-c,l=(0|t.words[h])*(0|e.words[c]),f=67108863&l;s=67108863&(f=f+s|0),i+=(u=(u=u+(l/67108864|0)|0)+(f>>>26)|0)>>>26,u&=67108863}n.words[o]=s,r=u,u=i}return 0!==r?n.words[o]=r:n.length--,n.strip()}(this,t,e):d(this,t,e)},y.prototype.makeRBT=function(t){for(var e=new Array(t),n=o.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,n,t);return e},y.prototype.revBin=function(t,e,n){if(0===t||t===n-1)return t;for(var r=0,i=0;i<e;i++)r|=(1&t)<<e-i-1,t>>=1;return r},y.prototype.permute=function(t,e,n,r,i,o){for(var u=0;u<o;u++)r[u]=e[t[u]],i[u]=n[t[u]]},y.prototype.transform=function(t,e,n,r,i,o){this.permute(o,t,e,n,r,i);for(var u=1;u<i;u<<=1)for(var s=u<<1,a=Math.cos(2*Math.PI/s),c=Math.sin(2*Math.PI/s),h=0;h<i;h+=s)for(var l=a,f=c,p=0;p<u;p++){var d=n[h+p],y=r[h+p],v=n[h+p+u],m=r[h+p+u],g=l*v-f*m;m=l*m+f*v,v=g,n[h+p]=d+v,r[h+p]=y+m,n[h+p+u]=d-v,r[h+p+u]=y-m,p!==s&&(g=a*l-c*f,f=a*f+c*l,l=g)}},y.prototype.guessLen13b=function(t,e){var n=1|Math.max(e,t),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},y.prototype.conjugate=function(t,e,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=t[r];t[r]=t[n-r-1],t[n-r-1]=i,i=e[r],e[r]=-e[n-r-1],e[n-r-1]=-i}},y.prototype.normalize13b=function(t,e){for(var n=0,r=0;r<e/2;r++){var i=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+n;t[r]=67108863&i,n=i<67108864?0:i/67108864|0}return t},y.prototype.convert13b=function(t,e,n,i){for(var o=0,u=0;u<e;u++)o+=0|t[u],n[2*u]=8191&o,o>>>=13,n[2*u+1]=8191&o,o>>>=13;for(u=2*e;u<i;++u)n[u]=0;r(0===o),r(0==(-8192&o))},y.prototype.stub=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=0;return e},y.prototype.mulp=function(t,e,n){var r=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(r),o=this.stub(r),u=new Array(r),s=new Array(r),a=new Array(r),c=new Array(r),h=new Array(r),l=new Array(r),f=n.words;f.length=r,this.convert13b(t.words,t.length,u,r),this.convert13b(e.words,e.length,c,r),this.transform(u,o,s,a,r,i),this.transform(c,o,h,l,r,i);for(var p=0;p<r;p++){var d=s[p]*h[p]-a[p]*l[p];a[p]=s[p]*l[p]+a[p]*h[p],s[p]=d}return this.conjugate(s,a,r),this.transform(s,a,f,o,r,i),this.conjugate(f,o,r),this.normalize13b(f,r),n.negative=t.negative^e.negative,n.length=t.length+e.length,n.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),d(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){r("number"==typeof t),r(t<67108864);for(var e=0,n=0;n<this.length;n++){var i=(0|this.words[n])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[n]=67108863&o}return 0!==e&&(this.words[n]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),n=0;n<e.length;n++){var r=n/26|0,i=n%26;e[n]=(t.words[r]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var n=this,r=0;r<e.length&&0===e[r];r++,n=n.sqr());if(++r<e.length)for(var i=n.sqr();r<e.length;r++,i=i.sqr())0!==e[r]&&(n=n.mul(i));return n},o.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,n=t%26,i=(t-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var u=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,a=(0|this.words[e])-s<<n;this.words[e]=a|u,u=s>>>26-n}u&&(this.words[e]=u,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,n){var i;r("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,u=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,a=n;if(i-=u,i=Math.max(0,i),a){for(var c=0;c<u;c++)a.words[c]=this.words[c];a.length=u}if(0===u);else if(this.length>u)for(this.length-=u,c=0;c<this.length;c++)this.words[c]=this.words[c+u];else this.words[0]=0,this.length=1;var h=0;for(c=this.length-1;c>=0&&(0!==h||c>=i);c--){var l=0|this.words[c];this.words[c]=h<<26-o|l>>>o,h=l&s}return a&&0!==h&&(a.words[a.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,n){return r(0===this.negative),this.iushrn(t,e,n)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26,i=1<<e;return!(this.length<=n)&&!!(this.words[n]&i)},o.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==e&&n++,this.length=Math.min(n,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,n){var i,o,u=t.length+n;this._expand(u);var s=0;for(i=0;i<t.length;i++){o=(0|this.words[i+n])+s;var a=(0|t.words[i])*e;s=((o-=67108863&a)>>26)-(a/67108864|0),this.words[i+n]=67108863&o}for(;i<this.length-n;i++)s=(o=(0|this.words[i+n])+s)>>26,this.words[i+n]=67108863&o;if(0===s)return this.strip();for(r(-1===s),s=0,i=0;i<this.length;i++)s=(o=-(0|this.words[i])+s)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var n=(this.length,t.length),r=this.clone(),i=t,u=0|i.words[i.length-1];0!==(n=26-this._countBits(u))&&(i=i.ushln(n),r.iushln(n),u=0|i.words[i.length-1]);var s,a=r.length-i.length;if("mod"!==e){(s=new o(null)).length=a+1,s.words=new Array(s.length);for(var c=0;c<s.length;c++)s.words[c]=0}var h=r.clone()._ishlnsubmul(i,1,a);0===h.negative&&(r=h,s&&(s.words[a]=1));for(var l=a-1;l>=0;l--){var f=67108864*(0|r.words[i.length+l])+(0|r.words[i.length+l-1]);for(f=Math.min(f/u|0,67108863),r._ishlnsubmul(i,f,l);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(i,1,l),r.isZero()||(r.negative^=1);s&&(s.words[l]=f)}return s&&s.strip(),r.strip(),"div"!==e&&0!==n&&r.iushrn(n),{div:s||null,mod:r}},o.prototype.divmod=function(t,e,n){return r(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(i=s.div.neg()),"div"!==e&&(u=s.mod.neg(),n&&0!==u.negative&&u.iadd(t)),{div:i,mod:u}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(i=s.div.neg()),{div:i,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(u=s.mod.neg(),n&&0!==u.negative&&u.isub(t)),{div:s.div,mod:u}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,u,s},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var n=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),i=t.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){r(t<=67108863);for(var e=(1<<26)%t,n=0,i=this.length-1;i>=0;i--)n=(e*n+(0|this.words[i]))%t;return n},o.prototype.idivn=function(t){r(t<=67108863);for(var e=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*e;this.words[n]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),u=new o(0),s=new o(0),a=new o(1),c=0;e.isEven()&&n.isEven();)e.iushrn(1),n.iushrn(1),++c;for(var h=n.clone(),l=e.clone();!e.isZero();){for(var f=0,p=1;0==(e.words[0]&p)&&f<26;++f,p<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||u.isOdd())&&(i.iadd(h),u.isub(l)),i.iushrn(1),u.iushrn(1);for(var d=0,y=1;0==(n.words[0]&y)&&d<26;++d,y<<=1);if(d>0)for(n.iushrn(d);d-- >0;)(s.isOdd()||a.isOdd())&&(s.iadd(h),a.isub(l)),s.iushrn(1),a.iushrn(1);e.cmp(n)>=0?(e.isub(n),i.isub(s),u.isub(a)):(n.isub(e),s.isub(i),a.isub(u))}return{a:s,b:a,gcd:n.iushln(c)}},o.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,u=new o(1),s=new o(0),a=n.clone();e.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,h=1;0==(e.words[0]&h)&&c<26;++c,h<<=1);if(c>0)for(e.iushrn(c);c-- >0;)u.isOdd()&&u.iadd(a),u.iushrn(1);for(var l=0,f=1;0==(n.words[0]&f)&&l<26;++l,f<<=1);if(l>0)for(n.iushrn(l);l-- >0;)s.isOdd()&&s.iadd(a),s.iushrn(1);e.cmp(n)>=0?(e.isub(n),u.isub(s)):(n.isub(e),s.isub(u))}return(i=0===e.cmpn(1)?u:s).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),n=t.clone();e.negative=0,n.negative=0;for(var r=0;e.isEven()&&n.isEven();r++)e.iushrn(1),n.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=e.cmp(n);if(i<0){var o=e;e=n,n=o}else if(0===i||0===n.cmpn(1))break;e.isub(n)}return n.iushln(r)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,n=(t-e)/26,i=1<<e;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var o=i,u=n;0!==o&&u<this.length;u++){var s=0|this.words[u];o=(s+=o)>>>26,s&=67108863,this.words[u]=s}return 0!==o&&(this.words[u]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)e=1;else{n&&(t=-t),r(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|t.words[n];if(r!==i){r<i?e=-1:r>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new M(t)},o.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var v={k256:null,p224:null,p192:null,p25519:null};function m(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function g(){m.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){m.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){m.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function w(){m.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function O(t){M.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}m.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},m.prototype.ireduce=function(t){var e,n=t;do{this.split(n,this.tmp),e=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):n.strip(),n},m.prototype.split=function(t,e){t.iushrn(this.n,0,e)},m.prototype.imulK=function(t){return t.imul(this.k)},i(g,m),g.prototype.split=function(t,e){for(var n=Math.min(t.length,9),r=0;r<n;r++)e.words[r]=t.words[r];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var i=t.words[9];for(e.words[e.length++]=4194303&i,r=10;r<t.length;r++){var o=0|t.words[r];t.words[r-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,t.words[r-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},g.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,n=0;n<t.length;n++){var r=0|t.words[n];e+=977*r,t.words[n]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(b,m),i(_,m),i(w,m),w.prototype.imulK=function(t){for(var e=0,n=0;n<t.length;n++){var r=19*(0|t.words[n])+e,i=67108863&r;r>>>=26,t.words[n]=i,e=r}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(v[t])return v[t];var e;if("k256"===t)e=new g;else if("p224"===t)e=new b;else if("p192"===t)e=new _;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new w}return v[t]=e,e},M.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},M.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},M.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},M.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},M.prototype.add=function(t,e){this._verify2(t,e);var n=t.add(e);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},M.prototype.iadd=function(t,e){this._verify2(t,e);var n=t.iadd(e);return n.cmp(this.m)>=0&&n.isub(this.m),n},M.prototype.sub=function(t,e){this._verify2(t,e);var n=t.sub(e);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},M.prototype.isub=function(t,e){this._verify2(t,e);var n=t.isub(e);return n.cmpn(0)<0&&n.iadd(this.m),n},M.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},M.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},M.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},M.prototype.isqr=function(t){return this.imul(t,t.clone())},M.prototype.sqr=function(t){return this.mul(t,t)},M.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var n=this.m.add(new o(1)).iushrn(2);return this.pow(t,n)}for(var i=this.m.subn(1),u=0;!i.isZero()&&0===i.andln(1);)u++,i.iushrn(1);r(!i.isZero());var s=new o(1).toRed(this),a=s.redNeg(),c=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new o(2*h*h).toRed(this);0!==this.pow(h,c).cmp(a);)h.redIAdd(a);for(var l=this.pow(h,i),f=this.pow(t,i.addn(1).iushrn(1)),p=this.pow(t,i),d=u;0!==p.cmp(s);){for(var y=p,v=0;0!==y.cmp(s);v++)y=y.redSqr();r(v<d);var m=this.pow(l,new o(1).iushln(d-v-1));f=f.redMul(m),l=m.redSqr(),p=p.redMul(l),d=v}return f},M.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},M.prototype.pow=function(t,e){if(e.isZero())return new o(1);if(0===e.cmpn(1))return t.clone();var n=new Array(16);n[0]=new o(1).toRed(this),n[1]=t;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],t);var i=n[0],u=0,s=0,a=e.bitLength()%26;for(0===a&&(a=26),r=e.length-1;r>=0;r--){for(var c=e.words[r],h=a-1;h>=0;h--){var l=c>>h&1;i!==n[0]&&(i=this.sqr(i)),0!==l||0!==u?(u<<=1,u|=l,(4===++s||0===r&&0===h)&&(i=this.mul(i,n[u]),s=0,u=0)):s=0}a=26}return i},M.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},M.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new O(t)},i(O,M),O.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},O.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},O.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},O.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var n=t.mul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),u=i;return i.cmp(this.m)>=0?u=i.isub(this.m):i.cmpn(0)<0&&(u=i.iadd(this.m)),u._forceRed(this)},O.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===t||t,this)}).call(this,n(44)(t))},function(t,e,n){(function(t){!function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}function o(t,e,n){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(n=e,e=10),this._init(t||0,e||10,n||"be"))}var u;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{u=n(68).Buffer}catch(t){}function s(t,e,n){for(var r=0,i=Math.min(t.length,n),o=e;o<i;o++){var u=t.charCodeAt(o)-48;r<<=4,r|=u>=49&&u<=54?u-49+10:u>=17&&u<=22?u-17+10:15&u}return r}function a(t,e,n,r){for(var i=0,o=Math.min(t.length,n),u=e;u<o;u++){var s=t.charCodeAt(u)-48;i*=r,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,n){if("number"==typeof t)return this._initNumber(t,e,n);if("object"==typeof t)return this._initArray(t,e,n);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&i++,16===e?this._parseHex(t,i):this._parseBase(t,e,i),"-"===t[0]&&(this.negative=1),this.strip(),"le"===n&&this._initArray(this.toArray(),e,n)},o.prototype._initNumber=function(t,e,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),e,n)},o.prototype._initArray=function(t,e,n){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,u,s=0;if("be"===n)for(i=t.length-1,o=0;i>=0;i-=3)u=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=u<<s&67108863,this.words[o+1]=u>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===n)for(i=0,o=0;i<t.length;i+=3)u=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=u<<s&67108863,this.words[o+1]=u>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var r,i,o=0;for(n=t.length-6,r=0;n>=e;n-=6)i=s(t,n,n+6),this.words[r]|=i<<o&67108863,this.words[r+1]|=i>>>26-o&4194303,(o+=24)>=26&&(o-=26,r++);n+6!==e&&(i=s(t,e,n+6),this.words[r]|=i<<o&67108863,this.words[r+1]|=i>>>26-o&4194303),this.strip()},o.prototype._parseBase=function(t,e,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=e)r++;r--,i=i/e|0;for(var o=t.length-n,u=o%r,s=Math.min(o,o-u)+n,c=0,h=n;h<s;h+=r)c=a(t,h,h+r,e),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==u){var l=1;for(c=a(t,h,t.length,e),h=0;h<u;h++)l*=e;this.imuln(l),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],l=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,e,n){n.negative=e.negative^t.negative;var r=t.length+e.length|0;n.length=r,r=r-1|0;var i=0|t.words[0],o=0|e.words[0],u=i*o,s=67108863&u,a=u/67108864|0;n.words[0]=s;for(var c=1;c<r;c++){for(var h=a>>>26,l=67108863&a,f=Math.min(c,e.length-1),p=Math.max(0,c-t.length+1);p<=f;p++){var d=c-p|0;h+=(u=(i=0|t.words[d])*(o=0|e.words[p])+l)/67108864|0,l=67108863&u}n.words[c]=0|l,a=0|h}return 0!==a?n.words[c]=0|a:n.length--,n.strip()}o.prototype.toString=function(t,e){var n;if(t=t||10,e=0|e||1,16===t||"hex"===t){n="";for(var i=0,o=0,u=0;u<this.length;u++){var s=this.words[u],a=(16777215&(s<<i|o)).toString(16);n=0!==(o=s>>>24-i&16777215)||u!==this.length-1?c[6-a.length]+a+n:a+n,(i+=2)>=26&&(i-=26,u--)}for(0!==o&&(n=o.toString(16)+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var f=h[t],p=l[t];n="";var d=this.clone();for(d.negative=0;!d.isZero();){var y=d.modn(p).toString(t);n=(d=d.idivn(p)).isZero()?y+n:c[f-y.length]+y+n}for(this.isZero()&&(n="0"+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return r(void 0!==u),this.toArrayLike(u,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,n){var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0"),this.strip();var u,s,a="le"===e,c=new t(o),h=this.clone();if(a){for(s=0;!h.isZero();s++)u=h.andln(255),h.iushrn(8),c[s]=u;for(;s<o;s++)c[s]=0}else{for(s=0;s<o-i;s++)c[s]=0;for(s=0;!h.isZero();s++)u=h.andln(255),h.iushrn(8),c[o-s-1]=u}return c},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,n=0;return e>=4096&&(n+=13,e>>>=13),e>=64&&(n+=7,e>>>=7),e>=8&&(n+=4,e>>>=4),e>=2&&(n+=2,e>>>=2),n+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,n=0;return 0==(8191&e)&&(n+=13,e>>>=13),0==(127&e)&&(n+=7,e>>>=7),0==(15&e)&&(n+=4,e>>>=4),0==(3&e)&&(n+=2,e>>>=2),0==(1&e)&&n++,n},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var n=this._zeroBits(this.words[e]);if(t+=n,26!==n)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var n=0;n<e.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,n;this.length>t.length?(e=this,n=t):(e=t,n=this);for(var r=0;r<n.length;r++)this.words[r]=e.words[r]^n.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),n=t%26;this._expand(e),n>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var n=t/26|0,i=t%26;return this._expand(n+1),this.words[n]=e?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,n,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(n=this,r=t):(n=t,r=this);for(var i=0,o=0;o<r.length;o++)e=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<n.length;o++)e=(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n,r,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=t):(n=t,r=this);for(var o=0,u=0;u<r.length;u++)o=(e=(0|n.words[u])-(0|r.words[u])+o)>>26,this.words[u]=67108863&e;for(;0!==o&&u<n.length;u++)o=(e=(0|n.words[u])+o)>>26,this.words[u]=67108863&e;if(0===o&&u<n.length&&n!==this)for(;u<n.length;u++)this.words[u]=n.words[u];return this.length=Math.max(this.length,u),n!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,n){var r,i,o,u=t.words,s=e.words,a=n.words,c=0,h=0|u[0],l=8191&h,f=h>>>13,p=0|u[1],d=8191&p,y=p>>>13,v=0|u[2],m=8191&v,g=v>>>13,b=0|u[3],_=8191&b,w=b>>>13,M=0|u[4],O=8191&M,S=M>>>13,A=0|u[5],E=8191&A,T=A>>>13,x=0|u[6],P=8191&x,I=x>>>13,R=0|u[7],N=8191&R,j=R>>>13,C=0|u[8],k=8191&C,L=C>>>13,D=0|u[9],B=8191&D,U=D>>>13,W=0|s[0],F=8191&W,V=W>>>13,G=0|s[1],q=8191&G,H=G>>>13,z=0|s[2],Y=8191&z,J=z>>>13,K=0|s[3],Z=8191&K,$=K>>>13,X=0|s[4],Q=8191&X,tt=X>>>13,et=0|s[5],nt=8191&et,rt=et>>>13,it=0|s[6],ot=8191&it,ut=it>>>13,st=0|s[7],at=8191&st,ct=st>>>13,ht=0|s[8],lt=8191&ht,ft=ht>>>13,pt=0|s[9],dt=8191&pt,yt=pt>>>13;n.negative=t.negative^e.negative,n.length=19;var vt=(c+(r=Math.imul(l,F))|0)+((8191&(i=(i=Math.imul(l,V))+Math.imul(f,F)|0))<<13)|0;c=((o=Math.imul(f,V))+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(d,F),i=(i=Math.imul(d,V))+Math.imul(y,F)|0,o=Math.imul(y,V);var mt=(c+(r=r+Math.imul(l,q)|0)|0)+((8191&(i=(i=i+Math.imul(l,H)|0)+Math.imul(f,q)|0))<<13)|0;c=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(mt>>>26)|0,mt&=67108863,r=Math.imul(m,F),i=(i=Math.imul(m,V))+Math.imul(g,F)|0,o=Math.imul(g,V),r=r+Math.imul(d,q)|0,i=(i=i+Math.imul(d,H)|0)+Math.imul(y,q)|0,o=o+Math.imul(y,H)|0;var gt=(c+(r=r+Math.imul(l,Y)|0)|0)+((8191&(i=(i=i+Math.imul(l,J)|0)+Math.imul(f,Y)|0))<<13)|0;c=((o=o+Math.imul(f,J)|0)+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(_,F),i=(i=Math.imul(_,V))+Math.imul(w,F)|0,o=Math.imul(w,V),r=r+Math.imul(m,q)|0,i=(i=i+Math.imul(m,H)|0)+Math.imul(g,q)|0,o=o+Math.imul(g,H)|0,r=r+Math.imul(d,Y)|0,i=(i=i+Math.imul(d,J)|0)+Math.imul(y,Y)|0,o=o+Math.imul(y,J)|0;var bt=(c+(r=r+Math.imul(l,Z)|0)|0)+((8191&(i=(i=i+Math.imul(l,$)|0)+Math.imul(f,Z)|0))<<13)|0;c=((o=o+Math.imul(f,$)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(O,F),i=(i=Math.imul(O,V))+Math.imul(S,F)|0,o=Math.imul(S,V),r=r+Math.imul(_,q)|0,i=(i=i+Math.imul(_,H)|0)+Math.imul(w,q)|0,o=o+Math.imul(w,H)|0,r=r+Math.imul(m,Y)|0,i=(i=i+Math.imul(m,J)|0)+Math.imul(g,Y)|0,o=o+Math.imul(g,J)|0,r=r+Math.imul(d,Z)|0,i=(i=i+Math.imul(d,$)|0)+Math.imul(y,Z)|0,o=o+Math.imul(y,$)|0;var _t=(c+(r=r+Math.imul(l,Q)|0)|0)+((8191&(i=(i=i+Math.imul(l,tt)|0)+Math.imul(f,Q)|0))<<13)|0;c=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(E,F),i=(i=Math.imul(E,V))+Math.imul(T,F)|0,o=Math.imul(T,V),r=r+Math.imul(O,q)|0,i=(i=i+Math.imul(O,H)|0)+Math.imul(S,q)|0,o=o+Math.imul(S,H)|0,r=r+Math.imul(_,Y)|0,i=(i=i+Math.imul(_,J)|0)+Math.imul(w,Y)|0,o=o+Math.imul(w,J)|0,r=r+Math.imul(m,Z)|0,i=(i=i+Math.imul(m,$)|0)+Math.imul(g,Z)|0,o=o+Math.imul(g,$)|0,r=r+Math.imul(d,Q)|0,i=(i=i+Math.imul(d,tt)|0)+Math.imul(y,Q)|0,o=o+Math.imul(y,tt)|0;var wt=(c+(r=r+Math.imul(l,nt)|0)|0)+((8191&(i=(i=i+Math.imul(l,rt)|0)+Math.imul(f,nt)|0))<<13)|0;c=((o=o+Math.imul(f,rt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(P,F),i=(i=Math.imul(P,V))+Math.imul(I,F)|0,o=Math.imul(I,V),r=r+Math.imul(E,q)|0,i=(i=i+Math.imul(E,H)|0)+Math.imul(T,q)|0,o=o+Math.imul(T,H)|0,r=r+Math.imul(O,Y)|0,i=(i=i+Math.imul(O,J)|0)+Math.imul(S,Y)|0,o=o+Math.imul(S,J)|0,r=r+Math.imul(_,Z)|0,i=(i=i+Math.imul(_,$)|0)+Math.imul(w,Z)|0,o=o+Math.imul(w,$)|0,r=r+Math.imul(m,Q)|0,i=(i=i+Math.imul(m,tt)|0)+Math.imul(g,Q)|0,o=o+Math.imul(g,tt)|0,r=r+Math.imul(d,nt)|0,i=(i=i+Math.imul(d,rt)|0)+Math.imul(y,nt)|0,o=o+Math.imul(y,rt)|0;var Mt=(c+(r=r+Math.imul(l,ot)|0)|0)+((8191&(i=(i=i+Math.imul(l,ut)|0)+Math.imul(f,ot)|0))<<13)|0;c=((o=o+Math.imul(f,ut)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(N,F),i=(i=Math.imul(N,V))+Math.imul(j,F)|0,o=Math.imul(j,V),r=r+Math.imul(P,q)|0,i=(i=i+Math.imul(P,H)|0)+Math.imul(I,q)|0,o=o+Math.imul(I,H)|0,r=r+Math.imul(E,Y)|0,i=(i=i+Math.imul(E,J)|0)+Math.imul(T,Y)|0,o=o+Math.imul(T,J)|0,r=r+Math.imul(O,Z)|0,i=(i=i+Math.imul(O,$)|0)+Math.imul(S,Z)|0,o=o+Math.imul(S,$)|0,r=r+Math.imul(_,Q)|0,i=(i=i+Math.imul(_,tt)|0)+Math.imul(w,Q)|0,o=o+Math.imul(w,tt)|0,r=r+Math.imul(m,nt)|0,i=(i=i+Math.imul(m,rt)|0)+Math.imul(g,nt)|0,o=o+Math.imul(g,rt)|0,r=r+Math.imul(d,ot)|0,i=(i=i+Math.imul(d,ut)|0)+Math.imul(y,ot)|0,o=o+Math.imul(y,ut)|0;var Ot=(c+(r=r+Math.imul(l,at)|0)|0)+((8191&(i=(i=i+Math.imul(l,ct)|0)+Math.imul(f,at)|0))<<13)|0;c=((o=o+Math.imul(f,ct)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,r=Math.imul(k,F),i=(i=Math.imul(k,V))+Math.imul(L,F)|0,o=Math.imul(L,V),r=r+Math.imul(N,q)|0,i=(i=i+Math.imul(N,H)|0)+Math.imul(j,q)|0,o=o+Math.imul(j,H)|0,r=r+Math.imul(P,Y)|0,i=(i=i+Math.imul(P,J)|0)+Math.imul(I,Y)|0,o=o+Math.imul(I,J)|0,r=r+Math.imul(E,Z)|0,i=(i=i+Math.imul(E,$)|0)+Math.imul(T,Z)|0,o=o+Math.imul(T,$)|0,r=r+Math.imul(O,Q)|0,i=(i=i+Math.imul(O,tt)|0)+Math.imul(S,Q)|0,o=o+Math.imul(S,tt)|0,r=r+Math.imul(_,nt)|0,i=(i=i+Math.imul(_,rt)|0)+Math.imul(w,nt)|0,o=o+Math.imul(w,rt)|0,r=r+Math.imul(m,ot)|0,i=(i=i+Math.imul(m,ut)|0)+Math.imul(g,ot)|0,o=o+Math.imul(g,ut)|0,r=r+Math.imul(d,at)|0,i=(i=i+Math.imul(d,ct)|0)+Math.imul(y,at)|0,o=o+Math.imul(y,ct)|0;var St=(c+(r=r+Math.imul(l,lt)|0)|0)+((8191&(i=(i=i+Math.imul(l,ft)|0)+Math.imul(f,lt)|0))<<13)|0;c=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(B,F),i=(i=Math.imul(B,V))+Math.imul(U,F)|0,o=Math.imul(U,V),r=r+Math.imul(k,q)|0,i=(i=i+Math.imul(k,H)|0)+Math.imul(L,q)|0,o=o+Math.imul(L,H)|0,r=r+Math.imul(N,Y)|0,i=(i=i+Math.imul(N,J)|0)+Math.imul(j,Y)|0,o=o+Math.imul(j,J)|0,r=r+Math.imul(P,Z)|0,i=(i=i+Math.imul(P,$)|0)+Math.imul(I,Z)|0,o=o+Math.imul(I,$)|0,r=r+Math.imul(E,Q)|0,i=(i=i+Math.imul(E,tt)|0)+Math.imul(T,Q)|0,o=o+Math.imul(T,tt)|0,r=r+Math.imul(O,nt)|0,i=(i=i+Math.imul(O,rt)|0)+Math.imul(S,nt)|0,o=o+Math.imul(S,rt)|0,r=r+Math.imul(_,ot)|0,i=(i=i+Math.imul(_,ut)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,ut)|0,r=r+Math.imul(m,at)|0,i=(i=i+Math.imul(m,ct)|0)+Math.imul(g,at)|0,o=o+Math.imul(g,ct)|0,r=r+Math.imul(d,lt)|0,i=(i=i+Math.imul(d,ft)|0)+Math.imul(y,lt)|0,o=o+Math.imul(y,ft)|0;var At=(c+(r=r+Math.imul(l,dt)|0)|0)+((8191&(i=(i=i+Math.imul(l,yt)|0)+Math.imul(f,dt)|0))<<13)|0;c=((o=o+Math.imul(f,yt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(B,q),i=(i=Math.imul(B,H))+Math.imul(U,q)|0,o=Math.imul(U,H),r=r+Math.imul(k,Y)|0,i=(i=i+Math.imul(k,J)|0)+Math.imul(L,Y)|0,o=o+Math.imul(L,J)|0,r=r+Math.imul(N,Z)|0,i=(i=i+Math.imul(N,$)|0)+Math.imul(j,Z)|0,o=o+Math.imul(j,$)|0,r=r+Math.imul(P,Q)|0,i=(i=i+Math.imul(P,tt)|0)+Math.imul(I,Q)|0,o=o+Math.imul(I,tt)|0,r=r+Math.imul(E,nt)|0,i=(i=i+Math.imul(E,rt)|0)+Math.imul(T,nt)|0,o=o+Math.imul(T,rt)|0,r=r+Math.imul(O,ot)|0,i=(i=i+Math.imul(O,ut)|0)+Math.imul(S,ot)|0,o=o+Math.imul(S,ut)|0,r=r+Math.imul(_,at)|0,i=(i=i+Math.imul(_,ct)|0)+Math.imul(w,at)|0,o=o+Math.imul(w,ct)|0,r=r+Math.imul(m,lt)|0,i=(i=i+Math.imul(m,ft)|0)+Math.imul(g,lt)|0,o=o+Math.imul(g,ft)|0;var Et=(c+(r=r+Math.imul(d,dt)|0)|0)+((8191&(i=(i=i+Math.imul(d,yt)|0)+Math.imul(y,dt)|0))<<13)|0;c=((o=o+Math.imul(y,yt)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(B,Y),i=(i=Math.imul(B,J))+Math.imul(U,Y)|0,o=Math.imul(U,J),r=r+Math.imul(k,Z)|0,i=(i=i+Math.imul(k,$)|0)+Math.imul(L,Z)|0,o=o+Math.imul(L,$)|0,r=r+Math.imul(N,Q)|0,i=(i=i+Math.imul(N,tt)|0)+Math.imul(j,Q)|0,o=o+Math.imul(j,tt)|0,r=r+Math.imul(P,nt)|0,i=(i=i+Math.imul(P,rt)|0)+Math.imul(I,nt)|0,o=o+Math.imul(I,rt)|0,r=r+Math.imul(E,ot)|0,i=(i=i+Math.imul(E,ut)|0)+Math.imul(T,ot)|0,o=o+Math.imul(T,ut)|0,r=r+Math.imul(O,at)|0,i=(i=i+Math.imul(O,ct)|0)+Math.imul(S,at)|0,o=o+Math.imul(S,ct)|0,r=r+Math.imul(_,lt)|0,i=(i=i+Math.imul(_,ft)|0)+Math.imul(w,lt)|0,o=o+Math.imul(w,ft)|0;var Tt=(c+(r=r+Math.imul(m,dt)|0)|0)+((8191&(i=(i=i+Math.imul(m,yt)|0)+Math.imul(g,dt)|0))<<13)|0;c=((o=o+Math.imul(g,yt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(B,Z),i=(i=Math.imul(B,$))+Math.imul(U,Z)|0,o=Math.imul(U,$),r=r+Math.imul(k,Q)|0,i=(i=i+Math.imul(k,tt)|0)+Math.imul(L,Q)|0,o=o+Math.imul(L,tt)|0,r=r+Math.imul(N,nt)|0,i=(i=i+Math.imul(N,rt)|0)+Math.imul(j,nt)|0,o=o+Math.imul(j,rt)|0,r=r+Math.imul(P,ot)|0,i=(i=i+Math.imul(P,ut)|0)+Math.imul(I,ot)|0,o=o+Math.imul(I,ut)|0,r=r+Math.imul(E,at)|0,i=(i=i+Math.imul(E,ct)|0)+Math.imul(T,at)|0,o=o+Math.imul(T,ct)|0,r=r+Math.imul(O,lt)|0,i=(i=i+Math.imul(O,ft)|0)+Math.imul(S,lt)|0,o=o+Math.imul(S,ft)|0;var xt=(c+(r=r+Math.imul(_,dt)|0)|0)+((8191&(i=(i=i+Math.imul(_,yt)|0)+Math.imul(w,dt)|0))<<13)|0;c=((o=o+Math.imul(w,yt)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(B,Q),i=(i=Math.imul(B,tt))+Math.imul(U,Q)|0,o=Math.imul(U,tt),r=r+Math.imul(k,nt)|0,i=(i=i+Math.imul(k,rt)|0)+Math.imul(L,nt)|0,o=o+Math.imul(L,rt)|0,r=r+Math.imul(N,ot)|0,i=(i=i+Math.imul(N,ut)|0)+Math.imul(j,ot)|0,o=o+Math.imul(j,ut)|0,r=r+Math.imul(P,at)|0,i=(i=i+Math.imul(P,ct)|0)+Math.imul(I,at)|0,o=o+Math.imul(I,ct)|0,r=r+Math.imul(E,lt)|0,i=(i=i+Math.imul(E,ft)|0)+Math.imul(T,lt)|0,o=o+Math.imul(T,ft)|0;var Pt=(c+(r=r+Math.imul(O,dt)|0)|0)+((8191&(i=(i=i+Math.imul(O,yt)|0)+Math.imul(S,dt)|0))<<13)|0;c=((o=o+Math.imul(S,yt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,r=Math.imul(B,nt),i=(i=Math.imul(B,rt))+Math.imul(U,nt)|0,o=Math.imul(U,rt),r=r+Math.imul(k,ot)|0,i=(i=i+Math.imul(k,ut)|0)+Math.imul(L,ot)|0,o=o+Math.imul(L,ut)|0,r=r+Math.imul(N,at)|0,i=(i=i+Math.imul(N,ct)|0)+Math.imul(j,at)|0,o=o+Math.imul(j,ct)|0,r=r+Math.imul(P,lt)|0,i=(i=i+Math.imul(P,ft)|0)+Math.imul(I,lt)|0,o=o+Math.imul(I,ft)|0;var It=(c+(r=r+Math.imul(E,dt)|0)|0)+((8191&(i=(i=i+Math.imul(E,yt)|0)+Math.imul(T,dt)|0))<<13)|0;c=((o=o+Math.imul(T,yt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(B,ot),i=(i=Math.imul(B,ut))+Math.imul(U,ot)|0,o=Math.imul(U,ut),r=r+Math.imul(k,at)|0,i=(i=i+Math.imul(k,ct)|0)+Math.imul(L,at)|0,o=o+Math.imul(L,ct)|0,r=r+Math.imul(N,lt)|0,i=(i=i+Math.imul(N,ft)|0)+Math.imul(j,lt)|0,o=o+Math.imul(j,ft)|0;var Rt=(c+(r=r+Math.imul(P,dt)|0)|0)+((8191&(i=(i=i+Math.imul(P,yt)|0)+Math.imul(I,dt)|0))<<13)|0;c=((o=o+Math.imul(I,yt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,r=Math.imul(B,at),i=(i=Math.imul(B,ct))+Math.imul(U,at)|0,o=Math.imul(U,ct),r=r+Math.imul(k,lt)|0,i=(i=i+Math.imul(k,ft)|0)+Math.imul(L,lt)|0,o=o+Math.imul(L,ft)|0;var Nt=(c+(r=r+Math.imul(N,dt)|0)|0)+((8191&(i=(i=i+Math.imul(N,yt)|0)+Math.imul(j,dt)|0))<<13)|0;c=((o=o+Math.imul(j,yt)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,r=Math.imul(B,lt),i=(i=Math.imul(B,ft))+Math.imul(U,lt)|0,o=Math.imul(U,ft);var jt=(c+(r=r+Math.imul(k,dt)|0)|0)+((8191&(i=(i=i+Math.imul(k,yt)|0)+Math.imul(L,dt)|0))<<13)|0;c=((o=o+Math.imul(L,yt)|0)+(i>>>13)|0)+(jt>>>26)|0,jt&=67108863;var Ct=(c+(r=Math.imul(B,dt))|0)+((8191&(i=(i=Math.imul(B,yt))+Math.imul(U,dt)|0))<<13)|0;return c=((o=Math.imul(U,yt))+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,a[0]=vt,a[1]=mt,a[2]=gt,a[3]=bt,a[4]=_t,a[5]=wt,a[6]=Mt,a[7]=Ot,a[8]=St,a[9]=At,a[10]=Et,a[11]=Tt,a[12]=xt,a[13]=Pt,a[14]=It,a[15]=Rt,a[16]=Nt,a[17]=jt,a[18]=Ct,0!==c&&(a[19]=c,n.length++),n};function d(t,e,n){return(new y).mulp(t,e,n)}function y(t,e){this.x=t,this.y=e}Math.imul||(p=f),o.prototype.mulTo=function(t,e){var n=this.length+t.length;return 10===this.length&&10===t.length?p(this,t,e):n<63?f(this,t,e):n<1024?function(t,e,n){n.negative=e.negative^t.negative,n.length=t.length+e.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var u=i;i=0;for(var s=67108863&r,a=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=a;c++){var h=o-c,l=(0|t.words[h])*(0|e.words[c]),f=67108863&l;s=67108863&(f=f+s|0),i+=(u=(u=u+(l/67108864|0)|0)+(f>>>26)|0)>>>26,u&=67108863}n.words[o]=s,r=u,u=i}return 0!==r?n.words[o]=r:n.length--,n.strip()}(this,t,e):d(this,t,e)},y.prototype.makeRBT=function(t){for(var e=new Array(t),n=o.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,n,t);return e},y.prototype.revBin=function(t,e,n){if(0===t||t===n-1)return t;for(var r=0,i=0;i<e;i++)r|=(1&t)<<e-i-1,t>>=1;return r},y.prototype.permute=function(t,e,n,r,i,o){for(var u=0;u<o;u++)r[u]=e[t[u]],i[u]=n[t[u]]},y.prototype.transform=function(t,e,n,r,i,o){this.permute(o,t,e,n,r,i);for(var u=1;u<i;u<<=1)for(var s=u<<1,a=Math.cos(2*Math.PI/s),c=Math.sin(2*Math.PI/s),h=0;h<i;h+=s)for(var l=a,f=c,p=0;p<u;p++){var d=n[h+p],y=r[h+p],v=n[h+p+u],m=r[h+p+u],g=l*v-f*m;m=l*m+f*v,v=g,n[h+p]=d+v,r[h+p]=y+m,n[h+p+u]=d-v,r[h+p+u]=y-m,p!==s&&(g=a*l-c*f,f=a*f+c*l,l=g)}},y.prototype.guessLen13b=function(t,e){var n=1|Math.max(e,t),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},y.prototype.conjugate=function(t,e,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=t[r];t[r]=t[n-r-1],t[n-r-1]=i,i=e[r],e[r]=-e[n-r-1],e[n-r-1]=-i}},y.prototype.normalize13b=function(t,e){for(var n=0,r=0;r<e/2;r++){var i=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+n;t[r]=67108863&i,n=i<67108864?0:i/67108864|0}return t},y.prototype.convert13b=function(t,e,n,i){for(var o=0,u=0;u<e;u++)o+=0|t[u],n[2*u]=8191&o,o>>>=13,n[2*u+1]=8191&o,o>>>=13;for(u=2*e;u<i;++u)n[u]=0;r(0===o),r(0==(-8192&o))},y.prototype.stub=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=0;return e},y.prototype.mulp=function(t,e,n){var r=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(r),o=this.stub(r),u=new Array(r),s=new Array(r),a=new Array(r),c=new Array(r),h=new Array(r),l=new Array(r),f=n.words;f.length=r,this.convert13b(t.words,t.length,u,r),this.convert13b(e.words,e.length,c,r),this.transform(u,o,s,a,r,i),this.transform(c,o,h,l,r,i);for(var p=0;p<r;p++){var d=s[p]*h[p]-a[p]*l[p];a[p]=s[p]*l[p]+a[p]*h[p],s[p]=d}return this.conjugate(s,a,r),this.transform(s,a,f,o,r,i),this.conjugate(f,o,r),this.normalize13b(f,r),n.negative=t.negative^e.negative,n.length=t.length+e.length,n.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),d(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){r("number"==typeof t),r(t<67108864);for(var e=0,n=0;n<this.length;n++){var i=(0|this.words[n])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[n]=67108863&o}return 0!==e&&(this.words[n]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),n=0;n<e.length;n++){var r=n/26|0,i=n%26;e[n]=(t.words[r]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var n=this,r=0;r<e.length&&0===e[r];r++,n=n.sqr());if(++r<e.length)for(var i=n.sqr();r<e.length;r++,i=i.sqr())0!==e[r]&&(n=n.mul(i));return n},o.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,n=t%26,i=(t-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var u=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,a=(0|this.words[e])-s<<n;this.words[e]=a|u,u=s>>>26-n}u&&(this.words[e]=u,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,n){var i;r("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,u=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,a=n;if(i-=u,i=Math.max(0,i),a){for(var c=0;c<u;c++)a.words[c]=this.words[c];a.length=u}if(0===u);else if(this.length>u)for(this.length-=u,c=0;c<this.length;c++)this.words[c]=this.words[c+u];else this.words[0]=0,this.length=1;var h=0;for(c=this.length-1;c>=0&&(0!==h||c>=i);c--){var l=0|this.words[c];this.words[c]=h<<26-o|l>>>o,h=l&s}return a&&0!==h&&(a.words[a.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,n){return r(0===this.negative),this.iushrn(t,e,n)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26,i=1<<e;return!(this.length<=n)&&!!(this.words[n]&i)},o.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==e&&n++,this.length=Math.min(n,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,n){var i,o,u=t.length+n;this._expand(u);var s=0;for(i=0;i<t.length;i++){o=(0|this.words[i+n])+s;var a=(0|t.words[i])*e;s=((o-=67108863&a)>>26)-(a/67108864|0),this.words[i+n]=67108863&o}for(;i<this.length-n;i++)s=(o=(0|this.words[i+n])+s)>>26,this.words[i+n]=67108863&o;if(0===s)return this.strip();for(r(-1===s),s=0,i=0;i<this.length;i++)s=(o=-(0|this.words[i])+s)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var n=(this.length,t.length),r=this.clone(),i=t,u=0|i.words[i.length-1];0!==(n=26-this._countBits(u))&&(i=i.ushln(n),r.iushln(n),u=0|i.words[i.length-1]);var s,a=r.length-i.length;if("mod"!==e){(s=new o(null)).length=a+1,s.words=new Array(s.length);for(var c=0;c<s.length;c++)s.words[c]=0}var h=r.clone()._ishlnsubmul(i,1,a);0===h.negative&&(r=h,s&&(s.words[a]=1));for(var l=a-1;l>=0;l--){var f=67108864*(0|r.words[i.length+l])+(0|r.words[i.length+l-1]);for(f=Math.min(f/u|0,67108863),r._ishlnsubmul(i,f,l);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(i,1,l),r.isZero()||(r.negative^=1);s&&(s.words[l]=f)}return s&&s.strip(),r.strip(),"div"!==e&&0!==n&&r.iushrn(n),{div:s||null,mod:r}},o.prototype.divmod=function(t,e,n){return r(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(i=s.div.neg()),"div"!==e&&(u=s.mod.neg(),n&&0!==u.negative&&u.iadd(t)),{div:i,mod:u}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(i=s.div.neg()),{div:i,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(u=s.mod.neg(),n&&0!==u.negative&&u.isub(t)),{div:s.div,mod:u}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,u,s},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var n=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),i=t.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){r(t<=67108863);for(var e=(1<<26)%t,n=0,i=this.length-1;i>=0;i--)n=(e*n+(0|this.words[i]))%t;return n},o.prototype.idivn=function(t){r(t<=67108863);for(var e=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*e;this.words[n]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),u=new o(0),s=new o(0),a=new o(1),c=0;e.isEven()&&n.isEven();)e.iushrn(1),n.iushrn(1),++c;for(var h=n.clone(),l=e.clone();!e.isZero();){for(var f=0,p=1;0==(e.words[0]&p)&&f<26;++f,p<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||u.isOdd())&&(i.iadd(h),u.isub(l)),i.iushrn(1),u.iushrn(1);for(var d=0,y=1;0==(n.words[0]&y)&&d<26;++d,y<<=1);if(d>0)for(n.iushrn(d);d-- >0;)(s.isOdd()||a.isOdd())&&(s.iadd(h),a.isub(l)),s.iushrn(1),a.iushrn(1);e.cmp(n)>=0?(e.isub(n),i.isub(s),u.isub(a)):(n.isub(e),s.isub(i),a.isub(u))}return{a:s,b:a,gcd:n.iushln(c)}},o.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,u=new o(1),s=new o(0),a=n.clone();e.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,h=1;0==(e.words[0]&h)&&c<26;++c,h<<=1);if(c>0)for(e.iushrn(c);c-- >0;)u.isOdd()&&u.iadd(a),u.iushrn(1);for(var l=0,f=1;0==(n.words[0]&f)&&l<26;++l,f<<=1);if(l>0)for(n.iushrn(l);l-- >0;)s.isOdd()&&s.iadd(a),s.iushrn(1);e.cmp(n)>=0?(e.isub(n),u.isub(s)):(n.isub(e),s.isub(u))}return(i=0===e.cmpn(1)?u:s).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),n=t.clone();e.negative=0,n.negative=0;for(var r=0;e.isEven()&&n.isEven();r++)e.iushrn(1),n.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=e.cmp(n);if(i<0){var o=e;e=n,n=o}else if(0===i||0===n.cmpn(1))break;e.isub(n)}return n.iushln(r)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,n=(t-e)/26,i=1<<e;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var o=i,u=n;0!==o&&u<this.length;u++){var s=0|this.words[u];o=(s+=o)>>>26,s&=67108863,this.words[u]=s}return 0!==o&&(this.words[u]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)e=1;else{n&&(t=-t),r(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|t.words[n];if(r!==i){r<i?e=-1:r>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new M(t)},o.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var v={k256:null,p224:null,p192:null,p25519:null};function m(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function g(){m.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){m.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){m.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function w(){m.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function O(t){M.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}m.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},m.prototype.ireduce=function(t){var e,n=t;do{this.split(n,this.tmp),e=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):n.strip(),n},m.prototype.split=function(t,e){t.iushrn(this.n,0,e)},m.prototype.imulK=function(t){return t.imul(this.k)},i(g,m),g.prototype.split=function(t,e){for(var n=Math.min(t.length,9),r=0;r<n;r++)e.words[r]=t.words[r];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var i=t.words[9];for(e.words[e.length++]=4194303&i,r=10;r<t.length;r++){var o=0|t.words[r];t.words[r-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,t.words[r-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},g.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,n=0;n<t.length;n++){var r=0|t.words[n];e+=977*r,t.words[n]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(b,m),i(_,m),i(w,m),w.prototype.imulK=function(t){for(var e=0,n=0;n<t.length;n++){var r=19*(0|t.words[n])+e,i=67108863&r;r>>>=26,t.words[n]=i,e=r}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(v[t])return v[t];var e;if("k256"===t)e=new g;else if("p224"===t)e=new b;else if("p192"===t)e=new _;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new w}return v[t]=e,e},M.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},M.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},M.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},M.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},M.prototype.add=function(t,e){this._verify2(t,e);var n=t.add(e);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},M.prototype.iadd=function(t,e){this._verify2(t,e);var n=t.iadd(e);return n.cmp(this.m)>=0&&n.isub(this.m),n},M.prototype.sub=function(t,e){this._verify2(t,e);var n=t.sub(e);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},M.prototype.isub=function(t,e){this._verify2(t,e);var n=t.isub(e);return n.cmpn(0)<0&&n.iadd(this.m),n},M.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},M.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},M.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},M.prototype.isqr=function(t){return this.imul(t,t.clone())},M.prototype.sqr=function(t){return this.mul(t,t)},M.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var n=this.m.add(new o(1)).iushrn(2);return this.pow(t,n)}for(var i=this.m.subn(1),u=0;!i.isZero()&&0===i.andln(1);)u++,i.iushrn(1);r(!i.isZero());var s=new o(1).toRed(this),a=s.redNeg(),c=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new o(2*h*h).toRed(this);0!==this.pow(h,c).cmp(a);)h.redIAdd(a);for(var l=this.pow(h,i),f=this.pow(t,i.addn(1).iushrn(1)),p=this.pow(t,i),d=u;0!==p.cmp(s);){for(var y=p,v=0;0!==y.cmp(s);v++)y=y.redSqr();r(v<d);var m=this.pow(l,new o(1).iushln(d-v-1));f=f.redMul(m),l=m.redSqr(),p=p.redMul(l),d=v}return f},M.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},M.prototype.pow=function(t,e){if(e.isZero())return new o(1);if(0===e.cmpn(1))return t.clone();var n=new Array(16);n[0]=new o(1).toRed(this),n[1]=t;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],t);var i=n[0],u=0,s=0,a=e.bitLength()%26;for(0===a&&(a=26),r=e.length-1;r>=0;r--){for(var c=e.words[r],h=a-1;h>=0;h--){var l=c>>h&1;i!==n[0]&&(i=this.sqr(i)),0!==l||0!==u?(u<<=1,u|=l,(4===++s||0===r&&0===h)&&(i=this.mul(i,n[u]),s=0,u=0)):s=0}a=26}return i},M.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},M.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new O(t)},i(O,M),O.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},O.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},O.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},O.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var n=t.mul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),u=i;return i.cmp(this.m)>=0?u=i.isub(this.m):i.cmpn(0)<0&&(u=i.iadd(this.m)),u._forceRed(this)},O.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===t||t,this)}).call(this,n(44)(t))},function(t,e,n){"use strict";var r=n(280),i=n(116),o=new r(0),u=new r(-1),s={noether:"0",wei:"1",kwei:"1000",Kwei:"1000",babbage:"1000",femtoether:"1000",mwei:"1000000",Mwei:"1000000",lovelace:"1000000",picoether:"1000000",gwei:"1000000000",Gwei:"1000000000",shannon:"1000000000",nanoether:"1000000000",nano:"1000000000",szabo:"1000000000000",microether:"1000000000000",micro:"1000000000000",finney:"1000000000000000",milliether:"1000000000000000",milli:"1000000000000000",ether:"1000000000000000000",kether:"1000000000000000000000",grand:"1000000000000000000000",mether:"1000000000000000000000000",gether:"1000000000000000000000000000",tether:"1000000000000000000000000000000"};function a(t){var e=t?t.toLowerCase():"ether",n=s[e];if("string"!=typeof n)throw new Error("[ethjs-unit] the unit provided "+t+" doesn't exists, please use the one of the following units "+JSON.stringify(s,null,2));return new r(n,10)}function c(t){if("string"==typeof t){if(!t.match(/^-?[0-9.]+$/))throw new Error("while converting number to string, invalid number value '"+t+"', should be a number matching (^-?[0-9.]+).");return t}if("number"==typeof t)return String(t);if("object"==typeof t&&t.toString&&(t.toTwos||t.dividedToIntegerBy))return t.toPrecision?String(t.toPrecision()):t.toString(10);throw new Error("while converting number to string, invalid number value '"+t+"' type "+typeof t+".")}t.exports={unitMap:s,numberToString:c,getValueOfUnit:a,fromWei:function(t,e,n){var r=i(t),c=r.lt(o),h=a(e),l=s[e].length-1||1,f=n||{};c&&(r=r.mul(u));for(var p=r.mod(h).toString(10);p.length<l;)p="0"+p;f.pad||(p=p.match(/^([0-9]*[1-9]|0)(0*)/)[1]);var d=r.div(h).toString(10);f.commify&&(d=d.replace(/\B(?=(\d{3})+(?!\d))/g,","));var y=d+("0"==p?"":"."+p);return c&&(y="-"+y),y},toWei:function(t,e){var n=c(t),i=a(e),o=s[e].length-1||1,h="-"===n.substring(0,1);if(h&&(n=n.substring(1)),"."===n)throw new Error("[ethjs-unit] while converting number "+t+" to wei, invalid value");var l=n.split(".");if(l.length>2)throw new Error("[ethjs-unit] while converting number "+t+" to wei,  too many decimal points");var f=l[0],p=l[1];if(f||(f="0"),p||(p="0"),p.length>o)throw new Error("[ethjs-unit] while converting number "+t+" to wei, too many decimal places");for(;p.length<o;)p+="0";f=new r(f),p=new r(p);var d=f.mul(i).add(p);return h&&(d=d.mul(u)),new r(d.toString(10),10)}}},function(t,e,n){var r=n(69),i=n(281),o=n(115),u=n(274),s=n(273),a=function(t){if(!o.isHexStrict(t))throw new Error("The parameter must be a valid HEX string.");var e="",n=0,r=t.length;for("0x"===t.substring(0,2)&&(n=2);n<r;n+=2){var i=parseInt(t.substr(n,2),16);e+=String.fromCharCode(i)}return e},c=function(t){if(!t)return"0x00";for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n).toString(16);e+=r.length<2?"0"+r:r}return"0x"+e},h=function(t){if(t=t?t.toLowerCase():"ether",!i.unitMap[t])throw new Error('This unit "'+t+"\" doesn't exist, please use the one of the following units"+JSON.stringify(i.unitMap,null,2));return t};t.exports={_fireError:function(t,e,n,i){return!r.isObject(t)||t instanceof Error||!t.data||((r.isObject(t.data)||r.isArray(t.data))&&(t.data=JSON.stringify(t.data,null,2)),t=t.message+"\n"+t.data),r.isString(t)&&(t=new Error(t)),r.isFunction(i)&&i(t),r.isFunction(n)&&((e&&r.isFunction(e.listeners)&&e.listeners("error").length||r.isFunction(i))&&e.catch(function(){}),setTimeout(function(){n(t)},1)),e&&r.isFunction(e.emit)&&setTimeout(function(){e.emit("error",t),e.removeAllListeners()},1),e},_jsonInterfaceMethodToString:function(t){if(r.isObject(t)&&t.name&&-1!==t.name.indexOf("("))return t.name;var e=t.inputs.map(function(t){return t.type}).join(",");return t.name+"("+e+")"},randomHex:s,_:r,BN:o.BN,isBN:o.isBN,isBigNumber:o.isBigNumber,isHex:o.isHex,isHexStrict:o.isHexStrict,sha3:o.sha3,keccak256:o.sha3,soliditySha3:u,isAddress:o.isAddress,checkAddressChecksum:o.checkAddressChecksum,toChecksumAddress:function(t){if(void 0===t)return"";if(!/^(0x)?[0-9a-f]{40}$/i.test(t))throw new Error('Given address "'+t+'" is not a valid Ethereum address.');t=t.toLowerCase().replace(/^0x/i,"");for(var e=o.sha3(t).replace(/^0x/i,""),n="0x",r=0;r<t.length;r++)parseInt(e[r],16)>7?n+=t[r].toUpperCase():n+=t[r];return n},toHex:o.toHex,toBN:o.toBN,bytesToHex:o.bytesToHex,hexToBytes:o.hexToBytes,hexToNumberString:o.hexToNumberString,hexToNumber:o.hexToNumber,toDecimal:o.hexToNumber,numberToHex:o.numberToHex,fromDecimal:o.numberToHex,hexToUtf8:o.hexToUtf8,hexToString:o.hexToUtf8,toUtf8:o.hexToUtf8,utf8ToHex:o.utf8ToHex,stringToHex:o.utf8ToHex,fromUtf8:o.utf8ToHex,hexToAscii:a,toAscii:a,asciiToHex:c,fromAscii:c,unitMap:i.unitMap,toWei:function(t,e){if(e=h(e),!o.isBN(t)&&!r.isString(t))throw new Error("Please pass numbers as strings or BigNumber objects to avoid precision errors.");return o.isBN(t)?i.toWei(t,e):i.toWei(t,e).toString(10)},fromWei:function(t,e){if(e=h(e),!o.isBN(t)&&!r.isString(t))throw new Error("Please pass numbers as strings or BigNumber objects to avoid precision errors.");return o.isBN(t)?i.fromWei(t,e):i.fromWei(t,e).toString(10)},padLeft:o.leftPad,leftPad:o.leftPad,padRight:o.rightPad,rightPad:o.rightPad,toTwosComplement:o.toTwosComplement}}])});